
/* Smart HTML Elements v6.0.0 (2020-Jan) 
Copyright (c) 2011-2020 jQWidgets. 
License: https://htmlelements.com/license/ */

Smart("smart-menu-item",class extends Smart.BaseElement{static get properties(){return{checked:{value:!1,type:"boolean"},label:{value:"",type:"any"},level:{value:null,type:"number?"},separator:{value:!1,type:"boolean"},shortcut:{value:"",type:"string"},value:{value:null,type:"any"}}}get enableShadowDOM(){return!1}template(){return""}ready(){const e=this;super.ready(),e.$.addClass("smart-unselectable"),e.setAttribute("role","menuitem"),e.checked&&e.setAttribute("aria-checked",!0)}propertyChangedHandler(e,t,n){const o=this;if(super.propertyChangedHandler(e,t,n),"Smart-TREE-ITEM"!==o.tagName){if("label"===e)return void o.setAttribute("aria-label",n);if("disabled"===e&&!1!==n&&o.checked){const i=o.menu;if(i){super.propertyChangedHandler(e,t,n),o.checked=!1;const r=o.parentItem,a=r?r.checkMode:i.checkMode;"radioButton"===a&&i._validateRadioButtonSelection(r,o.level,[])}}}}}),Smart("smart-menu-items-group",class extends Smart.BaseElement{static get properties(){return{checkable:{value:!1,type:"boolean"},checked:{value:!1,type:"boolean"},checkMode:{value:"checkbox",allowedValues:["checkbox","radioButton"],type:"string"},dropDownHeight:{value:null,type:"number?"},expanded:{value:!1,type:"boolean"},label:{value:"",type:"any"},level:{value:null,type:"number?"},separator:{value:!1,type:"boolean"},value:{value:null,type:"any"}}}get enableShadowDOM(){return!1}template(){return""}ready(){const e=this;super.ready(),e.$.addClass("smart-unselectable"),e.setAttribute("role","menuitem"),e.setAttribute("aria-haspopup",!0),e.setAttribute("aria-expanded",e.expanded),e.checked&&e.setAttribute("aria-checked",!0)}propertyChangedHandler(e,t,n){const o=this;if(super.propertyChangedHandler(e,t,n),"Smart-TREE-ITEMS-GROUP"!==o.tagName){if("label"===e)return void o.setAttribute("aria-label",n);if(-1!==["checkable","checkMode","disabled"].indexOf(e)){const t=o.menu;if(t)switch(e){case"checkable":n?o.itemContainer.setAttribute("checkable",""):o.itemContainer.removeAttribute("checkable"),t._isContainerOpened(o.container.level,o.container)&&"tree"!==t.mode&&!t._minimized&&t._closeSubContainers(o.level+2),t._updateItemRoles();break;case"checkMode":o.itemContainer.setAttribute("check-mode",n),t._changeToRadioButtonMode(n,o.itemContainer,o),t._updateItemRoles();break;case"disabled":{if(!(Smart.ListMenu&&t instanceof Smart.ListMenu))t._isContainerOpened(o.container.level,o.container)&&t._closeSubContainers(o.level+1,o.container);else if(t._view)for(;o.contains(t._view);)t._backButtonClickHandler();if(!o.checked)return;o.checked=!1;const e=o.parentItem,n=e?e.checkMode:t.checkMode;"radioButton"===n&&t._validateRadioButtonSelection(e,o.level,[]);break}}}}}}),Smart("smart-menu",class extends Smart.BaseElement{static get properties(){return{autoCloseDelay:{value:100,type:"number"},autoFocusOnMouseenter:{value:!1,type:"boolean"},checkable:{value:!1,type:"boolean"},checkboxes:{value:!1,type:"boolean"},checkMode:{value:"checkbox",allowedValues:["checkbox","radioButton"],type:"string"},closeAction:{value:"up",allowedValues:["up","down","none"],type:"string"},dataSource:{value:null,type:"array?",reflectToAttribute:!1},displayMember:{value:"label",type:"string"},dropDownAppendTo:{value:null,type:"any?"},dropDownOverlay:{value:!1,type:"boolean"},dropDownPosition:{value:"auto",allowedValues:["top-left","top-right","bottom-left","bottom-right","overlay-left","overlay-right","auto"],type:"string"},enableMouseWheelAction:{value:!1,type:"boolean"},itemsMember:{value:"items",type:"string"},minimizeIconTemplate:{value:null,type:"string?"},minimizeWidth:{value:null,type:"number?"},mode:{value:"horizontal",allowedValues:["horizontal","vertical","dropDown","tree"],type:"string"},opened:{value:!1,type:"boolean"},overflow:{value:"auto",allowedValues:["auto","hidden","scroll"],type:"string"},selectionMode:{value:"click",allowedValues:["click","mouseenter"],type:"string"},valueMember:{value:"value",type:"string"}}}static get listeners(){return{"container.click":"_selectionHandler",keydown:"_keydownHandler",mouseenter:"_mouseenterHandler",mouseleave:"_mouseleaveHandler","container.mouseout":"_mouseoutMouseoverHandler","container.mouseover":"_mouseoutMouseoverHandler",resize:"_resizeHandler",transitionend:"_transitionendHandler","hamburgerIcon.click":"_hamburgerIconClickHandler","mainContainer.click":"_mainContainerHandler","mainContainer.mouseleave":"_mainContainerHandler","mainContainer.mouseout":"_mainContainerHandler","mainContainer.mouseover":"_mainContainerHandler","document.down":"_documentDownHandler","document.up":"_documentUpHandler"}}static get requires(){return{"Smart.RepeatButton":"smart.button.js"}}static get styleUrls(){return["smart.button.css","smart.menu.css"]}get items(){return this._menuItems}template(){return`<div id="container" role="presentation">
                    <div id="minimizedHeader" class="smart-header smart-minimized-header smart-hidden" role="presentation">
                        <div id="hamburgerIcon" class="smart-hamburger-icon smart-hidden" role="button" aria-label="Toggle minimized menu" aria-haspopup="true">
                            <div id="hamburgerIconLineTop" class="smart-hamburger-icon-line smart-hamburger-icon-line-top" role="presentation"></div>
                            <div id="hamburgerIconLineCenter" class="smart-hamburger-icon-line smart-hamburger-icon-line-center" role="presentation"></div>
                            <div id="hamburgerIconLineBottom" class="smart-hamburger-icon-line smart-hamburger-icon-line-bottom" role="presentation"></div>
                            <div id="customIconContainer" class="smart-hamburger-icon-custom-container smart-hidden" role="presentation"></div>
                        </div>
                    </div>
                    <smart-repeat-button id="scrollButtonNear" class="smart-menu-scroll-button smart-spin-button smart-scroll-button-near smart-hidden" animation="[[animation]]" unfocusable right-to-left="[[rightToLeft]]">
                        <div id="arrowNear" class="smart-arrow" aria-hidden="true"></div>
                    </smart-repeat-button>
                    <div id="mainContainer" class="smart-menu-main-container" role="presentation">
                        <content></content>
                    </div>
                    <smart-repeat-button id="scrollButtonFar" class="smart-menu-scroll-button smart-spin-button smart-scroll-button-far smart-hidden" animation="[[animation]]" unfocusable right-to-left="[[rightToLeft]]">
                        <div id="arrowFar" class="smart-arrow" aria-hidden="true"></div>
                    </smart-repeat-button>
                </div>`}attached(){const e=this;if((super.attached(),!("tree"===e._element||Smart.ListMenu&&e instanceof Smart.ListMenu))&&e.isCompleted&&e.isRendered&&null!==e.dropDownAppendTo){if(e._minimized)e._dropDownParent.appendChild(e.$.mainContainer);else for(let t=0;t<e._containersInBody.length;t++)e._dropDownParent.appendChild(e._containersInBody[t]);"dropDown"===e.mode&&(e._dropDownParent===e.parentElement?e._dynamicallyReparented?delete e._dynamicallyReparented:e._positionRelativeTo=null:(e._positionRelativeTo=e.parentElement,e._dynamicallyReparented=!0,setTimeout(function(){e._dropDownParent.appendChild(e)},0)))}}detached(){const e=this;super.detached();"tree"===e._element||Smart.ListMenu&&e instanceof Smart.ListMenu||(e._close(),null!==e.dropDownAppendTo&&(e._minimized?e._dropDownParent.removeChild(e.$.mainContainer):e._removeContainersInBody()))}ready(){super.ready()}render(){const e=this;e._element="menu",e._edgeMacFF=Smart.Utilities.Core.Browser.Edge||Smart.Utilities.Core.Browser.Firefox&&-1!==navigator.platform.toLowerCase().indexOf("mac"),e._containers=[],e._containersInBody=[],e._openedContainers=[],e._containersFixedHeight=[],e._menuItemsGroupsToExpand=[],e._additionalScrollButtons=[],e._createElement(),super.render()}addItem(e,t){const n=this;if(!(e instanceof Smart.MenuItem||e instanceof Smart.MenuItemsGroup))return;let o,i;if(void 0===t)t=n.$.mainContainer,o=1,i=t;else{if(t=n.getItem(t),!1==t instanceof Smart.MenuItemsGroup)return;o=t.level+1,i=t.itemContainer}if(n._createItemHTMLStructure(e,o,t,i.childElementCount,0),e instanceof Smart.MenuItemsGroup&&(n._processHTML(e,o+1),n._checkContainersLength()),i.appendChild(e),n._checkOverflowAddRemove(e.level,i),e instanceof Smart.MenuItemsGroup&&("tree"===n.mode||n._minimized)){const t=e.getElementsByClassName("smart-menu-items-group-arrow");for(let e=0;e<t.length;e++)t[e].className="smart-menu-items-group-arrow down smart-arrow-down";n._expandItemsByDefault()}}checkItem(e){const t=this;e=t.getItem(e);void 0===e||e.checked||e.disabled||e.templateApplied||t._toggleItem(e)}clear(){const e=this;e.$.mainContainer.innerHTML="",e._removeContainersInBody(),e._menuItems={},e._containers=[],e._containersInBody=[],e._openedContainers=[],e._containersFixedHeight=[],e._menuItemsGroupsToExpand=[],e._additionalScrollButtons=[]}close(){const e=this;if(!("dropDown"!==e.mode||!1===e.opened&&e.$.hasClass("smart-visibility-hidden"))){const t=e.$.fireEvent("closing",arguments[0]||{trigger:"programmatic"});t.defaultPrevented?e.opened=!0:(e.opened=!1,e.$.addClass("smart-visibility-hidden"),e._close(),e.$.fireEvent("close"))}}collapseItem(e,t){const n=this,o=n.animation,i=!1===t&&n.hasAnimation;if(void 0===e)return i&&(n.animation="none"),n._close(),void(i&&setTimeout(function(){n.animation=o},0));if(e=n.getItem(e),!(void 0===e||e instanceof Smart.MenuItem)){const t=e.level;if(n._openedContainers[t+1]&&n._isContainerOpened(t+1,e.container)){const r=n.mode;i&&(n.animation="none"),n._closeSubContainers(t+1,e.container,void 0,!1!==arguments[2]),(1===t||"tree"===r)&&n._checkOverflow(n.$.mainContainer,"horizontal"===r,[n.$.scrollButtonNear,n.$.scrollButtonFar]),i&&(n.animation=o)}}}expandItem(e,t){const n=this;if(e=n.getItem(e),void 0===e||e instanceof Smart.MenuItemsGroup&&n._isContainerOpened(e.level+1,e.container)&&n._isBranchExpanded(e))return;const o=[e],i=n.animation,r=!1===t&&n.hasAnimation;let a=e.parentItem;for(r&&(n.animation="none"),n._discardKeyboardHover();a;)o.unshift(a),a=a.parentItem;for(let r=0;r<o.length;r++){const e=o[r];if(r==o.length-1&&e instanceof Smart.MenuItem){e.disabled||e.templateApplied||n._hoverViaKeyboard(e);break}n._isContainerOpened(e.container.level,e.container)||n._menuItemsGroupSelectionHandler(e,{target:e,type:"expand",isTrusted:!0},arguments[2])}r&&(n.animation=i)}getItem(e){const t=this;let n;if(void 0!==e&&null!==e){if("string"==typeof e){if(/^[0-9]*([.]?[0-9]*)*$/gm.test(e))return t._menuItems[e];if(n=t.$.mainContainer.querySelector("[id=\""+e+"\""),null===n)return t._menuItems[e]}else{if(!isNaN(e))return t._menuItems[e.toString()];n=e}return(n instanceof Smart.MenuItem||n instanceof Smart.MenuItemsGroup)&&(t.contains(n)||t.$.mainContainer.contains(n)||n.parentElement.parentElement.ownerElement===t)?n:void 0}}maximize(){const e=this;if(!e._minimized)return;const t=e.animation;if(e.$.mainContainer.style.marginTop="",e.$.mainContainer.style.marginLeft="",e.enableShadowDOM&&!e.$.mainContainer.id&&(e.$.mainContainer.id=e.$.mainContainer.getAttribute("smart-id")),"none"!==t&&(e.animation="none"),e._positionDetection.removeOverlay(),e._closeSubContainers(2),e.$minimizedHeader.addClass("smart-hidden"),e._minimized=!1,e._minimizedDropDownOpened&&(e.$hamburgerIcon.removeClass("smart-close-button"),e._minimizedDropDownOpened=!1),null!==e.dropDownAppendTo&&e._appendMinimizedContainerToMenu(e.$.mainContainer,e.$.scrollButtonFar),"tree"!==e.mode){e.$mainContainer.addClass("smart-menu-main-container"),e.$mainContainer.removeClass("smart-menu-minimized-items-container");const t=e.$.mainContainer.getElementsByClassName("smart-menu-items-group-arrow");for(let n=0;n<t.length;n++)e._setArrowDirection(t[n],t[n].parentElement.parentElement.level+1);null!==e.dropDownAppendTo&&e._moveDropDownsToExternalContainer(),e._applyContainerFixedHeight()}e.$mainContainer.removeClass("smart-visibility-hidden"),e.$hamburgerIcon.addClass("smart-hidden"),e.removeAttribute("minimized"),e._checkOverflow(e.$.mainContainer,"horizontal"===e.mode,[e.$.scrollButtonNear,e.$.scrollButtonFar]),"none"!==t&&setTimeout(function(){e.animation=t},0),e.$.mainContainer.removeAttribute("drop-down"),e.$.hamburgerIcon.removeAttribute("aria-expanded"),e.$.hamburgerIcon.removeAttribute("aria-owns"),e.$.mainContainer.setAttribute("role","presentation"),e.$.mainContainer.removeAttribute("aria-orientation"),e.setAttribute("role","menu"),e.setAttribute("aria-orientation","horizontal"===e.mode?"horizontal":"vertical")}minimize(){const e=this;if(e._minimized||"dropDown"===e.mode)return;e.$minimizedHeader.removeClass("smart-hidden");const t=null!==e.dropDownAppendTo,n=e.animation,o=e.hasAnimation;if(o&&(e.animation="none"),e._positionDetection.removeOverlay(),e._closeSubContainers(2),o&&t&&(e.animation=n),"tree"!==e.mode&&(t&&e._moveDropDownsToMenu(),e._removeContainerFixedHeight()),e._hideMainContainerScrollButtons(),e.$mainContainer.removeClass("smart-menu-main-container"),e.$mainContainer.addClass("smart-visibility-hidden"),e.enableShadowDOM&&e.$.mainContainer.removeAttribute("id"),e._edgeMacFF&&(e.$.mainContainer.style.left="",e.$.mainContainer.style.top="",e.$mainContainer.addClass("not-in-view")),e.$hamburgerIcon.removeClass("smart-hidden"),t&&e._appendMinimizedContainerToExternalElement(e.$.mainContainer),setTimeout(function(){e.$mainContainer.addClass("smart-menu-minimized-items-container"),o&&!t&&(e.animation=n)},0),e._minimized=!0,e.setAttribute("minimized",""),"tree"!==e.mode)for(let t=0;t<e._containers.length;t++){const n=e._containers[t];2<n.level&&e._setArrowDirection(n.menuItemsGroup.children[0].children[1],n.level)}e.$.mainContainer.setAttribute("drop-down",""),e.setAttribute("role","presentation"),e.removeAttribute("aria-orientation"),e.$.hamburgerIcon.setAttribute("aria-expanded",!1),e.$.hamburgerIcon.setAttribute("aria-owns",e.$.mainContainer.id),e.$.mainContainer.setAttribute("role","menu"),e.$.mainContainer.setAttribute("aria-orientation","vertical")}open(e,t){var n=Math.max;const o=this;if("dropDown"!==o.mode)return;const i=o.$.fireEvent("opening");if(i.defaultPrevented)return void(o.opened=!1);let r;if(o.opened=!0,o._positionRelativeTo){const n=o._positionRelativeTo.getBoundingClientRect();e+=n.left,t+=n.top,o._positionedParent?(r=o._positionedParent.getBoundingClientRect(),e-=r.left,t-=r.top):(e+=window.pageXOffset,t+=window.pageYOffset)}let a=e+o.offsetWidth-document.documentElement.clientWidth,s=t+o.offsetHeight-document.documentElement.clientHeight;r?(a+=r.left,s+=r.top):(a-=window.pageXOffset,s-=window.pageYOffset),0<a?e-=a:r?e=n(e,-r.left):e=n(e,window.pageXOffset),0<s?t-=s:r?t=n(t,-r.top):t=n(t,window.pageYOffset),o.style.right="",isNaN(e)||(o.rightToLeft&&(o.style.right="initial"),o.style.left=e+"px"),isNaN(t)||(o.style.top=t+"px"),o.$.removeClass("smart-visibility-hidden"),o.$.fireEvent("open"),o.hasAnimation||o._noAutoFocus||o.focus()}removeItem(e){const t=this;if(e=t.getItem(e),void 0!==e){const n=e.parentElement;if(e instanceof Smart.MenuItemsGroup){const n=e.container;if(t._isContainerOpened(n.level,n)&&t._closeSubContainers(n.level,n),1===e.level){const e=t._containersInBody.indexOf(n);-1!==e&&(t._containersInBody.splice(e,1),null!==t.dropDownAppendTo&&"tree"!==t.mode&&!t._minimized&&t._dropDownParent.removeChild(n))}}n.removeChild(e),t._refreshContainersArrays(),t._menuItems={},t._refreshItemPaths(t.$.mainContainer,!0),t._checkOverflowAddRemove(e.level,n)}}uncheckItem(e){const t=this;e=t.getItem(e);void 0===e||!e.checked||e.disabled||e.templateApplied||t._toggleItem(e)}propertyChangedHandler(e,t,n){function o(){(null!==a.dropDownAppendTo||"tree"===a.mode)&&a._checkOverflow(a.$.mainContainer,"horizontal"===a.mode,[a.$.scrollButtonNear,a.$.scrollButtonFar])}function r(e,t,n){n?t.setAttribute(e,""):t.removeAttribute(e)}super.propertyChangedHandler(e,t,n);const a=this;if("tree"!==a._element)switch(e){case"animation":a.$.mainContainer.setAttribute("animation",n),a._additionalScrollButtons.forEach(function(e){e[0].animation=n,e[1].animation=n}),null!==a._dropDownParent&&a._containers.forEach(function(e){e.setAttribute("animation",n)});break;case"checkable":"tree"===a.mode||a._minimized?a._minimized&&null!==a.dropDownAppendTo&&r("checkable",a.$.mainContainer,n):a._closeSubContainers(2),a._updateItemRoles();break;case"checkboxes":if(a._close(),null!==a.dropDownAppendTo){for(let e=0;e<a._containers.length;e++){const t=a._containers[e];r("checkboxes",t,n)}a._minimized&&r("checkboxes",a.$.mainContainer,n)}a._updateItemRoles();break;case"checkMode":a._changeToRadioButtonMode(n,a.$.mainContainer),a._minimized&&null!==a.dropDownAppendTo&&a.$.mainContainer.setAttribute("check-mode",n),a._updateItemRoles();break;case"dataSource":{let e=!1;a._minimized&&(a.maximize(),e=!0),a._removeContainersInBody(),a._containersInBody=[],a._menuItems={},a._processDataSource(),a._checkContainersLength(),e?a.minimize():o(),a._expandItemsByDefault(),a._suppressResizeHandler=!0,setTimeout(()=>delete a._suppressResizeHandler,500);break}case"dropDownAppendTo":{const e=a._dropDownParent;if(a._positionDetection.getDropDownParent(),a._dropDownParent===e||"tree"===a.mode&&!a._minimized)return;if(a._close(),a._minimized)return void(null===n?a._appendMinimizedContainerToMenu(a.$.mainContainer,a.$.scrollButtonFar):a._appendMinimizedContainerToExternalElement(a.$.mainContainer));if(null!==a._dropDownParent&&null===e)a._moveDropDownsToExternalContainer();else if(null===a._dropDownParent&&null!==e)a._moveDropDownsToMenu();else if(null!==a._dropDownParent&&null!==e)for(let e=0;e<a._containersInBody.length;e++)a._dropDownParent.appendChild(a._containersInBody[e]);null!==n||a.$mainContainer.hasClass("simple")?a._checkOverflow(a.$.mainContainer,"horizontal"===a.mode,[a.$.scrollButtonNear,a.$.scrollButtonFar]):a._hideMainContainerScrollButtons();for(let e=0;e<a._containersFixedHeight.length;e++)a._containersFixedHeight[e].itemContainer.checkOverflow=!0;"dropDown"===a.mode&&(a.close({trigger:"internal"}),a._reparentMenu(!0,e));break}case"dropDownOverlay":n||a._positionDetection.removeOverlay();break;case"disabled":n&&a._close(),a._setFocusable(),a.$.scrollButtonNear.disabled=n,a.$.scrollButtonFar.disabled=n,!n&&(null!==a.dropDownAppendTo||a.$mainContainer.hasClass("simple")||"tree"===a.mode)&&a._updateScrollButtonVisibility(a.$.mainContainer,"horizontal"===a.mode,[a.$.scrollButtonNear,a.$.scrollButtonFar]);break;case"dropDownPosition":case"mode":{if("mode"===e){if(delete a._dynamicallyReparented,"tree"===t||a._minimized?(a._closeSubContainersTreeMode(2,void 0,void 0,void 0,!0),a._openedContainers=[]):a._closeSubContainersDefaultMode(2),a._discardKeyboardHover(!0),a._minimized&&a._minimizedDropDownOpened&&(a.$mainContainer.addClass("smart-visibility-hidden"),a.$hamburgerIcon.removeClass("smart-close-button"),a.$.hamburgerIcon.setAttribute("aria-expanded",!1),a._minimizedDropDownOpened=!1),("horizontal"===n||"horizontal"===t)&&a._changeScrollButtonsArrows(),a._minimized)return void("dropDown"===n&&(a.mode=t));a.setAttribute("aria-orientation","horizontal"===a.mode?"horizontal":"vertical"),!1===a.opened&&("dropDown"===n?a.$.addClass("smart-visibility-hidden"):"dropDown"===t&&a.$.removeClass("smart-visibility-hidden")),"tree"===t?(null!==a.dropDownAppendTo&&a._moveDropDownsToExternalContainer(),a.$mainContainer.addClass("smart-menu-main-container"),a.$mainContainer.removeClass("smart-menu-minimized-items-container"),a._applyContainerFixedHeight()):"tree"===n&&(null!==a.dropDownAppendTo&&a._moveDropDownsToMenu(),a._applyTreeMode()),"auto"===a.overflow&&a._hideMainContainerScrollButtons(),o()}if("tree"===a.mode||a._minimized)return a._minimizedDropDownOpened&&a._close(),void(a._minimized&&null!==a.dropDownAppendTo&&a.$.mainContainer.setAttribute(a.properties[e].attributeName,n));"dropDownPosition"===e&&a._close();const r=a.enableShadowDOM?a.shadowRoot.querySelectorAll("smart-menu-items-group"):a.getElementsByTagName("smart-menu-items-group");for(let e=0;e<r.length;e++){const t=r[e];a._setArrowDirection(t.children[0].children[1],t.level+1)}if(null!==a.dropDownAppendTo)for(let t=0;t<a._containers.length;t++){const o=a._containers[t];o.setAttribute(Smart.Utilities.Core.toDash(e),n),2<o.level&&a._setArrowDirection(o.menuItemsGroup.children[0].children[1],o.level)}break}case"minimizeIconTemplate":a._applyMinimizeIconTemplate(n,t);break;case"minimizeWidth":a._resizeHandler();break;case"opened":n?a.open():a.close({trigger:"internal"});break;case"overflow":a._handleOverflowChange();break;case"rightToLeft":{if("tree"!==a.mode){const e=a.enableShadowDOM?a.shadowRoot.querySelectorAll("smart-menu-items-group"):a.getElementsByTagName("smart-menu-items-group");for(let t=0;t<e.length;t++){const n=e[t];a._setArrowDirection(n.children[0].children[1],n.level+1)}if(null!==a.dropDownAppendTo){n?a.$.mainContainer.setAttribute("right-to-left",""):a.$.mainContainer.removeAttribute("right-to-left");for(let e=0;e<a._containers.length;e++){const t=a._containers[e];n?t.setAttribute("right-to-left",""):t.removeAttribute("right-to-left"),2<t.level&&a._setArrowDirection(t.menuItemsGroup.children[0].children[1],t.level)}}}break}case"theme":if(null===a.dropDownAppendTo||Smart.ListMenu&&a instanceof Smart.ListMenu)return;if(a._minimized)""!==t&&a.$mainContainer.removeClass(t),""!==n&&a.$mainContainer.addClass(n);else for(let e=0;e<a._containers.length;e++){const o=a._containers[e];""!==t&&o.classList.remove(t),""!==n&&o.classList.add(n)}break;case"unfocusable":a._setFocusable();}}_addOpenedContainer(e,t){const n=this;if("tree"===n.mode||n._minimized){n._openedContainers[e]||(n._openedContainers[e]=[]);const o=t.menuItemsGroup;return o.set("expanded",!0),o.setAttribute("aria-expanded",!0),n._updateState&&n._updateState("expanded",o.id,!0),n._openedContainers[e].push(t)}n._openedContainers[e]=t}_appendMinimizedContainerToExternalElement(e){const t=this;e.ownerElement=t,t._dropDownParent.appendChild(e),e.setAttribute("animation",t.animation),""!==t.theme&&e.$.addClass(t.theme),e.$.addClass("smart-menu-drop-down smart-drop-down"),e.$.addClass("smart-drop-down-repositioned"),e.setAttribute("check-mode",t.checkMode),e.setAttribute("drop-down-position",t.dropDownPosition),e.setAttribute("mode",t.mode),e.setAttribute("loading-indicator-position",t.loadingIndicatorPosition),t.rightToLeft&&e.setAttribute("right-to-left",""),t.checkable&&e.setAttribute("checkable",""),t.checkboxes&&e.setAttribute("checkboxes",""),t.$.view&&t.detachedChildren.indexOf(t.$.view)&&t.detachedChildren.push(t.$.view)}_appendMinimizedContainerToMenu(e,t){const n=this;delete e.ownerElement,n.$.container.insertBefore(e,t),e.removeAttribute("animation"),""!==n.theme&&e.$.removeClass(n.theme),e.$.removeClass("smart-menu-drop-down smart-drop-down"),e.$.removeClass("smart-drop-down-repositioned"),e.removeAttribute("checkable"),e.removeAttribute("checkboxes"),e.removeAttribute("check-mode"),e.removeAttribute("drop-down-position"),e.removeAttribute("mode"),e.removeAttribute("loading-indicator-position"),e.removeAttribute("style"),e.removeAttribute("right-to-left")}_applyContainerFixedHeight(){const e=this;for(let t=0;t<e._containers.length;t++){const n=e._containers[t];-1===e._containersFixedHeight.indexOf(n)?n.style.height="":(n.style.height=n.menuItemsGroup.dropDownHeight+"px",n.itemContainer.checkOverflow=!0)}}_applyGrouping(e,t){const n=this;let o=e===n.$.mainContainer?Array.from(e.children):Array.from(e.container.firstElementChild.children);for(let r=0;r<o.length;r++){const e=o[r];e.originalIndex=r,e instanceof Smart.MenuItemsGroup&&t===void 0&&n._applyGrouping(e)}n._sortItems(e)}_applyMinimizeIconTemplate(e,t){const n=this;if(null===e){if(null===t)return;n.$customIconContainer.addClass("smart-hidden"),n.$.customIconContainer.innerHTML="",n.$hamburgerIconLineTop.removeClass("smart-hidden"),n.$hamburgerIconLineCenter.removeClass("smart-hidden"),n.$hamburgerIconLineBottom.removeClass("smart-hidden")}else{const o=document.getElementById(e);if(null!==o&&"template"===o.tagName.toLowerCase()){const e=document.importNode(o.content,!0);n.$hamburgerIconLineTop.addClass("smart-hidden"),n.$hamburgerIconLineCenter.addClass("smart-hidden"),n.$hamburgerIconLineBottom.addClass("smart-hidden"),n.$.customIconContainer.innerHTML="",n.$.customIconContainer.appendChild(e),n.$customIconContainer.removeClass("smart-hidden")}else n.minimizeIconTemplate=t}}_applyTreeMode(){const e=this,t=e.$.mainContainer.getElementsByClassName("smart-menu-items-group-arrow");if(e.$mainContainer.removeClass("smart-menu-main-container"),e.$mainContainer.addClass("smart-menu-minimized-items-container"),e.isCompleted&&e.isRendered)for(let e=0;e<t.length;e++)t[e].className="smart-menu-items-group-arrow down";e._removeContainerFixedHeight()}_arrowLeftHandler(e,t,n,o){const i=this;1===e?"horizontal"===t&&i._levelOneNavigate("_getLastEnabledChild",n,o):2===e?i._levelOneNavigateFromLowerLevel("_getPreviousEnabledChild",n):i._escapeHandler(n,e,o)}_arrowRightHandler(e,t,n,o){const i=this;1===e?"horizontal"===t?i._levelOneNavigate("_getFirstEnabledChild",n,o):i._levelOneOpenDropDown(n):n instanceof Smart.MenuItemsGroup?i._selectionHandler({target:n,isTrusted:!0}):i._levelOneNavigateFromLowerLevel("_getNextEnabledChild",n)}_browserBoundsDetection(e){var t=Math.min;const n=this;if(("tree"!==n.mode||n._minimized)&&(e.style.marginTop="",e.style.marginLeft="","auto"===n.dropDownPosition)){const n=1===window.devicePixelRatio?document.documentElement.clientWidth:window.innerWidth,o=1===window.devicePixelRatio?document.documentElement.clientHeight:window.innerHeight,i=e.getBoundingClientRect(),r=n-i.left-e.offsetWidth,a=o-i.top-e.offsetHeight;10>r&&(e.style.marginLeft=t(r-10,-10)+"px"),10>a&&(e.style.marginTop=t(a-10,-10)+"px")}}_changeScrollButtonsArrows(){const e=this;"horizontal"===e.mode?(e.$.scrollButtonNear.setAttribute("aria-label","Scroll left"),e.$.scrollButtonFar.setAttribute("aria-label","Scroll right"),e.$arrowNear.removeClass("smart-arrow-up"),e.$arrowFar.removeClass("smart-arrow-down"),e.$arrowNear.addClass("smart-arrow-left"),e.$arrowFar.addClass("smart-arrow-right")):(e.$.scrollButtonNear.setAttribute("aria-label","Scroll up"),e.$.scrollButtonFar.setAttribute("aria-label","Scroll down"),e.$arrowNear.removeClass("smart-arrow-left"),e.$arrowFar.removeClass("smart-arrow-right"),e.$arrowNear.addClass("smart-arrow-up"),e.$arrowFar.addClass("smart-arrow-down"))}_changeToRadioButtonMode(e,t,n){if("radioButton"===e){const e=[];for(let n=0;n<t.childElementCount;n++){const o=t.children[n];!o.checked||o.disabled||o.templateApplied||e.push(o)}this._validateRadioButtonSelection(n,n?n.level+1:1,e)}}_checkContainersLength(e){const t=this;0===t._containers.length?(t.$mainContainer.addClass("simple"),!e&&t._checkOverflow(t.$.mainContainer,"horizontal"===t.mode,[t.$.scrollButtonNear,t.$.scrollButtonFar])):!e&&(t.$mainContainer.removeClass("simple"),null===t.dropDownAppendTo&&"tree"!==t.mode&&t.$mainContainer.removeClass("scroll-buttons-shown one-button-shown"))}_checkOverflow(e,t,n){var o=Math.round;const i=this,r=e===i.$.mainContainer?i.overflow:"auto";if(i._minimized||"hidden"===r||null===i.dropDownAppendTo&&"tree"!==i.mode&&e===i.$.mainContainer&&!i.$mainContainer.hasClass("simple"))return;const a=e.scrollTop;"auto"===r&&(e.classList.remove("scroll-buttons-shown"),e.classList.remove("one-button-shown"),n[0].$.addClass("smart-hidden"),n[1].$.addClass("smart-hidden"));let s,l,d;t?(s=o(e.scrollWidth)>o(e.offsetWidth),l=0<o(e.scrollLeft),d=o(e.offsetWidth+e.scrollLeft)<o(e.scrollWidth)):(s=o(e.scrollHeight)>o(e.offsetHeight),l=0<o(e.scrollTop),d=o(e.offsetHeight+e.scrollTop)<o(e.scrollHeight)),s?"auto"===r?(e.classList.add("scroll-buttons-shown"),l&&n[0].$.removeClass("smart-hidden"),d&&n[1].$.removeClass("smart-hidden"),!1===(l&&d)&&e.classList.add("one-button-shown"),!i.disabled&&(n[0].disabled=!1,n[1].disabled=!1),e.scrollTop=a):(n[0].$.removeClass("smart-hidden"),n[1].$.removeClass("smart-hidden"),i.disabled?(n[0].disabled=!0,n[1].disabled=!0):(n[0].disabled=!l,n[1].disabled=!d)):"scroll"===r&&(n[0].disabled=!0,n[1].disabled=!0),e===i.$.mainContainer&&"tree"!==i.mode&&i._close()}_checkOverflowAddRemove(e,t){const n=this;1===e&&null!==n.dropDownAppendTo||"tree"===n.mode?n._checkOverflow(n.$.mainContainer,"horizontal"===n.mode,[n.$.scrollButtonNear,n.$.scrollButtonFar]):1<e&&t.dropDownHeightSet&&(n._isContainerOpened(e,t.container)?n._checkOverflow(t,!1,[t.container.children[0],t.container.children[2]]):t.checkOverflow=!0)}_close(){const e=this;e._positionDetection.removeOverlay(),e._closeSubContainers(2),e._discardKeyboardHover(!0),e._minimized&&e._minimizedDropDownOpened&&(e.$mainContainer.addClass("smart-visibility-hidden"),e._edgeMacFF&&(e.$.mainContainer.style.left="",e.$.mainContainer.style.top="",e.$mainContainer.addClass("not-in-view")),e.$hamburgerIcon.removeClass("smart-close-button"),e.$.hamburgerIcon.setAttribute("aria-expanded",!1),e._minimizedDropDownOpened=!1)}_closeSubContainers(e,t,n,o){const i=this;"tree"===i.mode||i._minimized?i._closeSubContainersTreeMode(e,t,n,o):i._closeSubContainersDefaultMode(e,t,n)}_closeSubContainersDefaultMode(e,t,n){function o(t){const o=a[t].menuItemsGroup;n&&t===e||(o.$.removeClass("focus"),o.removeAttribute("focus"),o.$.removeClass("hover"),o.removeAttribute("hover")),o.$.removeClass("smart-menu-items-group-opened"),o.$.removeClass("smart-menu-items-group-expanded"),o.setAttribute("aria-expanded",!1),a[t].$.addClass("smart-visibility-hidden"),r._edgeMacFF&&2===t&&!r.hasAnimation&&(a[t].style.left="",a[t].style.top="",a[t].$.addClass("not-in-view")),r._minimized&&r._browserBoundsDetection(r.$.mainContainer),r.$.fireEvent("collapse",{item:o,label:o.label,path:o.path,value:o.value,children:o.itemContainer.children}),a[t]=void 0}const r=this,a=r._openedContainers;for(let r=a.length-1;r>=e;r--)void 0!==a[r]&&o(r,!0)}_closeSubContainersTreeMode(e,t,n,o,i){const r=this;if(o){const e=t.menuItemsGroup,n=r.$.fireEvent("collapsing",{item:e,label:e.label,path:e.path,value:e.value,children:t.itemContainer.children});if(n.defaultPrevented)return}if(void 0===t)return void r._collapseAll(!1,i);const a=t.menuItemsGroup;if(a.set("expanded",!1),a.setAttribute("aria-expanded",!1),"menu"!==r._element)r._updateState("expanded",a.id,!1);else if(n){const e=r.$.mainContainer.getElementsByClassName("focus")[0];e&&(e.$.removeClass("focus"),e.removeAttribute("focus")),a.$.addClass("focus"),a.setAttribute("focus",""),r._focusedViaKeyboard=a}else a.$.removeClass("focus"),a.removeAttribute("focus");if(a.$.removeClass("smart-"+r._element+"-items-group-opened"),i||!r.hasAnimation?(a.$.removeClass("smart-"+r._element+"-items-group-expanded"),a.setAttribute("aria-expanded",!1),t.$.addClass("smart-visibility-hidden"),r._minimized&&r._browserBoundsDetection(r.$.mainContainer)):r._collapseSection(t),o){const e={item:a,label:a.label,path:a.path,value:a.value,children:a.itemContainer.children};r.toggleCallback?(e.type="collapse",r.toggleCallback(e)):r.$.fireEvent("collapse",e)}if(r._openedContainers[e]){const n=r._openedContainers[e].indexOf(t);-1!==n&&r._openedContainers[e].splice(n,1)}}_collapseAll(e,t){const n=this;for(let o=n._openedContainers.length-1;2<=o&&!(n._openedContainers[o]===void 0);o--)for(let i=n._openedContainers[o].length-1;0<=i;i--)n._closeSubContainersTreeMode(o,n._openedContainers[o][i],void 0,e,t);n.hasAnimation||n._checkOverflow(n.$.mainContainer,!1,[n.$.scrollButtonNear,n.$.scrollButtonFar]);for(let o=n._openedContainers.length-1;2<=o;o--){const e=n._openedContainers[o];if(e===void 0||0===e.length)n._openedContainers.splice(o,1);else break}2===n._openedContainers.length&&(n._openedContainers=[])}_collapseSection(e){const t=this,n=e.scrollHeight+"px";t._treeAnimationInProgress=e,e.style.transition="none",requestAnimationFrame(function(){return"tree"===t.mode||t._minimized?void(e.style.height=n,e.style.transition="",requestAnimationFrame(function(){e.style.height="0px","smart-tree"===t.tagName.toLowerCase()&&e.$.addClass("smart-visibility-hidden"),"0px"==n&&t._transitionendHandlerCollapse(t,e)})):void(e.style.transition="")}),e.addEventListener("transitionend",t._transitionendHandlerCollapse)}_createElement(){const e=this,t=e.mode;e.setAttribute("role","menu"),e.$.mainContainer.id=e.id+"MainContainer",e.setAttribute("aria-orientation","horizontal"===e.mode?"horizontal":"vertical"),e._positionDetection=new Smart.Utilities.PositionDetection(e),e._positionDetection.getDropDownParent(),e._reparentMenu(),e.disabled&&(e.$.scrollButtonNear.disabled=!0,e.$.scrollButtonFar.disabled=!0),null===e.dataSource&&e.$.mainContainer.firstElementChild instanceof HTMLUListElement&&e._processUList();const n=(e.shadowRoot||e).querySelectorAll("smart-menu-item, smart-menu-items-group"),o=function(){const n=e.animation;e._changeScrollButtonsArrows(),e._setFocusable(),"dropDown"===t&&!1===e.opened&&(e.hasAnimation?(e.animation="none",e.$.addClass("smart-visibility-hidden"),e.animation=n):e.$.addClass("smart-visibility-hidden")),e._menuItems={},e.$.mainContainer.setAttribute("animation",n),null===e.dataSource?e._processHTML(e.$.mainContainer,1):e._processDataSource(),e._checkContainersLength(!0),(null!==e.dropDownAppendTo||e.$mainContainer.hasClass("simple")||"tree"===e.mode)&&"scroll"===e.overflow&&(e.$mainContainer.addClass("scroll-buttons-shown"),e.$scrollButtonNear.removeClass("smart-hidden"),e.$scrollButtonFar.removeClass("smart-hidden"),e._updateScrollButtonVisibility(e.$.mainContainer,"horizontal"===t,[e.$.scrollButtonNear,e.$.scrollButtonFar])),e._applyMinimizeIconTemplate(e.minimizeIconTemplate,null),"tree"===t&&e._applyTreeMode(),null!==e.minimizeWidth&&e.offsetWidth<=e.minimizeWidth?e.minimize():e._checkOverflow(e.$.mainContainer,"horizontal"===t,[e.$.scrollButtonNear,e.$.scrollButtonFar]),e._expandItemsByDefault(),e.__onCompleted&&(e._onCompleted=e.__onCompleted,e.__onCompleted=null,e._onCompleted())};0===n.length||e.enableShadowDOM||e.isInShadowDOM?o():(e._onCompleted&&(e.__onCompleted=e._onCompleted,e._onCompleted=null),e._ensureItemsReady(n,o))}_ensureItemsReady(e,t){const n=this,o=function(){const n=function(t){for(let n=0;n<e.length;n++)e[n].context="node"===t?e[n]:document};n("node"),t(),n()};if(0===e.length)o();else{n._nodesReadyListeners=0;for(let t=0;t<e.length;t++){const i=e[t],r=function(){const e=n.context;n.context=n,n._nodesReadyListeners--,0===n._nodesReadyListeners&&(o(),delete n._nodesReadyListeners),n.context=e}.bind(n);i.isCompleted||(n._nodesReadyListeners++,i.completeHandlers=[],i._onCompleted=r)}0===n._nodesReadyListeners&&o()}}_createItemHTMLStructure(e,t,n,o){const i=this,r=document.createElement("div"),a=document.createElement("div"),s=document.createDocumentFragment();let l;e.menu=i,1<t?(e.originalIndex=o,l=n.path+"."+e.originalIndex,e.parentItem=n,i.checkboxes&&n.checkable&&("checkbox"===n.checkMode?e.setAttribute("role","menuitemcheckbox"):e.setAttribute("role","menuitemradio"))):(e.originalIndex=o,l=""+o,i.checkboxes&&i.checkable&&("checkbox"===i.checkMode?e.setAttribute("role","menuitemcheckbox"):e.setAttribute("role","menuitemradio"))),e.path=l,i._menuItems[l]=e,r.className="smart-"+i._element+"-item-label-container",a.className="smart-"+i._element+"-item-label-element","tree"===i._element&&i._setIndentation(r,t,i.rightToLeft?"paddingRight":"paddingLeft");const d=Array.from(e.childNodes);for(let r=0;r<d.length;r++){const e=d[r];if(e instanceof Smart.MenuItem||e instanceof Smart.MenuItemsGroup)break;a.appendChild(e)}if(""===a.innerHTML.trim()){const t=e.label||e.getAttribute("label");t&&""!==t?i._setLabel(t,a,e,!0):(e.set("label","Item "+o),a.innerHTML="Item "+o)}else e.set("label",a.innerHTML.trim());if(e.setAttribute("aria-label",e.label),e instanceof Smart.MenuItemsGroup&&void 0===e.titleLabel&&(e.titleLabel=e.label),a.innerHTML="<span>"+a.innerHTML+"</span>",s.appendChild(a),e.set("level",t),e.set("shortcut",e.shortcut||e.getAttribute("shortcut")||""),e.shortcut&&e instanceof Smart.MenuItem){const t=document.createElement("div");t.id=e.id+"Shortcut",t.className="smart-"+i._element+"-item-shortcut",t.innerHTML=e.shortcut,s.appendChild(t),e.setAttribute("aria-describedby",t.id)}r.appendChild(s),e.insertBefore(r,e.children[0]),e.id||(e.id=i.id+"ItemP"+e.path.replace(/\./g,"_")+"L"+e.label.replace(/[^a-zA-Z0-9\-\_]/g,""))}_createMenuItemsGroupContainer(e,t){const n=this,o=document.createElement("div"),i=document.createElement("div");if(o.id=e.id+"Container",o.className="smart-"+n._element+"-drop-down smart-visibility-hidden",n._edgeMacFF&&2===t&&"tree"!==n.mode&&(o.className+=" not-in-view"),o.$=Smart.Utilities.Extend(o),o.level=t,o.setAttribute("level",t),"menu"===n._element?(e.setAttribute("aria-owns",o.id),o.setAttribute("role","menu")):o.setAttribute("role","group"),o.menuItemsGroup=e,i.className="smart-"+n._element+"-item-container",i.$=Smart.Utilities.Extend(i),i.container=o,i.menuItemsGroup=e,e.checkable&&i.setAttribute("checkable",""),i.setAttribute("check-mode",e.checkMode),i.setAttribute("role","presentation"),o.itemContainer=i,o.appendChild(i),null!==e.dropDownHeight){const t=document.createElement("smart-repeat-button"),r=document.createElement("smart-repeat-button");t.className="smart-menu-scroll-button smart-spin-button smart-scroll-button-near smart-hidden",t.setAttribute("aria-label","Scroll up"),t.innerHTML="<div class=\"smart-arrow smart-arrow-up\" aria-hidden=\"true\"></div>",t.animation=n.animation,t.unfocusable=!0,t.rightToLeft=n.rightToLeft,r.className="smart-menu-scroll-button smart-spin-button smart-scroll-button-far smart-hidden",r.setAttribute("aria-label","Scroll down"),r.innerHTML="<div class=\"smart-arrow smart-arrow-down\" aria-hidden=\"true\"></div>",r.animation=n.animation,r.unfocusable=!0,r.rightToLeft=n.rightToLeft,o.insertBefore(t,i),o.appendChild(r),o.$.addClass("drop-down-height-set"),i.dropDownHeightSet=!0,i.checkOverflow=!0,o.style.height=e.dropDownHeight+"px",n._containersFixedHeight.push(o),n._additionalScrollButtons.push([t,r])}return o}_discardKeyboardHover(e){const t=this;!t._focusedViaKeyboard||!e&&t._focusedViaKeyboard instanceof Smart.MenuItemsGroup&&t._isContainerOpened(t._focusedViaKeyboard.level+1,t._focusedViaKeyboard.container)||(t._focusedViaKeyboard.$.removeClass("focus"),t._focusedViaKeyboard.removeAttribute("focus"),t._focusedViaKeyboard.$.removeClass("hover"),t._focusedViaKeyboard.removeAttribute("hover"),t._focusedViaKeyboard=void 0)}_documentDownHandler(e){const t=this;"down"===t.closeAction&&t._closeOnDocumentInteraction(e.originalEvent)}_documentUpHandler(e){const t=this,n=e.originalEvent.target;if(t.disabled||t.displayLoadingIndicator||!n.closest)return;const o="up"===t.closeAction&&t._closeOnDocumentInteraction(e.originalEvent);if(o)return;let i,r;if(Smart.EnableShadowDOM?(i=t.isInShadowDOM?t.getRootNode().activeElement:t.shadowRoot?t.shadowRoot.activeElement||document.activeElement:document.activeElement,r=t.$.container.contains(e.originalEvent.composedPath()[0])):(i=document.activeElement,r=t.contains(n)),!o&&t!==i&&null===i.closest("[template-applied]")){if(r||n.closest(".smart-list-menu-view")===t.$.view)return void t.focus();const e=n.closest(".smart-drop-down-repositioned");e&&e.ownerElement===t&&t.focus()}}_closeOnDocumentInteraction(e){const t=this,n=e.target;let o,i;if(Smart.EnableShadowDOM?(o=e.composedPath()[0],i=t.$.container.contains(o)):i=t.contains(n),"dropDown"===t.mode&&t.opened){const e=n.closest(".smart-drop-down-repositioned");if(!i&&(!e||e.ownerElement!==t))return t.close({trigger:"interaction",target:Smart.EnableShadowDOM?o:n}),!0}return!i&&null===n.closest(".smart-menu-drop-down")||o&&o===t.$.mainContainer||n===t.$.mainContainer?"tree"===t.mode||(t._close(),!0):void 0}_endSwiping(e,t,n){var o=Math.abs;const i=this;if(!i._dragStartDetails)return;const r=i.$.mainContainer,a=o(i._dragStartDetails.startTime-t),s=300/a,l=(i._dragStartDetails.startY-e.pageY)*s;let d=o(l);const m=function(){return!(0<l&&r.scrollTop===r.scrollHeight-r.offsetHeight||0>l&&0===r.scrollTop)};let c=.03*o(l)*s;const u=function(){if(5<c){const e=(d-c)/o(l);.1>e?c/=1.25:.15>e?c/=1.2:.2>e?c/=1.15:.25>e?c/=1.1:.3>e&&(c/=1.05)}const e=r.scrollTop;r.scrollTop=0<l?Math.min(e+c,r.scrollHeight-r.offsetHeight):Math.max(e-c,0),d-=c,i._updateScrollButtonVisibility(i.$.mainContainer,"horizontal"===i.mode,[i.$.scrollButtonNear,i.$.scrollButtonFar]);const t=m();if(0<d&&t)i._scrollingAnimationFrame=window.requestAnimationFrame(u);else if(i._wheelInProgress=!1,!t&&(i._fireScrollBottomReachedEvent&&i._fireScrollBottomReachedEvent(e),!0!==n)){const e=i.$.mainContainer.scrollTop;0===e?i._bounceTop():i._bounceBottom(e)}};i._scrollingAnimationFrame&&cancelAnimationFrame(i._scrollingAnimationFrame),1e3>a&&m()?i._scrollingAnimationFrame=window.requestAnimationFrame(u):i._wheelInProgress=!1,delete i._dragStartDetails}_ensureVisible(e){function t(t,n,o){let i=e.firstElementChild[o]+t-r[o];0>i&&(i=t),r["scroll"+n]=i}function n(n,i){let s=e["offset"+n],l=r[i];"Top"!==n||r===o.$.mainContainer||a[0].$.hasClass("smart-hidden")||(s-=a[0][i]),t(s,n,i),o._updateScrollButtonVisibility(r,"Left"===n,a),l!==r[i]&&t(s,n,i)}const o=this;if(o._minimized)return;const i=o.mode;let r,a;if("tree"!==i&&e.parentElement!==o.$.mainContainer){if(null===e.dropDownHeight)return;r=e.parentElement,a=[r.container.children[0],r.container.children[2]]}else r=o.$.mainContainer,a=[o.$.scrollButtonNear,o.$.scrollButtonFar];if(r!==o.$.mainContainer||(null!==o.dropDownAppendTo||"tree"===o.mode||o.$mainContainer.hasClass("simple"))&&(r.$.hasClass("scroll-buttons-shown")||"hidden"===o.overflow)){const t=r.getBoundingClientRect(),a=e.getBoundingClientRect();return"tree"===i?void o._ensureVisibleTreeMode(e,a,r,t,0):void(r===o.$.mainContainer&&"horizontal"===i&&(t.left>a.left||t.right<a.right)?n("Left","offsetWidth"):(t.top>a.top||t.bottom<a.bottom)&&n("Top","offsetHeight"))}}_ensureVisibleTreeMode(e,t,n,o,i){const r=this;if(("menu"===r._element||"scrollButtons"===r.scrollMode)&&!n.$.hasClass("scroll-buttons-shown")&&"hidden"!==r.overflow)return;const a=n.offsetHeight,s=r.$scrollButtonNear.hasClass("smart-hidden");let l;if(o.top>t.top)l=r._getOffsetTop(e);else{let n=e.expanded?e.firstElementChild.offsetHeight+parseInt(window.getComputedStyle(e.children[1]).marginTop,10):e.offsetHeight;if("tree"===r._element&&(n+=parseFloat(getComputedStyle(r).getPropertyValue("--smart-tree-item-vertical-offset"))||0),o.bottom<t.top+n)l=r._getOffsetTop(e)-a+n+i;else return}n.scrollTop=l,("menu"===r._element||"scrollButtons"===r.scrollMode)&&r._updateScrollButtonVisibility(n,!1,[r.$.scrollButtonNear,r.$.scrollButtonFar]),"auto"===r.overflow&&s&&!r.$scrollButtonNear.hasClass("smart-hidden")&&(n.scrollTop+=a-n.offsetHeight)}_escapeHandler(e,t,n){const o=this;e&&(e.$.removeClass("focus"),e.removeAttribute("focus")),o._closeSubContainers(t,void 0,void 0,!0),o._hoverViaKeyboard(n.menuItemsGroup)}_expandItemsByDefault(e){const t=this;if((0!==t._menuItemsGroupsToExpand.length||e)&&("tree"===t.mode||t._minimized)){const n=t.hasAnimation,o=t.animation;n&&(t.animation="none"),e&&t._collapseAll(!1);for(let e=0;e<t._menuItemsGroupsToExpand.length;e++)t.expandItem(t._menuItemsGroupsToExpand[e].path,void 0,!1);n&&(t.animation=o),t._menuItemsGroupsToExpand=[]}}_expandSection(e){const t=this,n=e.style.height,o=e.scrollHeight+"px";return e.style.height=o,t._treeAnimationInProgress=e,n!==o&&(parseFloat(n)||parseFloat(o))?void e.addEventListener("transitionend",t._transitionendHandlerExpand):void t._transitionendHandlerExpand(t,e)}_filterInputKeyupHandler(){const e=this;e._filterTimer&&clearTimeout(e._filterTimer),e._filterTimer=setTimeout(function(){const t=e.context;e.context=e,e._applyFilter(e.$.filterInput.value,e._view),e._checkOverflow(),e.context=t},300)}_findItem(e,t){if(""===t)return e;const n=this;switch(n.filterMode){case"startsWith":if(0===e.label.indexOf(t))return e;break;case"startsWithIgnoreCase":if(0===e.label.toLowerCase().indexOf(t.toLowerCase()))return e;break;case"doesNotContain":if(0>e.label.indexOf(t))return e;break;case"doesNotContainIgnoreCase":if(0>e.label.toLowerCase().indexOf(t.toLowerCase()))return e;break;case"contains":if(-1<e.label.indexOf(t))return e;break;case"containsIgnoreCase":if(-1<e.label.toLowerCase().indexOf(t.toLowerCase()))return e;break;case"equals":if(0===e.label.localeCompare(t))return e;break;case"equalsIgnoreCase":if(0===e.label.toLowerCase().localeCompare(t.toLowerCase()))return e;break;case"endsWith":if(e.label.endsWith(t))return e;break;case"endsWithIgnoreCase":if(e.label.toLowerCase().endsWith(t.toLowerCase()))return e;}return null}_getFirstEnabledChild(e){const t=e.children;for(let n=0;n<t.length;n++)if(this._isChildEnabled(t[n]))return t[n]}_getLastEnabledChild(e){const t=e.children;for(let n=t.length-1;0<=n;n--)if(this._isChildEnabled(t[n]))return t[n]}_getNextEnabledChild(e){if(e)for(;e.nextElementSibling;){const t=e.nextElementSibling;if(this._isChildEnabled(t))return t;e=t}}_getOffsetTop(e){let t=e.offsetTop;for(;e.offsetParent!==this.$.mainContainer;)e=e.offsetParent,t+=e.offsetTop;return t}_getPreviousEnabledChild(e){if(e)for(;e.previousElementSibling;){const t=e.previousElementSibling;if(this._isChildEnabled(t))return t;e=t}}_hamburgerIconClickHandler(e,t){e&&e.stopPropagation();const n=this;if(void 0===t&&(Smart.ListMenu&&n instanceof Smart.ListMenu?t=n.$.view:t=n.$.mainContainer),!n.disabled)if(!n._minimizedDropDownOpened){if(n._positionDetection.placeOverlay(),null!==n.dropDownAppendTo){const e=n.dropDownPosition,o=n.getBoundingClientRect(),i=n._positionDetection.getDropDownOffset();-1!==e.indexOf("right")||"auto"===e?n.rightToLeft?(t.style.right="initial",t.style.left=o.left+o.width-t.offsetWidth-i.x+"px"):(t.style.left=o.left+i.x+"px",t.style.right="initial"):-1!==e.indexOf("left")&&(t.style.left=o.right-t.offsetWidth+i.x+"px",t.style.right="initial"),-1!==e.indexOf("bottom")||-1!==e.indexOf("overlay")||"auto"===e?t.style.top=o.bottom+i.y+"px":-1!==e.indexOf("top")&&(t.style.top=o.top+i.y+"px")}else t.style.right="";n._edgeMacFF&&t.$.removeClass("not-in-view"),t.$.removeClass("smart-visibility-hidden"),n.$hamburgerIcon.addClass("smart-close-button"),n.$.hamburgerIcon.setAttribute("aria-expanded",!0),n._minimizedDropDownOpened=!0,n._browserBoundsDetection(t)}else n._close()}_handleOverflowChange(){const e=this;if((e._minimized||null===e.dropDownAppendTo&&!e.$mainContainer.hasClass("simple")&&"tree"!==e.mode)&&!(Smart.ListMenu&&e instanceof Smart.ListMenu))return;const t=e.overflow;let n;"horizontal"===e.mode?(n=!0,e.$.mainContainer.scrollLeft=0):(n=!1,e.$.mainContainer.scrollTop=0),"hidden"===t?(e.$mainContainer.removeClass("scroll-buttons-shown"),e.$scrollButtonNear.addClass("smart-hidden"),e.$scrollButtonFar.addClass("smart-hidden")):(e.$.scrollButtonNear.disabled=e.disabled,e.$.scrollButtonFar.disabled=e.disabled,"auto"===t?(e.$scrollButtonNear.addClass("smart-hidden"),e.$scrollButtonFar.addClass("smart-hidden"),e._checkOverflow(e.$.mainContainer,n,[e.$.scrollButtonNear,e.$.scrollButtonFar])):(e.$mainContainer.addClass("scroll-buttons-shown"),e.$mainContainer.removeClass("one-button-shown"),e.$scrollButtonNear.removeClass("smart-hidden"),e.$scrollButtonFar.removeClass("smart-hidden"),e._updateScrollButtonVisibility(e.$.mainContainer,n,[e.$.scrollButtonNear,e.$.scrollButtonFar])))}_hideMainContainerScrollButtons(){const e=this;e.$scrollButtonNear.addClass("smart-hidden"),e.$scrollButtonFar.addClass("smart-hidden"),e.$mainContainer.removeClass("scroll-buttons-shown"),e.$mainContainer.removeClass("one-button-shown")}_hoverViaKeyboard(e){if(e){const t=this;e.$.addClass("focus"),e.setAttribute("focus",""),t._focusedViaKeyboard=e,t._ensureVisible(e)}}_isBranchExpanded(e){const t=this;if("tree"!==t.mode)return!0;let n=!0;for(;e.parentItem;)n=n&&e.parentItem.expanded,e=e.parentItem;return n}_isChildEnabled(e){return!(e.disabled||e.templateApplied||e.hidden||e instanceof HTMLDivElement||0===e.offsetHeight)}_isContainerOpened(e,t){const n=this;return"tree"===n.mode||n._minimized?(n._openedContainers[e]||(n._openedContainers[e]=[]),-1!==n._openedContainers[e].indexOf(t)):n._openedContainers[e]===t}_keydownHandler(e){const t=this;let n=e.key;if(t.getRootNode().activeElement!==t||-1===["ArrowDown","ArrowLeft","ArrowRight","ArrowUp","End","Enter","Escape","Home"," "].indexOf(n)||t.disabled)return;e.preventDefault();const o=t.mode;if("tree"===o||t._minimized)return void t._keydownHandlerTreeMode(n);const i=t.dropDownPosition,r=-1!==i.indexOf("left"),a="top-left"===i||"top-right"===i,s=t._openedContainers;let l,d=t.$.mainContainer,m=1;for(let t=s.length-1;0<=t;t--)if(void 0!==s[t]){d=s[t],m=d.level,d=d.itemContainer;break}switch(l=d.querySelector("[focus][level=\""+m+"\"]"),t.rightToLeft&&("ArrowLeft"===n?n="ArrowRight":"ArrowRight"==n&&(n="ArrowLeft")),n){case"ArrowDown":1===m?"horizontal"!==o||a?"horizontal"!==o&&t._levelOneNavigate("_getFirstEnabledChild",l,d):t._levelOneOpenDropDown(l):t._navigate("_getNextEnabledChild",l,d);break;case"ArrowLeft":r?1===m?"horizontal"===o?t._levelOneNavigate("_getLastEnabledChild",l,d):t._levelOneOpenDropDown(l):l instanceof Smart.MenuItemsGroup?t._selectionHandler({target:l,isTrusted:!0}):t._levelOneNavigateFromLowerLevel("_getPreviousEnabledChild",l):t._arrowLeftHandler(m,o,l,d);break;case"ArrowRight":r?1===m?"horizontal"===o&&t._levelOneNavigate("_getFirstEnabledChild",l,d):2===m?t._levelOneNavigateFromLowerLevel("_getNextEnabledChild",l):t._escapeHandler(l,m,d):t._arrowRightHandler(m,o,l,d);break;case"ArrowUp":1===m?"horizontal"===o&&a?t._levelOneOpenDropDown(l):"horizontal"!==o&&t._levelOneNavigate("_getLastEnabledChild",l,d):t._navigate("_getPreviousEnabledChild",l,d);break;case"End":case"Home":{const e="End"===n?t._getLastEnabledChild(d):t._getFirstEnabledChild(d);if(!e||l===e)return;l&&(l.$.removeClass("focus"),l.removeAttribute("focus")),t._hoverViaKeyboard(e);break}case"Enter":l&&t._selectionHandler({target:l,isTrusted:!0});break;case"Escape":1<m?(2===m&&t._positionDetection.removeOverlay(),t._escapeHandler(l,m,d)):"dropDown"===o&&t.opened&&t.close({trigger:"interaction",target:"Escape"});break;case" ":l&&t._toggleItem(l);}}_keydownHandlerTreeMode(e){function t(e){const t=e.level;return!1===e.disabled&&!0!==e.templateApplied&&(1===t||1<t&&r._isContainerOpened(t,e.parentElement.container)&&0<e.getBoundingClientRect().height)}function n(e){for(let n=e;n<a.length;n++){const e=a[n];if(t(e)){if(s){if(s===e)break;s.$.removeClass("focus"),s.removeAttribute("focus")}r._hoverViaKeyboard(e);break}}}function o(e){for(let n=e;0<=n;n--){const e=a[n];if(t(e)){if(s){if(s===e)break;s.$.removeClass("focus"),s.removeAttribute("focus")}r._hoverViaKeyboard(e);break}}}function i(){1<s.level&&(s.$.removeClass("focus"),s.removeAttribute("focus"),r._hoverViaKeyboard(s.parentItem))}const r=this,a=Array.from(r.$.mainContainer.querySelectorAll("smart-menu-item, smart-menu-items-group")),s=r.$.mainContainer.getElementsByClassName("focus")[0];let l;switch(e){case"ArrowDown":l=s?a.indexOf(s)+1:0,n(l);break;case"ArrowLeft":if(!s)return;if(s instanceof Smart.MenuItem)i();else{if(r._isContainerOpened(s.level+1,s.container))return void r._closeSubContainers(s.level+1,s.container,!0,!0);i()}break;case"ArrowRight":if(!s||s instanceof Smart.MenuItem)return;r._isContainerOpened(s.level+1,s.container)?(s.$.removeClass("focus"),s.removeAttribute("focus"),r._hoverViaKeyboard(r._getFirstEnabledChild(s.itemContainer))):r._selectionHandler({target:s,type:"keydown",isTrusted:!0},s);break;case"ArrowUp":l=s?a.indexOf(s)-1:a.length-1,o(l);break;case"End":o(a.length-1);break;case"Enter":r._minimized&&!r._minimizedDropDownOpened?r._hamburgerIconClickHandler(void 0,r.$.mainContainer):s&&r._selectionHandler({target:s,type:"keydown",isTrusted:!0});break;case"Escape":r._minimized&&r._minimizedDropDownOpened&&r._close();break;case"Home":n(0);break;case" ":s&&r._toggleItem(s);}}_levelOneNavigate(e,t,n){const o=this;if(!t){const t=o[e](n);t&&o._hoverViaKeyboard(t)}else"_getLastEnabledChild"===e?o._navigate("_getPreviousEnabledChild",t,n):o._navigate("_getNextEnabledChild",t,n)}_levelOneNavigateFromLowerLevel(e,t){const n=this,o=n[e](n._openedContainers[2].menuItemsGroup);o&&(t&&(t.$.removeClass("focus"),t.removeAttribute("focus")),n._closeSubContainers(2),o instanceof Smart.MenuItemsGroup?n._selectionHandler({target:o,isTrusted:!0}):n._hoverViaKeyboard(o))}_levelOneOpenDropDown(e){e&&e instanceof Smart.MenuItemsGroup&&this._selectionHandler({target:e,isTrusted:!0})}_mainContainerHandler(e){const t=this;if(t._minimized&&null!==t.dropDownAppendTo)switch(e.type){case"click":t._selectionHandler(e);break;case"mouseleave":t._mouseleaveHandler(e);break;case"mouseout":t._mouseoutMouseoverHandler(e);break;case"mouseover":t._mouseoutMouseoverHandler(e);}}_menuItemSelectionHandler(e,t){function n(){o.enableShadowDOM&&(o.shadowRoot.activeElement||document.activeElement)!==o&&null!==o.dropDownAppendTo&&"click"===t.type&&!o.shadowRoot.contains(e)?o.focus():document.activeElement!==o&&null!==o.dropDownAppendTo&&"click"===t.type&&!o.contains(e)&&o.focus()}const o=this;return e.disabled||e.templateApplied?void n():!o._toggleItem(e)&&(o.$.fireEvent("itemClick",{item:e,label:e.label,value:e.value}),"tree"!==o.mode&&(o._close(),"dropDown"===o.mode))?(o._ripple(e,t),void o.close({trigger:"interaction",target:e})):void(o._ripple(e,t),n())}_menuItemsGroupSelectionHandler(e,t,n){const o=this,i=o.mode,r=e.container,a=r.level,s="tree"!==i&&!o._minimized;if(o._treeAnimationInProgress!==r&&(o._discardKeyboardHover(),o.getRootNode().activeElement===o||null===o.dropDownAppendTo||"click"!==t.type||o.contains(t.target)||o.focus(),"click"!==t.type||(t.target.classList.contains("smart-"+o._element+"-items-group-arrow")||!o._toggleItem(e))&&("mouseenter"!==o.selectionMode||"tree"===i||o._minimized))){let l=o.hasAnimation;if(o._isContainerOpened(a,r))o._closeSubContainers(a,r,!0,!1!==n),s&&e.hasAttribute("focus")&&(o._focusedViaKeyboard=e);else{const d=o.$.fireEvent("expanding",{item:e,label:e.label,path:e.path,value:e.value,children:e.itemContainer.children});if(d.defaultPrevented)return;if(o._positionDetection.placeOverlay(),s&&o._closeSubContainers(a),l&&!s&&("expand"!==t.type&&(o._ensureVisibleOnTransitionend=e),o._expandSection(r)),o._edgeMacFF&&2===a&&s&&r.$.removeClass("not-in-view"),r.$.removeClass("smart-visibility-hidden"),s||"expand"!==t.type){if(!s){const t=o.$.mainContainer.getElementsByClassName("focus")[0];t&&(t.$.removeClass("focus"),t.removeAttribute("focus")),o._focusedViaKeyboard=e}else"keydown"===t.type&&(o._focusedViaKeyboard=e);e.$.addClass("focus"),e.setAttribute("focus","")}if(e.$.addClass("smart-"+o._element+"-items-group-opened"),e.$.addClass("smart-"+o._element+"-items-group-expanded"),e.setAttribute("aria-expanded",!0),o._addOpenedContainer(a,r),s){if(o._ensureVisible(e),1<e.level&&e.parentElement.dropDownHeightSet){const t=o.dropDownPosition,n=e.getBoundingClientRect().top-e.parentElement.container.getBoundingClientRect().top;r.style.top=-1!==t.indexOf("bottom")||"auto"===t?n+"px":-1===t.indexOf("top")?n+e.offsetHeight/2+"px":n+e.offsetHeight+"px"}r.itemContainer.checkOverflow&&r.itemContainer.dropDownHeightSet&&(o._checkOverflow(r.itemContainer,!1,[r.children[0],r.children[2]]),delete r.itemContainer.checkOverflow)}o._positionExternalContainer(r,e),"tree"===i||o._minimized?!l&&o._browserBoundsDetection(o.$.mainContainer):o._browserBoundsDetection(r),void 0===t.type&&o._hoverViaKeyboard(o._getFirstEnabledChild(e.itemContainer)),!1!==n&&o.$.fireEvent("expand",{item:e,label:e.label,path:e.path,value:e.value,children:e.itemContainer.children})}s?o._ripple(e,t):"tree"===i&&!l&&(o._checkOverflow(o.$.mainContainer,!1,[o.$.scrollButtonNear,o.$.scrollButtonFar]),!o._minimized&&"expand"!==t.type&&o._ensureVisible(e))}}_mouseenterHandler(){const e=this;e.autoFocusOnMouseenter&&e.getRootNode().activeElement!==e&&e.focus()}_mouseleaveHandler(e){const t=this;if("mouseenter"===t.selectionMode&&"tree"!==t.mode&&!t._minimized){if(null!==t.dropDownAppendTo&&e.relatedTarget)if(t.contains(e.target)){const n=e.relatedTarget.closest(".smart-menu-drop-down");if(n&&n.ownerElement===t)return}else if(t.contains(e.relatedTarget))return;t._isElementHovered=!1,t._autoCloseTimeout=setTimeout(function(){const e=t.context;clearTimeout(t._autoCloseTimeout),t._isElementHovered||(t.context=t,t._close(),t.context=e)},t.autoCloseDelay)}}_mouseoutMouseoverHandler(e){const t=this;if(t.disabled||t.displayLoadingIndicator)return;let n=e.target.closest("smart-menu-item")||e.target.closest("smart-menu-items-group");if((t.enableShadowDOM&&(n=e.composedPath()[0].closest("smart-menu-item")||e.composedPath()[0].closest("smart-menu-items-group")||n),"mouseover"===e.type&&(t._isElementHovered=!0),!(null===n||n.disabled||n.templateApplied))&&!(("tree"===t.mode||t._minimized)&&n.hasAttribute("focus")&&e.relatedTarget&&(e.target.parentElement===e.relatedTarget||e.relatedTarget.parentElement===e.target)))if(t._discardKeyboardHover(!1),"mouseover"===e.type){"mouseenter"!==t.selectionMode||"tree"===t.mode||t._minimized||(n instanceof Smart.MenuItemsGroup&&!n.hasAttribute("hover")?t._selectionHandler(e,n):n instanceof Smart.MenuItem&&t._closeSubContainers(n.level+1));const o=e.target.closest(".smart-menu-drop-down");o&&(!o||n.contains(o))||(n.$.addClass("hover"),n.setAttribute("hover",""),t._discardKeyboardHover(!0))}else{if("tree"!==t.mode&&!t._minimized&&("mouseenter"===t.selectionMode&&e.relatedTarget===t.$.mainContainer&&t._close(),n instanceof Smart.MenuItemsGroup&&n.container&&!n.container.$.hasClass("smart-visibility-hidden")))return;n.$.removeClass("hover"),n.removeAttribute("hover")}}_moveDropDownsToExternalContainer(){const e=this;for(let t=0;t<e._containersInBody.length;t++){const n=e._containersInBody[t];e._dropDownParent.appendChild(n),n.$.listen("click",e._selectionHandler.bind(e)),n.$.listen("mouseleave",e._mouseleaveHandler.bind(e)),n.$.listen("mouseout",e._mouseoutMouseoverHandler.bind(e)),n.$.listen("mouseover",e._mouseoutMouseoverHandler.bind(e))}for(let t=0;t<e._containers.length;t++){const n=e._containers[t];n.ownerElement=e,""!==e.theme&&n.classList.add(e.theme),e.rightToLeft&&n.setAttribute("right-to-left",""),n.classList.add("smart-drop-down-repositioned"),n.setAttribute("mode",e.mode),n.setAttribute("drop-down-position",e.dropDownPosition),e.checkboxes&&n.setAttribute("checkboxes","")}}_moveDropDownsToMenu(){const e=this;for(let t=0;t<e._containersInBody.length;t++){const n=e._containersInBody[t];n.$.unlisten("click"),n.$.unlisten("mouseleave"),n.$.unlisten("mouseout"),n.$.unlisten("mouseover"),n.style.left="",n.style.right="",n.style.top="",n.style.marginLeft="",n.style.marginTop="",n.menuItemsGroup.appendChild(n)}for(let t=0;t<e._containers.length;t++){const n=e._containers[t];""!==e.theme&&n.classList.remove(e.theme),n.classList.remove("smart-drop-down-repositioned"),n.removeAttribute("mode"),n.removeAttribute("drop-down-position"),n.removeAttribute("checkboxes"),n.removeAttribute("right-to-left")}}_navigate(e,t,n){const o=this;if(!t)return void("_getNextEnabledChild"===e?o._hoverViaKeyboard(o._getFirstEnabledChild(n)):o._hoverViaKeyboard(o._getLastEnabledChild(n)));const i=o[e](t);i&&(t.$.removeClass("focus"),t.removeAttribute("focus"),o._hoverViaKeyboard(i))}_positionExternalContainer(e,t){const n=this;if(null===n.dropDownAppendTo||2!==e.level)return;const o=n.dropDownPosition,i=n.mode,r=t.getBoundingClientRect(),a=n._positionDetection.getDropDownOffset(),s=r.top+a.y,l=r.bottom+a.y;let d=r.left+a.x,m=r.right+a.x;e.style.top=e.style.left=e.style.right="",n.rightToLeft&&(e.style.right="initial"),-1===o.indexOf("left")?"horizontal"===i||"overlay-right"===o?e.style.left=d+"px":n.rightToLeft?e.style.left=m-e.offsetWidth+"px":e.style.left=d+r.width+"px":(d-=e.offsetWidth,("horizontal"===i||"overlay-left"===o)&&(d+=r.width),e.style.left=d+"px",e.style.right="initial");"bottom-right"===o||"bottom-left"===o||"auto"===o?e.style.top="horizontal"===i?l+"px":s+"px":"top-right"===o||"top-left"===o?e.style.top="horizontal"===i?s-e.offsetHeight+"px":l-e.offsetHeight+"px":"overlay-right"===o||"overlay-left"===o?e.style.top=s+r.height/2+"px":void 0}_processDataSource(){function e(n,a){let s;if(Array.isArray(n[r])&&0<n[r].length){s=document.createElement("smart-"+t._element+"-items-group"),!0===n.checkable&&s.set("checkable",!0),("checkbox"===n.checkMode||"radioButton"===n.checkMode)&&s.set("checkMode",n.checkMode),n.dropDownHeight&&s.set("dropDownHeight",n.dropDownHeight),!0===n.expanded&&"tree"===t.mode&&(s.set("expanded",!0),s.setAttribute("aria-expanded",!0));for(let t=0;t<n[r].length;t++)e(n[r][t],s)}else s=document.createElement("smart-"+t._element+"-item"),void 0!==n.shortcut&&s.set("shortcut",n.shortcut),n.customAttribute&&s.setAttribute(n.customAttribute,"");!0===n.checked&&(s.set("checked",!0),s.setAttribute("aria-checked",!0)),!0===n.disabled&&s.set("disabled",!0),n[o]===void 0?"string"==typeof n[r]&&s.set("label",n[r]):s.set("label",n[o]),!0===n.selected&&s.set("selected",!0),!0===n.separator&&s.set("separator",!0),n[i]!==void 0&&s.set("value",n[i]),a.appendChild(s)}const t=this,n=t.dataSource,o=t.displayMember,r=t.itemsMember,i=t.valueMember;t.$.mainContainer.innerHTML="";for(let o=0;o<n.length;o++){const i=n[o];e(i,t.$.mainContainer)}t._processHTML(t.$.mainContainer,1)}_processHTML(e,t,n){const o=this;let i,r;1<t&&(i=o._createMenuItemsGroupContainer(e,t),r=i.itemContainer,(e.expanded||e.hasAttribute("expanded"))&&"tree"===o.mode?o._menuItemsGroupsToExpand.push(e):(e.set("expanded",!1),e.removeAttribute("expanded"),e.setAttribute("aria-expanded",!1)));const a=Array.from(e.children),s=[],l=document.createDocumentFragment();let d=0;for(let r=0;r<a.length;r++){if(1<t&&0==r){d++;continue}const n=a[r];if(!(n instanceof Smart.MenuItem||n instanceof Smart.MenuItemsGroup)){n.parentElement.removeChild(n),d++;continue}o._createItemHTMLStructure(n,t,e,r-d),(n.checked||n.hasAttribute("checked"))&&(n.disabled||n.hasAttribute("disabled")||n.templateApplied?(n.set("checked",!1),n.removeAttribute("checked"),n.removeAttribute("aria-checked")):s.push(n)),1<t&&l.appendChild(n),n instanceof Smart.MenuItemsGroup&&o._processHTML(n,t+1)}if(1<t){if(r.appendChild(l),e.container=i,e.itemContainer=r,e instanceof Smart.MenuItemsGroup){const n=document.createElement("div");n.className="smart-"+o._element+"-items-group-arrow","menu"===o._element?n.setAttribute("role","presentation"):(n.setAttribute("role","button"),n.setAttribute("aria-label","Toggle")),o._setArrowDirection(n,t),e.firstElementChild.appendChild(n)}o._containers.push(i),2==t&&(o._containersInBody.push(i),o._edgeMacFF&&i.addEventListener("transitionend",function(e){e.target===this&&this.$.hasClass("smart-visibility-hidden")&&(this.style.left="",this.style.top="",this.$.addClass("not-in-view"))})),null===o.dropDownAppendTo||"tree"===o.mode||o._minimized?e.appendChild(i):(i.ownerElement=o,o.rightToLeft?i.setAttribute("right-to-left",""):i.removeAttribute("right-to-left"),i.classList.add("smart-drop-down-repositioned"),i.setAttribute("mode",o.mode),i.setAttribute("drop-down-position",o.dropDownPosition),o.checkboxes&&i.setAttribute("checkboxes",""),""!==o.theme&&i.$.addClass(o.theme),i.setAttribute("animation",o.animation),2===t?(o._dropDownParent.appendChild(i),i.$.listen("click",o._selectionHandler.bind(o)),i.$.listen("mouseleave",o._mouseleaveHandler.bind(o)),i.$.listen("mouseout",o._mouseoutMouseoverHandler.bind(o)),i.$.listen("mouseover",o._mouseoutMouseoverHandler.bind(o))):e.appendChild(i))}o._validateRadioButtonSelection(e,t,s),o._sortItems&&!1!==n&&o._sortItems(e)}_processUList(){const e=this,t=new RegExp(/<li>(.(?!<\/li>)|\n)*?<ul>/),n=new RegExp(/<\/ul>(.|\n)*?<\/li>/);let o=e.$.mainContainer.firstElementChild.innerHTML;for(o=o.replace(/\r?\n|\r/g,""),o=o.replace(/<li(.|\n)*?>/g,"<li>"),o=o.replace(/<li><\/li>/g,"<li> </li>"),o=o.replace(/<ul(.|\n)*?>/g,"<ul>");t.test(o);){const n=t.exec(o),i="<smart-"+e._element+"-items-group>"+n[0].slice(4,n[0].length-4);o=o.replace(n[0],i)}for(;n.test(o);){const t=n.exec(o),i="</smart-"+e._element+"-items-group>";o=o.replace(t[0],i)}o=o.replace(/li>/g,"smart-"+e._element+"-item>"),e.$.mainContainer.innerHTML=o}_refreshContainersArrays(){const e=this;for(let t=e._containers.length-1;0<=t;t--){const n=e._containers[t];if(!document.body.contains(n)){e._containers.splice(t,1);const o=e._containersFixedHeight.indexOf(n);-1<o&&(e._containersFixedHeight.splice(o,1),e._additionalScrollButtons.splice(o,1))}}e._checkContainersLength()}_refreshItemPaths(e,t,n,o){const r=this;let i=t?e:e.container.itemContainer;const a=n?n(e):i.children;for(let s=0;s<a.length;s++){const i=a[s];let l;o&&(i.originalIndex=s),l=t?""+s:e.path+"."+s,i.path=l,r._menuItems[l]=i,i instanceof Smart.MenuItemsGroup&&r._refreshItemPaths(i,void 0,n,o)}}_removeContainerFixedHeight(){const e=this;for(let t=0;t<e._containersFixedHeight.length;t++){const n=e._containersFixedHeight[t];n.style.height="",n.itemContainer.$.removeClass("scroll-buttons-shown"),n.itemContainer.$.removeClass("one-button-shown"),n.children[0].$.addClass("smart-hidden"),n.children[2].$.addClass("smart-hidden"),n.itemContainer.checkOverflow=!0}}_removeContainersInBody(){const e=this;if(null!==e.dropDownAppendTo&&!e._minimized)for(let t=0;t<e._containersInBody.length;t++)e._dropDownParent.removeChild(e._containersInBody[t])}_reparentMenu(e,t){const n=this;if("dropDown"===n.mode&&(null!==n._dropDownParent||e)&&n._dropDownParent!==n.parentElement){if(!e||null===t)n._positionRelativeTo=n.parentElement;else if(null===n._dropDownParent)return n._positionRelativeTo.appendChild(n),void(n._positionRelativeTo=null);n._dropDownParent.appendChild(n)}}_resizeHandler(){const e=this;if(e._suppressResizeHandler)return void delete e._suppressResizeHandler;const t=e.minimizeWidth,n=e.mode;if(null!==t&&"dropDown"!==n){if(e.offsetWidth<=t&&!e._minimized)return void e.minimize();e.offsetWidth>t&&e.maximize()}(null!==e.dropDownAppendTo||"tree"===n)&&e._checkOverflow(e.$.mainContainer,"horizontal"===n,[e.$.scrollButtonNear,e.$.scrollButtonFar])}_ripple(e,t){const n=this;if(n.hasRippleAnimation&&"click"===t.type)return Smart.Utilities.Animation.Ripple.animate(e,t.pageX,t.pageY),!0}_scroll(e){if(!e.closest("[template-applied]")){const t=this,n=t.mode,o=e.classList.contains("smart-scroll-button-near")?-1:1;if(e.parentElement===t.$.container){const e=t.$.mainContainer;"tree"!==n&&t._closeSubContainers(2),"horizontal"===t.mode?(e.scrollLeft+=10*o,t._updateScrollButtonVisibility(e,!0,[t.$.scrollButtonNear,t.$.scrollButtonFar])):(e.scrollTop+=10*o,t._updateScrollButtonVisibility(e,!1,[t.$.scrollButtonNear,t.$.scrollButtonFar]))}else{const n=e.parentElement,i=n.itemContainer;t._closeSubContainers(n.level+1),i.scrollTop+=10*o,t._updateScrollButtonVisibility(i,!1,[n.children[0],n.children[2]])}}}_selectionHandler(e,t){const n=this,o=e.target;if(o.closest("[template-applied]")&&e.stopPropagation(),!(n.disabled||n.displayLoadingIndicator)){if(void 0===t){if("click"===e.type){const t=o.closest("smart-repeat-button");if(t)return void n._scroll(t,e)}if(!e.isTrusted)return;const i=o.closest("smart-"+n._element+"-item");if(i)return void n._menuItemSelectionHandler(i,e);if(t=o.closest("smart-"+n._element+"-items-group"),t&&(o===t.container||o===t.container.firstElementChild))return}t&&!t.disabled&&n._menuItemsGroupSelectionHandler(t,e)}}_setArrowDirection(e,t){const n=this,o=n.mode;return"tree"===o||n._minimized?void(e.className="smart-"+n._element+"-items-group-arrow down smart-arrow-down"):void("overlay"===n.dropDownPosition.slice(0,7)?e.className="smart-menu-items-group-arrow minus":2===t&&"horizontal"===o?"top"===n.dropDownPosition.slice(0,3)?e.className="smart-menu-items-group-arrow up smart-arrow-up":e.className="smart-menu-items-group-arrow down smart-arrow-down":e.className="smart-menu-items-group-arrow"+(n.rightToLeft?"left smart-arrow-left":"right smart-arrow-right"))}_setFocusable(){const e=this;if(e.disabled||e.unfocusable)return void e.removeAttribute("tabindex");const t=e.getAttribute("tabindex");(null===t||0>t)&&e.setAttribute("tabindex",0)}_setLabel(e,t,n,o){const i=document.getElementById(e);if(null!==i&&"template"===i.tagName.toLowerCase()){const r=document.importNode(i.content,!0);if(n instanceof Smart.MenuItem)t.appendChild(r),o&&(n.setAttribute("template-applied",""),n.templateApplied=!0);else if(Smart.ListMenu&&this instanceof Smart.ListMenu){const e=new RegExp(/{{title="(.*)"}}/);for(let t=0;t<r.childNodes.length;t++)e.test(r.childNodes[t].innerHTML)?(n.titleLabel=e.exec(r.childNodes[t].innerHTML)[1],r.childNodes[t].innerHTML=r.childNodes[t].innerHTML.replace(e,"")):e.test(r.childNodes[t].textContent)&&(n.titleLabel=e.exec(r.childNodes[t].textContent)[1],r.childNodes[t].textContent=r.childNodes[t].textContent.replace(e,""));n.titleLabel===void 0&&(n.titleLabel=r.textContent),t.appendChild(r)}else t.innerHTML=e,n.titleLabel=e}else t.innerHTML=e,n instanceof Smart.MenuItemsGroup&&(n.titleLabel=e)}_toggleItem(e){const t=this;if(t.checkboxes){const n=1===e.level?t:e.parentItem;if(n.checkable){let o=!1;return"checkbox"===n.checkMode?(o=!0,e.set("checked",!e.checked),e.checked?e.setAttribute("aria-checked",!0):e.removeAttribute("aria-checked"),t.$.fireEvent("itemCheckChange",{item:e,label:e.label,value:e.value,checked:e.checked})):!e.checked&&(o=!0,e.set("checked",!0),e.setAttribute("aria-checked",!0),t._uncheckSiblings(e),t.$.fireEvent("itemCheckChange",{item:e,label:e.label,value:e.value,checked:!0})),e instanceof Smart.MenuItem&&o&&t.$.fireEvent("itemClick",{item:e,label:e.label,value:e.value}),"tree"!==t.mode&&"ListMenu"!==t.elementName&&(t._close(),t.close()),!0}}return!1}_transitionendHandler(e){const t=this;"dropDown"===t.mode&&t.opened&&e.target===t&&t.getRootNode().activeElement!==t&&!t._noAutoFocus&&t.focus()}_transitionendHandlerCollapse(){let e,t;if(1===arguments.length){if("visibility"===arguments[0].propertyName)return;t=this,e=t.menuItemsGroup.menu}else e=arguments[0],t=arguments[1];t.menuItemsGroup.$.removeClass("smart-"+e._element+"-items-group-expanded"),t.menuItemsGroup.setAttribute("aria-expanded",!1),t.removeEventListener("transitionend",e._transitionendHandlerCollapse),t.style.height=null,t.$.addClass("smart-visibility-hidden"),e._checkOverflow(e.$.mainContainer,!1,[e.$.scrollButtonNear,e.$.scrollButtonFar]),e._minimized&&e._browserBoundsDetection(e.$.mainContainer),delete e._treeAnimationInProgress}_transitionendHandlerExpand(){let e,t;if(1===arguments.length){if("visibility"===arguments[0].propertyName)return;t=this,e=t.menuItemsGroup.menu}else e=arguments[0],t=arguments[1];t.removeEventListener("transitionend",e._transitionendHandlerExpand),t.style.height=null,e._checkOverflow(e.$.mainContainer,!1,[e.$.scrollButtonNear,e.$.scrollButtonFar]),e._minimized&&e._browserBoundsDetection(e.$.mainContainer),e._ensureVisibleOnTransitionend&&(e._ensureVisible(e._ensureVisibleOnTransitionend),delete e._ensureVisibleOnTransitionend),delete e._treeAnimationInProgress}_uncheckSiblings(e){for(let t=0;t<e.parentElement.childElementCount;t++){const n=e.parentElement.children[t];n!==e&&n.checked&&(n.set("checked",!1),n.removeAttribute("aria-checked"),this.$.fireEvent("itemCheckChange",{item:n,label:n.label,value:n.value,checked:!1}))}}_unsortItems(e,t){const n=this;let o,r,a=[];e===n.$.mainContainer?(r=e,o=e.children):(r=e.container.firstElementChild,o=r.children);for(let r=0;r<o.length;r++){const e=o[r];a[e.originalIndex]=e,e instanceof Smart.MenuItemsGroup&&t===void 0&&n._unsortItems(e)}if(!(2>a.length))for(let e=0;e<a.length;e++)r.appendChild(a[e])}_updateItemRoles(){const e=this;for(let t in e._menuItems){const n=e._menuItems[t];if(e.checkboxes){const t=1===n.level?e:n.parentItem;t.checkable?n.setAttribute("role","checkbox"===t.checkMode?"menuitemcheckbox":"menuitemradio"):n.setAttribute("role","menuitem")}else n.setAttribute("role","menuitem")}}_updateScrollButtonVisibility(e,t,n){var o=Math.round;const i=this,r=i.overflow,a=e===i.$.mainContainer;if(a&&"hidden"===r)return;let s,l,d,m=!0,c=!0;if(t?(s="scrollLeft",l="offsetWidth",d="scrollWidth"):(s="scrollTop",l="offsetHeight",d="scrollHeight"),0===o(e[s])&&(m=!1),o(e[l]+e[s])>=o(e[d])&&(c=!1),!a||"auto"===r){if(m&&c)return n[0].$.removeClass("smart-hidden"),n[1].$.removeClass("smart-hidden"),void e.classList.remove("one-button-shown");m?n[0].$.removeClass("smart-hidden"):n[0].$.addClass("smart-hidden"),c?n[1].$.removeClass("smart-hidden"):n[1].$.addClass("smart-hidden"),e.classList.add("one-button-shown")}else"scroll"!==r||i.disabled||(n[0].disabled=!m,n[1].disabled=!c)}_validateRadioButtonSelection(e,t,n){const o=this;if(o.checkboxes){let i,r;if(1===t?(i=o,r=o.$.mainContainer):(i=e,r=e.itemContainer),"radioButton"===i.checkMode&&i.checkable)if(1<n.length)for(let e=n.length-2;0<=e;e--)n[e].set("checked",!1),n[e].removeAttribute("aria-checked");else if(0===n.length){const e=o._getFirstEnabledChild(r);e&&(e.set("checked",!0),e.setAttribute("aria-checked",!0))}}}_wheelHandler(e){const t=this;if(!t.enableMouseWheelAction||t._wheelInProgress||t.disabled||t.displayLoadingIndicator||t.$.mainContainer.offsetHeight===t.$.mainContainer.scrollHeight)return void(t._wheelInProgress&&e.preventDefault());e.preventDefault(),t._dragStartDetails={startY:e.pageY,x:e.pageX,y:e.pageY,startTime:Date.now(),target:e.target},t._wheelInProgress=!0;const n={pageY:e.pageY+50*(0<e.deltaY?-1:1)};t._endSwiping(n,t._dragStartDetails.startTime+100,!0)}});
<<<<<<< HEAD
/*!
 * 
 * /* Smart HTML Elements v5.0.0 (2019-November) 
 * Copyright (c) 2011-2019 jQWidgets. 
 * License: https://htmlelements.com/license/ * /
 * 
 * 
 */!function(e){var t={};function i(a){if(t[a])return t[a].exports;var n=t[a]={i:a,l:!1,exports:{}};return e[a].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=t,i.d=function(e,t,a){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(i.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)i.d(a,n,function(t){return e[t]}.bind(null,n));return a},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=70)}({0:function(e,t,i){"use strict";function a(e,t,i){return(a="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,i){var a=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=h(e)););return e}(e,t);if(a){var n=Object.getOwnPropertyDescriptor(a,t);return n.get?n.get.call(i):n.value}})(e,t,i||e)}function n(e,t){return!t||"object"!==c(t)&&"function"!=typeof t?s(e):t}function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}function r(e){var t="function"==typeof Map?new Map:void 0;return(r=function(e){if(null===e)return null;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,i)}function i(){return l(e,arguments,h(this).constructor)}return i.prototype=Object.create(e.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),d(i,e)})(e)}function l(e,t,i){return(l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}()?Reflect.construct:function(e,t,i){var a=[null];a.push.apply(a,t);var n=new(Function.bind.apply(e,a));return i&&d(n,i.prototype),n}).apply(null,arguments)}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function m(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function f(e,t,i){return t&&p(e.prototype,t),i&&p(e,i),e}!function(){var e=[],t="Smart";if(window[t]&&window[t].Version){if("5.1.0"===window[t].Version)return;if("5.1.0"!==window[t].Version)t+="5.1.0";else for(var i=2;window[t];)t+=i.toString(),i++}var l=navigator.userAgent.indexOf("Edge")>-1&&navigator.appVersion.indexOf("Edge")>-1;document.elementsFromPoint||(document.elementsFromPoint=document.msElementsFromPoint);var d=function(){function e(){m(this,e)}return f(e,[{key:"addMessages",value:function(e,t){Object.assign(this.messages[e],t)}},{key:"localize",value:function(e,t){if(this.messages&&this.messages[this.locale]){var i=this.messages[this.locale][e];if(""===i)return"";if(i){var a=i;for(var n in t){var s=t[n];i=i.replace(new RegExp("{{"+n+"}}","g"),s)}return this.localizeFormatFunction&&this.localizeFormatFunction(a,i,t),i}}}}],[{key:"moduleName",get:function(){return"LocalizationModule"}},{key:"properties",get:function(){return{messages:{value:{en:{}},type:"object",inherit:!0,reflectToAttribute:!1},locale:{value:"en",type:"string",reflectToAttribute:!1},localizeFormatFunction:{value:void 0,type:"function",reflectToAttribute:!1}}}}]),e}(),p=function(){function e(){m(this,e)}return f(e,[{key:"log",value:function(e){this._logger("log",e)}},{key:"warn",value:function(e){this._logger("warn",e)}},{key:"error",value:function(e){this._logger("error",e)}},{key:"_logger",value:function(e,t){if(this.debugMode){var i=t instanceof Error?t.message:t.toString();console[e](i)}if(this.rethrowError&&"error"===e)throw t}}],[{key:"moduleName",get:function(){return"ErrorModule"}},{key:"properties",get:function(){return{rethrowError:{value:!0,type:"boolean",reflectToAttribute:!1},debugMode:{value:!0,type:"boolean",reflectToAttribute:!1}}}}]),e}(),g=function(){function e(){m(this,e)}return f(e,[{key:"getBindings",value:function(e,t){var i=this,a=0,n={},s=function(e){if(e instanceof HTMLElement)return i.parseAttributes(e);var t=i.parseProperty(e.data?e.data.trim():null,"textContent",e);return t?(i.ownerElement&&e.parentNode===i.ownerElement.$.content&&(t.value=""!==i.ownerElement.$.html?i.ownerElement.$.html:void 0,i.ownerElement.innerHTML=""),{textContent:t}):void 0}(e);s&&(n.data=s),t||(n.mapping=[],t=n),e.getAttribute&&(n.nodeId=e.getAttribute("smart-id"),t&&s&&(t.mapping[n.nodeId]=s)),n.node=e,e.firstChild&&(n.children={});for(var o=e.firstChild;o;o=o.nextSibling)n.children[a++]=i.getBindings(o,t);return n}},{key:"_addRemovePropertyBinding",value:function(e,t,i,a,n){if(e&&t&&i){var s=this,o=s.ownerElement.bindings,r=i.getAttribute("smart-id"),l=e.indexOf("{{")>=0,d=!1;(e=e.replace("{{","").replace("}}","").replace("[[","").replace("]]","")).indexOf("!")>=0&&(e=e.replace("!",""),d=!0);var h=s.ownerElement._properties[e],u={name:e,reflectToAttribute:h.reflectToAttribute,twoWay:l,type:h.type,not:d};if(n&&!a){var c={},m={name:e,targetPropertyName:t,reflectToAttribute:h.reflectToAttribute,twoWay:l,type:h.type,not:d};c[e]=m,o.mapping[r]=c}!function e(n){for(var o in n){var l=n[o];if(l.nodeId===r){l.data||(l.data={}),a?(l.data[t]=null,delete l.data[t]):l.data[t]=u;break}if(l.children)e(l.children);else if(l.node&&l.node.children&&l.node===i.parentElement){var d=l.node;if(!d.firstChild)continue;l.children={};for(var h=0,c=d.firstChild;c;c=c.nextSibling)l.children[h++]=s.getBindings(c);e(l.children)}}}(o.children),a?delete s.ownerElement.boundProperties[e]:s.ownerElement.boundProperties[e]=!0,s.updateBoundNodes(e)}}},{key:"addPropertyBinding",value:function(e,t,i,a){this._addRemovePropertyBinding(e,t,i,!1,a)}},{key:"removePropertyBinding",value:function(e,t,i,a){this._addRemovePropertyBinding(e,t,i,!0,a)}},{key:"parseAttributes",value:function(t){for(var i=void 0,a=0;a<t.attributes.length;a++){var n=t.attributes[a],s=n.name,o=n.value;e.cache["toCamelCase"+s]||(e.cache["toCamelCase"+s]=E.Core.toCamelCase(s));var r=e.cache["toCamelCase"+s];if(s.indexOf("(")>=0){var l=s.substring(1,s.length-1);if(this.ownerElement&&!this.ownerElement.dataContext){this.ownerElement.templateListeners[t.getAttribute("smart-id")+"."+l]=o,t.removeAttribute(s);continue}i||(i={});var d=o.substring(0,o.indexOf("("));i[r]={isEvent:!0,name:l,value:d}}else{var h=this.parseProperty(o,s,t);h&&(i||(i={}),i[r]=h)}}return i}},{key:"parseProperty",value:function(e,t){if(e&&e.length){for(var i,a=e.length,n=0,s=0,o=0,r=!0;s<a;){n=e.indexOf("{{",s);var l=e.indexOf("[[",s),d="}}";if(l>=0&&(n<0||l<n)&&(n=l,r=!1,d="]]"),(o=n<0?-1:e.indexOf(d,n+2))<0)return;i=i||{};var h=e.slice(n+2,o).trim();i.name=h,s=o+2}var u=i.name,c=this.ownerElement?this.ownerElement._properties[u]:null;if(i.twoWay=r,i.ready=!1,this.ownerElement&&(u.indexOf("::")>=0?this.ownerElement.boundProperties[u.substring(0,u.indexOf("::"))]=!0:this.ownerElement.boundProperties[u]=!0),c)i.type=c.type,i.reflectToAttribute=c.reflectToAttribute;else{["checked","selected","async","autofocus","autoplay","controls","defer","disabled","hidden","ismap","loop","multiple","open","readonly","required","scoped"].indexOf(t)>=0?i.type="boolean":i.type="string",i.reflectToAttribute=!0}return i}}},{key:"updateTextNodes",value:function(){this.updateTextNode(this.ownerElement.shadowRoot||this.ownerElement,this.ownerElement.bindings,this.ownerElement)}},{key:"updateTextNode",value:function(e,t,i){if(t){for(var a=0,n=e.firstChild;n&&t.children;n=n.nextSibling)this.updateTextNode(n,t.children[a++],i);if(t&&t.data)for(var s in t.data){var o=t.data[s],r=o.name;"textContent"===s&&o.twoWay&&!o.updating&&void 0!==o.value&&(i[r]=o.value)}}}},{key:"updateBoundProperty",value:function(e,t){if(!t.updating){var i=this.ownerElement;t.updating=!0,i[e]=t.value,t.updating=!1}}},{key:"updateBoundNodes",value:function(e){var t=this;if(t.updateBoundNode(t.ownerElement.shadowRoot||t.ownerElement,t.ownerElement.bindings,t.ownerElement,e),t.ownerElement.detachedChildren.length>0)for(var i=function(i){var a=t.ownerElement.detachedChildren[i],n=a.getAttribute("smart-id"),s=function e(t){if(t.nodeId===n)return t;for(var i in t.children){var a=t.children[i];if((a.getAttribute?a.getAttribute("smart-id"):"")===n)return t;if(a.children){var s=e(a);if(s)return s}}return null}(t.ownerElement.bindings);if(s)t.updateBoundNode(a,s,t.ownerElement,e,!0);else if(a.getAttribute&&t.ownerElement.bindings.mapping){var o=t.ownerElement,r=t.ownerElement.bindings;if(r)for(var l in r.mapping){var d=o.querySelector('[smart-id="'+l+'"]');if(d){var h=r.mapping[l];t.updateBoundData(d,h,o,e)}}}},a=0;a<t.ownerElement.detachedChildren.length;a++)i(a)}},{key:"updateBoundMappedNodes",value:function(){var e=this.ownerElement.bindings,t=this.ownerElement;if(e.mapping)for(var i in e.mapping){var a=t.querySelector('[smart-id="'+i+'"]');if(t.shadowRoot&&((a=t.querySelector('[id="'+i+'"]'))||(a=t.shadowRoot.querySelector('[id="'+i+'"]')||t.shadowRoot.querySelector('[smart-id="'+i+'"]'))),a){var n=e.mapping[i];this.updateBoundData(a,n,t)}else if(t.getAttribute("aria-controls")){var s=document.getElementById(t.getAttribute("aria-controls"));if(!s&&t.shadowRoot&&(s=t.shadowRoot.getElementById(t.getAttribute("aria-controls"))),a=s.querySelector('[smart-id="'+i+'"]')){var o=e.mapping[i];this.updateBoundData(a,o,t)}}}}},{key:"updateBoundNode",value:function(e,t,i,a,n){var s=this;if(t){var o,r,l=0;if(n){if(n&&!t.data)for(var d=e.firstChild;d&&t.children;d=d.nextSibling)d.getAttribute?function(){var e=d.getAttribute("smart-id"),n=function(){for(var i in t.children)if(t.children[i].nodeId===e)return t.children[i]}();s.updateBoundNode(d,n,i,a),l++}():s.updateBoundNode(d,t.children[l++],i,a,n)}else for(var h=e.firstChild;h&&t.children;h=h.nextSibling)h.getAttribute?(o=void 0,r=void 0,o=h.getAttribute("smart-id"),r=function(){for(var e in t.children)if(t.children[e].nodeId===o)return t.children[e]}(),s.updateBoundNode(h,r,i,a),l++):s.updateBoundNode(h,t.children[l++],i,a);if(t&&t.data){var u=t.data;s.updateBoundData(e,u,i,a)}}}},{key:"updateBoundData",value:function(t,i,a,n){var s=this,o=function(o){var r=i[o],l=r.name;if(r.updating)return"continue";if(l.indexOf("::")>=0&&(l=l.substring(0,l.indexOf("::"))),void 0!==n&&n!==l)return"continue";if(l.indexOf("(")>=0){var d=l.substring(l.indexOf("(")),h=l.substring(0,l.indexOf("("));if((d=(d=(d=d.substring(1,d.length-1)).replace(/ /gi,"")).split(",")).length>0&&""!==d[0]){for(var u=[],m=0;m<d.length;m++)u.push(a[d[m]]);r.value=a[h].apply(a,u)}else r.value=a[h]();r.type=c(r.value)}else r.value=a[l];if("innerHTML"===l?t[o].toString().trim()!==a[l].toString().trim()&&(r.ready?t[o]=r.value.toString().trim():a._properties[l].defaultValue!==r.value&&(t[o]=r.value.toString().trim())):r.not?(t[o]=!r.value,r.targetPropertyName&&(t[r.targetPropertyName]=!r.value)):(t[o]=r.value,r.targetPropertyName&&(t[r.targetPropertyName]=r.value)),t.$&&t.$.isNativeElement){e.cache["toDash"+o]||(e.cache["toDash"+o]=E.Core.toDash(o));var p=e.cache["toDash"+o],f=t.$.getAttributeValue(p,r.type);!r.reflectToAttribute||f===r.value&&r.ready||t.$.setAttributeValue(p,r.value,r.type),r.reflectToAttribute||t.$.setAttributeValue(p,null,r.type)}if(!r.ready){if(t.$&&t.$.isCustomElement){e.cache["toDash"+o]||(e.cache["toDash"+o]=E.Core.toDash(o));var g=e.cache["toDash"+o];t._properties||(t._beforeCreatedProperties=t._properties=t.propertyByAttributeName=[]),t._properties[o]||(t._properties[o]={attributeName:g},t._beforeCreatedProperties&&(t._beforeCreatedProperties[o]=t._properties[o]),t.propertyByAttributeName[g]=t._properties[o]);var v=t._properties[o];v.isUpdating=!0,r.reflectToAttribute&&(r.not?t.$.setAttributeValue(v.attributeName,!r.value,r.type):t.$.setAttributeValue(v.attributeName,r.value,r.type)),r.reflectToAttribute||t.$.setAttributeValue(v.attributeName,null,r.type),v.isUpdating=!1}if(r.twoWay){var _=function(i){if(r.value=i,t.$&&t.$.isNativeElement){e.cache["toDash"+o]||(e.cache["toDash"+o]=E.Core.toDash(o));var a=e.cache["toDash"+o],n=t.$.getAttributeValue(a,r.type);r.reflectToAttribute&&n!==r.value&&t.$.setAttributeValue(a,r.value,r.type),r.reflectToAttribute||t.$.setAttributeValue(a,null,r.type)}};if(r.name.indexOf("::")>=0){var b=r.name.indexOf("::"),y=r.name.substring(b+2);s.ownerElement["$"+t.getAttribute("smart-id")].listen(y,(function(){_(t[o]);var e=r.name.substring(0,r.name.indexOf("::"));s.updateBoundProperty(e,r)}))}if(t.$&&t.$.isCustomElement){t._properties[o]&&(t._properties[o].notify=!0),e.cache["toDash"+o]||(e.cache["toDash"+o]=E.Core.toDash(o));var w=e.cache["toDash"+o];s.ownerElement["$"+t.getAttribute("smart-id")].listen(w+"-changed",(function(e){var t=e.detail;_(t.value);var i=s.ownerElement.context;e.context!==document&&(s.ownerElement.context=s.ownerElement),s.updateBoundProperty(r.name,r),s.ownerElement.context=i}))}}}r.ready=!0};for(var r in i)o(r)}}],[{key:"clearCache",value:function(){this.cache={}}},{key:"moduleName",get:function(){return"BindingModule"}}]),e}(),v=function(){function e(){m(this,e)}return f(e,null,[{key:"isBoolean",value:function(e){return"boolean"==typeof e}},{key:"isFunction",value:function(e){return!!(e&&e.constructor&&e.call&&e.apply)}},{key:"isArray",value:function(e){return Array.isArray(e)}},{key:"isObject",value:function(e){return e&&("object"===c(e)||this.isFunction(e))||!1}},{key:"isDate",value:function(e){return e instanceof Date}},{key:"isString",value:function(e){return"string"==typeof e}},{key:"isNumber",value:function(e){return"number"==typeof e}},{key:"getType",value:function(e){var t=this,i=["Boolean","Number","String","Function","Array","Date","Object"].find((function(i){if(t["is"+i](e))return i}));return i?i.toLowerCase():void 0}}]),e}(),_=function(){function e(){m(this,e)}return f(e,null,[{key:"animate",value:function(e,i,a,n){var s=e;if(s&&s instanceof HTMLElement!=!1){if(0===s.getElementsByClassName("smart-ripple").length){var o=document.createElement("span");o.classList.add("smart-ripple"),o.setAttribute("role","presentation");var r=!0,l=null;if(window[t].EnableShadowDOM&&s.enableShadowDOM&&!0!==s.isInShadowDOM){for(var d=0;d<s.shadowRoot.host.shadowRoot.children.length;d++)"link"!==s.shadowRoot.host.shadowRoot.children[d].tagName.toLowerCase()&&(l=s.shadowRoot.host.shadowRoot.children[d]);s.shadowRoot.host.shadowRoot.querySelector(".smart-ripple")&&(r=!1)}else l=s.firstElementChild;r&&(l&&!l.noRipple&&l.offsetHeight>0?l.appendChild(o):s.appendChild(o))}var h=null;if(h=window[t].EnableShadowDOM&&s.shadowRoot?s.shadowRoot.host.shadowRoot.querySelector(".smart-ripple"):s.getElementsByClassName("smart-ripple")[0]){h.innerHTML="",h.classList.remove("smart-animate"),h.style.height=h.style.width=Math.max(s.offsetHeight,s.offsetWidth)+"px";var u=window.getComputedStyle(h.parentElement),c=parseInt(u.borderLeftWidth)||0,m=parseInt(u.borderTopWidth)||0,p=s.getBoundingClientRect(),f=i-(p.left+window.pageXOffset)-h.offsetWidth/2-c,g=a-(p.top+window.pageYOffset)-h.offsetHeight/2-m;h.style.left=f+"px",h.style.top=g+"px",h.classList.add("smart-animate"),h.addEventListener("animationend",(function e(){h.parentElement&&h.parentElement.removeChild(h),n&&n(),h.removeEventListener("animationend",e),h.removeEventListener("animationcancel",e)})),h.addEventListener("animationcancel",(function e(){h.parentElement&&h.parentElement.removeChild(h),n&&n(),h.removeEventListener("animationcancel",e),h.removeEventListener("animationend",e)}))}}}}]),e}(),b=function(){function e(){m(this,e)}return f(e,null,[{key:"easeInQuad",value:function(e,t,i,a){return i*(e/=a)*e+t}},{key:"easeOutQuad",value:function(e,t,i,a){return-i*(e/=a)*(e-2)+t}},{key:"easeInOutQuad",value:function(e,t,i,a){return(e/=a/2)<1?i/2*e*e+t:-i/2*(--e*(e-2)-1)+t}},{key:"easeInCubic",value:function(e,t,i,a){return i*(e/=a)*e*e+t}},{key:"easeOutCubic",value:function(e,t,i,a){return i*((e=e/a-1)*e*e+1)+t}},{key:"easeInOutCubic",value:function(e,t,i,a){return(e/=a/2)<1?i/2*e*e*e+t:i/2*((e-=2)*e*e+2)+t}},{key:"easeInQuart",value:function(e,t,i,a){return i*(e/=a)*e*e*e+t}},{key:"easeOutQuart",value:function(e,t,i,a){return-i*((e=e/a-1)*e*e*e-1)+t}},{key:"easeInOutQuart",value:function(e,t,i,a){return(e/=a/2)<1?i/2*e*e*e*e+t:-i/2*((e-=2)*e*e*e-2)+t}},{key:"easeInQuint",value:function(e,t,i,a){return i*(e/=a)*e*e*e*e+t}},{key:"easeOutQuint",value:function(e,t,i,a){return i*((e=e/a-1)*e*e*e*e+1)+t}},{key:"easeInOutQuint",value:function(e,t,i,a){return(e/=a/2)<1?i/2*e*e*e*e*e+t:i/2*((e-=2)*e*e*e*e+2)+t}},{key:"easeInSine",value:function(e,t,i,a){return-i*Math.cos(e/a*(Math.PI/2))+i+t}},{key:"easeOutSine",value:function(e,t,i,a){return i*Math.sin(e/a*(Math.PI/2))+t}},{key:"easeInOutSine",value:function(e,t,i,a){return-i/2*(Math.cos(Math.PI*e/a)-1)+t}},{key:"easeInExpo",value:function(e,t,i,a){return 0===e?t:i*Math.pow(2,10*(e/a-1))+t}},{key:"easeOutExpo",value:function(e,t,i,a){return e===a?t+i:i*(1-Math.pow(2,-10*e/a))+t}},{key:"easeInOutExpo",value:function(e,t,i,a){return 0===e?t:e===a?t+i:(e/=a/2)<1?i/2*Math.pow(2,10*(e-1))+t:i/2*(2-Math.pow(2,-10*--e))+t}},{key:"easeInCirc",value:function(e,t,i,a){return-i*(Math.sqrt(1-(e/=a)*e)-1)+t}},{key:"easeOutCirc",value:function(e,t,i,a){return i*Math.sqrt(1-(e=e/a-1)*e)+t}},{key:"easeInOutCirc",value:function(e,t,i,a){return(e/=a/2)<1?-i/2*(Math.sqrt(1-e*e)-1)+t:i/2*(Math.sqrt(1-(e-=2)*e)+1)+t}},{key:"easeInElastic",value:function(e,t,i,a){var n=1.70158,s=0,o=i;return 0===e?t:1==(e/=a)?t+i:(s||(s=.3*a),o<Math.abs(i)?(o=i,n=s/4):n=s/(2*Math.PI)*Math.asin(i/o),-o*Math.pow(2,10*(e-=1))*Math.sin((e*a-n)*(2*Math.PI)/s)+t)}},{key:"easeOutElastic",value:function(e,t,i,a){var n=1.70158,s=0,o=i;return 0===e?t:1==(e/=a)?t+i:(s||(s=.3*a),o<Math.abs(i)?(o=i,n=s/4):n=s/(2*Math.PI)*Math.asin(i/o),o*Math.pow(2,-10*e)*Math.sin((e*a-n)*(2*Math.PI)/s)+i+t)}},{key:"easeInOutElastic",value:function(e,t,i,a){var n=1.70158,s=0,o=i;return 0===e?t:2==(e/=a/2)?t+i:(s||(s=a*(.3*1.5)),o<Math.abs(i)?(o=i,n=s/4):n=s/(2*Math.PI)*Math.asin(i/o),e<1?o*Math.pow(2,10*(e-=1))*Math.sin((e*a-n)*(2*Math.PI)/s)*-.5+t:o*Math.pow(2,-10*(e-=1))*Math.sin((e*a-n)*(2*Math.PI)/s)*.5+i+t)}},{key:"easeInBack",value:function(e,t,i,a,n){return void 0===n&&(n=1.70158),i*(e/=a)*e*((n+1)*e-n)+t}},{key:"easeOutBack",value:function(e,t,i,a,n){return void 0===n&&(n=1.70158),i*((e=e/a-1)*e*((n+1)*e+n)+1)+t}},{key:"easeInOutBack",value:function(e,t,i,a,n){return void 0===n&&(n=1.70158),(e/=a/2)<1?i/2*(e*e*((1+(n*=1.525))*e-n))+t:i/2*((e-=2)*e*((1+(n*=1.525))*e+n)+2)+t}},{key:"easeInBounce",value:function(e,t,i,a){return i-this.easeOutBounce(a-e,0,i,a)+t}},{key:"easeOutBounce",value:function(e,t,i,a){return(e/=a)<1/2.75?i*(7.5625*e*e)+t:e<2/2.75?i*(7.5625*(e-=1.5/2.75)*e+.75)+t:e<2.5/2.75?i*(7.5625*(e-=2.25/2.75)*e+.9375)+t:i*(7.5625*(e-=2.625/2.75)*e+.984375)+t}},{key:"easeInOutBounce",value:function(e,t,i,a){return e<a/2?.5*this.easeInBounce(2*e,0,i,a)+t:.5*this.easeOutBounce(2*e-a,0,i,a)+.5*i+t}}]),e}(),y=function(){function e(){m(this,e)}return f(e,null,[{key:"toCamelCase",value:function(e){return e.replace(/-([a-z])/g,(function(e){return e[1].toUpperCase()}))}},{key:"toDash",value:function(e){return e.split(/(?=[A-Z])/).join("-").toLowerCase()}},{key:"unescapeHTML",value:function(e){return(new DOMParser).parseFromString(e,"text/html").documentElement.textContent}},{key:"escapeHTML",value:function(e){var t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"};return String(e).replace(/[&<>"'`=\/]/g,(function(e){return t[e]}))}},{key:"createGUID",value:function(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()}},{key:"getScriptLocation",value:function(){return"./"!==window[t].BaseUrl?window[t].BaseUrl:function(){if(document.currentScript){var e=document.currentScript.src,t=e.lastIndexOf("/");return e=e.substring(0,t)}var i=new Error,a="(",n=")";if(Smart.Utilities.Core.Browser.Safari&&(a="@",n="\n"),i.fileName)return i.fileName.replace("/smart.element.js","");var s=i.stack.split(a);return(s=(s=(s=s[1]).split(n)[0]).split(":")).splice(-2,2),(s=s.join(":")).replace("/smart.element.js","")}()}},{key:"CSSVariablesSupport",value:function(){return window.CSS&&window.CSS.supports&&window.CSS.supports("(--fake-var: 0)")}},{key:"assign",value:function(e,t){var i=this,a=function(e){return e&&"object"===c(e)&&!Array.isArray(e)&&null!==e},n=Object.assign({},e);return a(e)&&a(t)&&Object.keys(t).forEach((function(s){a(t[s])&&s in e?n[s]=i.assign(e[s],t[s]):Object.assign(n,u({},s,t[s]))})),n}},{key:"html",value:function(e,t){var i="",a=e.childNodes;if(!t){for(var n,s=0,o=a.length;s<o&&(n=a[s]);s++){if(n instanceof HTMLElement||n.tagName&&["strong"].indexOf(n.tagName.toLowerCase())>=0){for(var r,l=n.tagName.toLowerCase(),d=n.attributes,h="<"+l,u=0;r=d[u];u++)h+=" "+r.name+'="'+r.value.replace(/[&\u00A0"]/g,E.Core.escapeHTML)+'"';h+=">";["area","base","br","col","command","embed","hr","img","input","keygen","link","meta","param","source","track","wbr"][l]&&(i+=h),i=i+h+this.html(n)+"</"+l+">"}else i+=n.textContent.replace(/[&\u00A0<>]/g,E.Core.escapeHTML)}return i}e.innerHTML=t.replace(/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,"<$1></$2>")}},{key:"isMobile",get:function(){return/(iphone|ipod|ipad|android|iemobile|blackberry|bada)/.test(window.navigator.userAgent.toLowerCase())}},{key:"Browser",get:function(){var e,t=function(t){var i=t.indexOf(e);if(-1!==i){var a=t.indexOf("rv:");return"Trident"===e&&-1!==a?parseFloat(t.substring(a+3)):parseFloat(t.substring(i+e.length+1))}},i={};return i[function(){for(var t=[{string:navigator.userAgent,subString:"Edge",identity:"Edge"},{string:navigator.userAgent,subString:"MSIE",identity:"IE"},{string:navigator.userAgent,subString:"Trident",identity:"IE"},{string:navigator.userAgent,subString:"Firefox",identity:"Firefox"},{string:navigator.userAgent,subString:"Opera",identity:"Opera"},{string:navigator.userAgent,subString:"OPR",identity:"Opera"},{string:navigator.userAgent,subString:"Chrome",identity:"Chrome"},{string:navigator.userAgent,subString:"Safari",identity:"Safari"}],i=0;i<t.length;i++){var a=t[i].string;if(e=t[i].subString,-1!==a.indexOf(t[i].subString))return t[i].identity}return"Other"}()]=!0,i.version=t(navigator.userAgent)||t(navigator.appVersion)||"Unknown",i}}]),e}(),w=[],D=function(){function e(){m(this,e)}return f(e,null,[{key:"watch",value:function(t){w.push(t),e.interval&&clearInterval(e.interval),e.interval=setInterval((function(){e.observe()}),100)}},{key:"observeElement",value:function(e){var t=e,i=e._computedStyle||"resize"!==t.hasStyleObserver?document.defaultView.getComputedStyle(t,null):{},a=!0,n="resize"!==t.hasStyleObserver?["paddingLeft","paddingRight","paddingTop","paddingBottom","borderLeftWidth","borderRightWidth","borderTopWidth","borderBottomWidth","display","visibility","font-size","font-family","font-style","font-weight","max-height","min-height","max-width","min-width","overflow","overflow-x","overflow-y"]:[];if(e.styleProperties&&(n=n.concat(e.styleProperties)),e.observableStyleProperties&&(n=e.observableStyleProperties),t._styleInfo){if(e.isHidden||"none"!==i.display&&(0!==e.offsetWidth&&0!==e.offsetHeight||(e.isHidden=!0)),e.isHidden){if(e.visibilityChangedHandler(),e.isHidden)return;a=!1}for(var s=[],o=0;o<n.length;o++){var r=n[o];t._styleInfo[r]!==i[r]&&(s[r]={oldValue:t._styleInfo[r],value:i[r]},s.length++),t._styleInfo[r]=i[r]}s.length>0&&(t.$.fireEvent("styleChanged",{styleProperties:s},{bubbles:!1,cancelable:!0}),s.display&&a&&t.$.fireEvent("resize",t,{bubbles:!1,cancelable:!0}))}else{t._styleInfo=[];for(var l=0;l<n.length;l++){var d=n[l];t._styleInfo[d]=i[d]}}}},{key:"observe",value:function(){for(var e=0;e<w.length;e++){var t=w[e];this.observeElement(t)}}},{key:"unwatch",value:function(t){e.interval&&clearInterval(e.interval);var i=w.indexOf(t);-1!==i&&w.splice(i,1),w.length>0&&(e.interval=setInterval((function(){e.observe()}),100))}}]),e}(),k=[],C=[],S=["resize","down","up","move","tap","taphold","swipeleft","swiperight","swipetop","swipebottom"],x=function(){function e(t){m(this,e);var i=this;i.target=t,i.$target=new T(t),i.$document=t.$document?t.$document:new T(document),i.id=(Date.now().toString(36)+Math.random().toString(36).substr(2,5)).toUpperCase();var a={handlers:{},boundEventTypes:[],listen:i.listen.bind(i),unlisten:i.unlisten.bind(i)};return i.tapHoldDelay=750,i.swipeMin=10,i.swipeMax=5e3,i.swipeDelay=1e3,i.tapHoldDelay=750,i.inputEventProperties=["clientX","clientY","pageX","pageY","screenX","screenY"],S.forEach((function(e){a[e]=function(t){a.handlers[e]=t},i[e]=function(e){if(!a.handlers[e.type]){if(("mousemove"===e.type||"pointermove"===e.type||"touchmove"===e.type)&&a.handlers.move){var t=i.createEvent(e,"move");a.handlers.move(t)}return!0}return a.handlers[e.type](e)}})),i.listen(),i.handlers=a.handlers,a}return f(e,[{key:"listen",value:function(e){var i=this;if("resize"===e&&!i.target.resizeTrigger&&i.target!==document&&i.target!==window&&!1!==i.target.hasResizeObserver){var a=document.createElement("div");a.className="smart-resize-trigger-container",a.innerHTML='<div class="smart-resize-trigger-container"><div class="smart-resize-trigger"></div></div><div class="smart-resize-trigger-container"><div class="smart-resize-trigger-shrink"></div></div>',a.setAttribute("aria-hidden",!0),window[t].EnableShadowDOM&&i.target.shadowRoot?i.target.shadowRoot.appendChild(a):i.target.appendChild(a),i.target.resizeTrigger=a;var n,s,o,r,l=a.childNodes[0],d=l.childNodes[0],h=a.childNodes[1],u=function(){d.style.width="100000px",d.style.height="100000px",l.scrollLeft=1e5,l.scrollTop=1e5,h.scrollLeft=1e5,h.scrollTop=1e5},c=i.target.offsetWidth,m=i.target.offsetHeight;if(0===c||0===m){i.target.addEventListener("resize",(function e(){u(),i.target.removeEventListener("resize",e)})),u()}else u();i.target.resizeHandler=function(){s||(s=requestAnimationFrame((function(){if(s=0,o=i.target.offsetWidth,r=i.target.offsetHeight,n=o!==c||r!==m,i.target.requiresLayout&&(n=!0),n){c=o,m=r;var e=new CustomEvent("resize",{bubbles:!1,cancelable:!0});i.resize(e),i.target.requiresLayout=!1}}))),u()},l.addEventListener("scroll",i.target.resizeHandler),h.addEventListener("scroll",i.target.resizeHandler)}if(!i.isListening){if(i.isListening=!0,i.isPressed=!1,i.isReleased=!1,i.isInBounds=!1,window.PointerEvent)i.$target.listen("pointerdown.inputEvents"+i.id,i.pointerDown.bind(i)),i.$target.listen("pointerup.inputEvents"+i.id,i.pointerUp.bind(i)),i.$target.listen("pointermove.inputEvents"+i.id,i.pointerMove.bind(i)),i.$target.listen("pointercancel.inputEvents"+i.id,i.pointerCancel.bind(i));else"ontouchstart"in window&&(i.$target.listen("touchmove.inputEvents"+i.id,i.touchMove.bind(i)),i.$target.listen("touchstart.inputEvents"+i.id,i.touchStart.bind(i)),i.$target.listen("touchend.inputEvents"+i.id,i.touchEnd.bind(i)),i.$target.listen("touchcancel.inputEvents"+i.id,i.touchCancel.bind(i))),i.$target.listen("mousedown.inputEvents"+i.id,i.mouseDown.bind(i)),i.$target.listen("mouseup.inputEvents"+i.id,i.mouseUp.bind(i)),i.$target.listen("mousemove.inputEvents"+i.id,i.mouseMove.bind(i)),i.$target.listen("mouseleave.inputEvents"+i.id,i.mouseLeave.bind(i));i.target._handleDocumentUp||(i.target._handleDocumentUp=i.handleDocumentUp.bind(i),i.target._handleDocumentUpId=i.id,i.$document.listen("mouseup.inputEvents"+i.target._handleDocumentUpId,i.target._handleDocumentUp))}}},{key:"unlisten",value:function(e){(this.isListening=!1,window.PointerEvent)?(this.$target.unlisten("pointerdown.inputEvents"+this.id),this.$target.unlisten("pointerup.inputEvents"+this.id),this.$target.unlisten("pointermove.inputEvents"+this.id),this.$target.unlisten("pointercancel.inputEvents"+this.id)):("ontouchstart"in window&&(this.$target.unlisten("touchstart.inputEvents"+this.id),this.$target.unlisten("touchmove.inputEvents"+this.id),this.$target.unlisten("touchend.inputEvents"+this.id),this.$target.unlisten("touchcancel.inputEvents"+this.id)),this.$target.unlisten("mousedown.inputEvents"+this.id),this.$target.unlisten("mouseup.inputEvents"+this.id),this.$target.unlisten("mousemove.inputEvents"+this.id),this.$target.unlisten("mouseleave.inputEvents"+this.id));if(this.target._handleDocumentUp&&(this.$document.unlisten("mouseup.inputEvents"+this.target._handleDocumentUpId,this.target._handleDocumentUp),delete this.target._handleDocumentUp,delete this.target._handleDocumentUpId),"resize"===e&&this.target.resizeTrigger){var t=this.target.resizeTrigger,i=t.childNodes[0],a=t.childNodes[1];i.removeEventListener("scroll",this.target.resizeHandler),a.removeEventListener("scroll",this.target.resizeHandler),this.target.resizeHandler=null,t.parentNode.removeChild(t),delete this.target.resizeTrigger}}},{key:"handleDocumentUp",value:function(e){this.isPressed=!1,this.isReleased=!1,this.resetSwipe(e)}},{key:"createEvent",value:function(e,t){var i=e.touches,a=e.changedTouches,n=i&&i.length?i[0]:a&&a.length?a[0]:void 0,s=new CustomEvent(t,{bubbles:!0,cancelable:!0,composed:void 0!==this.$target.element.getRootNode().host});if(s.originalEvent=e,n){for(var o=0;o<this.inputEventProperties.length;o++){var r=this.inputEventProperties[o];s[r]=n[r]}return s}for(var l in e)l in s||(s[l]=e[l]);return s}},{key:"fireTap",value:function(e){if(clearTimeout(this.tapHoldTimeout),!this.tapHoldFired&&this.isInBounds){var t=this.createEvent(e,"tap");this.tap(t)}}},{key:"initTap",value:function(e){var t=this;t.isInBounds=!0,t.tapHoldFired=!1,t.tapHoldTimeout=setTimeout((function(){if(t.isInBounds){t.tapHoldFired=!0;var i=t.createEvent(e,"taphold");t.taphold(i)}}),t.tapHoldDelay)}},{key:"pointerDown",value:function(e){return this.handleDown(e)}},{key:"mouseDown",value:function(e){if(!(this.isPressed||this.touchStartTime&&new Date-this.touchStartTime<500))return this.handleDown(e)}},{key:"touchStart",value:function(e){return this.touchStartTime=new Date,this.isTouchMoved=!0,this.handleDown(e)}},{key:"mouseUp",value:function(e){if(!(this.isReleased||this.touchEndTime&&new Date-this.touchEndTime<500))return this.handleUp(e)}},{key:"handleDown",value:function(e){this.isReleased=!1,this.isPressed=!0;var t=this.createEvent(e,"down");return(this.handlers.tap||this.handlers.taphold)&&this.initTap(t),(this.handlers.swipeleft||this.handlers.swiperight||this.handlers.swipetop||this.handlers.swipebottom)&&this.initSwipe(t),this.down(t)}},{key:"handleUp",value:function(e){this.isReleased=!0,this.isPressed=!1;var t=this.createEvent(e,"up"),i=this.up(t);return(this.handlers.tap||this.handlers.taphold)&&this.fireTap(t),this.resetSwipe(t),i}},{key:"handleMove",value:function(e){var t=this.move(e);return this.isPressed&&(this._maxSwipeVerticalDistance=Math.max(this._maxSwipeVerticalDistance,Math.abs(this._startY-e.pageY)),this._maxSwipeHorizontalDistance=Math.max(this._maxSwipeHorizontalDistance,Math.abs(this._startX-e.pageX)),t=this.handleSwipeEvents(e)),t}},{key:"touchEnd",value:function(e){return this.touchEndTime=new Date,this.handleUp(e)}},{key:"pointerUp",value:function(e){return this.handleUp(e)}},{key:"pointerCancel",value:function(e){this.pointerUp(e)}},{key:"touchCancel",value:function(e){this.touchEnd(e)}},{key:"mouseLeave",value:function(){this.isInBounds=!1}},{key:"mouseMove",value:function(e){if(!this.isTouchMoved)return this.handleMove(e)}},{key:"pointerMove",value:function(e){return this.handleMove(e)}},{key:"touchMove",value:function(e){for(var t=e.touches,i=e.changedTouches,a=t&&t.length?t[0]:i&&i.length?i[0]:void 0,n=0;n<this.inputEventProperties.length;n++){var s=this.inputEventProperties[n];void 0===e[s]&&(e[s]=a[s])}return this.isTouchMoved=!0,this.handleMove(e)}},{key:"handleSwipeEvents",value:function(e){var t=!0;return(this.handlers.swipetop||this.handlers.swipebottom)&&(t=this.handleVerticalSwipeEvents(e)),!1===t?t:((this.handlers.swipeleft||this.handlers.swiperight)&&(t=this.handleHorizontalSwipeEvents(e)),t)}},{key:"handleVerticalSwipeEvents",value:function(e){var t;return t=e.pageY-this._startY,this.swiped(e,t,"vertical")}},{key:"handleHorizontalSwipeEvents",value:function(e){var t;return t=e.pageX-this._startX,this.swiped(e,t,"horizontal")}},{key:"swiped",value:function(e,t,i){if(i=i||0,Math.abs(t)>=this.swipeMin&&!this._swipeEvent&&!this._swipeLocked){var a=t<0?"swipeleft":"swiperight";if("horizontal"===i?this._swipeEvent=this.createEvent(e,a):(a=t<0?"swipetop":"swipebottom",this._swipeEvent=this.createEvent(e,t<0?"swipetop":"swipebottom")),this[a]&&(this[a](this._swipeEvent),Math.abs(t)<=this.swipeMax))return e.stopImmediatePropagation(),!1}return!0}},{key:"resetSwipe",value:function(){this._swipeEvent=null,clearTimeout(this._swipeTimeout)}},{key:"initSwipe",value:function(e){var t=this;t._maxSwipeVerticalDistance=0,t._maxSwipeHorizontalDistance=0,t._startX=e.pageX,t._startY=e.pageY,t._swipeLocked=!1,t._swipeEvent=null,t._swipeTimeout=setTimeout((function(){t._swipeLocked=!0}),t.swipeDelay)}}]),e}(),z=function(){function e(t,i,a){m(this,e);this.container=t,this.horizontalScrollBar=i,this.verticalScrollBar=a,this.disableSwipeScroll=!1,this.listen()}return f(e,[{key:"scrollWidth",get:function(){return this.horizontalScrollBar?this.horizontalScrollBar.max:-1},set:function(e){e<0&&(e=0),this.horizontalScrollBar&&(this.horizontalScrollBar.max=e)}},{key:"scrollHeight",get:function(){return this.verticalScrollBar?this.verticalScrollBar.max:-1},set:function(e){e<0&&(e=0),this.verticalScrollBar&&(this.verticalScrollBar.max=e)}},{key:"scrollLeft",get:function(){return this.horizontalScrollBar?this.horizontalScrollBar.value:-1},set:function(e){e<0&&(e=0),this.horizontalScrollBar&&(this.horizontalScrollBar.value=e)}},{key:"scrollTop",get:function(){return this.verticalScrollBar?this.verticalScrollBar.value:-1},set:function(e){e<0&&(e=0),this.verticalScrollBar&&(this.verticalScrollBar.value=e)}},{key:"vScrollBar",get:function(){return this.verticalScrollBar}},{key:"hScrollBar",get:function(){return this.horizontalScrollBar}}]),f(e,[{key:"listen",value:function(){var e=this,t=y.isMobile,i=e.horizontalScrollBar,a=e.verticalScrollBar;e.inputEvents=new x(e.container);var n,s,o,r,l,d,h,u,c,m=500,p=function(e){return{amplitude:0,delta:0,initialValue:0,min:0,max:e.max,previousValue:0,pointerPosition:0,targetValue:0,scrollBar:e,value:0,velocity:0}},f=p(i),g=p(a),v=function(){d=Date.now(),h=d-r,r=d;var e=function(e){e.delta=e.value-e.previousValue,e.previousValue=e.value;var t=1e3*e.delta/(1+h);e.velocity=.8*t+.2*e.velocity};e(g),e(f)},_=function(e){return u.value=e>u.max?u.max:e<u.min?u.min:e,u.scrollBar.value=u.value,e>u.max?"max":e<u.min?"min":"value"};function b(){var t,i;u.amplitude&&(e.container.$.fireEvent("kineticScroll"),t=Date.now()-r,(i=-u.amplitude*Math.exp(-t/m))>5||i<-5?(_(u.targetValue+i),cancelAnimationFrame(s),s=0,s=requestAnimationFrame(b)):_(u.targetValue))}e.inputEvents.down((function(i){if(t){var a=i.originalEvent.target,s=a&&a.closest?a.closest("smart-scroll-bar"):void 0;if(s!==e.horizontalScrollBar&&s!==e.verticalScrollBar){o=!0,n=!1;var d=function(e,t){e.amplitude=0,e.pointerPosition=t,e.previousValue=e.value,e.value=e.scrollBar.value,e.initialValue=e.value,e.max=e.scrollBar.max};d(g,i.clientY),d(f,i.clientX),r=Date.now(),clearInterval(l),l=setInterval(v,m)}}})),e.inputEvents.up((function(){if(!o)return!0;if(clearInterval(l),e.disableSwipeScroll)o=!1;else{var t=function(e){u=e,e.amplitude=.8*e.velocity,e.targetValue=Math.round(e.value+e.amplitude),r=Date.now(),cancelAnimationFrame(s),s=requestAnimationFrame(b),e.velocity=0};g.velocity>10||g.velocity<-10?t(g):(f.velocity>10||f.velocity<-10)&&t(f),o=!1}})),e.inputEvents.move((function(t){if(!o)return!0;if(!e.disableSwipeScroll&&(n&&(t.originalEvent.preventDefault(),t.originalEvent.stopPropagation()),f.visible=i.offsetHeight>0,g.visible=a.offsetWidth>0,o&&(f.visible||g.visible))){g.ratio=-g.max/g.scrollBar.offsetHeight,g.delta=(t.clientY-g.pointerPosition)*g.ratio,f.ratio=-f.max/f.scrollBar.offsetWidth,f.delta=(t.clientX-f.pointerPosition)*f.ratio;var s="value",r=function(t,i,a){return t.delta>5||t.delta<-5?(u=t,"min"===(s=t.initialValue+t.delta>u.max?"max":t.initialValue+t.delta<u.min?"min":"value")&&0===t.initialValue||("max"===s&&t.initialValue===t.max||(!t.visible||(e.container.$.fireEvent("kineticScroll"),_(t.initialValue+t.delta),v(),a.originalEvent.preventDefault(),a.originalEvent.stopPropagation(),n=!0,!1)))):null},l=r(g,t.clientY,t);if(null!==l)return l;var d=r(f,t.clientX,t);return null!==d?d:void 0}})),e.scrollTo=function(t,i){var a=!1===i?f:g,n=!1;r||(r=Date.now()),c||(c=Date.now()),Math.abs(Date.now()-c)>375?r=Date.now():n=!0,c=Date.now(),a.value=a.scrollBar.value,a.delta=t-a.value,a.max=a.scrollBar.max,t<=a.min&&(t=a.min),t>=a.max&&(t=a.max),a.targetValue=t;var o=t,l=a.value;a.velocity=100*a.delta/(1+a.max),a.from=l;var d=function(e){return a.value=e>a.max?a.max:e<a.min?a.min:e,a.scrollBar.value=a.value,e>a.max?"max":e<a.min?"min":"value"};cancelAnimationFrame(s),s=requestAnimationFrame((function i(){var h,u=Date.now()-c,m=Math.min(1e3,Date.now()-r),p=a.velocity*Math.exp(m/175);if(n)p<0&&a.value<=t?p=0:p>0&&a.value>=t&&(p=0),(a.value+p<=a.min||a.value+p>=a.max)&&(p=0),p>.5||p<-.5?(d(a.value+p),cancelAnimationFrame(s),s=0,s=requestAnimationFrame(i)):d(a.targetValue);else{if(u>=175)return cancelAnimationFrame(s),e.container.$.fireEvent("kineticScroll"),void(s=0);h=E.Animation.Easings.easeInSine(u,l,o-l,175),d(h),cancelAnimationFrame(s),s=0,s=requestAnimationFrame(i)}}))},e.inputEvents.listen()}},{key:"unlisten",value:function(){this.inputEvents&&this.inputEvents.unlisten(),delete this.inputEvents}}]),e}(),T=function(){function e(t){m(this,e),this.events={},this.handlers={},this.element=t}return f(e,[{key:"hasClass",value:function(e){for(var t=e.split(" "),i=0;i<t.length;i++){if(!this.element.classList.contains(t[i]))return!1}return!0}},{key:"addClass",value:function(e){if(!this.hasClass(e)){for(var t=e.split(" "),i=0;i<t.length;i++)this.element.classList.add(t[i]);this.isNativeElement||D.observeElement(this.element)}}},{key:"removeClass",value:function(e){var t=this;if(0!==arguments.length){for(var i=e.split(" "),a=0;a<i.length;a++)t.element.classList.remove(i[a]);""===t.element.className&&t.element.removeAttribute("class"),t.isNativeElement||D.observeElement(t.element)}else t.element.removeAttribute("class")}},{key:"dispatch",value:function(e){var t=this.events[e.type],i=!1;if(t.length>1)for(var a=0;a<t.length;a++){var n=t[a];if(n.namespace&&n.namespace.indexOf("_")>=0){i=!0;break}}i&&t.sort((function(e,t){var i=e.namespace,a=t.namespace;return(i=-1===i.indexOf("_")?0:parseInt(i.substring(i.indexOf("_")+1)))<(a=-1===a.indexOf("_")?0:parseInt(a.substring(a.indexOf("_")+1)))?-1:i>a?1:0}));for(var s=0;s<t.length;s++){var o=t[s];if(e.namespace=o.namespace,e.context=o.context,e.defaultPrevented)break;var r=o.handler.apply(this.element,[e]);if(void 0!==r&&(e.result=r,!1===r)){e.preventDefault(),e.stopPropagation();break}}return e.result}},{key:"fireEvent",value:function(e,t,i){i||(i={bubbles:!0,cancelable:!0,composed:this.isInShadowDOM}),i.detail=t||{};var a=new CustomEvent(e,i);return a.originalStopPropagation=a.stopPropagation,a.stopPropagation=function(){return a.isPropagationStopped=!0,a.originalStopPropagation()},this.dispatchEvent(a),a}},{key:"dispatchEvent",value:function(e){var t=e.type,i=this.element.context;this.element.context=document,this.element["on"+t]?this.element["on"+t](e):this.element.dispatchEvent(e),this.element.context=i}},{key:"listen",value:function(e,t){var i=this,a=e.split("."),n=a.slice(1).join("."),s=a[0];i.events[s]||(i.events[s]=[]);var o={type:s,handler:t,context:i.element,namespace:n};S.indexOf(s)>=0&&(i.inputEvents||(i.inputEvents=new x(i.element)),i.inputEvents[s]((function(e){i.dispatchEvent(e)})),i.inputEvents.boundEventTypes.push(s),i.inputEvents.listen(s)),0===i.events[s].length&&(i.handlers[s]=i.dispatch.bind(i),"wheel"===s?i.element.addEventListener("wheel",i.handlers[s],!!i.isPassiveSupported&&{passive:!1}):i.element.addEventListener(s,i.handlers[s],!1)),i.events[s].push(o)}},{key:"unlisten",value:function(e){var t=e.split("."),i=t.slice(1).join("."),a=t[0],n=this.events[a];if(this.inputEvents&&this.inputEvents.boundEventTypes.indexOf(a)>=0&&(this.inputEvents.boundEventTypes.splice(this.inputEvents.boundEventTypes.indexOf(a),1),0===this.inputEvents.boundEventTypes.length&&this.inputEvents.unlisten(a)),n){for(var s=0;s<n.length;s++){if(""!==i){var o=n.findIndex((function(e){return e.namespace===i}));n.splice(o,1);break}n=[]}0===n.length&&(this.element.removeEventListener(a,this.handlers[a]),this.events[a]=[],delete this.handlers[a])}}},{key:"getAttributeValue",value:function(e,t){var i=this.element.getAttribute(e);if(this.isNativeElement)return this.deserialize(i,t);var a=this.element.propertyByAttributeName[e];return void 0===a.deserialize?this.deserialize(i,t,a.nullable):this.element[a.deserialize](i)}},{key:"setAttributeValue",value:function(e,t,i){var a,n=!1;if(this.isNativeElement){if(a=this.serialize(t,i),"boolean"===i){if(["checked","selected","async","autofocus","autoplay","controls","defer","disabled","hidden","ismap","loop","multiple","open","readonly","required","scoped"].indexOf(e)>=0)return void(t?this.element.setAttribute(e,""):this.element.removeAttribute(e))}}else{var s=this.element.propertyByAttributeName[e];n=!s||s.nullable,a=s&&s.serialize?this.element[s.serialize](t):this.serialize(t,i,n)}"array"!==i&&"object"!==i||"[]"!==a&&"{}"!==a?void 0===a?(this.element.removeAttribute(e),this.element.shadowRoot&&this.element.$.root&&this.element.$.root.removeAttribute(e)):(this.element.setAttribute(e,a),this.element.shadowRoot&&this.element.$.root&&this.element.$.root.setAttribute(e,a)):this.element.removeAttribute(e)}},{key:"serialize",value:function(e,t,i){if(void 0===t&&(t=E.Types.getType(e)),void 0!==e&&(i||null!==e)){if(i&&null===e)return"null";if("string"===t)return e;if("boolean"===t||"bool"===t){if(!0===e||"true"===e||1===e||"1"===e)return"";if(!1===e||"false"===e||0===e||"0"===e)return}if("array"===t)return JSON.stringify(e);return["string","number","int","integer","float","date","any","function"].indexOf(t)>=0?e.toString():"object"===t?JSON.stringify(e):void 0}}},{key:"deserialize",value:function(e,t,i){var a="null"===e;if(void 0!==e&&(!a||i)){if(a&&i)return null;if("boolean"===t||"bool"===t)return null!==e;if("number"===t||"float"===t)return"NaN"===e?NaN:"Infinity"===e?1/0:"-Infinity"===e?-1/0:parseFloat(e);if("int"===t||"integer"===t)return"NaN"===e?NaN:"Infinity"===e?1/0:"-Infinity"===e?-1/0:parseInt(e);if("string"===t)return e;if("any"===t)return e;if("date"===t)return new Date(e);if("function"===t){if("function"==typeof window[e])return window[e]}else if("array"===t||"object"===t)try{var n=JSON.parse(e);if(n)return n}catch(i){if(window[e]&&"object"===c(window[e]))return window[e];if("array"===t&&e.indexOf("[")>=0){if(e.indexOf("{")>=0){var s=e.replace(/{/gi,"").replace("[","").replace("]","").replace(/'/gi,"").replace(/"/gi,"").trim();s=s.split("},");for(var o=0;o<s.length;o++){for(var r={},l=s[o].trim().split(","),d=0;d<l.length;d++){var h=l[d].split(":")[0].trim(),u=l[d].split(":")[1].trim();r[h]=u}s[o]=r}return s}return e.replace("[","").replace("]","").replace(/'/gi,"").replace(/"/gi,"").trim().split(",")}}}}},{key:"isCustomElement",get:function(){return this.element instanceof window[t].BaseElement==!0||"DIV"!==this.element.tagName&&"SPAN"!==this.element.tagName&&"BUTTON"!==this.element.tagName&&"INPUT"!==this.element.tagName&&"UL"!==this.element.tagName&&"LI"!==this.element.tagName&&document.createElement(this.element.nodeName)instanceof window[t].BaseElement==!0}},{key:"isNativeElement",get:function(){return!this.isCustomElement}},{key:"isPassiveSupported",get:function(){var e=this;if(void 0!==e.supportsPassive)return e.supportsPassive;e.supportsPassive=!1;try{var t=Object.defineProperty({},"passive",{get:function(){e.supportsPassive=!0}});window.addEventListener("testPassive",null,t),window.removeEventListener("testPassive",null,t)}catch(e){}return e.supportsPassive}}]),e}(),I=function(){function e(){m(this,e)}return f(e,null,[{key:"Ripple",get:function(){return _}},{key:"Easings",get:function(){return b}}]),e}(),E=function(){function e(){m(this,e)}return f(e,null,[{key:"Extend",value:function(e){return new T(e)}},{key:"Assign",value:function(t,i){if(t.indexOf(".")>=0){var a=t.split(".");return e[a[0]]||(e[a[0]]={}),void(e[a[0]][a[1]]=i)}e[t]=i}},{key:"Types",get:function(){return v}},{key:"Core",get:function(){return y}},{key:"Animation",get:function(){return I}},{key:"Scroll",get:function(){return z}},{key:"InputEvents",get:function(){return x}}]),e}(),H=E.Extend(document);g.cache={};var $=function(i){function a(){return m(this,a),n(this,h(a).apply(this,arguments))}return o(a,i),f(a,[{key:"template",value:function(){return"<div></div>"}},{key:"registered",value:function(){this.onRegistered&&this.onRegistered()}},{key:"created",value:function(){this.isReady=!1,this._initElement(this),this._setModuleState("created"),this.onCreated&&this.onCreated()}},{key:"completed",value:function(){this.isCompleted=!0,this._onCompleted&&this._onCompleted(),this.onCompleted&&this.onCompleted()}},{key:"whenReady",value:function(e){this.isCompleted?e():(this.whenReadyCallbacks||(this.whenReadyCallbacks=[]),this.whenReadyCallbacks.push(e))}},{key:"whenRendered",value:function(e){this.isRendered?e():(this.whenRenderedCallbacks||(this.whenRenderedCallbacks=[]),this.whenRenderedCallbacks.push(e))}},{key:"addThemeClass",value:function(){""!==this.theme&&this.classList.add("smart-"+this.theme)}},{key:"addDefaultClass",value:function(){this.classList.add(t.toLowerCase()+"-element"),this.classList.add(this.nodeName.toLowerCase())}},{key:"_renderShadowRoot",value:function(){if(this.shadowRoot){this.$.root.classList.add(this.nodeName.toLowerCase());for(var e=0;e<this.attributes.length;e++){var t=this.attributes[e];"class"===t.name||"id"===t.name||"style"===t.name||"tabindex"===t.name||t.name.indexOf("aria")>=0||this.$.root.setAttribute(t.name,t.value)}for(var i=0;i<this.classList.length;i++){var a=this.classList[i];"smart-element-init"!==a&&"smart-element"!==a&&"smart-hidden"!==a&&"smart-visibility-hidden"!==a&&this.$.root.classList.add(a)}}}},{key:"render",value:function(){if(!this.isRendered&&(this.isRendered=!0,this.isRendering=!1,this.context=document,this._renderShadowRoot(),this.whenRenderedCallbacks)){for(var e=0;e<this.whenRenderedCallbacks.length;e++)this.whenRenderedCallbacks[e]();this.whenRenderedCallbacks=[]}this.onRender&&this.onRender(),this.disabled&&this.setAttribute("aria-disabled",!0),this.readonly&&this.setAttribute("aria-readonly",!0)}},{key:"ready",value:function(){if(this._setId(),this.addThemeClass(),this.addDefaultClass(),"collapsed"===this.visibility?this.classList.add("smart-hidden"):"hidden"===this.visibility&&this.classList.add("smart-visibility-hidden"),this.dataContext&&this.applyDataContext(),this.onReady&&this.onReady(),this.shadowRoot&&Smart(this._selector)){if(Smart(this._selector).styleUrls)for(var e=Smart(this._selector).styleUrls,t=0;t<e.length;t++)this.importStyle(e[t]);if(Smart(this._selector).styles){var i=document.createElement("style");i.innerHTML=Smart(this._selector).styles,this.shadowRoot.insertBefore(i,this.shadowRoot.firstChild)}}Smart(this._selector)&&Smart(this._selector).ready&&Smart(this._selector).ready()}},{key:"_setId",value:function(){if(!this.id){var e=this.elementName;this.id=e.slice(0,1).toLowerCase()+e.slice(1)+Math.floor(65536*(1+Math.random())).toString(16).substring(1)}}},{key:"checkLicense",value:function(){"Evaluation"===window[t].License&&-1===window.location.hostname.indexOf("htmlelements")&&-1===window.location.hostname.indexOf("localhost")&&-1===window.location.protocol.indexOf("file")&&(this.logWatermark(),this.logLicense(),window[t].License)}},{key:"logWatermark",value:function(){var e=document.createElement("a");e.href="https://www.htmlelements.com/",e.innerHTML="https://www.htmlelements.com/",e.style.position="absolute",e.style.right="5px",e.style.bottom="5px",e.style.color="#fff",e.style.padding="20px",e.style.borderRadius="5px",e.style.background="#20C933",e.style.cursor="pointer",e.style.zIndex="999999",e.style.display="block",e.style.fontSize="24px",e.style.textDecoration="none",e.style.fontWeight="bold",e.style.opacity=0,e.style.transition="opacity .35s ease-in-out",e.id="watermark",document.getElementById("watermark")||setTimeout((function(){document.getElementById("watermark")||(document.body.appendChild(e),setTimeout((function(){e.style.opacity=1})),setTimeout((function(){e.style.opacity=0,setTimeout((function(){e.parentNode.removeChild(e)}),350)}),6e3))}),1e3)}},{key:"logLicense",value:function(){console.log("****************************************************************************************************************"),console.log("****************************************************************************************************************"),console.log("****************************************************************************************************************"),console.log("*Smart HTML Elements License Key Not Found."),console.log("*This is an evaluation only version, it is not licensed for development projects intended for production."),console.log("*if you want to hide the watermark, please send an email to: info@htmlelements.com for a license."),console.log("****************************************************************************************************************"),console.log("****************************************************************************************************************"),console.log("****************************************************************************************************************")}},{key:"applyDataContext",value:function(e){var t=this,i="string"==typeof t.dataContext?window[t.dataContext]||document[t.dataContext]:t.dataContext;if(e&&(i=e,t.dataContext=e),i){if(!i._uid){i._uid=(Date.now().toString(36)+Math.random().toString(36).substr(2,5)).toUpperCase(),i._properties=[];var a=function(e){var a=i[e];if("function"==typeof a||"_properties"===e||"_uid"===e)return"continue";i._properties[e]=a,Object.defineProperty(i,e,{configurable:!1,enumerable:!0,get:function(){return i._properties[e]},set:function(a){var n=i._properties[e];i._properties[e]=a;var s=[];s[e]={oldValue:n,value:a},s.length++,t.updatingDataContext=!0,H.fireEvent("dataContextPropertyChanged",{dataContext:i,properties:s},{bubbles:!1,cancelable:!0}),t.updatingDataContext=!1}})};for(var n in i)a(n)}if(t.dataContextProperties=t.parseAttributes(t),t.dataContextPropertiesMap={},t.dataContextListeners={},t.dataContextProperties){for(var s in t.updatingDataContext=!0,t.dataContextProperties){var o=t.dataContextProperties[s],r=o.name;if(o.propertyName=s,t.dataContextPropertiesMap[r]=s,g.cache["toDash"+s]||(g.cache["toDash"+s]=E.Core.toDash(r)),o.isEvent&&function(){var e=o.value;t.dataContextListeners[r]&&t.removeEventListener(r,t.dataContextListeners[r]),t.dataContextListeners[r]=function(t){i[e](t)},t.addEventListener(r,t.dataContextListeners[r])}(),r.indexOf(".")>=0){for(var l=r.split("."),d=i[l[0]],h=1;h<l.length;h++)d=d[l[h]];void 0!==d&&(t[s]=d)}else t[s]=i[r]}t.dataContextPropertyChangedHandler=function(e){var i=e.detail.properties;if(e.detail.dataContext===("string"==typeof t.dataContext?window[t.dataContext]||document[t.dataContext]:t.dataContext))for(var a in i){var n=t.dataContextPropertiesMap[a],s=t.context;n&&(t.context=document,t[n]=i[a].value,t.context=s)}},H.listen("dataContextPropertyChanged",t.dataContextPropertyChangedHandler),t.updatingDataContext=!1}else t.dataContextProperties=null}else{t.dataContextProperties=null;window.addEventListener("load",(function e(){("string"==typeof t.dataContext?window[t.dataContext]||document[t.dataContext]:t.dataContext)&&(t.applyDataContext(),window.removeEventListener("load",e))}))}}},{key:"updateDataContextProperty",value:function(e){var t="string"==typeof this.dataContext?window[this.dataContext]||document[this.dataContext]:this.dataContext,i=this.dataContextProperties[e];if(!this.updatingDataContext&&i.twoWay){var a=i.name;if(a.indexOf(".")>=0){for(var n=a.split("."),s=t[n[0]],o=1;o<n.length;o++)s=s[n[o]];void 0!==s&&(s=this[e],k[t._uid]&&(k[t._uid][e]=s))}else t[a]=this[e],k[t._uid]&&(k[t._uid][e]=t[a])}}},{key:"initProperties",value:function(){var e=this;if(Smart(e._selector)&&Smart(e._selector).properties&&(e._initProperties=Smart(e._selector).properties),e.hasAttribute("props")&&!e.props?e._initProperties=window[e.getAttribute("props")]:e.props&&(e._initProperties=e.props),e._initProperties)for(var t=Object.keys(e._initProperties),i=0;i<t.length;i++){var a=t[i],n=e._initProperties[a];if(n.constructor===Smart.ObservableArray||n instanceof Smart.ObservableArray)e[a]=n.toArray();else if(n.constructor===Smart.DataAdapter||"smartDataAdapter"===n.constructor.name||"object"===c(n)&&Smart.DataAdapter&&n instanceof Smart.DataAdapter||n instanceof Smart.Observable||n.constructor===Smart.Observable||"object"!==c(n)||E.Types.isArray(n)){if(void 0===e[a]&&-1===["onReady","onAttached","onDetached","onCreated","onCompleted"].indexOf(a)){var s=e.localize("propertyUnknownName",{name:a});e.log(s)}e[a]=n}else"messages"!==a?"object"===c(n)&&function t(i,a){for(var n=Object.keys(i),s=0;s<n.length;s++){var o=n[s],r=i[o],l=e._properties[a+"_"+o];if(l&&null===l.value){if(void 0===e[a+"_"+o]){var d=e.localize("propertyUnknownName",{name:a+"_"+o});e.log(d)}e[a+"_"+o]=r}else if("object"===c(r)&&!E.Types.isArray(r)&&r&&r.constructor!==Date)t(r,a+"_"+o);else{if(void 0===e[a+"_"+o]){var h=e.localize("propertyUnknownName",{name:a+"_"+o});e.log(h)}e[a+"_"+o]=r}}}(n,a):e[a]=n}}},{key:"setup",value:function(){var e=this;if(e.context=this,!e.isReady||e.isCompleted){if(e.isReady)return e._setModuleState("attached"),e.isAttached=!0,e.attached(),e._handleListeners("listen"),void(e.context=document);e.ownerElement&&e.ownerElement.detachedChildren.indexOf(e)>=0&&e.ownerElement.detachedChildren.splice(e.ownerElement.detachedChildren.indexOf(e),1),e.isReady=!0,e.methods=e.getStaticMember("methods"),e.initProperties(),y.isMobile&&e.classList.add("smart-mobile");for(var t=0;t<e.attributes.length;t+=1){var i=e.propertyByAttributeName[e.attributes[t].name];if(i){var a=e.$.getAttributeValue(i.attributeName,i.type),n=a?a.toString():"";if(!(n.indexOf("{{")>=0||n.indexOf("[[")>=0||"object"!==i.type&&"array"!==i.type&&(e.attributes[t].value.indexOf("{{")>=0||e.attributes[t].value.indexOf("[[")>=0)||void 0===a||i.value===a)){var s=E.Types.getType(a),o=e.attributes[t].value;if(("any"===i.type||"object"===i.type)&&""+e[i.name]===a)continue;if("array"===i.type&&e[i.name]&&JSON.stringify(e[i.name])===a)continue;if("number"===s&&isNaN(a)&&"NaN"!==o&&"Infinity"!==o&&"-Infinity"!==o){var r=e.localize("propertyInvalidValueType",{name:i.name,actualType:"string",type:i.type});e.log(r)}i.isUpdatingFromAttribute=!0,e[i.name]=a,i.isUpdatingFromAttribute=!1}}}for(var l in e._properties){var d=e._properties[l];if("innerHTML"===l&&d.value===d.defaultValue&&(d.value=d.defaultValue=E.Core.html(e)),"boolean"!==d.type&&"bool"!==d.type||"false"===e.getAttribute(d.attributeName)&&(d.isUpdating=!0,e.setAttribute(d.attributeName,""),d.isUpdating=!1),d.defaultReflectToAttribute&&d.reflectToAttribute){if(d.defaultReflectToAttribute&&d.defaultReflectToAttributeConditions){for(var h=!0,u=0;u<d.defaultReflectToAttributeConditions.length;u++){var c=d.defaultReflectToAttributeConditions[u],m=void 0,p=void 0;for(var f in c)m=f,p=c[f];e._properties[m]&&e._properties[m].value!==p&&(h=!1)}if(!h)continue}d.isUpdating=!0,e.$.setAttributeValue(d.attributeName,d.value,d.type),d.isUpdating=!1}}var g=[];if(e.children.length>0)for(var v=0;v<e.children.length;v++){var _=e.children[v];E.Extend(_).isCustomElement&&g.push(_)}e.applyTemplate(),e.complete=function(){if(!e.templateBindingsReady){var t=function(e){e.templateBindingsReady||(e.templateBindingsReady=!0,e.updateTextNodes(),e.updateBoundNodes())};if(e.ownerElement){for(var i=e.ownerElement,a=[];i;)a.push(i),i=i.ownerElement;for(var n=a.length-1;n>=0;n--)t(a[n]);t(e)}else t(e)}var s=function(){if(e._setModuleState("ready"),e.ready(),"auto"!==e.renderMode||e.isRendered||e.render(),e.isAttached=!0,e._setModuleState("attached"),e.attached(),e._handleListeners("listen"),e.isHidden||0!==e.offsetWidth&&0!==e.offsetHeight||(e.isHidden=!0),e.completed(),e.isRendered&&(e.context=document),e.whenReadyCallbacks){for(var t=0;t<e.whenReadyCallbacks.length;t++)e.whenReadyCallbacks[t]();e.whenReadyCallbacks=[]}};if(e.wait)e.classList.add("smart-visibility-hidden");else if(e.classList.contains("smart-async"))requestAnimationFrame((function(){s()}));else{var o=e.shadowParent;e.shadowParent=null;var r=e.parents;if(e.shadowParent=o,0===r.length)return;var l=function(){for(var t=e.ownerElement,i=[];t;)i.push(t),t=t.ownerElement;for(var a=i.length-1;a>=0;a--)i[a].updateBoundMappedNodes()};e.ownerElement&&"HTML"!==r[r.length-1].nodeName?e.ownerElement&&"HTML"===e.ownerElement.parents[e.ownerElement.parents.length-1].nodeName?(l(),s()):e.checkIsInDomInterval=setInterval((function(){var t=e.parents;"HTML"===t[t.length-1].nodeName&&(clearInterval(e.checkIsInDomInterval),l(),s())}),100):s()}};var b=[].slice.call(e.querySelectorAll("[smart-id]")).concat(g);if(e.enableShadowDOM&&!0!==e.isInShadowDOM&&(b=[].slice.call(e.shadowRoot.querySelectorAll("[smart-id]")).concat(g)),0===b.length)e.complete();else{e._completeListeners=0;for(var w=function(t){var i=b[t];if(E.Extend(i).isCustomElement){var a=function(){e._completeListeners--,0===e._completeListeners&&(e.complete(),delete e._completeListeners)}.bind(e);i.isCompleted||i.isUtilityElement||!1!==i.wait||(e._completeListeners++,i._onCompleted||(i.completeHandlers=[],i._onCompleted=function(){for(var e=0;e<i.completeHandlers.length;e++)i.completeHandlers[e]()}),i.completeHandlers.push(a))}},D=0;D<b.length;D++)w(D);0===e._completeListeners&&e.complete()}}}},{key:"visibilityChangedHandler",value:function(){var e=this;e.isReady&&requestAnimationFrame((function(){0===e.offsetWidth||0===e.offsetHeight?e.isHidden=!0:(e.isHidden=!1,e.$.fireEvent("resize",e,{bubbles:!1,cancelable:!0}))}))}},{key:"attributeChangedCallback",value:function(e,t,i){var a=this.propertyByAttributeName[e];if("class"!==e&&"style"!==e||this.visibilityChangedHandler(),a||this.attributeChanged(e,t,i),!(!a||a&&a.isUpdating)){var n=this.$.getAttributeValue(a.attributeName,a.type);void 0!==i&&this[a.name]!==n&&(a.isUpdatingFromAttribute=!0,this[a.name]=void 0!==n?n:this._properties[a.name].defaultValue,a.isUpdatingFromAttribute=!1)}}},{key:"attributeChanged",value:function(e,t,i){}},{key:"attached",value:function(){this.hasStyleObserver&&D.watch(this),this.onAttached&&this.onAttached(),Smart(this._selector)&&Smart(this._selector).attached&&Smart(this._selector).attached()}},{key:"detached",value:function(){this.hasStyleObserver&&D.unwatch(this),this._setModuleState("detached"),this.isAttached=!1,this.ownerElement&&-1===this.ownerElement.detachedChildren.indexOf(this)&&this.ownerElement.detachedChildren.push(this),this._handleListeners("unlisten"),this.onDetached&&this.onDetached(),Smart(this._selector)&&Smart(this._selector).detached&&Smart(this._selector).detached()}},{key:"propertyChangedHandler",value:function(e,t,i){t!==i&&("theme"===e&&(""!==t&&this.classList.remove("smart-"+t),""!==i&&this.classList.add("smart-"+i)),"visibility"===e?("collapsed"===t?this.classList.remove("smart-hidden"):"hidden"===t&&this.classList.remove("smart-visibility-hidden"),"collapsed"===i?this.classList.add("smart-hidden"):"hidden"===i&&this.classList.add("smart-visibility-hidden")):"disabled"!==e&&"readonly"!==e||(i?this.setAttribute("aria-"+e,!0):this.removeAttribute("aria-"+e)),this.propertyChanged&&this.propertyChanged(e,t,i))}},{key:"_handleListeners",value:function(e){var t=this,i=t.tagName.toLowerCase(),a=function(a){var n=function(n){var s=n.split("."),o=s[0],r=t.$;if(s[1])if(o=s[1],r=t["$"+s[0]],"document"===s[0]){var l=t.smartId;""===l&&(l=E.Core.toCamelCase(i)),o=o+"."+l}else t.smartId&&(o=o+"."+t.smartId+"_"+t.parents.length);else t.smartId&&(o=o+"."+t.smartId);var d=a[n];if(!r)return"continue";r[e](o,(function(e){var i=t.context;t.context=t,t[d]&&t[d].apply(t,[e]),t.context=i}))};for(var s in a)n(s)};a(t.getStaticMember("listeners")),a(t.templateListeners),Smart(t._selector)&&Smart(t._selector).properties&&a(Smart(t._selector).listeners)}},{key:"parseTemplate",value:function(){var t=this.template(),i=document.createDocumentFragment();if(e[this.nodeName]&&!l)return e[this.nodeName].cloneNode(!0);if(""===t)return null;var a=document.createElement("div");i.appendChild(a),a.innerHTML=t;var n=a.childNodes;a.parentNode.removeChild(a);for(var s=0;s<n.length;s++)i.appendChild(n[s]);return e[this.nodeName]=i,l?i:i.cloneNode(!0)}},{key:"applyTemplate",value:function(){var e=this,t=e.parseTemplate();if(t&&t.hasChildNodes){var i=t.childNodes[0],a=function(t,i){e["$"+t]=i.$=E.Extend(i),e.$[t]=i,i.ownerElement=e},n=i;if(i.getElementsByTagName("content").length>0){var s=i.getElementsByTagName("content")[0];(n=s.parentNode).removeChild(s)}else{var o=t.querySelectorAll("[inner-h-t-m-l]");o&&o.length>0&&(n=o[0])}e.$.template="template"===i.nodeName.toLowerCase()?i:i.querySelector("template");var r=t.querySelectorAll("[id]");0===r.length&&(r=t.querySelectorAll("*")),a("root",i),a("content",n),e.$.html=e.innerHTML.toString().trim();for(var l=0;l<r.length;l+=1){var d=r[l];""===d.id&&(d.id="child"+l),a(d.id,d),d.setAttribute("smart-id",d.id),e.shadowRoot?d.shadowParent=e:d.removeAttribute("id")}for(!1!==e.hasTemplateBindings?e.bindings=e.getBindings(t):e.bindings=[],e.$root.addClass("smart-container");e.childNodes.length;)n.appendChild(e.firstChild);if(e.appendTemplate(t),e.$.template){var h=document.createElement("div");h.classList.add("smart-template-container"),e.$.templateContainer=h,e.$.template.parentNode.insertBefore(h,e.$.template),e.refreshTemplate()}}}},{key:"refreshTemplate",value:function(){var e=this;if(e.$.templateContainer){e.templateDetached(e.$.templateContainer);var t=e.$.template.content.cloneNode(!0);e.templateBindings=e.getBindings(t),e.templateProperties=[];var i=document.createDocumentFragment();!function t(i,a,n){for(var s in i){var o=i[s],r=o.node.cloneNode();a.appendChild(r);var l=[],d=!1;if(o.data)for(var h in o.data){var u=o.data[h],c=u.name;if(e.templateProperties[c]=!0,r.removeAttribute(E.Core.toDash(h)),"*items"===h)l=e[c],d=!0;else if(c.indexOf("item.")>=0&&void 0!==n)u.value=n[c.substring("item.".length)],r[h]=u.value;else if(c.indexOf("item")>=0&&void 0!==n)u.value=n,r[h]=u.value;else if("*if"===h)if(c.indexOf("(")>=0){var m=c.substring(c.indexOf("(")),p=void 0,f=c.substring(0,c.indexOf("("));if((m=(m=(m=m.substring(1,m.length-1)).replace(/ /gi,"")).split(",")).length>0&&""!==m[0]){for(var g=[],v=0;v<m.length;v++)g.push(e[m[v]]);p=e[f].apply(e,g)}else p=e[f]();!1===p&&a.removeChild(r)}else e[c]||a.removeChild(r);else e.updateBoundNode(r,o,e,c)}if(l.length>0||d){for(var _=0;_<l.length;_++)o.children&&t(o.children,r,l[_]);if("number"==typeof l)for(var b=0;b<l;b++)o.children&&t(o.children,r,b)}else o.children&&t(o.children,r,n)}}(e.templateBindings.children,i),e.$.templateContainer.innerHTML="",e.$.templateContainer.appendChild(i),e.templateAttached(e.$.templateContainer)}}},{key:"templateAttached",value:function(){}},{key:"templateDetached",value:function(){}},{key:"appendTemplate",value:function(e){this.appendChild(e)}},{key:"defineElementModules",value:function(){var e=this.constructor.prototype;if("BaseElement"===e.elementName){e.modules=this.constructor.modules;for(var t=e.modules,i=0;i<t.length;i+=1)this.addModule(t[i])}else for(var a=e.modules,n=0;n<a.length;n+=1){var s=a[n],o=s.prototype;this.defineElementMethods(o.methodNames,o),this.defineElementProperties(s.properties)}}},{key:"watch",value:function(e,t){this._watch=null!==e&&null!==t?{properties:e,propertyChangedCallback:t}:null}},{key:"unwatch",value:function(){this._watch=null}},{key:"set",value:function(e,t,i){var a=this.context;this.context=!0===i?document:this,this[e]=t,this.context=a}},{key:"get",value:function(e){return this[e]}},{key:"_setModuleState",value:function(e,t){for(var i="is"+e.substring(0,1).toUpperCase()+e.substring(1),a="on"+e.substring(0,1).toUpperCase()+e.substring(1),n=0;n<this.modulesList.length;n++){var s=this.modulesList[n];s[i]=!0,s[e]&&s[e](t),s[a]&&s[a](t)}}},{key:"addModule",value:function(e,t){if(e){var i=this.modules.slice(0),a=e.prototype,n=Object.getPrototypeOf(e);if(n.name&&n.name!==e.name&&this.addModule(n),!e.moduleName&&e.name&&(e.moduleName=e.name),-1===i.findIndex((function(t){return e.moduleName===t.moduleName}))&&i.push(e),this.defineModule(e),this.defineElementMethods(a.methodNames,a),this.defineElementProperties(e.properties),this.constructor.prototype.modules=i,t)for(var s in Smart.Elements.tagNames){for(var o=Smart.Elements.tagNames[s],r=Object.getPrototypeOf(o),l=[];r!==HTMLElement;)l.push(r.prototype),r=Object.getPrototypeOf(r);l.indexOf(this)>=0&&o!==this&&o.prototype.addModule(e)}}}},{key:"defineModule",value:function(e){if(!e.isDefined){e.prototype._initModule=function(e){this.ownerElement=e};var t=e.properties||{},i=Object.keys(t),a=Object.getOwnPropertyNames(e.prototype);e.prototype.methodNames=a;for(var n=function(a){var n=i[a],s=t[n];Object.defineProperty(e.prototype,n,{configurable:!1,enumerable:!0,get:function(){return this.ownerElement?this.ownerElement[n]:s.value},set:function(e){this.ownerElement[n]=e}})},s=0;s<i.length;s+=1)n(s);e.isDefined=!0}}},{key:"getStaticMember",value:function(e,i){var a=window[t][this.elementName],n=a[e];i||(i="");for(var s="array"===i?[]:"string"===i?"":{},o=Object.getPrototypeOf(a),r=[];o[e];)r.push(o[e]),o=Object.getPrototypeOf(o);for(var l=r.length-1;l>=0;l--)if("array"===i)for(var d=0;d<r[l].length;d++)-1===s.indexOf(r[l][d])&&s.push(r[l][d]);else"string"===i?-1===s.indexOf(r[l])&&(s+=r[l]):s=E.Core.assign(s,r[l]);if("array"===i){for(var h=0;h<n.length;h++)-1===s.indexOf(n[h])&&s.push(n[h]);return s}return"string"===i?(-1===s.indexOf(n)&&(s+=n),s):E.Core.assign(s,n)}},{key:"defineElementHierarchicalProperties",value:function(e,t){var i=[];!function(e){for(var a=Object.keys(e),n=0;n<a.length;n++){var s=a[n];if("messages"!==s){var o=e[s],r=Object.keys(o),l=r.indexOf("value")>=0&&r.indexOf("type")>=0&&"object"===c(o.value);("propertyObject"===o.type||l)&&function e(a,n){if(a.value){var s=Object.keys(a.value),o=function(o){var r=s[o],l=a.value[r],d=n+"_"+r;if("object"!==c(l)||null===l)return"break";var h=Object.keys(l);if(!(h.indexOf("value")>=0&&h.indexOf("type")>=0))return"break";if("array"!==a.type&&(a.isHierarchicalProperty=!0),l.parentPropertyName=n,t){var u=t._properties[d];if(a.value.hasOwnProperty(r)){if(u.isDefined)return"continue";delete a.value[r]}u.isDefined=!0,Object.defineProperty(a.value,r,{configurable:!1,enumerable:!0,get:function(){return t._properties[d].value},set:function(e){t.updateProperty(t,t._properties[d],e)}})}i[d]||(i[d]=l,i.length++),("propertyObject"===l.type||"object"===c(l.value)&&"array"!==l.type)&&e(t?t._properties[d]:l,d)};e:for(var r=0;r<s.length;r++)switch(o(r)){case"break":break e;case"continue":continue}}}(o,s)}}}(e),i.length>0&&!t&&this.defineElementProperties(i)}},{key:"defineElement",value:function(){var e=this.constructor.prototype,t=this.getStaticMember("properties"),i=Object.getOwnPropertyNames(e);e.extendedProperties={},e.boundProperties={},e.templateListeners={},this.defineElementModules(),this.defineElementMethods(i,e),this.defineElementProperties(t),this.defineElementHierarchicalProperties(this.extendedProperties),e._initElement=function(){var t=this,i=e.extendedProperties,a=Object.keys(i),n=t.modules;t.$=E.Extend(t),t.$document=H,t.smartId=(Date.now().toString(36)+Math.random().toString(36).substr(2,5)).toUpperCase(),t.isCreated||(t.modulesList=[],t._properties=[],t._beforeCreatedProperties&&(t._properties=t._beforeCreatedProperties,delete t._beforeCreatedProperties),t.detachedChildren=[],t.propertyByAttributeName=[]);for(var s=0;s<n.length;s+=1){var o=new(0,n[s]);o._initModule(t),t.modulesList.push(o)}for(var r=function(e){var n=a[e],s=i[n],o=s.value;if(t._properties[n]){if(void 0!==t._properties[n].notify)return"continue";delete t._properties[n]}if(A&&"innerHTML"===n&&delete t[n],-1===window.navigator.userAgent.indexOf("PhantomJS")&&t.hasOwnProperty(n)&&(o=t[n],delete t[n]),"array"===s.type&&null!=o&&(o=o.slice(0)),"object"===s.type&&null!=o&&(o=Array.isArray(o)?o.slice(0):Object.assign({},o)),t._properties[n]={name:n,notify:s.notify,allowedValues:s.allowedValues,type:s.type,nullable:s.nullable,reflectToAttribute:s.reflectToAttribute,defaultReflectToAttribute:s.defaultReflectToAttribute,defaultReflectToAttributeConditions:s.defaultReflectToAttributeConditions,value:o,readOnly:s.readOnly,defaultValue:o,attributeName:s.attributeName,observer:s.observer,inherit:s.inherit,extend:s.extend,validator:s.validator},t.propertyByAttributeName[s.attributeName]=t._properties[n],!s.hasOwnProperty("type")){var r=t.localize("propertyUnknownType",{name:n});t.log(r)}if("any"===s.type||"propertyObject"===s.type)return"continue";var l=E.Types.getType(o);if(null!=o&&s.type!==l&&!s.validator){if("object"===s.type&&"array"===l)return"continue";if("number"===l){if(["integer","int","float"].findIndex((function(e){return e===s.type}))>=0)return"continue"}var d=t.localize("propertyInvalidValueType",{name:n,actualType:l,type:s.type});t.log(d)}},l=0;l<a.length;l+=1)r(l);t.defineElementHierarchicalProperties(t._properties,t),t.isCreated=!0},e.registered()}},{key:"defineElementMethods",value:function(e,t){var i=this.constructor.prototype,a=["constructor","ready","created","render","attached","detached","appendChild","insertBefore","removeChild","connect","disconnectedCallback","connectedCallback","attributeChangedCallback","propertyChangedHandler","enableShadowDOM","isInShadowDOM"],n=function(n){var s=e[n];return s.startsWith("_")||void 0!==a.find((function(e){return e===s}))?"continue":i.extendedProperties[s]?"continue":E.Types.isFunction(t[s])?void(i[s]=function(e,t){var i=Array.prototype.slice.call(arguments,2),a=function(){if(!this.isReady&&"localize"!==t&&"localize"!==t&&"cloneNode"!==t&&"importStyle"!==t&&"log"!==t&&"parseAttributes"!==t){var a=this.localize("elementNotInDOM");this.log(a)}for(var n=this,s=0;s<this.modulesList.length;s++){var o=this.modulesList[s];if(t in o){n=o;break}}var r=this.context,l=i.concat(Array.prototype.slice.call(arguments)),d=null,h=function(e,t){return e===t||("number"===e&&("int"===t||"integer"===t||"float"===t)||("bool"===e&&"boolean"===t||"boolean"===e&&"bool"===t||("object"===e&&"any"===t||void 0)))};if(this.methods){var u=this.methods[t];if(u){var c=u.split(":");d=c[c.length-1].trim();for(var m=u.substring(1+u.indexOf("("),u.lastIndexOf(")")),p=[],f=m.split(","),g="",v=0;v<f.length;v++){var _=f[v];g+=_,_.indexOf(":")>=0?(p.push(g),g=""):g+=","}for(var b=p.length,y=0;y<p.length;y++){var w=p[y].trim(),D=w.split(":"),k=D[0].split("=")[0].trim(),C=k.indexOf("?")>=0,S=D[1].indexOf("?")>=0,x=D[1].replace(/\?/gi,"").trim(),z=x.split("|"),T=D[0].split("=")[1],I=E.Types.getType(l[y]);if(void 0===l[y]&&T){switch(T=T.trim(),x[0]){case"date":var H=T.substring(T.indexOf("(")+1,T.lastIndexOf(")"));T=0===(H=H.length>0?H.split(",").map((function(e){return parseInt(e)})):[]).length?new Date:new Date(H[0],H[1],H[2]);break;case"bool":case"boolean":T="true"===T||"1"===T;break;case"int":case"integer":T=parseInt(T);break;case"float":case"number":T=parseFloat(T);break;case"any":case"object":T=T.indexOf("{")>=0?JSON.parse(T):T}l.push(T)}else C&&b--;if(x!==I&&I){for(var $=!0,B=0;B<z.length;B++)if(h(I,z[B])){$=!1;break}if($&&(null!==l[y]||!S)){var L=this.localize("methodInvalidValueType",{name:t,actualType:I,type:x,argumentIndex:y});this.log(L)}}if(l.length<b){var P=this.localize("methodInvalidArgumentsCount",{name:t,actualArgumentsCount:l.length,argumentsCount:b});this.log(P)}}}}this.context=this;var A=e.apply(n,l);if(d){var O=void 0===E.Types.getType(A)?"void":E.Types.getType(A);if(!h(O,d)){var M=this.localize("methodInvalidReturnType",{name:t,actualType:O,type:d});this.log(M)}}return this.context=r,A};return a}(t[s],s)):"continue"};for(var s in e)n(s)}},{key:"defineElementProperties",value:function(e){if(e){var t=this.constructor.prototype,i=Object.keys(e),a=this.getStaticMember("properties");Object.assign(t.extendedProperties,e),this.updateProperty=function(e,t,i){var a=e;if(t&&!t.readOnly){if(t.allowedValues){for(var n=!1,s=0;s<t.allowedValues.length;s++)if(t.allowedValues[s]===i){n=!0;break}if(!n){var o=JSON.stringify(t.allowedValues).replace(/\[|\]/gi,"").replace(",",", ").replace(/"/gi,"'"),r="'"+i+"'",l=a.localize("propertyInvalidValue",{name:t.name,actualValue:r,value:o});return void a.log(l)}}var d=t.name,h=a._properties[d].value;if(t.validator&&a[t.validator]){var u=a.context;a.context=a;var m=a[t.validator](h,i);void 0!==m&&(i=m),a.context=u}if(h!==i){if(a.propertyChanging){var p=a.propertyChanging(d,h,i);if(!1===p||null===p)return}if(!t.hasOwnProperty("type")){var f=a.localize("propertyUnknownType",{name:d});a.log(f)}if("array"!==t.type||JSON.stringify(h)!==JSON.stringify(i)){if(null!=i&&"any"!==t.type&&"propertyObject"!==t.type&&t.type!==E.Types.getType(i)&&!t.validator||null===i&&!t.nullable){var g=!0;if("object"===t.type&&"array"===E.Types.getType(i)&&(g=!1),"number"===E.Types.getType(i)){["integer","int","float"].findIndex((function(e){return e===t.type}))>=0&&(g=!1)}if(g){var v=a.localize("propertyInvalidValueType",{name:d,actualType:E.Types.getType(i),type:t.type});return void a.error(v)}}if(t.isUpdating=!0,t.isHierarchicalProperty){!function e(t,i){for(var n=Object.keys(t),s=0;s<n.length;s++){var o=n[s],r=t[o];"object"===c(r)&&!E.Types.isArray(r)&&r&&r.constructor!==Date?e(r,i+"_"+o):a[i+"_"+o]=r}}(i,d)}else a._properties[d].value=i;if(!t.isUpdatingFromAttribute&&t.reflectToAttribute&&a.$.setAttributeValue(t.attributeName,i,t.type),a.isReady&&(!a.ownerElement||a.ownerElement&&a.ownerElement.isReady)){if("wait"===d&&(i||!h||a.isCompleted||(a.classList.remove("smart-visibility-hidden"),a.ownerElement&&a.ownerElement.updateBoundMappedNodes(),a.updateBoundMappedNodes(),a.complete())),"renderMode"===d)return;if(a.context!==a&&!a.wait){var _=a.context;a.context=a,a.propertyChangedHandler(d,h,i),a.context=_,t.observer&&a[t.observer]&&(a.context=a,a[t.observer](h,i),a.context=document),a._watch&&a._watch.properties.indexOf(d)>=0&&a._watch.propertyChangedCallback(d,h,i)}var b=t.notify||a.boundProperties[d];b&&(a.$.fireEvent(t.attributeName+"-changed",{context:a.context,oldValue:h,value:a[d]}),a.boundProperties[d]&&a.updateBoundNodes(d)),b&&a.templateProperties&&a.templateProperties[d]&&a.refreshTemplate(),a.dataContextProperties&&("dataContext"===d?a.applyDataContext():a.dataContextProperties[d]&&a.updateDataContextProperty(d))}t.isUpdating=!1}}}};for(var n=function(n){var s=i[n],o=e[s],r=E.Core.toDash(s),l=o.type||"any",d=l.indexOf("?")>=0||"any"===l;if(d&&"any"!==l&&(o.type=l.substring(0,l.length-1)),o.nullable=d,o.attributeName=r.toLowerCase(),o.name=s,o.reflectToAttribute=void 0===o.reflectToAttribute||o.reflectToAttribute,o.inherit&&a[s]&&(o.value=a[s].value),o.extend&&a[s]&&E.Core.assign(o.value,a[s].value),t.hasOwnProperty(s))return"continue";Object.defineProperty(t,s,{configurable:!1,enumerable:!0,get:function(){if(this._properties[s])return this._properties[s].value},set:function(e){this.updateProperty(this,this._properties[s],e)}})},s=0;s<i.length;s+=1)n(s)}}},{key:"classNamesMap",get:function(){return{animation:"smart-animate",rippleAnimation:"smart-ripple"}}},{key:"hasAnimation",get:function(){return"none"!==this.animation}},{key:"hasRippleAnimation",get:function(){return"none"!==this.animation&&"advanced"===this.animation}},{key:"properties",get:function(){return this._properties||(this._properties=[]),this._properties}},{key:"parents",get:function(){for(var e=[],i=this.parentNode;i&&9!==i.nodeType;)i instanceof HTMLElement==!0&&e.push(i),i=i.parentNode;return window[t].EnableShadowDOM&&this.isInShadowDOM&&this.shadowParent&&(e=e.concat(this.shadowParent.parents)),e}},{key:"focused",get:function(){return this.contains(document.activeElement)}},{key:"_selector",get:function(){return this.id?"#"+this.id:this.classList.length>0?"."+this.classList[0]:void 0}},{key:"hasStyleObserver",set:function(e){void 0===this._hasStyleObserver&&(this._hasStyleObserver=e),e?D.watch(this):D.unwatch(this)},get:function(){return void 0===this._hasStyleObserver||this._hasStyleObserver}}],[{key:"properties",get:function(){return{animation:{value:"advanced",type:"string",allowedValues:["none","simple","advanced"]},unfocusable:{value:!1,type:"boolean"},disabled:{value:!1,type:"boolean"},dataContext:{value:null,reflectToAttribute:!1,type:"any"},messages:{value:{en:{propertyUnknownName:"Invalid property name: '{{name}}'!",propertyUnknownType:"'{{name}}' property is with undefined 'type' member!",propertyInvalidValue:"Invalid '{{name}}' property value! Actual value: '{{actualValue}}', Expected value: '{{value}}'!",propertyInvalidValueType:"Invalid '{{name}}' property value type! Actual type: '{{actualType}}', Expected type: '{{type}}'!",methodInvalidValueType:"Invalid '{{name}}' method argument value type! Actual type: '{{actualType}}', Expected type: '{{type}}' for argument with index: '{{argumentIndex}}'!",methodInvalidArgumentsCount:"Invalid '{{name}}' method arguments count! Actual arguments count: '{{actualArgumentsCount}}', Expected at least: '{{argumentsCount}}' argument(s)!",methodInvalidReturnType:"Invalid '{{name}}' method return type! Actual type: '{{actualType}}', Expected type: '{{type}}'!",elementNotInDOM:"Element does not exist in DOM! Please, add the element to the DOM, before invoking a method.",moduleUndefined:"Module is undefined.",missingReference:"{{elementType}}: Missing reference to '{{files}}'.",htmlTemplateNotSuported:"{{elementType}}: Web Browser doesn't support HTMLTemplate elements.",invalidTemplate:"{{elementType}}: '{{property}}' property accepts a string that must match the id of an HTMLTemplate element from the DOM."}},reflectToAttribute:!1,type:"object"},props:{value:null,reflectToAttribute:!1,isHierarchicalProperty:!0,type:"any"},readonly:{value:!1,type:"boolean"},renderMode:{value:"auto",type:"string",reflectToAttribute:!1,allowedValues:["auto","manual"]},rightToLeft:{value:!1,type:"boolean"},theme:{value:window[t].Theme,type:"string"},visibility:{value:"visible",allowedValues:["visible","collapsed","hidden"],type:"string"},wait:{value:!1,type:"boolean"}}}},{key:"requires",get:function(){return{}}},{key:"listeners",get:function(){return{"theme-changed":function(e){this.theme=e.detail.newValue}}}},{key:"methods",get:function(){return{}}},{key:"modules",get:function(){return window[t].Modules}},{key:"version",get:function(){return window[t].Version}}]),a}(r(HTMLElement)),B=[],L=[],P=[],A=!1,O=navigator.userAgent.match(/Chrom(e|ium)\/([0-9]+)\./);O&&(parseInt(O[2],10)<=50&&(A=!0));document.addEventListener("readystatechange",(function e(){if("complete"===document.readyState){P.sort((function(e,t){var i=e.element.parents.length,a=t.element.parents.length;return i<a?-1:i>a?1:0}));for(var t=0;t<P.length;t++)P[t].element.isLoading=!1,P[t].callback();P=[],document.removeEventListener("readystatechange",e)}}));var M=function(e){function i(e,t){var a;m(this,i);var o=s(a=n(this,h(i).call(this)));if(e){t&&(o._initProperties=t);var r=function(e){if("string"==typeof e?document.querySelector(e):e){var i="string"==typeof e?document.querySelector(e):e;if(i instanceof HTMLDivElement){var a=document.createElement(o.tagName),n=!0,s=!1,r=void 0;try{for(var l,d=i.attributes[Symbol.iterator]();!(n=(l=d.next()).done);n=!0){var h=l.value;a.setAttribute(h.name,i.getAttribute(h.name))}}catch(e){s=!0,r=e}finally{try{n||null==d.return||d.return()}finally{if(s)throw r}}for(;i.childNodes.length;)a.appendChild(i.firstChild);return"string"==typeof e&&(a.id=e.substring(1)),a._initProperties=t,i.parentNode&&i.parentNode.replaceChild(a,i),a}if(t){var u=i.context;if(i._initProperties=t,i.isReady){i.context=i;var c={},m={};for(var p in t)c[p]=i[p],m[p]=t[p];Object.getOwnPropertyNames(t).length>0&&(i.initProperties(),i.propertyChangedHandler(t,c,m)),i.context=u}}return i}};if("string"==typeof e){var l=document.querySelectorAll(e),d=[];if(l.length>1){for(var u=0;u<l.length;u++){var c=r(l[u]);d.push(c)}return n(a,d)}}else if(e&&e.length>0){var p=e;if(p.length>1){for(var f=0;f<p.length;f++){var g=r(p[f]);B.push(g)}return n(a,B)}}return n(a,r(e))}return o._styleUrl="",o.isUtilityElement?n(a):(o.created(),a)}return o(i,e),f(i,[{key:"importStyle",value:function(e,t){this._importStyle(e,t)}},{key:"_importStyle",value:function(e,t){var i=this;if(i.shadowRoot&&e){var a=function(e){for(var a=i.shadowRoot.children,n=0;n<a.length;n++){var s=a[n];if(s instanceof HTMLLinkElement&&s.href===e)return t&&t(),null}var o=document.createElement("link");return o.rel="stylesheet",o.type="text/css",o.href=e,o.onload=t,o},n=function(){for(var e=i.shadowRoot.children,t=null,a=0;a<e.length;a++){var n=e[a];n instanceof HTMLLinkElement&&(t=n)}return t}(),s=function(e,t){t.parentNode.insertBefore(e,t.nextSibling)};if(Array.isArray(e)){for(var o=document.createDocumentFragment(),r=0;r<e.length;r++){var l=a(e[r]);l&&o.appendChild(l)}n?s(o,n):i.shadowRoot.insertBefore(o,i.shadowRoot.firstChild)}else{var d=a(e);if(!d)return;n?s(d,n):i.shadowRoot.insertBefore(d,i.shadowRoot.firstChild)}}}},{key:"attributeChanged",value:function(e,t,i){"style-url"===e&&(this.styleUrl=i)}},{key:"attributeChangedCallback",value:function(e,t,n){this.isReady&&a(h(i.prototype),"attributeChangedCallback",this).call(this,e,t,n)}},{key:"styleUrl",get:function(){return this._styleUrl},set:function(e){this._styleUrl=e}},{key:"isInShadowDOM",get:function(){var e=this;if(e.shadowParent)return!0;var t=!1;return void 0!==e.enableShadowDOM&&(t=function(t){for(;t;t=t.parentNode)if(t.host||t.enableShadowDOM||t.shadowRoot)return e.shadowParent=t.host?t.host:t,!0;return!1}(e.parentNode)),t}},{key:"enableShadowDOM",get:function(){return window[t].EnableShadowDOM}}],[{key:"observedAttributes",get:function(){var e=["external-style"];for(var t in this.prototype.extendedProperties){var i=this.prototype.extendedProperties[t];e.push(i.attributeName)}return e}},{key:"styleUrls",get:function(){return[]}},{key:"styles",get:function(){return""}}]),f(i,[{key:"_getRootShadowParent",value:function(){for(var e=this.shadowParent;e;){if(!e.shadowParent)return e;e=e.shadowParent}return e||this.shadowParent}},{key:"_getStyleUrl",value:function(e){var i=E.Core.getScriptLocation()+window[t].StyleBaseUrl+e;return this.shadowParent&&(i=i.replace("scoped/","")),i}},{key:"_getStyleUrls",value:function(){this.nodeName.startsWith(t);for(var e=this.getStaticMember("styleUrls","array"),i=[],a=0;a<e.length;a++){var n=e[a],s=this._getStyleUrl(n);i.push(s)}return i}},{key:"_getShadowDomStyleUrls",value:function(){var e=[].slice.call(this.querySelectorAll("[smart-id]")).concat(this.children);this.enableShadowDOM&&!0!==this.isInShadowDOM&&(e=[].slice.call(this.shadowRoot.querySelectorAll("[smart-id]")).concat(e),e=[].slice.call(this.shadowRoot.querySelectorAll(".smart-element-init")).concat(e));!function t(i,a){for(var n=0;n<i.length;n++){var s=i[n];s.$&&s.$.isCustomElement&&-1===e.indexOf(s)&&a.push(s),t(s.children,a)}}(this.shadowRoot.children,e);var i=[],a=[];this.nodeName.startsWith(t)&&(i=[this._getStyleUrl("smart.common.css")],a=[this._getStyleUrl("smart.misc.css")]);for(var n=this._getStyleUrls(),s=0;s<e.length;s++){var o=e[s];if(o._getStyleUrls)for(var r=o._getStyleUrls(),l=0;l<r.length;l++){var d=r[l];-1===n.indexOf(d)&&n.push(d)}}return i.concat(n).concat(a)}},{key:"_whenStylesReady",value:function(e){this._stylesReady?e():(this.whenStylesReady||(this.whenStylesReady=[]),this.whenStylesReady.push(e))}},{key:"_importShadowRootStyles",value:function(){var e=this,i=e._getShadowDomStyleUrls();e._styleUrls=i,e._styleUrlsReadyCount=0;var a=function(){if(e._stylesReady=!0,e.whenStylesReady){for(var t=0;t<e.whenStylesReady.length;t++)e.whenStylesReady[t]();e.whenStylesReady=[]}if(!e.isRendered&&!e.hasAttribute("wait")&&!e.isRendering){if(e.resizeTrigger){var i=e.resizeTrigger.childNodes[0],a=e.resizeTrigger.childNodes[1];i.scrollLeft=1e5,i.scrollTop=1e5,a.scrollLeft=1e5,a.scrollTop=1e5}e.isRendering=!0,e.context=e,e._renderShadowRoot(),e.render(),e.renderMode="auto"}e.classList.remove("smart-element-init")};if(document.adoptedStyleSheets)if(window[t].AdoptedStyleSheets)e.shadowRoot.adoptedStyleSheets=window[t].AdoptedStyleSheets,a();else{var n=new CSSStyleSheet,s=E.Core.getScriptLocation()+"/styles/smart.default.css";n.replace('@import url("'+s+'")').then((function(e){a()})).catch((function(e){console.error("Failed to load:",e)})),window[t].AdoptedStyleSheets=[n],e.shadowRoot.adoptedStyleSheets=window[t].AdoptedStyleSheets}else for(var o=0;o<i.length;o++){var r=i[o];e._importStyle(r,(function(){e._styleUrlsReadyCount++,e._styleUrlsReadyCount===e._styleUrls.length&&(e._stylesReady=!0,a())}))}}},{key:"_setupShadowRoot",value:function(){this.isRendered||this.wait||(this.renderMode="manual"),this.classList.add("smart-element-init"),this.setup(),this._importShadowRootStyles()}},{key:"connect",value:function(){var e=this;if(e.enableShadowDOM&&!e.shadowRoot&&!0!==e.isInShadowDOM&&(e.attachShadow({mode:"open"}),e.shadowRoot&&e.$.root&&(e.shadowRoot.appendChild(e.$.root),e.$.root.classList.add(e.nodeName.toLowerCase()))),e.shadowRoot||e.shadowParent)if(e.shadowRoot)e._setupShadowRoot();else if(e.shadowParent&&e.enableShadowDOM){var t=e._getRootShadowParent();if(e.isRendered||e.hasAttribute("wait")||(e.renderMode="manual"),e.classList.add("smart-element-init"),e.setup(),t._styleUrls)t._getShadowDomStyleUrls().length!==t._styleUrls.length&&t._importShadowRootStyles();t._whenStylesReady((function(){e.isRendered||e.wait||e.isRendering||(e.isRendering=!0,e.context=e,e.render(),e.renderMode="auto"),e.classList.remove("smart-element-init")}))}else e.setup();else e.setup()}},{key:"connectedCallback",value:function(){var e=this;if(!e.isLoading&&!e.isUtilityElement){e.classList.add("smart-element-init");var t=function(){e.classList.remove("smart-element-init")};if("complete"===document.readyState){var i=e.parents;i.length&&"HTML"===i[i.length-1].nodeName?(e.checkIsInDomTimer&&clearInterval(e.checkIsInDomTimer),t(),e.connect()):(e.checkIsInDomTimer&&clearInterval(e.checkIsInDomTimer),i.length>0&&(e.checkIsInDomTimer=setInterval((function(){var i=e.parents;0===i.length&&clearInterval(e.checkIsInDomTimer),i.length>0&&"HTML"===i[i.length-1].nodeName&&(clearInterval(e.checkIsInDomTimer),t(),e.connect())}),100)))}else e.isLoading=!0,P.push({element:this,callback:function(){this.isReady||(t(),this.connect())}.bind(e)})}}},{key:"disconnectedCallback",value:function(){this.isAttached?(this.shadowParent=null,this.detached()):this._resetShadowParent()}},{key:"adoptedCallback",value:function(){this.setup()}},{key:"appendTemplate",value:function(e){this.shadowRoot?this.shadowRoot.appendChild(e):this.appendChild(e)}},{key:"_resetShadowParent",value:function(){if(this.enableShadowDOM&&null!==this.shadowParent){for(var e=[],t=this.parentNode;t&&9!==t.nodeType;){if(t instanceof HTMLElement==!0)e.push(t);else if(11===t.nodeType&&t.host){t=t.host;continue}t=t.parentNode}for(var i=0;i<e.length;i++)if(e[i]===this.shadowParent)return;e.length>0&&"HTML"===e[e.length-1].nodeName&&(this.shadowParent=null)}}}]),i}($),N=function(){function e(){m(this,e)}return f(e,null,[{key:"register",value:function(e,i){var a=i.prototype,n=y.toCamelCase(e).replace(/[a-z]+/,""),s=i.version||window[t].Version;if(!window.customElements.get(e)||window.customElements.get(e).version!==s){var o=e;for(s=s.split(".");window.customElements.get(e);)e=o+"-"+s.join("."),s[2]=parseInt(s[2])+1;if(!B[e]){if(e.startsWith(t.toLowerCase()))B[e]=window[t][n]=window[t.toLowerCase()+n]=i;else{var r=e.split("-")[0];r=r.substring(0,1).toUpperCase()+r.substring(1),window[t][r]||(window[t][r]={}),B[e]=window[t][r][n]=window[r.toLowerCase()+n]=i,window[t][n]&&(n=y.toCamelCase(e)),window[t][n]=i}a.elementName=n,a.defineElement(),L[e]&&L[e](a),window.customElements.define(e,i)}}}},{key:"registerElements",value:function(){if(this.toRegister){this.isRegistering=!0;for(var e=0;e<this.toRegister.length;e++){var t=this.toRegister[e];this.register(t.tagName,t.element)}this.isRegistering=!1}}},{key:"get",value:function(e){if(B[e])return B[e]}},{key:"whenRegistered",value:function(e,t){if(!e)throw new Error("Syntax Error: Invalid tag name");var i=L[e],a=this.get(e),n=a?a.modules.length:3;try{i||a?!i&&a?(t(a.prototype),L[e]=void 0):i&&!a?L[e]=function(e){i(e),t(e)}:i&&a&&(a.proto&&(i(a.proto),t(a.proto)),L[e]=void 0):L[e]=function(e){try{t(e)}catch(e){var i=e instanceof Error?e.message:e.toString();console.log(i)}}}catch(e){var s=e instanceof Error?e.message:e.toString();console.log(s)}if(a&&n!==a.prototype.modules.length)for(var o=document.querySelectorAll(e),r=0;r<o.length;r++){var l=o[r];l.isCreated&&l._initElement()}}}]),e}();N.lazyRegister=!1,N.tagNames=[];var W=function(){function e(t,i){m(this,e);var a=this;this.name="observable",t&&Object.assign(a,t);var n;return n=t,Object.getOwnPropertyNames(Object.getPrototypeOf(n)).forEach((function(e){return"constructor"===e||!!e.startsWith("_")||void(a[e]=n[e])})),new Proxy(a,{deleteProperty:function(e,t){return delete e[t],!0},get:function(e,t){return e[t]},set:function(e,t,n){var s=e[t];return s===n||(e[t]=n,!("notifyFn"!==t&&!t.startsWith("_")&&"canNotify"!==t)||(!(!i||-1!==i.indexOf(t))||(!a.canNotify||(a._notify({target:e,propertyName:t,oldValue:s,newValue:n}),!0))))}})}return f(e,[{key:"_notify",value:function(e){if(this.canNotify&&this.notifyFn)for(var t=0;t<this.notifyFn.length;t++)this.notifyFn[t](e)}},{key:"notify",value:function(e){e&&(this.notifyFn||(this.notifyFn=[]),this.notifyFn.push(e))}},{key:"canNotify",get:function(){return void 0===this._canNotify&&(this._canNotify=!0),this._canNotify},set:function(e){this._canNotify=e}}]),e}(),R=function(){function e(){m(this,e);var t=this;t.name="observableArray",t.observables=arguments.length<3?null:arguments[2];var i=new Proxy(t,{deleteProperty:function(e,t){return delete e[t],!0},apply:function(e,t,i){return e.apply(t,i)},get:function(e,i){return e[i]||isNaN(parseInt(i))?e[i]:t.getItem(parseInt(i))},set:function(e,i,a){return e[i]||isNaN(parseInt(i))?(e[i]=a,!0):(t.setItem(parseInt(i),a),!0)}});if(t._addArgs={eventName:"change",object:i,action:"add",index:null,removed:new Array,addedCount:1},t._removeArgs={eventName:"change",object:i,action:"remove",index:null,removed:null,addedCount:0},arguments.length>=1&&Array.isArray(arguments[0])){t._array=[];for(var a=arguments[0],n=0,s=a.length;n<s;n++){var o=t._getItem(t._array.length,a[n]);t._array.push(o)}}else t._array=Array.apply(null,arguments);return 2===arguments.length&&(t.notifyFn=arguments[1]),i}return f(e,[{key:"_notify",value:function(e){this.canNotify&&this.notifyFn&&this.notifyFn(e)}},{key:"notify",value:function(e){e&&(this.notifyFn=e)}},{key:"toArray",value:function(){return this._array}},{key:"_getItem",value:function(e,t){var i=this;return"string"==typeof t?t:"number"==typeof t?t:void 0===t?t:new Proxy(t,{deleteProperty:function(e,t){delete e[t]},set:function(t,a,n){var s=t[a];return t[a]=n,!i._canNotify||!1===t.canNotify||(!(!i.observables||i.observables[a])||(i._notify({eventName:"change",object:i,target:t,action:"update",index:e,path:e+"."+a,oldValue:s,newValue:n,propertyName:a}),!0))}})}},{key:"getItem",value:function(e){return this._array[e]}},{key:"setItem",value:function(e,t){var i=this._array[e];this._array[e]=this._getItem(e,t),this._notify({eventName:"change",object:this._array,action:"update",index:e,removed:[i],addedCount:1})}},{key:"toString",value:function(){return this._array.toString()}},{key:"toLocaleString",value:function(){return this._array.toLocaleString()}},{key:"concat",value:function(){var e=this;e._addArgs.index=e._array.length;var t=e._array.concat.apply(e._array,arguments);return new Smart.ObservableArray(t)}},{key:"join",value:function(e){return this._array.join(e)}},{key:"pop",value:function(){this._removeArgs.index=this._array.length-1,delete this[this._array.length-1];var e=this._array.pop();return this._removeArgs.removed=[e],this._notify(this._removeArgs),this._notifyLengthChange(),e}},{key:"push",value:function(){var e=this;if(e._addArgs.index=e._array.length,1===arguments.length&&Array.isArray(arguments[0]))for(var t=arguments[0],i=0,a=t.length;i<a;i++){var n=e._getItem(e._array.length,t[i]);e._array.push(n)}else{var s=e._getItem(e._addArgs.index,arguments[0]);e._array.push.apply(e._array,[s])}return e._addArgs.addedCount=e._array.length-e._addArgs.index,e._notify(e._addArgs),e._notifyLengthChange(),e._array.length}},{key:"_notifyLengthChange",value:function(){if(this.canNotify){var e=this._createPropertyChangeData("length",this._array.length);this._notify(e)}}},{key:"_createPropertyChangeData",value:function(e,t,i){return{eventName:"change",object:this,action:e,value:t,oldValue:i}}},{key:"reverse",value:function(){return this._array.reverse()}},{key:"shift",value:function(){var e=this._array.shift();return this._removeArgs.index=0,this._removeArgs.removed=[e],this._notify(this._removeArgs),this._notifyLengthChange(),e}},{key:"slice",value:function(e,t){return this._array.slice(e,t)}},{key:"sort",value:function(e){return this._array.sort(e)}},{key:"splice",value:function(e,t,i){var a,n=this,s=n._array.length;if(i&&i.length)for(var o=0;o<i.length;o++)a=n._array.splice(e+o,t,i[o]);else a=n._array.splice.apply(n._array,arguments);if(i){var r=n.canNotify;if(n.canNotify=!1,i.length)for(var l=0;l<i.length;l++)n.setItem(e+l,i[l]);else n.setItem(e,i);n.canNotify=r,n._notify({eventName:"change",object:this,action:"add",index:e,added:a,addedCount:n._array.length>s?n._array.length-s:0})}else n._notify({eventName:"change",object:this,action:"remove",index:e,removed:a,addedCount:n._array.length>s?n._array.length-s:0});return n._array.length!==s&&n._notifyLengthChange(),a}},{key:"unshift",value:function(){var e=this,t=e._array.length,i=e._array.unshift.apply(e._array,arguments);return e._addArgs.index=0,e._addArgs.addedCount=i-t,e._notify(this._addArgs),e._notifyLengthChange(),i}},{key:"indexOf",value:function(e,t){for(var i=t||0,a=this._array.length;i<a;i++)if(this._array[i]===e)return i;return-1}},{key:"lastIndexOf",value:function(e,t){for(var i=t||this._array.length-1;i>=0;i--)if(this._array[i]===e)return i;return-1}},{key:"find",value:function(e,t){return this._array.find(e,t)}},{key:"findIndex",value:function(e,t){return this._array.findIndex(e,t)}},{key:"every",value:function(e,t){return this._array.every(e,t)}},{key:"some",value:function(e,t){return this._array.some(e,t)}},{key:"forEach",value:function(e,t){this._array.forEach(e,t)}},{key:"map",value:function(e,t){return this._array.map(e,t)}},{key:"filter",value:function(e,t){return this._array.filter(e,t)}},{key:"reduce",value:function(e,t){return void 0!==t?this._array.reduce(e,t):this._array.reduce(e)}},{key:"reduceRight",value:function(e,t){return void 0!==t?this._array.reduceRight(e,t):this._array.reduceRight(e)}},{key:"canNotify",get:function(){return void 0===this._canNotify&&(this._canNotify=!0),this._canNotify},set:function(e){this._canNotify=e}},{key:"length",get:function(){return this._array.length},set:function(e){v.isNumber(e)&&this._array&&this._array.length!==e&&this.splice(e,this._array.length-e)}}]),e}();var F={};window[t]&&(F=window[t]),window[t]=function(e,i){var a=e;if(e){if(e.indexOf("#")>=0||e.indexOf(".")>=0)return C[e]?C[e]:i?(C[e]=new i,function(e,t){var i=t.properties;t._properties=[],function i(a,n){for(var s=Object.keys(a),o=function(o){var r=s[o],l=a[r];return t._properties[n+r]=l,Array.isArray(l)?(t._properties[n+r]=new R(l,(function(t){var i=r+"."+t.path,a=t.newValue,n=document.querySelector(e);if(n){for(var s=i.split("."),o=n,l=0;l<s.length;l++){o=o[s[l]]}o=a}})),"continue"):(Object.defineProperty(a,r,{configurable:!1,enumerable:!0,get:function(){return t._properties[n+r]},set:function(e){t._properties[n+r]=e}}),l&&"DataAdapter"===l.constructor.name?"continue":l&&"object"===c(l)&&Smart.DataAdapter&&l instanceof Smart.DataAdapter?"continue":void("object"===c(l)&&l&&Object.keys(l).length>0&&i(l,n+r+".")))},r=0;r<s.length;r++)o(r)}(i,""),Object.defineProperty(t,"properties",{configurable:!1,enumerable:!0,get:function(){return i}});var a=document.querySelector(e);if(a&&a.isReady)for(var n in i)a[n]=i[n]}(e,C[e]),C[e]):void 0;if(i){if(N.tagNames[e]=i,N.lazyRegister){N.toRegister||(N.toRegister=[]);var n=y.toCamelCase(a).replace(/[a-z]+/,"");return window[t][n]=i,void N.toRegister.push({tagName:a,element:i})}N.register(a,i)}}},window.addEventListener("load",(function(){var e=window[t].Elements.tagNames,i=[];for(var a in e){for(var n=e[a],s=document.querySelectorAll("["+a+"]"),o=0;o<s.length;o++){var r=s[o];r instanceof HTMLDivElement&&(r.__proto__=n.prototype,r.created(),r.connectedCallback()),r.classList.add("smart-element-ready")}var l=n.name;"Item"===l&&(l="ListItem"),s=document.querySelectorAll('[is="'+t.toLocaleLowerCase()+l+'"]');for(var d=0;d<s.length;d++)i.push(s[d])}if(i.length>0){var h=function(e){for(var t=[],i=e.parentNode;i&&9!==i.nodeType;)i instanceof HTMLElement==!0&&t.push(i),i=i.parentNode;return t};i.sort((function(e,t){var i=h(e).length,a=h(t).length;return i<a?1:i>a?-1:0}));for(var u=0;u<i.length;u++){var c=i[u],m=c.getAttribute("is");("smartItem"===m?new window.smartListItem(c):new window[m](c)).removeAttribute("is")}}}));var V=function(){function e(t,i){m(this,e);var a=this.name,n=null;return t?n=new window[a](t,i):(n=new window[a])._initProperties=i,this._element=n,n}return f(e,[{key:"name",get:function(){return"Component"}},{key:"element",get:function(){return this._element}}]),e}(),j=function(){function e(i){m(this,e);var a=this;a._id=i.id,i.id?a._appRoot=document.getElementById(a._id):a._id=window[t].Utilities.Core.createGUID(),i.selector&&(a._id=window[t].Utilities.Core.createGUID(),a._appRoot=document.querySelector(i.selector)),a._appRoot||(a._appRoot=document.body),a._appRoot.classList.add("smart-visibility-hidden");var n={};if(i.render){var s=i.render(),o=i.components;!function(){var e=document.createDocumentFragment(),a=document.implementation.createDocument("http://www.w3.org/1999/xhtml","html",null),r=document.createElementNS("http://www.w3.org/1999/xhtml","body"),l=document.createElement("div");a.documentElement.appendChild(r),r.appendChild(l),l.innerHTML=s;for(var d=0;d<o.length;d++){var h=o[d],u=h.name,c=E.Core.toDash(u),m=a.querySelectorAll(u);h.tagName=c;for(var p=0;p<m.length;p++){var f=m[p],g=f.getAttribute("id")||window[t].Utilities.Core.createGUID(),v=document.createElement("div");v.id=g,l.insertBefore(v,f),n["#"+g]={name:u,properties:[],rendered:!1},f.parentNode.removeChild(f)}}e.appendChild(l);var _=document.querySelector(i.selector);_&&_.appendChild(e)}()}a._template=i.template||{},a._data=i.data||{},a._components=n;var r=function(){a._addAttributeBindings(),a._renderForBindings(),a._addModelBindings(),a._observeData(),a.render(),a._appRoot.classList.remove("smart-visibility-hidden")};"complete"===document.readyState?r():window.addEventListener("load",r)}return f(e,[{key:"_addAttributeBindings",value:function(e,t){var i=this,a=new g,n=e?a.getBindings(e):a.getBindings(i._appRoot);t||(t="");!function e(a){var n=function(e){if(e.data){var a=e.node.id;for(var n in a||(e.node.id=a="id"+Math.floor(65536*(1+Math.random())).toString(16).substring(1)),e.data){var s=e.data[n];if("textContent"===n&&(e.node.parentNode.id?a=e.node.parentNode.id:(e.node.id="",e.node.parentNode.id=a)),s.isEvent){var o={};o[s.name]=s.value,i._addListenerBinding(a,o)}else{var r={};r[n]=t+s.name,i._addTemplateBinding(a,r)}}}};for(var s in n(a),a.children){var o=a.children[s];o.node&&o.node.getAttribute&&o.node.getAttribute("smart-for")&&null===o.node.getAttribute("smart-for-rendered")||(n(o),o.children&&e(o))}}(n)}},{key:"toJSON",value:function(){return function e(t,i){for(var a in t)if(!a.startsWith("_")&&"notifyFn"!==a&&"canNotify"!==a&&"name"!==a&&"propertyName"!==a&&"toString"!==a&&"propertyIsEnumerable"!==a&&"valueOf"!==a&&"toLocaleString"!==a&&"hasOwnProperty"!==a&&"isPrototypeOf"!==a){var n=t[a];if("observableArray"!==n.name)if("observable"!==n.name)if("object"!==c(n)||E.Types.isFunction(n))i[a]=n;else{var s=e(n,{});i[a]=s}else{var o={};for(var r in n)if(!r.startsWith("_")&&"propertyIsEnumerable"!==r&&"notifyFn"!==r&&"canNotify"!==r&&"name"!==r&&!r.startsWith("_")&&"notifyFn"!==r&&"canNotify"!==r&&"name"!==r&&"propertyName"!==r&&"toString"!==r&&"valueOf"!==r&&"toLocaleString"!==r&&"hasOwnProperty"!==r&&"isPrototypeOf"!==r)if("object"!==c(n)||"object"!==c(n[r])||E.Types.isFunction(n))o[r]=n[r];else{var l=e(n[r],{});o[r]=l}i[a]=o}else i[a]=n.toArray()}return i}(this._data,{})}},{key:"_addTemplateBinding",value:function(e,t){this.template["#"+e]?this.template["#"+e].bind?Object.assign(this.template["#"+e].bind,t):this.template["#"+e].bind=t:this.template["#"+e]={bind:t}}},{key:"_addListenerBinding",value:function(e,t){this.template["#"+e]?this.template["#"+e].listeners?Object.assign(this.template["#"+e].listeners,t):this.template["#"+e].listeners=t:this.template["#"+e]={listeners:t}}},{key:"_updateDataFromBooleanElement",value:function(e,t){var i=t.checked,a=this._data[i];if(e.value&&"on"!==e.value)if(Array.isArray(a)||"observableArray"===a.name)if(e.checked)a.push(e.value);else{var n=a.indexOf(e.value);n>=0&&a.splice(n,1)}else"radio"!==e.type?e.checked?this._data[i]=e.value:this._data[i]="":e.checked&&(this._data[i]=e.value);else this._data[i]=e.checked}},{key:"_updateDataFromNativeElement",value:function(e,t){var i=this;if("SELECT"===e.tagName&&e.addEventListener("change",(function(){var a=t.value,n=i._data[a];if(e.__updating=!0,Array.isArray(n)||"observableArray"===n.name){if(n=new R,e.selectedOptions)for(var s=0;s<e.selectedOptions.length;s++){var o=e.selectedOptions[s];n.push(o.value)}i._data[a]=n}else i._data[a]=e.value;e.__updating=!1})),"INPUT"===e.tagName||"TEXTAREA"===e.tagName){e.addEventListener("change",(function(){e.__updating=!0,a?i._updateDataFromBooleanElement(e,t):i._data.value=e.value,e.__updating=!1}));var a="checkbox"===e.type||"radio"===e.type;a||e.addEventListener("keyup",(function(){var a=t.value;i._data[a]=e.value}))}}},{key:"_addModelBindings",value:function(e){for(var t=e?e.querySelectorAll("[smart-model]"):this._appRoot.querySelectorAll("[smart-model]"),i=0;i<t.length;i++){var a=t[i],n={value:a.getAttribute("smart-model")};"list"===a.type&&(n={selectedValues:a.getAttribute("smart-model")}),"checkbox"!==a.type&&"radio"!==a.type||(n={checked:a.getAttribute("smart-model")}),a.id||(a.id="id"+Smart.Utilities.Core.createGUID().replace(/-/gi,"")),this._updateDataFromNativeElement(a,n),this._addTemplateBinding(a.id,n)}}},{key:"_renderForBindings",value:function(e){for(var t=this._appRoot.querySelectorAll("[smart-for]"),i=0;i<t.length;i++){var a=t[i],n=a.getAttribute("smart-for"),s=this._data[n];a.id||(a.id="id"+Smart.Utilities.Core.createGUID().replace(/-/gi,"")),a.setAttribute("smart-for-rendered","");for(var o=null!==a.getAttribute("smart-for-self"),r=o?a.parentNode.querySelectorAll(".smart-for-item-"+a.id):a.querySelectorAll(".smart-for-item-"+a.id),l=0;l<r.length;l++)this.template[r[l].id]&&delete this.template[r[l].id],r[l].remove();for(var d=o?a:a.firstElementChild,h=document.createDocumentFragment(),u=0;u<s.length;u++){var c=d.cloneNode(!0);c.style.display="",c.id=a.id+"_"+u,c.classList.add("smart-for-item"),c.classList.add("smart-for-item-"+a.id),c.removeAttribute("smart-for"),h.appendChild(c)}d.style.display="none",o?a.parentNode.insertBefore(h,a.nextSibling):a.appendChild(h);for(var m=this._appRoot.querySelectorAll(".smart-for-item-"+a.id),p=0;p<m.length;p++){var f=m[p];this._addAttributeBindings(f,n+"."+p+".")}}e&&t.length>0&&this.render()}},{key:"notify",value:function(e){var t=this;t.notifyFn=function(i){i.owner=t,e(i)}}},{key:"_notify",value:function(e){if("length"!==e.propertyName){this.notifyFn&&this.notifyFn(e);var t=e.propertyName;for(var i in e.object&&(t=e.object.propertyName),this.template){var a=this.template[i],n=null;for(var s in a.bind)if("function"!=typeof a.bind[s]&&a.bind[s].indexOf(t)>=0){n=s;break}n&&this._setPropertyFromData(a,n)}this._renderForBindings(!0)}}},{key:"_observeData",value:function(){var e=this;e._data=new window[t].Observable(e._data),e._data.canNotify=!1,e._data.notify(e._notify.bind(e));var i=function t(i){for(var a in i.canNotify=!1,i)if("function"!=typeof i[a]){if(!a.startsWith("_")&&"notifyFn"!==a&&"canNotify"!==a&&"name"!==a){var n=i[a];Array.isArray(n)?(i[a]=new Smart.ObservableArray(i[a]),i[a].canNotify=!1,i[a].notify(e._notify.bind(e)),i[a].canNotify=!0,i[a].propertyName=a):n&&"object"===c(n)&&n.constructor===Smart.DataAdapter?i[a].propertyName=a:n&&"object"===c(n)&&n instanceof Date?i[a].propertyName=a:n&&"object"===c(n)&&(i[a]=new Smart.Observable(i[a]),i[a].canNotify=!1,i[a].notify(e._notify.bind(e)),i[a].canNotify=!0,i[a].propertyName=a,t(i[a]))}}else i[a]=i[a].bind(i);i.canNotify=!0};for(var a in e._data)if("function"!=typeof e._data[a]){if(!a.startsWith("_")&&"notifyFn"!==a&&"canNotify"!==a&&"name"!==a){var n=e._data[a];Array.isArray(n)?(e._data[a]=new Smart.ObservableArray(e._data[a]),e._data[a].canNotify=!1,e._data[a].notify(e._notify.bind(e)),e._data[a].canNotify=!0,e._data[a].propertyName=a):"object"===c(n)&&n.constructor===Smart.DataAdapter?e._data[a].propertyName=a:"object"===c(n)&&n instanceof Date?e._data[a].propertyName=a:"object"===c(n)&&(e._data[a]=new Smart.Observable(e._data[a]),e._data[a].canNotify=!1,e._data[a].notify(e._notify.bind(e)),e._data[a].canNotify=!0,e._data[a].propertyName=a,i(e._data[a]))}}else e._data[a]=e._data[a].bind(e._data);e._data.canNotify=!0}},{key:"_setPropertyFromData",value:function(e,t){if(!e.element.__updating&&e.bind){var i=e.bind[t];if("function"!=typeof i){for(var a=i?i.split("."):[],n=this._data,s=0;s<a.length;s++){var o=a[s];if("string"==typeof n)break;if(void 0===n[o]){n=void 0;break}n=n[o]}if(e.bind.computed){var r={item:e,name:i,value:n};e.bind.computed(r),r.value!==n&&(n=r.value)}if(e.element.__updatingProperties=!0,i&&void 0!==n){if("observableArray"===n.name)"checkbox"===e.element.type?e.element[t]=n.indexOf(e.element.value)>=0:e.element[t]=n.toArray().slice(0);else if("observable"===n.name){var l=function e(t){var a=null;for(var n in t)if("function"!=typeof t[n]&&!n.startsWith("_")&&"notifyFn"!==n&&"canNotify"!==n&&"name"!==n){var s=t[n];if(void 0!==s&&!(s&&Array.isArray(s)||s&&"object"===c(s)&&s.constructor===Smart.DataAdapter)){if(s&&"object"===c(s)&&(a=e(t[n])),n===i){a=s;break}if(a)return a}}return a}(n);e.element[t]=l||n}else"radio"===e.element.type?e.element.value===n?e.element[t]=!0:e.element[t]=!1:e.element[t]=n;this._components[e.selector]&&!this._components[e.selector].rendered&&(this._components[e.selector].properties[t]=n)}else e.properties&&(e.element[t]=e.properties[t],this._components[e.selector]&&!this._components[e.selector].rendered&&(this._components[e.selector].properties[t]=e.properties[t]));e.element.__updatingProperties=!1}}}},{key:"render",value:function(){var e=this,t=function(t){var i=e.template[t],a=i.element?i.element:document.querySelector(t),n=i.properties,s=i.listeners,o=i.bind;if(!a)return"continue";for(var r in i.selector=t,i.element=a,a._properties||(a._properties=[]),n){var l=a._properties?a._properties[r]:null;l&&(l.notify=!0),e._setPropertyFromData(i,r)}for(var d in o){var h=a._properties?a._properties[d]:null;h&&(h.notify=!0),e._setPropertyFromData(i,d)}if(e._components&&e._components[t]&&!1===e._components[t].rendered){var u=e._components[t];i.element=u.instance=new window[u.name](t,u.properties),u.rendered=!0}var c=function(t){var a=i.element,n=function(i){a.$||(a.$=Smart.Utilities.Extend(a)),a.$[t](i,(function(t){var a=s[i];if(a.indexOf(".")>=0){for(var n=a.split("."),o=e._data[n[0]],r=1;r<n.length;r++)o=o[n[r]];void 0!==o&&o(t)}else e._data[a]&&e._data[a](t)}))};for(var r in s)n(r);var l=function(i){var n=a._properties?a._properties[i]:null;if(n){var s=function(t){if(!a.__updatingProperties){a.__updating=!0;var n=function(e){if("radio"===a.type)for(var t=a.parentNode.querySelectorAll('[type="radio"]'),i=0;i<t.length;i++)t[i].__updating=e};n(!0);var s=o[i];if("radio"===a.type||"toggle"===a.type||"checkbox"===a.type)e._updateDataFromBooleanElement(a,o);else{!function(e,t,i){var a;for(a=0;a<t.length-1;a++)e=e[t[a]];e[t[a]]=i}(e._data,s.split("."),t.detail.value)}a.__updating=!1,n(!1)}};"textarea"===a.type&&a.$[t]("input.keyup",(function(e){var t=new CustomEvent("keyup",{detail:{originalEvent:e,value:a.$.input.value}});s(t)})),a.$[t](n.attributeName+"-changed",(function(e){s(e)}))}};for(var d in o)l(d)};c("unlisten"),c("listen"),a.onAttached=function(){c("listen")},a.onDetached=function(){c("unlisten")}};for(var i in e.template)t(i)}},{key:"template",get:function(){return this._template},set:function(e){this._template=e,this.render()}},{key:"id",get:function(){return this._id},set:function(e){this._id=e}},{key:"jsonData",get:function(){return this.toJSON()}},{key:"formData",get:function(){var e=new FormData,t=this.toJSON();if(!t)return e;return function t(i,a){for(var n in i){var s=i[n];E.Types.isFunction(s)||("object"!==c(s)||Array.isArray(s)||t(s,n),("object"!==c(s)||Array.isArray(s))&&(""===a?e.append(n,s):e.append(a+"."+n,s)))}}(t,""),e}},{key:"data",get:function(){return this._data||(this._data={}),this._data},set:function(e){this._data=e,this._observeData(),this.render()}}]),e}();Object.assign(window[t],{Elements:N,Modules:[p,d,g],BaseElement:M,Utilities:E,Import:function(e,t){var i=0,a=function(e,t){return new Promise((function(i){var a=document.createElement("script");a.src=e,a.onload=i;for(var n=0;n<document.head.children.length;n++){var s=document.head.children[n];if(s.src&&s.src.toString().indexOf(t)>=0)return void i()}document.head.appendChild(a)}))};return new Promise((function(n){var s=E.Core.getScriptLocation();if(t)for(var o=0;o<e.length;o++){var r=s+"/"+e[o];a(r,e[o]).then((function(){++i===e.length&&n()}))}else!function t(o){if(e[o]){var r=s+"/"+e[o];a(r,e[o]).then((function(){++i===e.length&&n(),t(o+1)}))}}(0)}))},ObservableArray:R,Observable:W,App:j,Component:V,Theme:F.Theme||"",EnableShadowDOM:!1,BaseUrl:"./",StyleBaseUrl:"/styles/default/",Version:"5.1.0",License:"Evaluation"});var U=window[t].Theme;Object.defineProperty(window[t],"Theme",{configurable:!1,enumerable:!0,get:function(){return U},set:function(e){var t=U;U=e,H.fireEvent("theme-changed",{oldValue:t,newValue:e},{bubbles:!0,cancelable:!0})}}),window[t]("smart-base-element",window[t].BaseElement),window[t]("smart-content-element",function(e){function t(){return m(this,t),n(this,h(t).apply(this,arguments))}return o(t,e),f(t,[{key:"template",value:function(){return"<div inner-h-t-m-l='[[innerHTML]]'></div>"}},{key:"ready",value:function(){a(h(t.prototype),"ready",this).call(this);this.applyContent()}},{key:"clearContent",value:function(){for(;this.$.content.firstChild;)this.$.content.removeChild(this.$.content.firstChild)}},{key:"applyContent",value:function(){if(void 0!==this.content)if(""!==this.content&&null!==this.content){if(this.content instanceof HTMLElement)return this.clearContent(),void this.$.content.appendChild(this.content);var e=document.createDocumentFragment(),t=document.createElement("div");e.appendChild(t),this.content instanceof HTMLElement?t.appendChild(this.content):t.innerHTML=this.content;var i=Array.from(t.childNodes);t.parentNode.removeChild(t);for(var a=0;a<i.length;a++)e.appendChild(i[a]);this.clearContent(),this.$.content.appendChild(e)}else this.clearContent();else this.content=this.$.content}},{key:"propertyChangedHandler",value:function(e,i,n){a(h(t.prototype),"propertyChangedHandler",this).call(this,e,i,n);i!==n&&("innerHTML"===e&&(this.content=n,this.applyContent(),this.innerHTML=this.content=E.Core.html(this.$.content)),"content"===e&&this.applyContent())}}],[{key:"properties",get:function(){return{content:{type:"any",reflectToAttribute:!1},innerHTML:{type:"string",reflectToAttribute:!1}}}}]),t}(window[t].BaseElement)),window[t]("smart-scroll-viewer",function(e){function t(){return m(this,t),n(this,h(t).apply(this,arguments))}return o(t,e),f(t,[{key:"template",value:function(){return'<div id="container" class="smart-container" role="presentation">\n                        <div id="scrollViewerContainer" class="smart-scroll-viewer-container" role="presentation">\n                            <div id="scrollViewerContentContainer" inner-h-t-m-l=\'[[innerHTML]]\' class="smart-scroll-viewer-content-container" role="presentation">\n                                <content></content>\n                            </div>\n                        </div>\n                        <smart-scroll-bar id="verticalScrollBar" animation="[[animation]]" disabled="[[disabled]]" right-to-left="[[rightToLeft]]" orientation="vertical"></smart-scroll-bar>\n                        <smart-scroll-bar id="horizontalScrollBar" animation="[[animation]]" disabled="[[disabled]]" right-to-left="[[rightToLeft]]"></smart-scroll-bar>\n                    </div>'}},{key:"appendChild",value:function(e){var t=this;if(e){if(!t.isCompleted||e.classList&&e.classList.contains("smart-resize-trigger-container")){var i=Array.prototype.slice.call(arguments,2);return HTMLElement.prototype.appendChild.apply(t,i.concat(Array.prototype.slice.call(arguments)))}t.$.scrollViewerContentContainer.appendChild(e)}}},{key:"removeChild",value:function(e){var t=this;if(e){if(!t.isCompleted||e.classList&&e.classList.contains("smart-resize-trigger-container")){var i=Array.prototype.slice.call(arguments,2);return HTMLElement.prototype.removeChild.apply(t,i.concat(Array.prototype.slice.call(arguments)))}t.$.scrollViewerContentContainer.removeChild(e)}}},{key:"removeAll",value:function(){this.isCompleted&&(this.$.scrollViewerContentContainer.innerHTML="")}},{key:"_horizontalScrollbarHandler",value:function(e){this.$.scrollViewerContentContainer.style.left=(this.rightToLeft?1:-1)*this.scrollLeft+"px",e.stopPropagation(),this.onHorizontalChange&&this.onHorizontalChange(e)}},{key:"_verticalScrollbarHandler",value:function(e){this.$.scrollViewerContentContainer.style.top=-this.scrollTop+"px",e.stopPropagation(),this.onVerticalChange&&this.onVerticalChange(e)}},{key:"_mouseWheelHandler",value:function(e){this.disabled||!this.computedHorizontalScrollBarVisibility&&!this.computedVerticalScrollBarVisibility||(this.computedVerticalScrollBarVisibility?(e.stopPropagation(),e.preventDefault(),this.scrollHeight>0&&this.scrollTo(this.scrollTop+this._getScrollCoefficient(e,this.offsetHeight))):this.computedHorizontalScrollBarVisibility&&(e.stopPropagation(),e.preventDefault(),this.scrollWidth>0&&this.scrollTo(void 0,this.scrollLeft+this._getScrollCoefficient(e,this.offsetWidth))))}},{key:"_getScrollCoefficient",value:function(e,t){var i,a=e.deltaMode,n=Math.abs(e.deltaY);return 0===a?i=n<100/3?n:t:1===a?i=n<1?n*(100/3):t:2===a&&(i=t),e.deltaY<0?-i:i}},{key:"applyContent",value:function(){a(h(t.prototype),"applyContent",this).call(this),this.refresh()}},{key:"scrollTo",value:function(e,t){this._scrollView&&(void 0!==e&&this._scrollView.scrollTo(e),void 0!==t&&this._scrollView.scrollTo(t,!1))}},{key:"refreshScrollBarsVisibility",value:function(){this._scrollView&&(this._scrollView.hScrollBar.disabled=this.disabled,this._scrollView.vScrollBar.disabled=this.disabled,"disabled"===this.horizontalScrollBarVisibility&&(this._scrollView.hScrollBar.disabled=!0),"disabled"===this.verticalScrollBarVisibility&&(this._scrollView.vScrollBar.disabled=!0),this.scrollWidth>0?this._scrollView.hScrollBar.$.removeClass("smart-hidden"):"visible"!==this.horizontalScrollBarVisibility&&this._scrollView.hScrollBar.$.addClass("smart-hidden"),this.scrollHeight>0?this._scrollView.vScrollBar.$.removeClass("smart-hidden"):"visible"!==this.verticalScrollBarVisibility&&this._scrollView.vScrollBar.$.addClass("smart-hidden"),"hidden"===this.horizontalScrollBarVisibility&&this._scrollView.hScrollBar.$.addClass("smart-hidden"),"hidden"===this.verticalScrollBarVisibility&&this._scrollView.vScrollBar.$.addClass("smart-hidden"),"visible"===this.horizontalScrollBarVisibility&&this._scrollView.hScrollBar.$.removeClass("smart-hidden"),"visible"===this.verticalScrollBarVisibility&&(this._scrollView.vScrollBar.$.removeClass("smart-hidden"),this.disabled||(this._scrollView.vScrollBar.disabled=this.scrollHeight<=0)),this.computedHorizontalScrollBarVisibility&&this.computedVerticalScrollBarVisibility?(this._scrollView.hScrollBar.$.addClass("bottom-corner"),this._scrollView.vScrollBar.$.addClass("bottom-corner")):(this._scrollView.hScrollBar.$.removeClass("bottom-corner"),this._scrollView.vScrollBar.$.removeClass("bottom-corner")))}},{key:"ready",value:function(){a(h(t.prototype),"ready",this).call(this);this.$.verticalScrollBar.setAttribute("aria-controls",this.id),this.$.horizontalScrollBar.setAttribute("aria-controls",this.id),this._scrollView=new Smart.Utilities.Scroll(this,this.$.horizontalScrollBar,this.$.verticalScrollBar),this.refresh()}},{key:"refresh",value:function(){var e=this;function t(){var t=e.$.scrollViewerContentContainer.offsetWidth-e.$.scrollViewerContainer.offsetWidth;return t>0&&"hidden"!==e.horizontalScrollBarVisibility||"visible"===e.horizontalScrollBarVisibility?e.$.scrollViewerContainer.classList.add("hscroll"):e.$.scrollViewerContainer.classList.remove("hscroll"),t}function i(){var t;if(Smart.Utilities.Core.Browser.Safari){var i=e.$.scrollViewerContentContainer.getBoundingClientRect().height,a=e.$.scrollViewerContainer.getBoundingClientRect().height;t=i&&a?parseInt(i)-parseInt(a):e.$.scrollViewerContentContainer.offsetHeight-e.$.scrollViewerContainer.offsetHeight}else t=e.$.scrollViewerContentContainer.offsetHeight-e.$.scrollViewerContainer.offsetHeight;return t>0&&"hidden"!==e.verticalScrollBarVisibility||"visible"===e.verticalScrollBarVisibility?e.$.scrollViewerContainer.classList.add("vscroll"):e.$.scrollViewerContainer.classList.remove("vscroll"),t}if(e.$.scrollViewerContentContainer){var a=e.scrollWidth,n=e.scrollHeight;e.scrollWidth=t(),e.scrollHeight=i(),e.scrollHeight&&n===e.scrollHeight||(e.scrollWidth=t()),e.scrollWidth&&a===e.scrollWidth||(e.scrollHeight=i()),e.computedVerticalScrollBarVisibility&&(e.scrollHeight+=e._scrollView.hScrollBar.offsetHeight),e.computedHorizontalScrollBarVisibility&&(e.scrollWidth+=e._scrollView.vScrollBar.offsetWidth)}}},{key:"attached",value:function(){a(h(t.prototype),"attached",this).call(this),this._scrollView||(this._scrollView=new Smart.Utilities.Scroll(this,this.$.horizontalScrollBar,this.$.verticalScrollBar))}},{key:"detached",value:function(){a(h(t.prototype),"detached",this).call(this),this._scrollView&&(this._scrollView.unlisten(),delete this._scrollView)}},{key:"propertyChangedHandler",value:function(e,i,n){a(h(t.prototype),"propertyChangedHandler",this).call(this,e,i,n),"animation"!==e&&"theme"!==e&&this.refresh()}},{key:"computedHorizontalScrollBarVisibility",get:function(){return this._scrollView&&this._scrollView.hScrollBar?!this._scrollView.hScrollBar.$.hasClass("smart-hidden"):null}},{key:"computedVerticalScrollBarVisibility",get:function(){return this._scrollView&&this._scrollView.vScrollBar?!this._scrollView.vScrollBar.$.hasClass("smart-hidden"):null}},{key:"scrollWidth",get:function(){return this._scrollView&&this._scrollView.hScrollBar?1===this._scrollView.hScrollBar.max&&"visible"===this.horizontalScrollBarVisibility?0:this._scrollView.hScrollBar.max:-1},set:function(e){e<0&&(e=0),this._scrollView&&this._scrollView.hScrollBar&&(0===e&&"visible"===this.horizontalScrollBarVisibility?this._scrollView.hScrollBar.max=0:this._scrollView.hScrollBar.max=e,this.refreshScrollBarsVisibility())}},{key:"scrollHeight",get:function(){return this._scrollView&&this._scrollView.vScrollBar?1===this._scrollView.vScrollBar.max&&"visible"===this.verticalScrollBarVisibility?0:this._scrollView.vScrollBar.max:0},set:function(e){e<0&&(e=0),this._scrollView&&this._scrollView.vScrollBar&&(0===e&&"visible"===this.verticalScrollBarVisibility?this._scrollView.vScrollBar.max=1:this._scrollView.vScrollBar.max=e,this.refreshScrollBarsVisibility())}},{key:"scrollLeft",get:function(){return this._scrollView&&this._scrollView.hScrollBar?this._scrollView.hScrollBar.value:0},set:function(e){e<0&&(e=0),this._scrollView&&this._scrollView.hScrollBar&&(this._scrollView.hScrollBar.value=e)}},{key:"scrollTop",get:function(){return this._scrollView&&this._scrollView.vScrollBar?this._scrollView.vScrollBar.value:0},set:function(e){e<0&&(e=0),this._scrollView&&this._scrollView.vScrollBar&&(this._scrollView.vScrollBar.value=e)}}],[{key:"properties",get:function(){return{horizontalScrollBarVisibility:{type:"string",value:"auto",allowedValues:["auto","disabled","hidden","visible"]},verticalScrollBarVisibility:{type:"string",value:"auto",allowedValues:["auto","disabled","hidden","visible"]}}}},{key:"listeners",get:function(){return{"horizontalScrollBar.change":"_horizontalScrollbarHandler","verticalScrollBar.change":"_verticalScrollbarHandler",wheel:"_mouseWheelHandler"}}},{key:"styleUrls",get:function(){return["smart.scrollviewer.css"]}}]),t}(window[t].ContentElement)),window[t].Utilities.Assign("PositionDetection",function(){function e(t,i,a,n){m(this,e);if(i){var s="dropDown"+Math.floor(65536*(1+Math.random())).toString(16).substring(1);i.id=s,t.setAttribute("aria-controls",s)}this.context=t,this.dropDown=i,this.defaultParent=a,this.closeMethod=n}return f(e,[{key:"handleAutoPositioning",value:function(){var e=this,t=e.context;if("auto"===t.dropDownPosition&&!t.disabled){var i,a=window.requestAnimationFrame,n=Date.now();return i=a((function s(){i=a(s),("auto"!==t.dropDownPosition||t.disabled||null===t.parentElement)&&cancelAnimationFrame(i),Date.now()-n>=200&&(e.scrollHandler(),n=Date.now())}))}}},{key:"checkBrowserBounds",value:function(e){var t=this.context;if("auto"===t.dropDownPosition&&!t.disabled)switch(e){case"vertically":this.checkBrowserBoundsVertically();break;case"horizontally":this.checkBrowserBoundsHorizontally();break;default:this.checkBrowserBoundsVertically(),this.checkBrowserBoundsHorizontally()}}},{key:"checkBrowserBoundsHorizontally",value:function(){var e,t=this.context,i=this.dropDown,a=0;y.isMobile||window.innerWidth===document.documentElement.clientWidth||(a=window.innerWidth-document.documentElement.clientWidth),null!==t._dropDownParent?e=!0:i.style.left="";var n=window.innerWidth-a,s=t.getBoundingClientRect().left;if(s<0&&(i.style.left=(e?0:Math.abs(s))+"px",s=parseFloat(i.style.left)),s+i.offsetWidth>n){var o=s-Math.abs(n-s-i.offsetWidth);e&&(o+=window.pageXOffset),i.style.left=(e?o:o-s)+"px",window.innerWidth===document.documentElement.clientWidth&&(i.style.left=parseFloat(i.style.left)+a+"px"),e&&window.innerHeight===document.documentElement.clientHeight&&this.positionDropDown(!0)}}},{key:"checkBrowserBoundsVertically",value:function(e){var t=this.context,i=this.dropDown,a=t._dropDownListPosition;e||(e=t.getBoundingClientRect()),0!==e.height&&(document.documentElement.clientHeight-Math.abs(e.top+e.height+i.offsetHeight)>=0?t._dropDownListPosition="bottom":e.top-i.offsetHeight>=0?t._dropDownListPosition="top":t._dropDownListPosition="overlay-center",this.updatePositionAttribute(a,t._dropDownListPosition))}},{key:"scrollHandler",value:function(){var e=this.context;if(e.parentElement){var t=e.getBoundingClientRect();if(t.top!==e._positionTop){var i=e._dropDownListPosition;this.checkBrowserBoundsVertically(t),e._dropDownListPosition!==i&&this.positionDropDown(),e._positionTop=t.top}}}},{key:"getDropDownParent",value:function(e){var t=this.context,i=this.dropDown,a=t.dropDownAppendTo;t._positionedParent=null,null===a?t._dropDownParent=null:"body"===a||a===document.body?t._dropDownParent=document.body:a instanceof HTMLElement?t._dropDownParent=a:"string"==typeof a&&(a=document.getElementById(a))instanceof HTMLElement?t._dropDownParent=a:(t.dropDownAppendTo=null,t._dropDownParent=null);var n=t._dropDownParent;if(null!==n){for(;n&&"static"===window.getComputedStyle(n).position&&n!==document.body;)n=n.parentElement;n===document.body?t._positionedParent=null:t._positionedParent=n,i&&(i.setAttribute("animation",t.animation),""!==t.theme&&i.$.addClass(t.theme),e&&(t._dropDownParent.appendChild(i),i.$.addClass("smart-drop-down-repositioned")),-1===t.detachedChildren.indexOf(i)&&t.detachedChildren.push(i))}}},{key:"dropDownAppendToChangedHandler",value:function(){var e=this.context,t=this.dropDown,i=e._dropDownParent;this.getDropDownParent(),e._dropDownParent!==i&&(e[this.closeMethod](),["left","top","font-size","font-family","font-style","font-weight"].forEach((function(e){return t.style[e]=null})),null===e._dropDownParent?(this.defaultParent.appendChild(t),t.$.removeClass("smart-drop-down-repositioned")):(e._dropDownParent.appendChild(t),t.$.addClass("smart-drop-down-repositioned")))}},{key:"dropDownPositionChangedHandler",value:function(){this.dropDown.style.transition="none",this.context[this.closeMethod](),this.setDropDownPosition(),this.handleAutoPositioning()}},{key:"dropDownAttached",value:function(e){var t=this.context;null!==t._dropDownParent&&(t._dropDownParent.appendChild(this.dropDown),this.handleAutoPositioning(),e&&t[e]())}},{key:"dropDownDetached",value:function(){var e=this.context;null!==e._dropDownParent&&document.body.contains(this.dropDown)&&document.body.contains(e._dropDownParent)&&e._dropDownParent.removeChild(this.dropDown)}},{key:"setDropDownPosition",value:function(){var e=this.context,t=e.dropDownPosition,i=e._dropDownListPosition;"auto"===t?this.checkBrowserBounds():e._dropDownListPosition=t,this.updatePositionAttribute(i,e._dropDownListPosition)}},{key:"updatePositionAttribute",value:function(e,t){var i=this.context,a=this.dropDown;i.$.dropDownButton&&!i.$.dropDownButton.hasAttribute(t)&&(i.$.dropDownButton.removeAttribute(e),i.$.dropDownButton.setAttribute(t,"")),a.hasAttribute(t)||(a.style.transition="none",a.removeAttribute(e),a.setAttribute(t,""),requestAnimationFrame((function(){a.style.transition=null})))}},{key:"positionDropDown",value:function(e){var t=this.context,i=this.dropDown;if(t.opened&&null!==t._dropDownParent){var a,n,s=t.getBoundingClientRect();if(this.customPositionDropDown){var o=this.customPositionDropDown(s);a=o.left,n=o.top}else switch(a=s.left,n=s.top,t._dropDownListPosition){case"bottom":n+=t.$.container.offsetHeight-1;break;case"center-bottom":n+=t.$.container.offsetHeight-1,a+=t.offsetWidth-i.offsetWidth/2;break;case"center-top":n-=i.offsetHeight-1,a+=t.offsetWidth-i.offsetWidth/2;break;case"top":n-=i.offsetHeight-1;break;case"overlay-bottom":break;case"overlay-center":n-=i.offsetHeight/2-t.offsetHeight/2;break;case"overlay-top":n-=i.offsetHeight-t.offsetHeight}var r=this.getDropDownOffset();i.style.top=n+r.y+"px",e||(i.style.left=a+r.x+"px")}}},{key:"getDropDownOffset",value:function(){var e,t,i=this.context._positionedParent;if(i){var a=i.getBoundingClientRect();e=-a.left,t=-a.top}else e=window.pageXOffset,t=window.pageYOffset;return{x:e,y:t}}},{key:"placeOverlay",value:function(){var e=this.context;if(e.dropDownOverlay&&!e._overlay){var t=document.createElement("div");t.classList.add("smart-drop-down-overlay"),t.style.width=document.documentElement.scrollWidth+"px",t.style.height=document.documentElement.scrollHeight+"px",document.body.appendChild(t),e._overlay=t}}},{key:"removeOverlay",value:function(e){var t=this,i=t.context;i._overlay&&(i.hasAnimation&&e?requestAnimationFrame((function e(){t.dropDown.getBoundingClientRect().height>0?requestAnimationFrame(e):(document.body.removeChild(i._overlay),delete i._overlay)})):(document.body.removeChild(i._overlay),delete i._overlay))}}]),e}())}()},1:function(e,t,i){"use strict";function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function o(e,t,i){return t&&s(e.prototype,t),i&&s(e,i),e}function r(e,t){return!t||"object"!==a(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function l(e,t,i){return(l="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,i){var a=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=d(e)););return e}(e,t);if(a){var n=Object.getOwnPropertyDescriptor(a,t);return n.get?n.get.call(i):n.value}})(e,t,i||e)}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function h(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}Smart("smart-button",function(e){function t(){return n(this,t),r(this,d(t).apply(this,arguments))}return h(t,Smart.ContentElement),o(t,[{key:"template",value:function(){return"<button class=\"smart-button\" inner-h-t-m-l='[[innerHTML]]' id='button' type='[[type]]' name='[[name]]' value='[[value]]' disabled='[[disabled]]' role=\"presentation\"></button>"}},{key:"focus",value:function(){this.$.button?this.$.button.focus():HTMLElement.prototype.focus.call(this)}},{key:"blur",value:function(){this.$.button?this.$.button.blur():HTMLElement.prototype.blur.call(this)}},{key:"_upHandler",value:function(e){e.stopPropagation(),this.$.setAttributeValue("active",!1)}},{key:"_focusHandler",value:function(){this.$.setAttributeValue("focus",!0)}},{key:"_blurHandler",value:function(){this.$.setAttributeValue("focus",!1)}},{key:"_clickHandler",value:function(e){("release"!==this.clickMode&&"pressAndRelease"!==this.clickMode||this.readonly)&&(e.preventDefault(),e.stopPropagation())}},{key:"_downHandler",value:function(e){if(!(this.disabled||(this.hasRippleAnimation&&Smart.Utilities.Animation.Ripple.animate(this,e.pageX,e.pageY),this.$.setAttributeValue("active",!0),"press"!==this.clickMode&&"pressAndRelease"!==this.clickMode||this.readonly))){var t="buttons"in e?e.buttons:e.which;this.$.fireEvent("click",{buttons:t,clientX:e.clientX,clientY:e.clientY,pageX:e.pageX,pageY:e.pageY,screenX:e.screenX,screenY:e.screenY})}}},{key:"_mouseEnterHandler",value:function(e){if(!this.readonly&&(this.$button.setAttributeValue("hover",!0),this.$.setAttributeValue("hover",!0),"hover"===this.clickMode)){var t="buttons"in e?e.buttons:e.which;this.$.fireEvent("click",{buttons:t,clientX:e.clientX,clientY:e.clientY,pageX:e.pageX,pageY:e.pageY,screenX:e.screenX,screenY:e.screenY})}}},{key:"_touchEndHandler",value:function(){var e=this;setTimeout((function(){e.$button.setAttributeValue("hover",!1),e.$.setAttributeValue("hover",!1)}),300)}},{key:"_mouseLeaveHandler",value:function(){this.$button.setAttributeValue("hover",!1),this.$.setAttributeValue("hover",!1)}},{key:"propertyChangedHandler",value:function(e,i,a){l(d(t.prototype),"propertyChangedHandler",this).call(this,e,i,a);"disabled"===e?(this._setFocusable(),this.$button&&this.$button.setAttributeValue("hover",!1),this.$.setAttributeValue("hover",!1),this instanceof Smart.RepeatButton&&this._stopRepeat()):"unfocusable"===e&&this._setFocusable()}},{key:"_setFocusable",value:function(){var e=this.$.button?this.$.button:this;if(this.disabled||this.unfocusable)return e.removeAttribute("tabindex"),void(e.tabIndex=-1);e.tabIndex=this.tabIndex>0?this.tabIndex:0}},{key:"ready",value:function(){l(d(t.prototype),"ready",this).call(this),this.setAttribute("role","button"),this._setFocusable(),this.enableShadowDOM&&this.$.hiddenInput&&this.appendChild(this.$.hiddenInput)}}],[{key:"properties",get:function(){return{value:{type:"string"},name:{type:"string"},type:{value:"button",type:"string"},clickMode:{allowedValues:["hover","press","release","pressAndRelease"],type:"string",value:"release"}}}},{key:"styleUrls",get:function(){return["smart.button.css"]}},{key:"listeners",get:function(){return{"button.down":"_downHandler","button.mouseenter":"_mouseEnterHandler","button.mouseleave":"_mouseLeaveHandler","button.touchend":"_touchEndHandler","button.click":"_clickHandler","button.up":"_upHandler",up:"_upHandler","button.focus":"_focusHandler","button.blur":"_blurHandler"}}}]),t}()),Smart("smart-repeat-button",function(e){function t(){return n(this,t),r(this,d(t).apply(this,arguments))}return h(t,Smart.Button),o(t,[{key:"_clickHandler",value:function(e){("release"!==this.clickMode||this.preventDefaultClick||this.readonly||this.disabled)&&(e.preventDefault(),e.stopPropagation(),this.preventDefaultClick=!1)}},{key:"_updateInBoundsFlag",value:function(e){this._isPointerInBounds=!0,"mouseleave"===e.type?(this._isPointerInBounds=!1,this.$button.setAttributeValue("hover",!1),this.$.setAttributeValue("hover",!1)):(this.$button.setAttributeValue("hover",!0),this.$.setAttributeValue("hover",!0)),1!==("buttons"in e?e.buttons:e.which)&&this._stopRepeat(e)}},{key:"_startRepeat",value:function(e){var t=this;t._initialTimer||t.readonly||(t._initialTimer=setTimeout((function(){t._repeatTimer=setInterval((function(){if(t._isPointerInBounds){var i="buttons"in e?e.buttons:e.which;t.$.fireEvent("click",{buttons:i,clientX:e.clientX,clientY:e.clientY,pageX:e.pageX,pageY:e.pageY,screenX:e.screenX,screenY:e.screenY}),t.preventDefaultClick=!0}}),t.delay)}),t.initialDelay))}},{key:"_stopRepeat",value:function(){this.readonly||(this.$.setAttributeValue("active",!1),this._repeatTimer&&(clearInterval(this._repeatTimer),this._repeatTimer=null),this._initialTimer&&(clearTimeout(this._initialTimer),this._initialTimer=null))}}],[{key:"properties",get:function(){return{delay:{value:50,type:"number"},initialDelay:{value:150,type:"number"}}}},{key:"listeners",get:function(){return{"button.mousedown":"_startRepeat","button.mouseenter":"_updateInBoundsFlag","button.mouseleave":"_updateInBoundsFlag","document.mouseup":"_stopRepeat"}}}]),t}()),Smart("smart-toggle-button",function(e){function t(){return n(this,t),r(this,d(t).apply(this,arguments))}return h(t,Smart.Button),o(t,[{key:"ready",value:function(){l(d(t.prototype),"ready",this).call(this),this._setAriaState()}},{key:"_setAriaState",value:function(){var e=this.checked;null!==e?this.setAttribute("aria-pressed",e):this.setAttribute("aria-pressed","mixed")}},{key:"_buttonClickHandler",value:function(){}},{key:"_buttonMouseLeaveHandler",value:function(){this.removeAttribute("hover")}},{key:"_buttonMouseEnterHandler",value:function(){this.setAttribute("hover",""),this.disabled||this.readonly||"hover"!==this.clickMode||(this._changeCheckState("pointer"),this.focus(),this._updateHidenInputNameAndValue())}},{key:"_documentUpHandler",value:function(){this._pressed&&(this._pressed=!1,this.disabled||this.readonly||"press"===this.clickMode||(this._changeCheckState("pointer"),this.focus(),this._updateHidenInputNameAndValue()))}},{key:"_downHandler",value:function(e){this.disabled||this.readonly||(this.hasRippleAnimation&&Smart.Utilities.Animation.Ripple.animate(this,e.pageX,e.pageY),this._pressed=!0,"press"!==this.clickMode&&"pressAndRelease"!==this.clickMode||(this._changeCheckState("pointer"),this.$.fireEvent("click"),this._updateHidenInputNameAndValue()),"press"===this.clickMode&&(e.preventDefault(),e.stopPropagation()))}},{key:"_dragStartHandler",value:function(e){e.preventDefault()}},{key:"_keyHandler",value:function(e){if(!0!==this.disabled&&!this.readonly&&32===e.keyCode){if("keydown"===e.type)return void e.preventDefault();if("none"===this.switchMode)return;this._changeCheckState("keyboard"),this._updateHidenInputNameAndValue()}}},{key:"_changeCheckState",value:function(e){var t=null;null===this.checked?this.checked=!0:(t=this.checked,this.checked=!this.checked),this._handleTextSelection(),this.$.fireEvent("change",{value:this.checked,oldValue:t,changeType:e}),this._setAriaState()}},{key:"_handleTextSelection",value:function(){var e=this;e.$.addClass("smart-unselectable"),e.timer&&clearTimeout(e.timer),e.timer=setTimeout((function(){return e.$.removeClass("smart-unselectable")}),500)}},{key:"propertyChangedHandler",value:function(e,i,a){l(d(t.prototype),"propertyChangedHandler",this).call(this,e,i,a);if("checked"===e)return this.$.fireEvent("change",{value:a,oldValue:i,changeType:"api"}),void this._setAriaState();switch(e){case"trueTemplate":this._handleTemplate(!0);break;case"falseTemplate":this._handleTemplate(!1);break;case"indeterminateTemplate":this._handleTemplate()}}},{key:"_htmlBindOnInitialization",value:function(){this._bindContentProperty("trueContent","smart-true-content"),this._bindContentProperty("falseContent","smart-false-content"),this._bindContentProperty("indeterminateContent","smart-indeterminate-content")}},{key:"_bindContentProperty",value:function(e,t){if(this.$[e+"Container"]){var i=document.createElement("div");i.innerHTML=this.innerHTML;var a,n=i.getElementsByClassName(t);if(n.length>0)for(var s=0;s<n.length;s++)a=n[s];""===this[e]&&(this[e]=void 0===a?"":a.outerHTML),this.$[e+"Container"].innerHTML=this[e]}}},{key:"_updateContentProperties",value:function(){var e=this;function t(t){e.$[t+"Container"]&&(e[t]=e.$[t+"Container"].innerHTML)}t("trueContent"),t("falseContent"),t("indeterminateContent")}},{key:"_updateHidenInputValue",value:function(){var e;this.$.hiddenInput&&(e=null===this.checked?"null":!1===this.checked?"off":this.value||"on",this.$.hiddenInput.setAttribute("value",e))}},{key:"_updateHidenInputName",value:function(){if(this.$.hiddenInput){var e=!1===this.checked?"":this.name||"";this.$.hiddenInput.setAttribute("name",e)}}},{key:"_updateHidenInputNameAndValue",value:function(){this._updateHidenInputName(),this._updateHidenInputValue()}},{key:"_handleTemplate",value:function(e,t){var i,a,n;if(!0===e?(i=this.trueTemplate,a=this.$.trueContentContainer,n=this.trueContent):!1===e?(i=this.falseTemplate,a=this.$.falseContentContainer,n=this.falseContent):(i=this.indeterminateTemplate,a=this.$.indeterminateContentContainer,n=this.indeterminateContent),t&&(a.innerHTML=n||""),null!==i&&i)if("function"!=typeof i)if("content"in document.createElement("template"))if(null!==(i=document.getElementById(i))&&"content"in i){for(var s,o=i.content,r=o.childNodes.length,l=/{{\w+}}/g,d=[],h=0;h<r;h++)for(s=l.exec(o.childNodes[h].innerHTML);s;)d.push({childNodeIndex:h,bindingString:s[0]}),s=l.exec(o.childNodes[h].innerHTML);for(var u,c,m=d.length,p=document.importNode(i.content,!0),f=0;f<m;f++){u=p.childNodes[d[f].childNodeIndex],c=d.length;for(var g=0;g<c;g++)u.innerHTML=u.innerHTML.replace(d[f].bindingString,n)}a.innerHTML="";for(var v=0;v<p.childNodes.length;v++)p.childNodes[v].outerHTML&&(a.innerHTML+=p.childNodes[v].outerHTML)}else this.error(this.localize("invalidTemplate",{elementType:this.nodeName.toLowerCase(),property:"template"}));else this.error(this.localize("htmlTemplateNotSuported",{elementType:this.nodeName.toLowerCase()}));else i(a,{value:n})}}],[{key:"properties",get:function(){return{checked:{value:!1,type:"boolean?"},falseContent:{value:"",reflectToAttribute:!1,type:"string"},indeterminateContent:{value:"",reflectToAttribute:!1,type:"string"},indeterminate:{value:!1,type:"boolean"},trueContent:{value:"",reflectToAttribute:!1,type:"string"},indeterminateTemplate:{value:null,type:"any"},trueTemplate:{value:null,type:"any"},falseTemplate:{value:null,type:"any"},type:{value:"toggle",type:"string",defaultReflectToAttribute:!0,readonly:!0}}}},{key:"listeners",get:function(){return{keydown:"_keyHandler",keyup:"_keyHandler",dragstart:"_dragStartHandler","button.click":"_buttonClickHandler","button.mouseenter":"_buttonMouseEnterHandler","button.mouseleave":"_buttonMouseLeaveHandler","document.up":"_documentUpHandler"}}}]),t}())},2:function(e,t,i){"use strict";function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function n(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function s(e,t){return!t||"object"!==a(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function o(e,t,i){return(o="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,i){var a=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=r(e)););return e}(e,t);if(a){var n=Object.getOwnPropertyDescriptor(a,t);return n.get?n.get.call(i):n.value}})(e,t,i||e)}function r(e){return(r=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}Smart("smart-scroll-bar",function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),s(this,r(t).apply(this,arguments))}var i,a,d;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(t,Smart.BaseElement),i=t,d=[{key:"properties",get:function(){return{clickRepeatDelay:{type:"integer",value:50},largeStep:{type:"integer",value:100},min:{type:"integer",value:0},max:{type:"integer",value:1e3},mechanicalAction:{value:"switchWhileDragging",allowedValues:["switchUntilReleased","switchWhenReleased","switchWhileDragging"],type:"string"},orientation:{type:"string",value:"horizontal",allowedValues:["horizontal","vertical"]},step:{type:"integer",value:10},showButtons:{type:"boolean",value:!0,defaultReflectToAttribute:!0},value:{type:"integer",value:0}}}},{key:"styleUrls",get:function(){return["smart.scrollbar.css"]}},{key:"listeners",get:function(){return{"nearButton.click":"_nearButtonClickHandler","nearButton.mousedown":"_startRepeat","nearButton.mouseup":"_stopRepeat","nearButton.mouseenter":"_updateInBoundsFlag","nearButton.mouseleave":"_updateInBoundsFlag","farButton.click":"_farButtonClickHandler","farButton.mousedown":"_startRepeat","farButton.mouseup":"_stopRepeat","farButton.mouseenter":"_updateInBoundsFlag","farButton.mouseleave":"_updateInBoundsFlag","track.down":"_trackDownHandler","track.click":"_trackClickHandler","track.move":"_trackMoveHandler","thumb.down":"_dragStartHandler","document.move":"_dragHandler","document.up":"_dragEndHandler",up:"_dragEndHandler","document.selectstart":"_selectStartHandler",resize:"_resizeHandler"}}}],(a=[{key:"template",value:function(){return'<div id="container" class="smart-container" role="presentation">\n                    <div id="nearButton" class="smart-scroll-button smart-arrow-left" role="presentation" aria-hidden="true"></div>\n                    <div  id="track" class="smart-track" role="presentation">\n                        <div id="thumb" class="smart-thumb" role="presentation"></div>\n                    </div>\n                    <div id="farButton" class="smart-scroll-button smart-arrow-right" role="presentation" aria-hidden="true"></div>\n            </div>'}},{key:"_updateInBoundsFlag",value:function(e){var t=e.target;t._isPointerInBounds=!0,"mouseleave"===e.type&&(t._isPointerInBounds=!1),1!==("buttons"in e?e.buttons:e.which)&&this._stopRepeat(e)}},{key:"_startRepeat",value:function(e){var t=this;if(!t.disabled){var i=e.target;i._initialTimer||(i._initialTimer=setTimeout((function(){i._repeatTimer=setInterval((function(){if(i._isPointerInBounds){var t="buttons"in e?e.buttons:e.which;i.$.fireEvent("click",{buttons:t,clientX:e.clientX,clientY:e.clientY,pageX:e.pageX,pageY:e.pageY,screenX:e.screenX,screenY:e.screenY})}}),t.clickRepeatDelay)}),3*t.clickRepeatDelay))}}},{key:"_stopRepeat",value:function(e){if(!this.disabled){var t=e.target;t._repeatTimer&&(clearInterval(t._repeatTimer),t._repeatTimer=null),t._initialTimer&&(clearTimeout(t._initialTimer),t._initialTimer=null)}}},{key:"_calculateThumbSize",value:function(e){var t=this.max-this.min,i="horizontal"===this.orientation?this.$.track.offsetWidth>10:this.$.track.offsetHeight>10,a=0;return t>=1&&i?(a=e/(t+e)*e,this.$.thumb.className.indexOf("smart-hidden")>=0&&this.$thumb.removeClass("smart-hidden")):this.$thumb.addClass("smart-hidden"),Math.max(10,Math.min(a,e))}},{key:"_dragStartHandler",value:function(e){this.disabled||(this.thumbCapture=!0,this.dragStartX=e.clientX,this.dragStartY=e.clientY,this.dragStartValue=this.value,e.stopPropagation(),e.preventDefault())}},{key:"_dragHandler",value:function(e){if(!0===this.thumbCapture){this._isThumbDragged=!0;var t=(this.max-this.min)/(this.scrollBarSize-this.thumbSize),i="horizontal"===this.orientation?(e.clientX-this.dragStartX)*t:(e.clientY-this.dragStartY)*t,a=i;this.rightToLeft&&"horizontal"===this.orientation&&(a=-i),this._updateValue(this.dragStartValue+a),e.stopPropagation(),e.preventDefault(),e.originalEvent&&(e.originalEvent.stopPropagation(),e.originalEvent.preventDefault())}}},{key:"_dragEndHandler",value:function(e){this._trackDownTimer&&(clearInterval(this._trackDownTimer),this._trackDownTimer=null),this.thumbCapture&&(this.thumbCapture=!1,this._isThumbDragged=!1,"switchWhenReleased"===this.mechanicalAction?this._updateValue(this.dragStartValue,this.value):"switchUntilReleased"===this.mechanicalAction&&this._updateValue(this.dragStartValue),e.preventDefault(),e.stopPropagation(),e.originalEvent.preventDefault(),e.originalEvent.stopPropagation())}},{key:"_farButtonClickHandler",value:function(){if(!this.disabled){var e=this.value;this._updateValue(this.value+("horizontal"===this.orientation&&this.rightToLeft?-1:1)*this.step),"switchUntilReleased"===this.mechanicalAction&&this._updateValue(e)}}},{key:"_nearButtonClickHandler",value:function(){if(!this.disabled){var e=this.value;this._updateValue(this.value-("horizontal"===this.orientation&&this.rightToLeft?-1:1)*this.step),"switchUntilReleased"===this.mechanicalAction&&this._updateValue(e)}}},{key:"propertyChangedHandler",value:function(e,i,a){switch(o(r(t.prototype),"propertyChangedHandler",this).call(this,e,i,a),e){case"min":case"max":case"orientation":case"showButtons":this._layout(),"min"===e?this.setAttribute("aria-valuemin",a):"max"===e?this.setAttribute("aria-valuemax",a):"orientation"===e&&this.setAttribute("aria-orientation",a);break;case"value":this._updateValue(i,a);break;default:this._layout()}}},{key:"render",value:function(){this.setAttribute("role","scrollbar"),this.setAttribute("aria-orientation",this.orientation),this.setAttribute("aria-valuemin",this.min),this.setAttribute("aria-valuemax",this.max),this.setAttribute("aria-valuenow",this.value),this._layout(),o(r(t.prototype),"render",this).call(this)}},{key:"_resizeHandler",value:function(){this._layout()}},{key:"refresh",value:function(){this._layout()}},{key:"_layout",value:function(){this.scrollBarSize="horizontal"===this.orientation?this.$.track.offsetWidth:this.$.track.offsetHeight,this.thumbSize=this._calculateThumbSize(this.scrollBarSize),"horizontal"===this.orientation&&this.$.thumb.style.width!==this.thumbSize+"px"?this.$.thumb.style.width=this.thumbSize+"px":"vertical"===this.orientation&&this.$.thumb.style.height!==this.thumbSize+"px"&&(this.$.thumb.style.height=this.thumbSize+"px"),"horizontal"===this.orientation?(this.$.nearButton.classList.contains("smart-arrow-up")&&this.$.nearButton.classList.remove("smart-arrow-up"),this.$.farButton.classList.contains("smart-arrow-down")&&this.$.farButton.classList.remove("smart-arrow-down"),this.$.nearButton.classList.contains("smart-arrow-left")||this.$.nearButton.classList.add("smart-arrow-left"),this.$.farButton.classList.contains("smart-arrow-right")||this.$.farButton.classList.add("smart-arrow-right")):(this.$.nearButton.classList.contains("smart-arrow-left")&&this.$.nearButton.classList.remove("smart-arrow-left"),this.$.farButton.classList.contains("smart-arrow-right")&&this.$.farButton.classList.remove("smart-arrow-right"),this.$.nearButton.classList.contains("smart-arrow-up")||this.$.nearButton.classList.add("smart-arrow-up"),this.$.farButton.classList.contains("smart-arrow-down")||this.$.farButton.classList.add("smart-arrow-down")),this._updateThumbPosition(),(this.value>this.max||this.value<this.min)&&this._updateValue(this.value,this.value>this.max?this.max:this.min)}},{key:"_selectStartHandler",value:function(e){this.thumbCapture&&e.preventDefault()}},{key:"_trackDownHandler",value:function(e){var t=this;e.target===t.$.track&&(t._trackDownTimer&&clearInterval(t._trackDownTimer),t.thumbCapture||(t._trackDownTimer=setInterval((function(){t._trackClickHandler(e)}),t.clickRepeatDelay),e.stopPropagation(),e.preventDefault()))}},{key:"_trackClickHandler",value:function(e){if(!this.disabled){if(this._isThumbDragged)return clearInterval(this._trackDownTimer),void(this._trackDownTimer=null);var t=this.$.thumb.getBoundingClientRect(),i=e.pageX-window.pageXOffset,a=e.pageY-window.pageYOffset,n=(this.rightToLeft?-1:1)*this.value;"horizontal"===this.orientation?i>(this._isThumbDragged?this.dragStartX:t.right)?this._updateValue(this.value+(this.rightToLeft?-1:1)*this.largeStep):i<(this._isThumbDragged?this.dragStartX:t.left)&&this._updateValue(this.value-(this.rightToLeft?-1:1)*this.largeStep):a>(this._isThumbDragged?this.dragStartY:t.bottom)?this._updateValue(this.value+this.largeStep):a<(this._isThumbDragged?this.dragStartY:t.top)&&this._updateValue(this.value-this.largeStep),"switchUntilReleased"===this.mechanicalAction&&this._updateValue(n)}}},{key:"_trackMoveHandler",value:function(e){"touchmove"===e.originalEvent.type&&e.originalEvent.preventDefault()}},{key:"_updateValue",value:function(e,t){var i=this;if(1===arguments.length&&(t=e,e=i.value),(void 0===t||isNaN(t))&&(t=i.min),t>i.max&&(t=i.max),t<i.min&&(t=i.min),i.value=t,e!==t){if(i.setAttribute("aria-valuenow",t),i._updateThumbPosition(),i.thumbCapture&&"switchWhenReleased"===i.mechanicalAction)return;if(i.onChange)return void i.onChange({value:i.value,oldValue:e,min:i.min,max:i.max});i.$.fireEvent("change",{value:i.value,oldValue:e,min:i.min,max:i.max})}}},{key:"_updateThumbPosition",value:function(){var e=this.$.track.offsetHeight,t=this.$.track.offsetWidth,i="horizontal"===this.orientation?t:e,a=this._calculateThumbSize(i),n="horizontal"===this.orientation?t-a:e-a,s=(i-a)/(this.max-this.min)*(this.value-this.min);this.rightToLeft&&"horizontal"===this.orientation&&(s=(i-a)/(this.max-this.min)*(this.max-this.value-this.min)),s=Math.min(n,Math.max(0,s)),"vertical"===this.orientation&&this.$.thumb.style.top!==s+"px"?this.$.thumb.style.top=s+"px":"horizontal"===this.orientation&&this.$.thumb.style.left!==s+"px"&&(this.$.thumb.style.left=s+"px")}}])&&n(i.prototype,a),d&&n(i,d),t}())},28:function(e,t,i){"use strict";function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function o(e,t,i){return t&&s(e.prototype,t),i&&s(e,i),e}function r(e,t){return!t||"object"!==a(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function l(e,t,i){return(l="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,i){var a=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=d(e)););return e}(e,t);if(a){var n=Object.getOwnPropertyDescriptor(a,t);return n.get?n.get.call(i):n.value}})(e,t,i||e)}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function h(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}Smart("smart-window",function(e){function t(){return n(this,t),r(this,d(t).apply(this,arguments))}return h(t,Smart.ContentElement),o(t,[{key:"template",value:function(){return'<div id="container">\n                    <div id="headerSection" class="smart-header-section" role="heading" aria-level="1">\n                        <div id="header" class="smart-header" role="presentation">[[label]]</div>\n                        <div id="buttonsContainer" class="smart-buttons-container" role="presentation">\n                            <smart-button id="pinButton" class="smart-pin-button" animation="[[animation]]" theme="[[theme]]" aria-label="Pin"></smart-button>\n                            <smart-button id="collapseButton" class="smart-collapse-button" animation="[[animation]]" theme="[[theme]]" aria-label="Collapse"></smart-button>\n                            <smart-button id="minimizeButton" class="smart-minimize-button" animation="[[animation]]" theme="[[theme]]" aria-label="Minimize"></smart-button>\n                            <smart-button id="maximizeButton" class="smart-maximize-button" animation="[[animation]]" theme="[[theme]]" aria-label="Maximize"></smart-button>\n                            <smart-button id="closeButton" class="smart-close-button" animation="[[animation]]" theme="[[theme]]" aria-label="Close"></smart-button>\n                        </div>\n                    </div>\n                    <div class="smart-content" inner-h-t-m-l="[[innerHTML]]"><content></content></div>\n                    <div id="footer" class="smart-footer"></div>\n                </div>'}},{key:"propertyChangedHandler",value:function(e,i,a){switch(e){case"collapsed":a?this.collapse(!0):this.expand(!0);break;case"disabled":case"unfocusable":this._setFocusable();break;case"headerTemplate":case"footerTemplate":this._applyLayoutTemplate(this.$[e.split(/[T]/)[0]],a);break;case"headerButtons":this._setHeaderButtons();break;case"headerPosition":var n=this.minimized;this._preventEventFiring=!0,this.restore(),delete this._preventEventFiring,n&&this.minimize();break;case"label":this.$.header.innerHTML=this.label;break;case"maximized":a?this.maximize(!0):this.restore(e);break;case"modal":this._setModal(),this.setAttribute("aria-modal",a);break;case"minimized":a?this.minimize(!0):this.restore(e);break;case"opened":a?this.open(!0):this.close(!0);break;case"resizeMode":this.$.container.className="smart-container";break;case"windowParent":this._setElementParent(a);break;default:l(d(t.prototype),"propertyChangedHandler",this).call(this,e,i,a)}}},{key:"ready",value:function(){l(d(t.prototype),"ready",this).call(this);this._windowParent={initialParent:this.parentElement}}},{key:"render",value:function(){var e=this.animation;this.$.header.id||(this.$.header.id=this.id+"Header"),this.$.content.id||(this.$.content.id=this.id+"Content"),this.opened||(this.animation="none"),this._windowParent={initialParent:this.parentElement},this.$.addClass("smart-window"),this._createElement(),this._setElementParent(this.windowParent),this._setHeaderButtons(),this.headerTemplate&&this._applyLayoutTemplate(this.$.header,this.headerTemplate),this.footerTemplate&&this._applyLayoutTemplate(this.$.footer,this.footerTemplate),this.opened?this.open():this.close(),this.maximized&&this.maximize(!0),this.minimized&&this.minimize(!0),this.collapsed&&this.collapse(!0),this.pinned?this.pin():this.unpin(),this._setFocusable(),this.animation=e,this.setAttribute("aria-modal",this.modal),this.setAttribute("aria-labelledby",this.$.header.id),l(d(t.prototype),"render",this).call(this)}},{key:"_styleChangedHandler",value:function(){this.maximized}},{key:"_setFocusable",value:function(){if(this.disabled||this.unfocusable)this.removeAttribute("tabindex");else{var e=this.tabIndex>0?this.tabIndex:0;this.setAttribute("tabindex",e)}}},{key:"appendChild",value:function(e){var t=this;if(!t.isCompleted||e instanceof HTMLElement&&e.classList.contains("smart-resize-trigger-container")){var i=Array.prototype.slice.call(arguments,2);return HTMLElement.prototype.appendChild.apply(t,i.concat(Array.prototype.slice.call(arguments)))}e?t.$.content.appendChild(e):t.error(t.localize("invalidNode",{elementType:t.nodeName.toLowerCase(),method:"appendChild",node:"node"}))}},{key:"collapse",value:function(e){!e&&this.collapsed||(this.collapsed=!0,this.$.fireEvent("collapse"),"left"===this.headerPosition||"right"===this.headerPosition?this.style.width="":this.style.height="")}},{key:"close",value:function(e){if(e||!this.$.hasClass("smart-visibility-hidden")){if(this.isCompleted){if(this.$.fireEvent("closing").defaultPrevented)return;this.$.addClass("smart-visibility-hidden"),this.opened=!1,this.isRendered&&this.$.fireEvent("close")}else this.$.addClass("smart-visibility-hidden"),this.opened=!1;this._setModal(),this.removeAttribute("ontop")}}},{key:"attached",value:function(){l(d(t.prototype),"attached",this).call(this);this.isRendered,this._windowParent.parent&&this._windowParent.parent!==document.body&&this._windowParent.parent.querySelectorAll("smart-window, smart-dialog-window, smart-progress-window, smart-wait-window, smart-alert-window, smart-prompt-window, smart-multiline-prompt-window")&&(this._windowParent.parent.style.position="relative"),this.opened&&this._modal&&this.parentElement.insertBefore(this._modal,this)}},{key:"bringToFront",value:function(){if(this.parentElement){var e=this.parentElement.closest(".smart-window");if(e)e.bringToFront();else{for(var t=document.body.getElementsByClassName("smart-window"),i=0;i<t.length;i++)t[i].removeAttribute("ontop");1===t.length&&t[0]===this||this.setAttribute("ontop","")}}}},{key:"clear",value:function(){this.isCompleted&&"Smart-WINDOW"===this.nodeName&&(this.$.content.innerHTML="")}},{key:"detached",value:function(){l(d(t.prototype),"detached",this).call(this);this._windowParent.parent&&!this._windowParent.parent.querySelectorAll("smart-window, smart-dialog-window, smart-progress-window, smart-wait-window, smart-alert-window, smart-prompt-window, smart-multiline-prompt-window")&&(this._windowParent.parent.style.position=""),this._modal&&this._modal.parentElement&&this._modal.parentElement.removeChild(this._modal),this._resizeDummy&&this._resizeDummy.parentElement&&this._handleWindowResizeDummy(),this._refreshMinimizedWindowsPosition()}},{key:"expand",value:function(e){(e||this.collapsed)&&(this.collapsed=!1,this.$.fireEvent("expand"),this.maximized?"left"===this.headerPosition||"right"===this.headerPosition?this.style.width=Math.max(this._windowParent.scrollElement.scrollWidth,this._windowParent.element.clientWidth)-this._windowParent.borderWidth+"px":this.style.height=Math.max(this._windowParent.scrollElement.scrollHeight,this._windowParent.element.clientHeight)-this._windowParent.borderWidth+"px":"left"===this.headerPosition||"right"===this.headerPosition?this.style.width=this.className.indexOf("smart-window-snapped-")<0&&this._dragDetails?this._dragDetails.width+"px":"":this.style.height=this.className.indexOf("smart-window-snapped-")<0&&this._dragDetails?this._dragDetails.height+"px":"")}},{key:"maximize",value:function(e){var t=this;if(e||!t.maximized){t.minimized&&t._restoreFromMinimization(e),t._setDragDetails("minimize"),"none"!==t.resizeMode&&(t.$.container.className="smart-container"),t._snapDummy&&t.$.hasClass("smart-window-snapped-"+t._snapDummy._position)&&t.classList.remove("smart-window-snapped-"+t._snapDummy._position),t.maximized=!0,t.$.fireEvent("maximize"),t.style.left=t.style.top=0,t.style.maxWidth=t.style.maxHeight="none";var i=t._windowParent.scrollElement.scrollHeight,a=t._windowParent.scrollElement.scrollWidth,n=t._windowParent.element.clientHeight,s=t._windowParent.element.clientWidth,o=Math.max(i,n),r=Math.max(a,s);"top"===t.headerPosition||"bottom"===t.headerPosition?(t.style.width=a>s?r-t._windowParent.borderWidth+"px":"100%",t.collapsed||(t.style.height=i>n?o-t._windowParent.borderWidth+"px":"100%")):(t.collapsed||(t.style.width=a>s?r-t._windowParent.borderWidth+"px":"100%"),t.style.height=i>n?o-t._windowParent.borderWidth+"px":"100%"),"100%"!==t.style.height&&t.addEventListener("transitionend",(function e(){if(t.maximized&&t.hasAnimation){var i=t._windowParent.scrollElement.scrollHeight,a=t._windowParent.element.clientHeight,n=Math.max(i,a);("top"===t.headerPosition||"bottom"===t.headerPosition)&&t.collapsed||(t.style.height=i>a?n-t._windowParent.borderWidth+"px":"100%"),t.removeEventListener("transitionend",e)}}))}}},{key:"minimize",value:function(e){if(e||!this.minimized){this.maximized&&(this._preventEventFiring=!0,this.restore(),delete this._preventEventFiring),this._setDragDetails(),this.minimized=!0,this.$.fireEvent("minimize"),this._snapDummy&&this.$.hasClass("smart-window-snapped-"+this._snapDummy._position)&&(this.$.removeClass("smart-window-snapped-"+this._snapDummy._position),this.style.right=this.style.top=this.style.left="");var t=this._getAllMinimizedWindows(this._windowParent.element);if(t.length>0){var i=t[t.length-1];this.style.left=(i.offsetLeft+i.offsetWidth+this._dragDetails.minWidth+10>this._windowParent.element.clientWidth?i.offsetLeft:i.offsetLeft+i.offsetWidth+5)+"px",this.style.top=i.offsetTop+"px"}else this.style.left="5px",this.style.top=this._windowParent.element.clientHeight+this._windowParent.scrollElement.scrollTop-this.$.headerSection.offsetHeight-5+"px";this.style.width="",this.style.height=this.$.headerSection.offsetHeight+"px"}}},{key:"_createElement",value:function(){this.setAttribute("role","dialog")}},{key:"removeChild",value:function(e){var t=this;if(!t.isCompleted){var i=Array.prototype.slice.call(arguments,2);return HTMLElement.prototype.removeChild.apply(t,i.concat(Array.prototype.slice.call(arguments)))}e?t.$.content.removeChild(e):t.error(t.localize("invalidNode",{elementType:t.nodeName.toLowerCase(),method:"removeChild",node:"node"}))}},{key:"restore",value:function(e){if("maximized"===e||this.maximized?(this.maximized=!1,this.style.width=this.style.height=this.style.top=this.style.left=""):("minimized"===e||this.minimized)&&this._restoreFromMinimization(e),this._preventEventFiring||this.$.fireEvent("restore"),this.style.maxWidth=this.style.maxHeight="",this._dragDetails){if(this.style.left=Math.max(0,Math.min(this._dragDetails.windowX,this._windowParent.element.clientWidth-this._dragDetails.width))+"px",this.style.top=Math.max(0,Math.min(this._dragDetails.windowY,this._windowParent.scrollElement.scrollHeight-this._dragDetails.height))+"px",this.collapsed)return void("top"===this.headerPosition||"bottom"===this.headerPosition?this.style.width=this._dragDetails.width+"px":this.style.height=this._dragDetails.height+"px");this._dragDetails.resized&&(this.style.width=this._dragDetails.width+"px",this.style.height=this._dragDetails.height+"px")}}},{key:"open",value:function(e){var t=this;if(e||t.$.hasClass("smart-visibility-hidden")){if(t.isCompleted){if(t.$.fireEvent("opening").defaultPrevented)return;t.$.removeClass("smart-visibility-hidden"),t.opened=!0,t.$.fireEvent("open")}else t.$.removeClass("smart-visibility-hidden"),t.opened=!0;t.bringToFront(),t._setModal(),t._handleActiveState(),t.hasAnimation?t.addEventListener("transitionend",i):i()}function i(){t.focus(),t.removeEventListener("transitionend",i)}}},{key:"pin",value:function(){this.pinned=!0}},{key:"unpin",value:function(){this.pinned=!1}},{key:"_applyLayoutTemplate",value:function(e,t){if(!t)return e.innerHTML="",void(e===this.$.header&&this.label&&(e.innerHTML=this.label));"content"in document.createElement("template")?(t instanceof HTMLTemplateElement||(t=document.getElementById(t)),null!==t&&"content"in t?(e.innerHTML="",e.appendChild(document.importNode(t.content,!0))):this.error(this.localize("invalidTemplate",{elementType:this.nodeName.toLowerCase(),property:e===this.$.footer?"footerTemplate":"headerTemplate"}))):this.error(this.localize("htmlTemplateNotSuported",{elementType:this.nodeName.toLowerCase()}))}},{key:"_cancelDragging",value:function(e){if(this._dragDetails&&this._dragDetails.started&&"drag"===this._dragDetails.type){if(!e){var t=this.getBoundingClientRect();e={pageX:t.left,pageY:t.top}}this.$.fireEvent("dragEnd",{left:e.pageX,top:e.pageY}),this.removeAttribute("dragged"),this._dragDetails.started=!1,delete this._mouseManipulation}}},{key:"_documentFocusInEventHandler",value:function(e){this._changingFocus&&(this.contains(e.target)||this.focus(),delete this._changingFocus)}},{key:"_downHandler",value:function(e){var t=this,i=Smart.Utilities.Core.isMobile?document.elementFromPoint(e.pageX-window.pageXOffset,e.pageY-window.pageYOffset):e.originalEvent.target;if((t.shadowRoot||t.isInShadowDOM)&&(i=e.originalEvent.composedPath()[0]),e.stopPropagation(),!t.disabled&&(Smart.Utilities.Core.isMobile||1===e.which)){if(t._tabsWindow&&(t._tabsWindow._isAutoHideWindowClicked=!0),t.hasAttribute("ontop")||t.bringToFront(),i.closest&&i.closest(".smart-buttons-container")===t.$.buttonsContainer){if(t._buttonPressed=i.closest("smart-button"),t._buttonPressed)return}else if(i.getRootNode()&&i.getRootNode().host&&(t._buttonPressed=i.getRootNode().host,t._buttonPressed.closest(".smart-buttons-container")===t.$.buttonsContainer))return;t._isWindowContentClicked=i.closest(".smart-content");var a=t.closest("smart-docking-layout");if(t.isInShadowDOM&&!a)for(var n=t.getRootNode().host;n&&!(a=n.closest("smart-docking-layout"))&&n.getRootNode();)n=n.getRootNode().host;if(!(t instanceof Smart.TabsWindow&&a&&a.disabled)){if(t._handleActiveState(),!(t instanceof Smart.TabsWindow&&a))return i.closest(".smart-header-section")===t.$.headerSection&&(void 0===t._dblClickDetails&&(t._dblClickDetails={clicks:0}),clearTimeout(t._dblClickDetails.timeOut),t._dblClickDetails.clicks++,t._dblClickDetails.timeOut=setTimeout((function(){t._dblClickDetails&&(t._dblClickDetails.clicks=0)}),300),2===t._dblClickDetails.clicks)?(t._headerDblCickHandler(e),void(t._dblClickDetails.clicks=0)):void(t.maximized||(Smart.Utilities.Core.isMobile&&t._moveHandler(e),!t.pinned&&!t.minimized&&t.$.container.className.indexOf("smart-window-resizing")<0&&(i=i.closest(".smart-header-section"))&&i===t.$.headerSection&&(t._mouseManipulation=!0,t._setDragDetails("drag",e)),"none"!==t.resizeMode&&t.$.container.className.indexOf("smart-window-resizing")>-1&&(t._mouseManipulation=!0,t._setDragDetails("resize",e))));t.$.hasClass("smart-docking-layout-auto-hide-window")&&(Smart.Utilities.Core.isMobile&&t._moveHandler(e),"none"!==t.resizeMode&&t.$.container.className.indexOf("smart-window-resizing")>-1&&(t._mouseManipulation=!0,t._setDragDetails("resize",e)))}}}},{key:"_documentMoveHandler",value:function(e){!this._dragDetails||!this._dragDetails.started||this.minimized||!this._mouseManipulation||Math.abs(e.pageX-this._dragDetails.x)<=5&&Math.abs(e.pageY-this._dragDetails.y)<=5||(this.hasAttribute("dragged")||this.hasAttribute("resized")||this.$.fireEvent(this._dragDetails.type+"Start",{left:e.pageX,top:e.pageY,width:this.offsetWidth,height:this.offsetHeight}),e.stopPropagation(),"drag"!==this._dragDetails.type||this.pinned?(this._dragDetails.resized=!0,this._resize(this._dragDetails.side,e),this._dragDetails.x=Math.max(this._windowParent.offsetLeft+this._dragDetails.left,Math.min(this._windowParent.offsetLeft+this._dragDetails.left+(this._dragDetails.side.toLowerCase().indexOf("left")>-1?0:this._dragDetails.newWidth),e.pageX)),this._dragDetails.y=Math.max(this._windowParent.offsetTop+this._dragDetails.top,Math.min(this._windowParent.offsetTop+this._dragDetails.top+(this._dragDetails.side.toLowerCase().indexOf("top")>-1?0:this._dragDetails.newHeight),e.pageY))):(this.setAttribute("dragged",""),this._snapDummy&&this.$.hasClass("smart-window-snapped-"+this._snapDummy._position)&&(this.$.removeClass("smart-window-snapped-"+this._snapDummy._position),this.style.right=this.style.top=this.style.left="",this.collapsed||(this.style.height=this._dragDetails.height+"px",this.style.width=this._dragDetails.width+"px")),this._drag(e,"both"),this._dragDetails.x=Math.max(this._windowParent.offsetLeft+this._dragDetails.offsetX-this._windowParent.scrollElement.scrollLeft,Math.min(this._windowParent.offsetLeft+this._windowParent.element.offsetWidth-(this._windowParent.element.offsetWidth-this.offsetLeft)+this._dragDetails.offsetX,e.pageX)),this._dragDetails.y=Math.max(this._windowParent.offsetTop+this._dragDetails.offsetY-this._windowParent.scrollElement.scrollTop,Math.min(this._windowParent.offsetTop+this._windowParent.element.offsetHeight-(this._windowParent.element.offsetHeight-this.offsetTop)+this._dragDetails.offsetY,e.pageY)),e.pageX>=this._windowParent.offsetLeft+this._windowParent.scrollElement.scrollWidth-1?this._handleSnapping("right"):e.pageY<=this._windowParent.offsetTop?this._handleSnapping("top"):e.pageX<=this._windowParent.offsetLeft?this._handleSnapping("left"):this._handleSnapping()))}},{key:"_documentUpHandler",value:function(e){var t=this,i=t.shadowRoot||t.isInShadowDOM?e.originalEvent.composedPath()[0]:e.originalEvent.target;if(t.disabled)return t.removeAttribute("active"),delete t._buttonPressed,void delete t._isWindowContentClicked;if(t._dragDetails&&t._dragDetails.started&&(t.hasAttribute("resized")&&(t.$.fireEvent(t._dragDetails.type+"End",{left:e.pageX,top:e.pageY,width:t._dragDetails.newWidth,height:t._dragDetails.newHeight}),t.removeAttribute("resized"),t._handleWindowResizeDummy(),t.$.container.className="smart-container"),setTimeout((function(){t.$.removeClass("no-transition")}),20),t.hasAttribute("dragged")&&(t.$.fireEvent(t._dragDetails.type+"End",{left:e.pageX,top:e.pageY}),t.removeAttribute("dragged")),t._dragDetails.started=!1,delete t._mouseManipulation),t._snapDummy&&!t._snapDummy.classList.contains("smart-visibility-hidden")){switch(t._snapDummy._position){case"left":case"top":t.style.left=t.style.top="0",t.style.right="auto";break;case"right":t.style.left="auto",t.style.top=t.style.right="0"}t.style.width="top"===t._snapDummy._position?"100%":"50%",t.style.height="100%",t.$.addClass("smart-window-snapped-"+t._snapDummy._position),t._handleSnapping()}t._modal&&i===t._modal&&!t._isWindowContentClicked&&(t.closeOnMaskClick?t.close():t.focus()),t._isWindowButton(i)&&t.focus(),delete t._isWindowContentClicked,delete t._buttonPressed;var a=t.shadowRoot&&t._windowParent.element&&t._windowParent.element.getRootNode()?t._windowParent.element.getRootNode().activeElement:document.activeElement;if(t.hasAttribute("active")&&a!==t&&i.closest){for(var n=i.closest(".smart-window");n&&n!==t;)n=n.parentElement.closest(".smart-window");t.opened&&n!==t&&t.removeAttribute("active")}}},{key:"_documentSelectStartHandler",value:function(e){this._dragDetails&&this._dragDetails.started&&e.preventDefault()}},{key:"_drag",value:function(e,t){if(e&&!this.pinned&&!this.maximized){var i,n;this._dragDetails&&this._dragDetails.started||this._setDragDetails("drag",e),this.$.addClass("no-transition"),"object"===a(e)?(i=e.pageX-this._dragDetails.x,n=e.pageY-this._dragDetails.y):i=n=e;var s=Math.max(this._windowParent.element.clientHeight,this._windowParent.scrollElement.scrollHeight),o=Math.max(this._windowParent.element.clientWidth,this._windowParent.scrollElement.scrollWidth);switch(t){case"horizontal":this._dragDetails.windowX=Math.max(0,Math.min(this._dragDetails.windowX+i,o-this.offsetWidth)),this.style.left=this._dragDetails.windowX+"px";break;case"vertical":this._dragDetails.windowY=Math.max(0,Math.min(this._dragDetails.windowY+n,s-this.offsetHeight)),this.style.top=this._dragDetails.windowY+"px";break;case"both":this._dragDetails.windowX=Math.max(0,Math.min(this._dragDetails.windowX+i,o-this.offsetWidth)),this._dragDetails.windowY=Math.max(0,Math.min(this._dragDetails.windowY+n,s-this.offsetHeight)),this.style.left=this._dragDetails.windowX+"px",this.style.top=this._dragDetails.windowY+"px"}this._dragDetails.top=this.offsetTop,this._dragDetails.left=this.offsetLeft}}},{key:"_dragStartHandler",value:function(e){this._dragDetails&&this._dragDetails.started&&e.preventDefault()}},{key:"_focusHandler",value:function(e){"focus"===e.type?(this.setAttribute("focus",""),this.bringToFront()):this._buttonPressed||(this.removeAttribute("focus"),this._dragDetails&&this._dragDetails.started&&this._handleWindowResizeDummy())}},{key:"_getAllMinimizedWindows",value:function(e){var t=[];e||(e=this._windowParent.element);for(var i=e.getElementsByTagName("smart-window"),a=0;a<i.length;a++)i[a]!==this&&i[a].hasAttribute("minimized")&&t.push(i[a]);return t.sort((function(e,t){var i=e.getBoundingClientRect(),a=t.getBoundingClientRect();return i.right-a.right})),t}},{key:"_handleSnapping",value:function(e){var t=this;e?t.disableSnap||t.collapsed||(t._snapDummy||(t._snapDummy=document.createElement("div"),t._snapDummy.addEventListener("transitionend",(function(){t._snapDummy.classList.contains("smart-visibility-hidden")&&t._snapDummy.parentElement&&t._snapDummy.parentElement.removeChild(t._snapDummy)}))),t._snapDummy.className="smart-window-snap-"+e+"-feedback",t._snapDummy._position=e,t._snapDummy.parentElement||t._windowParent.element.appendChild(t._snapDummy)):t._snapDummy&&t._snapDummy.parentElement&&t._snapDummy.classList.add("smart-visibility-hidden")}},{key:"_headerDblCickHandler",value:function(e){var t=this.shadowRoot||this.isInShadowDOM?e.originalEvent.composedPath()[0]:e.originalEvent.target;t!==this.$.headerSection&&t!==this.$.header||this.$.maximizeButton&&0===this.$.maximizeButton.offsetHeight||(this.maximized?this.restore():this.maximize())}},{key:"_isWindowButton",value:function(e){for(;e;){if((e.closest&&e.closest(".smart-buttons-container"))===this.$.buttonsContainer)break;e=e.getRootNode().host}if(e){var t=/smart-(\w+[-]*\w*)-button/gi;if((e=e.closest("smart-button"))&&e===this._buttonPressed)switch(e){case this.$.closeButton:return this.close(),!0;case this.$.collapseButton:return this.collapsed?this.expand():this.collapse(),!0;case this.$.maximizeButton:return this.maximized?this.restore():this.maximize(),!0;case this.$.minimizeButton:return this.minimized?this.restore():this.minimize(),!0;case this.$.pinButton:return this.pinned?this.unpin():this.pin(),!0;default:if(!t.test(e.className))return;return this.$.fireEvent(Smart.Utilities.Core.toCamelCase(e.className.match(t).toString().replace("smart-","").replace("-button","")),{button:e}),!0}}}},{key:"_keyDownHandler",value:function(e){if(delete this._changingFocus,!(this.disabled||(this.hasAttribute("dragged")||this.hasAttribute("resized"))&&this._mouseManipulation)){e.stopPropagation();var t="ArrowDown"===e.key||"ArrowRight"===e.key?10:-10,i=this.enableShadowDOM&&this._windowParent.element.getRootNode()?this._windowParent.element.getRootNode().activeElement:document.activeElement;switch(e.key){case"ArrowUp":case"ArrowDown":case"ArrowLeft":case"ArrowRight":if(this.minimized||i!==this)return;var a=e.key.indexOf("Right")>-1||e.key.indexOf("Left")>-1;if(e.preventDefault(),!a&&e.altKey)return void("ArrowUp"===e.key?this.maximize():this.restore());if(this.maximized)return;if(this.$.addClass("no-transition"),e.ctrlKey&&"none"!==this.resizeMode&&!this.collapsed)return a=-1===["horizontal","vertical","both"].indexOf(this.resizeMode)?this.resizeMode:a?"right":"bottom",this.hasAttribute("dragged")&&this._cancelDragging(e),this.hasAttribute("resized")||this.$.fireEvent("resizeStart",{position:{x:e.pageX,y:e.pageY}}),void this._resize(a,t);this.pinned||(this.hasAttribute("dragged")||(this.setAttribute("dragged",""),this.$.fireEvent("dragStart",{left:e.pageX,top:e.pageY})),this._drag(t,a?"horizontal":"vertical")),this.$.removeClass("no-transition");break;case"Escape":this.headerButtons.indexOf("close")>-1&&i===this&&this.close();break;case"p":e.altKey&&this.headerButtons.indexOf("pin")>-1&&(this.pinned?this.unpin():this.pin());break;case"c":e.altKey&&this.headerButtons.indexOf("collapse")>-1&&(this.collapsed?this.expand():this.collapse());break;case"m":e.altKey&&this.headerButtons.indexOf("minimize")>-1&&(this.minimized?this.restore():this.minimize());break;case"Tab":this.opened&&this.modal&&(this._changingFocus=!0);break;case"Enter":case" ":var n;if(this.shadowRoot||this.isInShadowDOM?(n=e.composedPath()[0],this._buttonPressed=n.getRootNode().host):(n=e.target.closest&&e.target.closest("smart-button"),this._buttonPressed=n),!n)return;this._isWindowButton(n),delete this._buttonPressed}}}},{key:"_keyUpHandler",value:function(e){if(e.key){if("Control"===e.key&&this._dragDetails&&this.hasAttribute("resized")&&!this._mouseManipulation){if(!this._dragDetails.started)return;"drag"!==this._dragDetails.type&&(this.removeAttribute("resized"),this.$.fireEvent("resizeEnd",{left:e.pageX,top:e.pageY,width:this._dragDetails.newWidth,height:this._dragDetails.newHeight}),this._handleWindowResizeDummy()),this._dragDetails.started=!1}e.key.indexOf("Arrow")>-1&&this.hasAttribute("dragged")&&!this._mouseManipulation&&this._cancelDragging(e)}}},{key:"_mouseWheelHandler",value:function(e){!this.disabled&&this._dragDetails&&this._dragDetails.started&&(e.deltaY<0&&this._windowParent.scrollElement.scrollTop+e.deltaY<=0?this.style.top=Math.max(0,this._dragDetails.windowY)+"px":e.deltaY>0&&(this._dragDetails.windowY+this.offsetHeight+e.deltaY>=this._windowParent.scrollElement.scrollHeight||this._windowParent.scrollElement.scrollTop+this._windowParent.element.clientHeight===this._windowParent.scrollElement.scrollHeight)||("drag"===this._dragDetails.type?(this._dragDetails.windowY+=e.deltaY,this.style.top=this._dragDetails.windowY+"px"):(this._dragDetails.height+=e.deltaY,this.style.height=this._dragDetails.height+"px")))}},{key:"_moveHandler",value:function(e){if(!(this.disabled||this.collapsed||this.maximized||this.minimized||(Smart.Utilities.Core.isMobile&&navigator.platform&&/iPad|iPhone|iPod/.test(navigator.platform)&&this.hasAttribute("dragged")&&e.originalEvent.preventDefault(),this._mouseManipulation||(this.$.container.className.indexOf("smart-window-resizing")>-1&&(this.$.container.className="smart-container"),"none"===this.resizeMode)))){var t=this.getBoundingClientRect(),i=e.clientY<t.top+10,a=e.clientY>t.bottom-10,n=e.clientX>t.right-10,s=e.clientX<t.left+10;switch(this.resizeMode){case"none":break;case"both":if(this.resizeIndicator)return void(a&&n&&this.$.container.classList.add("smart-window-resizing-bottom-right"));if(s||n)return i?void(s?this.$.container.classList.add("smart-window-resizing-top-left"):this.$.container.classList.add("smart-window-resizing-top-right")):a?void(s?this.$.container.classList.add("smart-window-resizing-bottom-left"):this.$.container.classList.add("smart-window-resizing-bottom-right")):void(s?this.$.container.classList.add("smart-window-resizing-left"):this.$.container.classList.add("smart-window-resizing-right"));if(i||a){if(n)return void(i?this.$.container.classList.add("smart-window-resizing-top-right"):this.$.container.classList.add("smart-window-resizing-bottom-right"));if(s)return void(i?this.$.container.classList.add("smart-window-resizing-top-left"):this.$.container.classList.add("smart-window-resizing-bottom-left"));i?this.$.container.classList.add("smart-window-resizing-top"):this.$.container.classList.add("smart-window-resizing-bottom")}break;case"horizontal":if(this.resizeIndicator)return void(a&&n&&this.$.container.classList.add("smart-window-resizing-right"));if(s)return void this.$.container.classList.add("smart-window-resizing-left");n&&this.$.container.classList.add("smart-window-resizing-right");break;case"vertical":if(this.resizeIndicator)return void(a&&n&&this.$.container.classList.add("smart-window-resizing-bottom"));if(i)return void this.$.container.classList.add("smart-window-resizing-top");a&&this.$.container.classList.add("smart-window-resizing-bottom");break;case"top":if(i){if(this.resizeIndicator&&!s)return;this.$.container.classList.add("smart-window-resizing-top")}break;case"bottom":if(a){if(this.resizeIndicator&&!n)return;this.$.container.classList.add("smart-window-resizing-bottom")}break;case"left":if(s){if(this.resizeIndicator&&!i)return;this.$.container.classList.add("smart-window-resizing-left")}break;case"right":if(n){if(this.resizeIndicator&&!a)return;this.$.container.classList.add("smart-window-resizing-right")}}}}},{key:"_handleActiveState",value:function(){for(var e=document.getElementsByClassName("smart-window"),t=0;t<e.length;t++)e[t].contains(this)||this.contains(e[t])||(e[t].removeAttribute("active"),e[t].removeAttribute("focus"));this.setAttribute("active","")}},{key:"_handleWindowResizeDummy",value:function(){if(this._resizeDummy||(this._resizeDummy=document.createElement("div"),this._resizeDummy.classList.add("smart-window-resize-feedback")),!this.hasAttribute("resized"))return this._resizeDummy.parentElement&&this._resizeDummy.parentElement.removeChild(this._resizeDummy),void(!this.liveResize&&"resize"===this._dragDetails.type&&this._dragDetails.started&&(this.style.top=this._dragDetails.top+"px",this.style.left=this._dragDetails.left+"px",this.style.width=this._dragDetails.newWidth+"px",this.style.height=this._dragDetails.newHeight+"px"));this._resizeDummy.parentElement||(this._resizeDummy.style.width=this.offsetWidth+"px",this._resizeDummy.style.height=this.offsetHeight+"px",this._resizeDummy.style.top=this.offsetTop+"px",this._resizeDummy.style.left=this.offsetLeft+"px",this._windowParent.element.appendChild(this._resizeDummy))}},{key:"_resize",value:function(e,t){var i;if((!this._dragDetails||this._dragDetails&&"drag"===this._dragDetails.type)&&this._setDragDetails("resize"),this._dragDetails){this._dragDetails.started=!0,this.hasAttribute("resized")||(this.setAttribute("resized",""),this.hasAnimation&&this.$.addClass("no-transition")),this.liveResize||this._handleWindowResizeDummy();var n=this._snapDummy&&this.$.hasClass("smart-window-snapped-"+this._snapDummy._position)?"snapWindowWidth":"width";switch(e){case"left":i=(i="object"===a(t)?t.pageX-this._dragDetails.x:t)>0?Math.min(i,this._dragDetails[n]-this._dragDetails.minWidth):-1*Math.min(this._dragDetails.maxWidth?this._dragDetails.maxWidth-this._dragDetails[n]:this._dragDetails.left,Math.abs(i)),this._dragDetails[n]=Math.min(this._dragDetails[n]+this._dragDetails.left-this._windowParent.scrollElement.scrollLeft,this._dragDetails[n]-i),this._dragDetails.windowX=Math.max(this._windowParent.scrollElement.scrollLeft,this._dragDetails.windowX+i),"object"!==a(t)&&(this._dragDetails[n]=Math.max(this._dragDetails[n],this._dragDetails.minWidth)),this._dragDetails[n]>=this._dragDetails.minWidth&&(this._dragDetails.left=this._dragDetails.windowX,this._dragDetails.newWidth=this._dragDetails[n]);break;case"right":var s=this._windowParent.element.clientWidth!==this._windowParent.element.offsetWidth?this._windowParent.borderWidth:0,o=this._snapDummy&&this.$.hasClass("smart-window-snapped-"+this._snapDummy._position)?"snapWindowWidth":"width";(i="object"===a(t)?t.pageX-this._dragDetails.x:t)>0&&this._dragDetails.maxWidth&&(i=Math.min(this._dragDetails.maxWidth-this._dragDetails[o],i)),this._dragDetails[o]=Math.min(this._windowParent.element.clientWidth+this._windowParent.scrollElement.scrollLeft-this._dragDetails.left-s,Math.max(0,this._dragDetails[o]+i)),"object"!==a(t)&&(this._dragDetails[o]=Math.max(this._dragDetails[o],this._dragDetails.minWidth)),this._dragDetails.left=this.offsetLeft,this._dragDetails.newWidth=Math.max(this._dragDetails.minWidth,this._dragDetails[o]);break;case"top":this._snapDummy&&this.$.hasClass("smart-window-snapped-"+this._snapDummy._position)&&(this._dragDetails.height=this._dragDetails.snapWindowHeight),i=(i="object"===a(t)?t.pageY-this._dragDetails.y:t)>0?Math.min(i,this._dragDetails.height-this._dragDetails.minHeight):-1*Math.min(this._dragDetails.maxHeight?this._dragDetails.maxHeight-this._dragDetails.height:this._dragDetails.top,Math.abs(i)),this._dragDetails.snapWindowHeight=this._dragDetails.height=Math.min(this._dragDetails.height+this._dragDetails.top-this._windowParent.scrollElement.scrollTop,this._dragDetails.height-i),this._dragDetails.windowY=Math.max(this._windowParent.scrollElement.scrollTop,this._dragDetails.windowY+i),"object"!==a(t)&&(this._dragDetails.snapWindowHeight=this._dragDetails.height=Math.max(this._dragDetails.height,this._dragDetails.minHeight)),this._dragDetails.height>=this._dragDetails.minHeight&&(this._dragDetails.top=this._dragDetails.windowY,this._dragDetails.newHeight=this._dragDetails.height),this._dragDetails.newWidth=Math.max(this._dragDetails[n],this._dragDetails.newWidth);break;case"bottom":this._snapDummy&&this.$.hasClass("smart-window-snapped-"+this._snapDummy._position)&&(this._dragDetails.height=this._dragDetails.snapWindowHeight),(i="object"===a(t)?t.pageY-this._dragDetails.y:t)>0&&this._dragDetails.maxHeight&&(i=Math.min(this._dragDetails.maxHeight-this._dragDetails.height,i)),this._dragDetails.snapWindowHeight=this._dragDetails.height=Math.min(this._windowParent.element.clientHeight+this._windowParent.scrollElement.scrollTop-this._dragDetails.top-this._windowParent.borderWidth,Math.max(0,this._dragDetails.height+i)),"object"!==a(t)&&(this._dragDetails.snapWindowHeight=this._dragDetails.height=Math.max(this._dragDetails.height,this._dragDetails.minHeight)),this._dragDetails.newHeight=Math.max(this._dragDetails.minHeight,this._dragDetails.height),this._dragDetails.newWidth=Math.max(this._dragDetails[n],this._dragDetails.newWidth);break;case"bottomLeftCorner":this._resize("bottom",t),this._resize("left",t);break;case"bottomRightCorner":this._resize("bottom",t),this._resize("right",t);break;case"topLeftCorner":this._resize("top",t),this._resize("left",t);break;case"topRightCorner":this._resize("top",t),this._resize("right",t)}var r=this.liveResize?this:this._resizeDummy;this._dragDetails.newHeight=Math.max(this._dragDetails.snapWindowHeight,this._dragDetails.newHeight),r.style.top=this._dragDetails.top+"px",r.style.left=this._dragDetails.left+"px",r.style.width=this._dragDetails.newWidth+"px",r.style.height=this._dragDetails.newHeight+"px"}}},{key:"_restoreFromMinimization",value:function(){this.minimized=!1,this.style.width=this.style.height=this.style.top=this.style.left="",this._refreshMinimizedWindowsPosition()}},{key:"_refreshMinimizedWindowsPosition",value:function(){var e=this._getAllMinimizedWindows();if(0!==e.length){var t;e[0].style.left="5px";for(var i=1;i<e.length;i++)parseFloat(e[i-1].style.left)+e[i-1].offsetWidth+e[i].offsetWidth+10<this._windowParent.element.clientWidth?(e[i].style.left=parseFloat(e[i-1].style.left)+e[i-1].offsetWidth+5+"px",e[i].style.top=e[i-1].offsetTop+"px",t=e[i]):(e[i].style.left=parseFloat(t.style.left)+"px",e[i].style.top=t.offsetTop+"px")}}},{key:"_setHeaderButtons",value:function(){for(var e=this,t=e.headerButtons,i=e.$.buttonsContainer.children,a=function(t){var i=e.$.buttonsContainer.getElementsByClassName("smart-"+(t+"").split(/(?=[A-Z])/).join("-").toLowerCase()+"-button")[0];return i&&i.$.removeClass("smart-hidden"),i},n=0;n<i.length;n++)i[n].$.addClass("smart-hidden");if(t.length>0)for(var s=0;s<t.length;s++){var o=a(t[s]);o||((o=document.createElement("smart-button")).$.addClass("smart-"+(t[s]+"").split(/(?=[A-Z])/).join("-").toLowerCase()+"-button"),o.theme=e.theme),e.$.buttonsContainer.insertBefore(o,e.$.buttonsContainer.firstElementChild)}}},{key:"_setDragDetails",value:function(e,t){if(this._dragDetails||(this._dragDetails={}),void 0===this._dragDetails.minWidth||void 0===this._dragDetails.minHeight||void 0===this._dragDetails.maxWidth||void 0===this._dragDetails.maxHeight){var i=getComputedStyle(this);this._dragDetails.minWidth=parseFloat(i.getPropertyValue("min-width"))||0,this._dragDetails.minHeight=parseFloat(i.getPropertyValue("min-height"))||0,this._dragDetails.maxWidth=parseFloat(i.getPropertyValue("max-width"))||0,this._dragDetails.maxHeight=parseFloat(i.getPropertyValue("max-height"))||0}this._dragDetails.windowX=this.offsetLeft,this._dragDetails.windowY=this.offsetTop;var n=this.getBoundingClientRect();if(this._snapDummy&&this.$.hasClass("smart-window-snapped-"+this._snapDummy._position))"right"===this.headerPosition&&this.collapsed&&(this._dragDetails.offsetX=n.left+this.offsetWidth-t.clientX);else{var s=this.parentElement===document.body?document.documentElement.getBoundingClientRect():this.parentElement.getBoundingClientRect(),o=window.scrollX||window.pageXOffset,r=window.scrollY||window.pageYOffset;this._windowParent.offsetLeft=s.left+o,this._windowParent.offsetTop=s.top+r,t&&"object"===a(t)&&(this._dragDetails.offsetX=t.clientX-n.left,this._dragDetails.offsetY=t.clientY-n.top),this.collapsed||(this.hasAnimation&&"minimize"===e?(this._dragDetails.width=this._dragDetails.width?this._dragDetails.width:this.offsetWidth,this._dragDetails.height=this._dragDetails.height?this._dragDetails.height:this.offsetHeight):(this._dragDetails.width=this.offsetWidth,this._dragDetails.height=this.offsetHeight),(this.style.width||this.style.height)&&(this._dragDetails.resized=!0))}if("minimize"!==e&&e&&(this._dragDetails.type=e,this._dragDetails.started=!0,this._dragDetails.snapWindowWidth=this.offsetWidth,this._dragDetails.snapWindowHeight=this.offsetHeight,t&&"object"===a(t)?(this._dragDetails.x=t.pageX,this._dragDetails.y=t.pageY):(this._dragDetails.x=this.offsetLeft,this._dragDetails.y=this.offsetTop),"resize"===e)){if("none"===this.resizeMode)return void delete this._dragDetails;this._dragDetails.top=this.offsetTop,this._dragDetails.left=this.offsetLeft,this._dragDetails.newWidth=this._dragDetails.width,this._dragDetails.newHeight=this._dragDetails.height,this.$container.hasClass("smart-window-resizing-right")?this._dragDetails.side="right":this.$container.hasClass("smart-window-resizing-left")?this._dragDetails.side="left":this.$container.hasClass("smart-window-resizing-top")?this._dragDetails.side="top":this.$container.hasClass("smart-window-resizing-bottom")?this._dragDetails.side="bottom":this.$container.hasClass("smart-window-resizing-top-left")?this._dragDetails.side="topLeftCorner":this.$container.hasClass("smart-window-resizing-bottom-left")?this._dragDetails.side="bottomLeftCorner":this.$container.hasClass("smart-window-resizing-top-right")?this._dragDetails.side="topRightCorner":this.$container.hasClass("smart-window-resizing-bottom-right")&&(this._dragDetails.side="bottomRightCorner")}}},{key:"_setElementParent",value:function(e){var t=this;if(t._windowParent.element=void 0,t._windowParent.parent&&!t._windowParent.parent.querySelectorAll("smart-window, smart-dialog-window, smart-progress-window, smart-wait-window, smart-alert-window, smart-prompt-window, smart-multiline-prompt-window")&&(t._windowParent.parent.style.position=""),e instanceof HTMLElement?t._windowParent.element=e:"string"==typeof e&&(t._windowParent.element="body"===e?document.body:document.getElementById(e)),t._windowParent.element||(t._windowParent.element=t._windowParent.initialParent.getRootNode().host||t._windowParent.initialParent.parentElement?t._windowParent.initialParent:document.body),t.parentElement!==t._windowParent.element&&t._windowParent.element.appendChild(t),t._windowParent.element===document.body)t._windowParent.element=document.documentElement,t._windowParent.scrollElement=document.scrollingElement,t._windowParent.parent=document.body,t._windowParent.borderWidth=0;else{if(t.parentElement instanceof Smart.Window&&!t.parentElement.isCompleted)return void t.parentElement.whenRendered((function(){t.parentElement.appendChild(t),t._setElementParent(t.windowParent)}));t._windowParent.element instanceof Smart.Window&&(t._windowParent.element=t._windowParent.element.$.content);var i=getComputedStyle(t.parentElement),a=i.getPropertyValue("position");t._windowParent.borderWidth=2*parseInt(i.getPropertyValue("border-width")||0),t._windowParent.parent=t.parentElement,t._windowParent.scrollElement=t._windowParent.element,"relative"!==a&&(t.parentElement.style.position="relative")}t._setModal(),t.style.left&&t.offsetLeft>t._windowParent.scrollElement.scrollWidth&&(t.style.left=t._windowParent.scrollElement.scrollWidth-t.offsetWidth+"px"),t.style.top&&t.offsetTop>t._windowParent.scrollElement.scrollHeight&&(t.style.top=t._windowParent.scrollElement.scrollHeight-t.offsetHeight+"px")}},{key:"_setModal",value:function(){if(delete this._changingFocus,this._windowParent.element)if(this.modal)if(this._modal||(this._modal=document.createElement("div"),this._modal.classList.add("smart-modal")),this._windowParent.parent!==document.body?this._modal.setAttribute("nested-modal",""):this._modal.removeAttribute("nested-modal"),this._modal._window=this,this.opened&&!this._modal.parentElement){var e=parseInt(getComputedStyle(this).getPropertyValue("z-index"));isNaN(e)||(this._modal.style.zIndex=e-1),this.parentElement.insertBefore(this._modal,this)}else this._modal.parentElement&&this._modal.parentElement.removeChild(this._modal);else this._modal&&this._modal.parentElement&&(this._modal.parentElement.removeChild(this._modal),delete this._modal)}},{key:"hasStyleObserver",get:function(){return!1}}],[{key:"properties",get:function(){return{collapsed:{value:!1,type:"boolean"},closeOnMaskClick:{value:!1,type:"boolean"},disableSnap:{value:!1,type:"boolean"},footerPosition:{value:"bottom",allowedValues:["bottom","none"],type:"string"},footerTemplate:{value:null,type:"any"},headerButtons:{value:["close","maximize","minimize"],type:"array"},headerPosition:{value:"top",allowedValues:["top","bottom","left","right","none"],type:"string"},headerTemplate:{value:null,type:"any"},label:{value:"",type:"string"},liveResize:{value:!1,type:"boolean"},maximized:{value:!1,type:"boolean"},modal:{value:!1,type:"boolean"},minimized:{value:!1,type:"boolean"},opened:{value:!1,type:"boolean"},pinned:{value:!1,type:"boolean"},resizeIndicator:{value:!1,type:"boolean"},resizeMode:{allowedValues:["none","horizontal","vertical","both","top","bottom","left","right"],value:"none",type:"string"},windowParent:{value:null,type:"any"}}}},{key:"listeners",get:function(){return{"document.dragstart":"_dragStartHandler","document.focusin":"_documentFocusInEventHandler","document.move":"_documentMoveHandler","document.up":"_documentUpHandler","document.wheel":"_mouseWheelHandler","document.selectstart":"_documentSelectStartHandler",down:"_downHandler",focus:"_focusHandler",blur:"_focusHandler",move:"_moveHandler",keydown:"_keyDownHandler",keyup:"_keyUpHandler",stylechanged:"_styleChangedHandler"}}},{key:"styleUrls",get:function(){return["smart.button.css","smart.window.css"]}},{key:"requires",get:function(){return{"Smart.Button":"smart.button.js"}}}]),t}()),Smart("smart-dialog-window",function(e){function t(){return n(this,t),r(this,d(t).apply(this,arguments))}return h(t,Smart.Window),o(t,[{key:"template",value:function(){return'<div id="container">\n                    <div id="headerSection" class="smart-header-section" role="heading" aria-level="1">\n                        <div id="header" class="smart-header">[[label]]</div>\n                        <div id="buttonsContainer" class="smart-buttons-container">\n                            <smart-button id="pinButton" class="smart-pin-button" animation="[[animation]]" theme="[[theme]]" aria-label="Pin"></smart-button>\n                            <smart-button id="collapseButton" class="smart-collapse-button" animation="[[animation]]" theme="[[theme]]" aria-label="Collapse"></smart-button>\n                            <smart-button id="minimizeButton" class="smart-minimize-button" animation="[[animation]]" theme="[[theme]]" aria-label="Minimize"></smart-button>\n                            <smart-button id="maximizeButton" class="smart-maximize-button" animation="[[animation]]" theme="[[theme]]" aria-label="Maximize"></smart-button>\n                            <smart-button id="closeButton" class="smart-close-button" animation="[[animation]]" theme="[[theme]]" aria-label="Close"></smart-button>\n                        </div>\n                    </div>\n                    <div class="smart-content">\n                        <content></content>\n                    </div>\n                    <div id="footer" class="smart-footer">\n                        <smart-button id="confirmButton" class="smart-confirm-button" animation="[[animation]]" theme="[[theme]]">[[confirmLabel]]</smart-button>\n                        <smart-button id="cancelButton" class="smart-cancel-button" animation="[[animation]]" theme="[[theme]]">[[cancelLabel]]</smart-button>\n                    </div>\n                </div>'}},{key:"_createElement",value:function(){this.setAttribute("role","alertdialog"),this.setAttribute("aria-describedby",this.$.content.id)}},{key:"_footerClickHandler",value:function(e){var t=e.target;t.closest(".smart-confirm-button")?this.$.fireEvent("confirm"):t.closest(".smart-cancel-button")&&this.$.fireEvent("cancel")}},{key:"_keyDownHandler",value:function(e){if(delete this._changingFocus,!(this.disabled||(this.hasAttribute("dragged")||this.hasAttribute("resized"))&&this._mouseManipulation)){e.stopPropagation();var t="ArrowDown"===e.key||"ArrowRight"===e.key?10:-10,i=this.enableShadowDOM&&this._windowParent.element.getRootNode()?this._windowParent.element.getRootNode().activeElement:document.activeElement;switch(e.key){case"ArrowUp":case"ArrowDown":case"ArrowLeft":case"ArrowRight":if(this.minimized||i!==this)return;var a=e.key.indexOf("Right")>-1||e.key.indexOf("Left")>-1;if(e.preventDefault(),!a&&e.altKey)return void("ArrowUp"===e.key?this.maximize():this.restore());if(this.$.addClass("no-transition"),this.maximized)return;if(e.ctrlKey&&"none"!==this.resizeMode)return this.hasAttribute("dragged")&&this._cancelDragging(e),this.hasAttribute("resized")||this.$.fireEvent("resizeStart",{position:{x:e.pageX,y:e.pageY}}),void this._resize(a?"right":"bottom",t);this.pinned||(this.hasAttribute("dragged")||(this.setAttribute("dragged",""),this.$.fireEvent("dragStart",{left:e.pageX,top:e.pageY})),this._drag(t,a?"horizontal":"vertical")),this.$.removeClass("no-transition");break;case"Escape":this.headerButtons.indexOf("close")>-1&&i===this&&this.close();break;case"Tab":this.opened&&this.modal&&(this._changingFocus=!0);break;case"Enter":case" ":var n;if(this.shadowRoot||this.isInShadowDOM?(n=e.composedPath()[0],this._buttonPressed=n.getRootNode().host):(n=e.target.closest&&e.target.closest("smart-button"),this._buttonPressed=n),!n)return;this._isWindowButton(n),delete this._buttonPressed}}}}],[{key:"properties",get:function(){return{cancelLabel:{value:"Cancel",type:"string"},confirmLabel:{value:"Ok",type:"string"},disableSnap:{value:!0,readOnly:!0,type:"boolean"},headerButtons:{value:["close"],type:"array"},modal:{value:!0,readOnly:!0,type:"boolean",defaultReflectToAttribute:!0}}}},{key:"listeners",get:function(){return{"footer.click":"_footerClickHandler"}}}]),t}()),Smart("smart-alert-window",function(e){function t(){return n(this,t),r(this,d(t).apply(this,arguments))}return h(t,Smart.DialogWindow),o(t,[{key:"_createElement",value:function(){this.setAttribute("role","alertdialog"),this.setAttribute("aria-describedby",this.$.content.id)}}],[{key:"properties",get:function(){return{headerButtons:{value:[],type:"array"}}}}]),t}()),Smart("smart-prompt-window",function(e){function t(){return n(this,t),r(this,d(t).apply(this,arguments))}return h(t,Smart.DialogWindow),o(t,[{key:"template",value:function(){return'<div id="container">\n                    <div id="headerSection" class="smart-header-section" role="heading" aria-level="1">\n                        <div id="header" class="smart-header">[[label]]</div>\n                        <div id="buttonsContainer" class="smart-buttons-container">\n                            <smart-button id="closeButton" class="smart-close-button" animation="[[animation]]" theme="[[theme]]" aria-label="Close"></smart-button>\n                        </div>\n                    </div>\n                    <div class="smart-content">\n                        <content></content>\n                        <smart-text-box id="textBox"\n                            animation="[[animation]]"\n                            auto-complete="[[autoComplete]]"\n                            max-length="[[maxLength]]"\n                            value="{{value}}"\n                            form="[[form]]"\n                            label="[[promptLabel]]"\n                            hint="[[hint]]"\n                            display-mode="[[displayMode]]"\n                            max-length="[[maxLength]]"\n                            placeholder="[[placeholder]]"\n                            required="[[required]]"\n                            required-message="[[requiredMessage]]"\n                            select-all-on-focus="[[selectAllOnFocus]]"\n                            theme="[[theme]]">\n                        </smart-text-box>\n                    </div>\n                    <div id="footer" class="smart-footer">\n                        <smart-button id="confirmButton" class="smart-confirm-button flat" animation="[[animation]]" theme="[[theme]]">[[confirmLabel]]</smart-button>\n                        <smart-button id="cancelButton" class="smart-cancel-button flat" animation="[[animation]]" theme="[[theme]]">[[cancelLabel]]</smart-button>\n                    </div>\n                </div>'}},{key:"_footerClickHandler",value:function(e){var t=e.target;t.closest(".smart-confirm-button")?this.$.fireEvent("confirm",{value:this.$.textBox.value}):t.closest(".smart-cancel-button")&&this.$.fireEvent("cancel",{value:this.$.textBox.value})}},{key:"_keyDownHandler",value:function(e){var t=this;function i(){t._dragDetails&&(t._dragDetails.started=!1),t.$.removeClass("no-transition")}if(delete t._changingFocus,!(t.disabled||t._dragDetails&&t._dragDetails.started)){e.stopPropagation();var a="ArrowDown"===e.key||"ArrowRight"===e.key?10:-10,n=t.enableShadowDOM&&t._windowParent.element.getRootNode()?t._windowParent.element.getRootNode().activeElement:document.activeElement;switch(t.$.removeClass("no-transition"),e.key){case"ArrowUp":case"ArrowDown":if(n!==t)return;if(e.preventDefault(),e.altKey)return"ArrowUp"===e.key?t.maximize():t.restore(),void i();if(t.$.addClass("no-transition"),e.ctrlKey)return t._resize("bottom",a),void i();t._drag(a,"vertical");break;case"ArrowLeft":case"ArrowRight":if(n!==t)return;if(e.preventDefault(),t.$.addClass("no-transition"),e.ctrlKey)return t._resize("right",a),void i();t._drag(a,"horizontal"),t.$.removeClass("no-transition");break;case"Escape":t.headerButtons.indexOf("close")>-1&&n===t&&t.close();break;case"Tab":t.opened&&t.modal&&(t._changingFocus=!0);break;case"Enter":case" ":var s;if(t.shadowRoot||t.isInShadowDOM?(s=e.composedPath()[0],t._buttonPressed=s.getRootNode().host):(s=e.target.closest&&e.target.closest("smart-button"),t._buttonPressed=s),!s)return;t._isWindowButton(s),delete t._buttonPressed}i()}}}],[{key:"properties",get:function(){return{autoComplete:{allowedValues:["none","manual","auto","inline"],type:"string",value:"manual"},confirmLabel:{value:"Ok",type:"string"},cancelLabel:{value:"Cancel",type:"string"},disableSnap:{value:!0,readOnly:!0,type:"boolean"},displayMode:{value:"default",allowedValues:["default","escaped"],type:"string"},headerButtons:{value:["close"],type:"array"},form:{value:"",type:"string"},hint:{value:null,type:"any?"},maxLength:{value:null,type:"number?"},minLength:{value:2,type:"number"},messages:{extend:!0,value:{en:{missingReference:"{{elementType}}: Missing reference to {{files}}."}},type:"object"},modal:{value:!0,readOnly:!0,type:"boolean",defaultReflectToAttribute:!0},name:{value:"",type:"string"},placeholder:{value:"",type:"string"},promptLabel:{value:"",type:"string?"},required:{value:!1,type:"boolean"},requiredMessage:{value:"",type:"string"},selectAllOnFocus:{value:!1,type:"boolean"},value:{value:"",type:"string"}}}},{key:"listeners",get:function(){return{"footer.click":"_footerClickHandler"}}},{key:"requires",get:function(){return{"Smart.TextBox":"smart.textbox.js"}}}]),t}()),Smart("smart-multiline-prompt-window",function(e){function t(){return n(this,t),r(this,d(t).apply(this,arguments))}return h(t,Smart.PromptWindow),o(t,[{key:"template",value:function(){return'<div id="container">\n                    <div id="headerSection" class="smart-header-section" role="heading" aria-level="1">\n                        <div id="header" class="smart-header">[[label]]</div>\n                        <div id="buttonsContainer" class="smart-buttons-container">\n                            <smart-button id="closeButton" class="smart-close-button" animation="[[animation]]" theme="[[theme]]" aria-label="Close"></smart-button>\n                        </div>\n                    </div>\n                    <div class="smart-content">\n                        <content></content>\n                       <smart-multiline-text-box id="textBox"\n                            animation="[[animation]]"\n                            horizontal-scroll-bar-visibility= "[[horizontalScrollBarVisibility]]"\n                            vertical-scroll-bar-visibility= "[[verticalScrollBarVisibility]]"\n                            auto-capitalize="[[autoCapitalize]]"\n                            auto-expand = "[[autoExpand]]"\n                            selection-direction= "[[selectionDirection]]"\n                            selection-end= "[[selectionEnd]]"\n                            selection-start="[[selectionStart]]"\n                            spell-check= "[[spellCheck]]"\n                            wrap="[[wrap]]"\n                            max-length="[[maxLength]]"\n                            value="{{value}}"\n                            form="[[form]]"\n                            label="[[promptLabel]]"\n                            hint="[[hint]]"\n                            display-mode="[[displayMode]]"\n                            max-length="[[maxLength]]"\n                            placeholder="[[placeholder]]"\n                            required="[[required]]"\n                            required-message="[[requiredMessage]]"\n                            select-all-on-focus="[[selectAllOnFocus]]"\n                            theme="[[theme]]">\n                       </smart-multiline-text-box>\n                    </div>\n                    <div id="footer" class="smart-footer">\n                        <smart-button id="confirmButton" class="smart-confirm-button flat" animation="[[animation]]" theme="[[theme]]">[[confirmLabel]]</smart-button>\n                        <smart-button id="cancelButton" class="smart-cancel-button flat" animation="[[animation]]" theme="[[theme]]">[[cancelLabel]]</smart-button>\n                    </div>\n                </div>'}},{key:"_footerClickHandler",value:function(e){var t=e.target;t.closest(".smart-confirm-button")?this.$.fireEvent("confirm",{value:this.$.textBox.value}):t.closest(".smart-cancel-button")&&this.$.fireEvent("cancel",{value:this.$.textBox.value})}}],[{key:"properties",get:function(){return{autoCapitalize:{value:"none",allowedValues:["none","words","characters"],type:"string"},autoExpand:{value:!1,type:"boolean"},headerButtons:{value:["close"],type:"array"},horizontalScrollBarVisibility:{type:"string",value:"auto",allowedValues:["auto","disabled","hidden","visible"]},modal:{value:!0,readOnly:!0,type:"boolean",defaultReflectToAttribute:!0},selectionDirection:{value:"none",allowedValues:["forward","backward","none"],type:"string"},selectionEnd:{value:0,reflectToAttribute:!1,type:"number"},selectionStart:{value:0,reflectToAttribute:!1,type:"number"},spellCheck:{value:!1,type:"boolean"},verticalScrollBarVisibility:{type:"string",value:"auto",allowedValues:["auto","disabled","hidden","visible"]},wrap:{value:"soft",allowedValues:["hard","soft","off"],type:"string"}}}},{key:"listeners",get:function(){return{"footer.click":"_footerClickHandler"}}},{key:"requires",get:function(){return{"Smart.MultilineTextBox":"smart.multilinetextbox.js"}}}]),t}()),Smart("smart-progress-window",function(e){function t(){return n(this,t),r(this,d(t).apply(this,arguments))}return h(t,Smart.Window),o(t,[{key:"template",value:function(){return'<div id="container">\n                    <div id="headerSection" class="smart-header-section" role="heading" aria-level="1">\n                        <div id="header" class="smart-header">[[label]]</div>\n                        <div id="buttonsContainer" class="smart-buttons-container">\n                            <smart-button id="closeButton" class="smart-close-button" animation="[[animation]]" theme="[[theme]]" aria-label="Close"></smart-button>\n                        </div>\n                    </div>\n                    <div class="smart-content" inner-h-t-m-l="[[innerHTML]]">\n                        <content></content>\n                    </div>\n                    <div id="footer" class="smart-footer">\n                        <smart-progress-bar id="progressBar"\n                            animation="[[animation]]"\n                            min="[[min]]"\n                            max="[[max]]"\n                            indeterminate="[[inditerminate]]"\n                            inverted="[[inverted]]"\n                            format-function="[[formatFunction]]"\n                            show-progress-value="[[showProgressValue]]"\n                            theme="[[theme]]"\n                            value="{{value}}">\n                        </smart-progress-bar>\n                        <smart-button id="completeButton" class="smart-complete-button smart-visibility-hidden" animation="[[animation]]" theme="[[theme]]">[[completeLabel]]</smart-button>\n                    </div>\n                </div>'}},{key:"propertyChangedHandler",value:function(e,i,a){switch(e){case"value":this._handleCompletion();break;default:l(d(t.prototype),"propertyChangedHandler",this).call(this,e,i,a)}}},{key:"_createElement",value:function(){this.setAttribute("role","dialog"),this._handleCompletion()}},{key:"_handleCompletion",value:function(){this.$.completeButton&&(this.value>=this.max?(this.$completeButton.removeClass("smart-visibility-hidden"),this.$progressBar.addClass("smart-visibility-hidden")):(this.$completeButton.addClass("smart-visibility-hidden"),this.$progressBar.removeClass("smart-visibility-hidden")))}},{key:"_keyDownHandler",value:function(e){var t=this;function i(){t._dragDetails&&(t._dragDetails.started=!1),t.$.removeClass("no-transition")}if(delete t._changingFocus,!(t.disabled||t._dragDetails&&t._dragDetails.started)){e.stopPropagation();var a="ArrowDown"===e.key||"ArrowRight"===e.key?10:-10,n=t.enableShadowDOM&&t._windowParent.element.getRootNode()?t._windowParent.element.getRootNode().activeElement:document.activeElement;switch(t.$.removeClass("no-transition"),e.key){case"ArrowUp":case"ArrowDown":if(n!==t)return;if(e.preventDefault(),e.altKey)return"ArrowUp"===e.key?t.maximize():t.restore(),void i();if(t.$.addClass("no-transition"),e.ctrlKey)return t._resize("bottom",a),void i();t._drag(a,"vertical"),t.$.removeClass("no-transition");break;case"ArrowLeft":case"ArrowRight":if(n!==t)return;if(e.preventDefault(),t.$.addClass("no-transition"),e.ctrlKey)return t._resize("right",a),void i();t._drag(a,"horizontal"),t.$.removeClass("no-transition");break;case"Escape":t.headerButtons.indexOf("close")>-1&&n===t&&t.close();break;case"Tab":t.opened&&t.modal&&(t._changingFocus=!0);break;case"Enter":case" ":var s;if(t.shadowRoot||t.isInShadowDOM?(s=e.composedPath()[0],t._buttonPressed=s.getRootNode().host):(s=e.target.closest&&e.target.closest("smart-button"),t._buttonPressed=s),!s)return;t._isWindowButton(s),delete t._buttonPressed}i()}}}],[{key:"properties",get:function(){return{completeLabel:{value:"Continue",type:"string"},disableSnap:{value:!0,readOnly:!0,type:"boolean"},headerButtons:{value:["close"],type:"array"},indeterminate:{value:!1,type:"boolean"},inverted:{value:!1,type:"boolean"},formatFunction:{value:null,type:"function"},max:{value:100,type:"number"},modal:{value:!0,readOnly:!0,type:"boolean",defaultReflectToAttribute:!0},min:{value:0,type:"number"},showProgressValue:{value:!1,type:"boolean"},value:{value:0,type:"number?"}}}},{key:"requires",get:function(){return{"Smart.ProgressBar":"smart.progressbar.js"}}}]),t}()),Smart("smart-tabs-window",function(e){function t(){return n(this,t),r(this,d(t).apply(this,arguments))}return h(t,Smart.Window),o(t,[{key:"template",value:function(){return'<div id="container">\n                    <div id="headerSection" class="smart-header-section" role="heading" aria-level="1">\n                        <div id="header" class="smart-header">[[label]]</div>\n                        <div id="buttonsContainer" class="smart-buttons-container">\n                            <smart-button id="minimizeButton" class="smart-minimize-button" animation="[[animation]]" theme="[[theme]]" aria-label="Minimize"></smart-button>\n                            <smart-button id="maximizeButton" class="smart-maximize-button" animation="[[animation]]" theme="[[theme]]" aria-label="Maximize"></smart-button>\n                            <smart-button id="closeButton" class="smart-close-button" animation="[[animation]]" theme="[[theme]]" aria-label="Close"></smart-button>\n                        </div>\n                    </div>\n                    <div id="contentSection" class="smart-content">\n                       <smart-tabs id="tabsElement"\n                            animation="[[animation]]"\n                            add-new-tab="[[addNewTab]]"\n                            allow-toggle="[[allowToggle]]"\n                            close-button-mode="[[tabCloseButtonMode]]"\n                            close-buttons="[[tabCloseButtons]]"\n                            disabled="[[disabled]]"\n                            overflow="[[tabOverflow]]"\n                            reorder="[[tabReorder]]"\n                            resize="[[tabResize]]"\n                            scroll-buttons-position="[[tabScrollButtonsPosition]]"\n                            selected-index="{{selectedIndex}}"\n                            selection-mode="[[selectionMode]]"\n                            tab-layout="[[tabLayout]]"\n                            tab-position="[[tabPosition]]"\n                            tab-text-orientation="[[tabTextOrientation]]"\n                            theme="[[theme]]">\n                            <content></content>\n                        </smart-tabs>\n                    </div>\n                    <div id="footer" class="smart-footer smart-hidden"></div>\n                </div>'}},{key:"appendChild",value:function(e){var t=this;if(!t.isCompleted||e instanceof HTMLElement&&e.classList.contains("smart-resize-trigger-container")){var i=Array.prototype.slice.call(arguments,2);return HTMLElement.prototype.appendChild.apply(t,i.concat(Array.prototype.slice.call(arguments)))}e?(e instanceof Smart.TabItem||t.error(t.localize("tabItemRequired",{method:"removeChild"})),t.$.tabsElement.appendChild(e)):t.error(t.localize("invalidNode",{elementType:t.nodeName.toLowerCase(),method:"appendChild",node:"node"}))}},{key:"insert",value:function(e,t){this.$.tabsElement.insert(e,t)}},{key:"insertBefore",value:function(e,t){this.$.tabsElement.insertBefore(e,t)}},{key:"remove",value:function(e){this.$.tabsElement.remove(e)}},{key:"removeChild",value:function(e){var t=this;if(!t.isCompleted||e instanceof HTMLElement&&e.classList.contains("smart-resize-trigger-container")){var i=Array.prototype.slice.call(arguments,2);return HTMLElement.prototype.removeChild.apply(t,i.concat(Array.prototype.slice.call(arguments)))}e?(e instanceof Smart.TabItem||t.error(t.localize("tabItemRequired",{method:"removeChild"})),(t.shadowRoot||t).contains(e)||t.error(t.localize("referenceNodeNotChild",{argument:"node"})),t.$.tabsElement.removeChild(e)):t.error(t.localize("invalidNode",{elementType:t.nodeName.toLowerCase(),method:"removeChild",node:"node"}))}},{key:"refreshTabHeader",value:function(){this.$.tabsElement&&this.$.tabsElement.isCompleted&&this.$.tabsElement.refreshTabHeader()}},{key:"refreshTabs",value:function(){this.$.tabsElement&&this.$.tabsElement.isCompleted&&this.$.tabsElement._applyTabOverflow()}},{key:"select",value:function(e){this.$.tabsElement.select(e)}},{key:"update",value:function(e,t,i){this.$.tabsElement.update(e,t,i)}},{key:"propertyChangedHandler",value:function(e,i,a){switch("collapsed"!==e&&l(d(t.prototype),"propertyChangedHandler",this).call(this,e,i,a),e){case"theme":""!==i&&(this.$.closeButton.classList.remove(i),this.$.collapseButton.classList.remove(i),this.$.maximizeButton.classList.remove(i),this.$.pinButton.classList.remove(i)),this._applyTheme(a);break;case"autoHideWindow":this._handleAutoHideWindow();break;case"autoHide":a||(null!==this.$.tabsElement.selectedIndex&&(this.$.tabsElement._tabs[this.$.tabsElement.selectedIndex]._autoHideWindowSize=void 0),this._autoHideWindow&&this._autoHideWindow.close());break;case"dataSource":this.$.tabsElement.dataSource=a;break;case"layout":this._handleLayoutProperty();break;case"collapsible":case"collapsed":case"locked":case"max":case"min":case"size":var n=(this.isInShadowDOM?this.getRootNode().host:this||this).closest("smart-docking-layout"),s=this.closest("smart-splitter-item");if(!n)return void("collapsed"===e&&l(d(t.prototype),"propertyChangedHandler",this).call(this,e,i,a));s&&(s[e]=a)}}},{key:"_applyTheme",value:function(e){if(""!==e)for(var t=this.$.buttonsContainer.children,i=0;i<t.length;i++)t[i].classList.add(e)}},{key:"_autoHideWindowCloseHandler",value:function(){this.allowToggle&&null!==this.$.tabsElement.selectedIndex&&this.$.tabsElement.select(this.$.tabsElement.selectedIndex),this._autoHideWindow&&this._moveContent(this._autoHideWindow.items[0],this._autoHideWindow._tab)}},{key:"_autoHideWindowOpenHandler",value:function(){this.$.tabsElement.selectedIndex&&this._handleAutoHide(this.$.tabsElement.selectedIndex)}},{key:"_createElement",value:function(){this.setAttribute("role","dialog"),this.$.tabsElement.$.tabHeaderControls&&!this.$.tabsElement.$.tabHeaderControls.innerHTML&&this.$.tabsElement.$tabHeaderControls.addClass("smart-hidden"),this.$.tabsElement.dataSource=this.dataSource,this._applyTheme(this.theme),this._handleAutoHideWindow(),this.autoHide&&this._handleAutoHide(this.$.tabsElement.selectedIndex),this.allowToggle||this.selectedIndex||null===this.$.tabsElement.selectedIndex||(this.selectedIndex=this.$.tabsElement.selectedIndex,this.$.tabsElement.setAttribute("selected-index",this.selectedIndex)),this._handleLayoutProperty();var e=(this.isInShadowDOM?this.getRootNode().host:this||this).closest("smart-docking-layout"),t=this.closest("smart-splitter-item");e&&t&&(t.collapsible=this.collapsible,t.collapsed=this.collapsed,t.min=this.min,t.max=this.max,t.size=this.size,t.locked=this.locked)}},{key:"_handleLayoutProperty",value:function(){var e=this.closest("smart-docking-layout");if(Smart.DockingLayout){if(!this.ownerLayout&&this.getRootNode())for(var t=this.getRootNode().host;t;){if(!t.closest)return;if(t.closest("smart-docking-layout")){e=t.closest("smart-docking-layout");break}t=t.getRootNode()?t.getRootNode().host:void 0}e?this.layout=e:this.layout instanceof Smart.DockingLayout||"string"==typeof this.layout&&(this.layout=document.getElementById(this.layout))}}},{key:"_headerDblCickHandler",value:function(e){var t=this.shadowRoot||this.isInShadowDOM?e.originalEvent.composedPath()[0]:e.originalEvent.target;e.ctrlKey||t!==this.$.headerSection&&t!==this.$.header||this.$.maximizeButton&&0===this.$.maximizeButton.offsetHeight||(this.maximized?this.restore():this.maximize())}},{key:"_documentUpHandler",value:function(e){var i=e.originalEvent.target.closest?e.originalEvent.target.closest(".smart-window"):e.originalEvent.target,a=i===this||i===this._autoHideWindow||this._isAutoHideWindowClicked,n=this.closest("smart-docking-layout");(this.shadowRoot||this.isInShadowDOM)&&(a=(i=e.originalEvent.composedPath()[0]).getRootNode()===this.shadowRoot||i.closest(".smart-window")===this||i.closest(".smart-window")===this._autoHideWindow||this._isAutoHideWindowClicked),(n=((this.isInShadowDOM?this.getRootNode().host:this)||this).closest("smart-docking-layout"))&&n.disabled?delete this._isWindowContentClicked:(l(d(t.prototype),"_documentUpHandler",this).call(this,e),delete this._isAutoHideWindowClicked,this.autoHide&&this._autoHideWindow&&(a&&this._autoHideWindow.opened||(this.selectedIndex=null,this._autoHideWindow.parentElement&&this._autoHideWindow.parentElement.closest(".smart-window")===this&&this._autoHideWindow.close())))}},{key:"_handleAutoHide",value:function(e){if(this.autoHide&&null!==e&&(this._autoHideWindow||this._handleAutoHideWindow(!0),this._autoHideWindow)){this._autoHideWindow._tabsWindow&&this._autoHideWindow._tabsWindow!==this&&(this._autoHideWindow._tabsWindow.selectedIndex=null);var t=this.$.tabsElement._tabs[e];this._autoHideWindow._tab!==t&&this._moveContent(this._autoHideWindow.items[0],this._autoHideWindow._tab),this._autoHideWindow.label=t.label,this._autoHideWindow.draggable=t.draggable,this._autoHideWindow.floatable=t.floatable,this._autoHideWindow._tab=t,this._moveContent(this._autoHideWindow._tab,this._autoHideWindow.items[0]),this._autoHideWindow.bringToFront(),this._setAutoHideWindowSize(e),this._autoHideWindow.open(),this._autoHideWindow._tabsWindow=this}}},{key:"_moveHandler",value:function(e){var i=this.closest("smart-docking-layout");if(i&&i.items.indexOf(this)>-1)return;Smart.Utilities.Core.isMobile&&navigator.platform&&/iPad|iPhone|iPod/.test(navigator.platform)&&this.layout instanceof Smart.DockingLayout&&this.layout.hasAttribute("dragged")&&e.originalEvent.preventDefault(),l(d(t.prototype),"_moveHandler",this).call(this,e)}},{key:"_setAutoHideWindowSize",value:function(e){if(this._autoHideWindow){this._autoHideWindow.$.addClass("no-transition"),this._autoHideWindow.style.maxWidth=this._autoHideWindow.style.maxHeight="";var t=this.$.tabsElement._tabs[e],i=(this._autoHideWindow.isInShadowDOM?this._autoHideWindow.getRootNode().host:this._autoHideWindow).closest("smart-docking-layout")||this._autoHideWindow.parentElement,a=i.getBoundingClientRect(),n=this.$.tabsElement.getBoundingClientRect();if(t){if("top"===this.tabPosition||"bottom"===this.tabPosition){this._autoHideWindow.resizeMode="top"===this.tabPosition?"bottom":"top",this._autoHideWindow.style.width=this.$.tabsElement.offsetWidth+"px";var s=t._autoHideWindowSize&&parseFloat(t._autoHideWindowSize)||"";Smart.DockingLayout&&i instanceof Smart.DockingLayout&&(s&&(s=Math.min(i.$.itemsContainer.offsetHeight,s)+"px"),this._autoHideWindow.style.maxHeight=i.$.itemsContainer.offsetHeight+"px"),this._autoHideWindow.style.height=s,this._autoHideWindow.style.left=n.left-a.left+"px",this._autoHideWindow&&("top"===this.tabPosition?this._autoHideWindow.style.top=n.top+-a.top+n.height+"px":this._autoHideWindow.style.top=n.top-a.top-this._autoHideWindow.offsetHeight+"px")}else{this._autoHideWindow.resizeMode="left"===this.tabPosition?"right":"left",this._autoHideWindow.style.height=this.$.tabsElement.offsetHeight+"px";var o=t._autoHideWindowSize&&parseFloat(t._autoHideWindowSize)||"";i instanceof Smart.DockingLayout&&(o&&(o=Math.min(i.$.itemsContainer.offsetWidth,o)+"px"),this._autoHideWindow.style.maxWidth=i.$.itemsContainer.offsetWidth+"px"),this._autoHideWindow.style.width=o,this._autoHideWindow.style.top=n.top-a.top+"px","left"===this.tabPosition?this._autoHideWindow.style.left=n.left-a.left+this.$.tabsElement.offsetWidth+"px":this._autoHideWindow.style.left=n.left-a.left-this._autoHideWindow.offsetWidth+"px"}this._autoHideWindow._dragDetails&&(this._autoHideWindow._dragDetails.maxWidth=void 0),this._autoHideWindow._setDragDetails("resize"),this._autoHideWindow._dragDetails.started=!1,this._autoHideWindow.$.removeClass("no-transition")}}}},{key:"_handleAutoHideWindow",value:function(e){if(this.autoHideWindow){if(this._autoHideWindow&&this._autoHideWindow.parentElement.removeChild(this._autoHideWindow),"string"==typeof this.autoHideWindow)return void(this._autoHideWindow=document.getElementById(this.autoHideWindow));if(this.autoHideWindow instanceof Smart.Window)return void(this._autoHideWindow=this.autoHideWindow)}if(!(!e||this._autoHideWindow||2===this.$.contentSection.children.length&&this.$.contentSection.children[1]instanceof Smart.Window)){var t=document.createElement("smart-window");t.$=Smart.Utilities.Extend(t),t.disableSnap=t.pinned=!0,t.headerButtons=["close"],this.$.contentSection.appendChild(t),this._autoHideWindow=t}}},{key:"_moveContent",value:function(e,t){if(e&&t)for(var i=[].slice.call(e.$.content.childNodes),a=0;a<i.length;a++)t.appendChild(i[a])}},{key:"_tabsChangeHandler",value:function(e){if(e.target===this.$.tabsElement&&this.autoHide){if(this._autoHideWindow||this._handleAutoHideWindow(!0),null!==e.detail.oldIndex&&this._autoHideWindow.opened)this.$.tabsElement._tabs[e.detail.oldIndex]._autoHideWindowSize=this._autoHideWindow.style["right"===this.$.tabsElement.tabPosition||"left"===this.$.tabsElement.tabPosition?"width":"height"];if(!this.autoHide||null===e.detail.index||void 0===e.detail.index)return this._autoHideWindow.setAttribute("active",""),void this._autoHideWindow.close();this._handleAutoHide(e.detail.index)}}},{key:"_tabsFocusHandler",value:function(e){"focus"===e.type?(this.bringToFront(),this.setAttribute("focus","")):this.removeAttribute("focus")}},{key:"items",get:function(){if(this.isCompleted&&this.$.tabsElement)return this.$.tabsElement._tabs}},{key:"itemLabels",get:function(){if(this.$)return this.$.tabsElement._tabLabelContainers}},{key:"siblings",get:function(){var e=[];if(!this.isCompleted)return e;var t=this.closest("smart-splitter");if(!t||!t.closest("smart-docking-layout"))return e;var i=t._items;if(!i||!i.length)return e;for(var a=0;a<i.length;a++){var n=i[a];if(n!==this.closest("smart-splitter-item"))n.querySelector("smart-tabs-window").closest("smart-splitter")===t&&e.push(n.querySelector("smart-tabs-window"))}return e}}],[{key:"properties",get:function(){return{disableSnap:{value:!0,readOnly:!0,type:"boolean"},dropPosition:{value:["all"],type:"array"},addNewTab:{value:!1,type:"boolean"},allowToggle:{value:!1,type:"boolean"},autoHide:{value:!1,type:"boolean"},autoHideWindow:{value:null,type:"any"},dataSource:{value:null,type:"array?",reflectToAttribute:!1},tabCloseButtonMode:{value:"default",allowedValues:["default","selected"],type:"string"},tabCloseButtons:{value:!1,type:"boolean"},messages:{value:{en:{ambiguousIndexes:"smart-tabs: Initially set smart-tab-item indexes are ambiguous and are ignored in favour of the HTML structure.",detailsObjectRequired:'smart-tabs: The method "insert" requires a details Object to be passed as a second argument.',invalidIndex:'smart-tabs: "{{method}}" method accepts an index of type number.',referenceNodeNotChild:"smart-tabs: Passed {{argument}} is not part of this smart-tabs element.",tabItemRequired:'smart-tabs: The method "{{method}}" requires a "smart-tab-item" element to be passed as an argument.'}},type:"object",extend:!0},tabOverflow:{value:"auto",allowedValues:["auto","hidden","scroll"],type:"string"},tabReorder:{value:!1,type:"boolean"},tabResize:{value:!1,type:"boolean"},tabScrollButtonsPosition:{value:"both",allowedValues:["near","far","both"],type:"string"},selectedIndex:{value:null,type:"number?"},selectionMode:{value:"click",allowedValues:["click","dblclick","mouseenter","none"],type:"string"},collapsed:{value:!1,type:"boolean"},collapsible:{value:!1,type:"boolean"},locked:{value:!1,type:"boolean"},max:{value:"",type:"any"},min:{value:"",type:"any"},size:{value:"",type:"any"},tabLayout:{value:"scroll",allowedValues:["scroll","dropdown","wrap","shrink"],type:"string",defaultReflectToAttribute:!0},tabPosition:{value:"top",allowedValues:["top","bottom","left","right","hidden"],type:"string"},tabTextOrientation:{value:"horizontal",allowedValues:["horizontal","vertical"],type:"string"},layout:{value:null,type:"any"}}}},{key:"listeners",get:function(){return{"tabsElement.blur":"_tabsFocusHandler","tabsElement.change":"_tabsChangeHandler","tabsElement.focus":"_tabsFocusHandler","autoHideWindow.close":"_autoHideWindowCloseHandler","autoHideWindow.open":"_autoHideWindowOpenHandler"}}},{key:"requires",get:function(){return{"Smart.Tabs":"smart.tabs.js"}}}]),t}()),Smart("smart-wait-window",function(e){function t(){return n(this,t),r(this,d(t).apply(this,arguments))}return h(t,Smart.ProgressWindow),o(t,[{key:"template",value:function(){return'<div id="container">\n                    <div id="headerSection" class="smart-header-section" role="heading" aria-level="1">\n                        <div id="header" class="smart-header">[[label]]</div>\n                        <div id="buttonsContainer" class="smart-buttons-container">\n                            <smart-button id="closeButton" class="smart-close-button" animation="[[animation]]" theme="[[theme]]" aria-label="Close"></smart-button>\n                        </div>\n                    </div>\n                    <div class="smart-content">\n                        <content></content>\n                        <smart-progress-bar id="progressBar" animation="[[animation]]" indeterminate theme="[[theme]]"></smart-progress-bar>\n                    </div>\n                    <div id="footer" class="smart-footer"></div>\n                </div>'}},{key:"_keyDownHandler",value:function(e){var t=this;function i(){t._dragDetails&&(t._dragDetails.started=!1),t.$.removeClass("no-transition")}if(delete t._changingFocus,!(t.disabled||t._dragDetails&&t._dragDetails.started)){var a=t.shadowRoot||t._windowParent.element.getRootNode()?t._windowParent.element.getRootNode().activeElement:document.activeElement;e.stopPropagation();var n="ArrowDown"===e.key||"ArrowRight"===e.key?10:-10;switch(t.$.removeClass("no-transition"),e.key){case"ArrowUp":case"ArrowDown":if(a!==t)return;if(e.preventDefault(),e.altKey)return"ArrowUp"===e.key?t.maximize():t.restore(),void i();if(t.$.addClass("no-transition"),e.ctrlKey)return t._resize("bottom",n),void i();t._drag(n,"vertical");break;case"ArrowLeft":case"ArrowRight":if(a!==t)return;if(e.preventDefault(),t.$.addClass("no-transition"),e.ctrlKey)return t._resize("right",n),void i();t._drag(n,"horizontal");break;case"Tab":t.opened&&t.modal&&(t._changingFocus=!0);break;case"Enter":case" ":var s;if(t.shadowRoot||t.isInShadowDOM?(s=e.composedPath()[0],t._buttonPressed=s.getRootNode().host):(s=e.target.closest&&e.target.closest("smart-button"),t._buttonPressed=s),!s)return;t._isWindowButton(s),delete t._buttonPressed}i()}}}],[{key:"properties",get:function(){return{headerButtons:{value:[],type:"array"},disableSnap:{value:!0,readOnly:!0,type:"boolean"},modal:{value:!0,readOnly:!0,type:"boolean",defaultReflectToAttribute:!0},pinned:{value:!0,type:"boolean",readOnly:!0}}}}]),t}())},32:function(e,t,i){"use strict";function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function o(e,t,i){return t&&s(e.prototype,t),i&&s(e,i),e}function r(e,t){return!t||"object"!==a(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function l(e,t,i){return(l="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,i){var a=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=d(e)););return e}(e,t);if(a){var n=Object.getOwnPropertyDescriptor(a,t);return n.get?n.get.call(i):n.value}})(e,t,i||e)}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function h(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}Smart("smart-splitter-item",function(e){function t(){return n(this,t),r(this,d(t).apply(this,arguments))}return h(t,Smart.ContentElement),o(t,[{key:"template",value:function(){return'<div id="container" role="presentation">\n                    <div class="smart-content" id="content" inner-h-t-m-l="[[innerHTML]]" role="presentation">\n                        <content></content>\n                    </div>\n                </div>'}},{key:"propertyChangedHandler",value:function(e,i,a){switch(e){case"collapsed":this._ignorePropertyValue=!0,a?this.collapse():this.expand();break;case"collapsible":this._updateNearSplitterBars();break;case"size":case"min":case"max":this._setSize(e,a);break;default:l(d(t.prototype),"propertyChangedHandler",this).call(this,e,i,a)}}},{key:"attached",value:function(){l(d(t.prototype),"attached",this).call(this);this._sizeLimits||(this._sizeLimits={});var e=getComputedStyle(this);this.min||(this._sizeLimits.minWidth=parseFloat(e.getPropertyValue("min-width"))||0,this._sizeLimits.minHeight=parseFloat(e.getPropertyValue("min-height"))||0),this.max||(this._sizeLimits.maxWidth=parseFloat(e.getPropertyValue("max-width"))||0,this._sizeLimits.maxHeight=parseFloat(e.getPropertyValue("max-height"))||0)}},{key:"detached",value:function(){l(d(t.prototype),"detached",this).call(this);this.$.removeClass("animate")}},{key:"appendChild",value:function(e){var t=this;if(e){if(!t.isCompleted||e instanceof HTMLElement&&e.classList.contains("smart-resize-trigger-container")){var i=Array.prototype.slice.call(arguments,2);return HTMLElement.prototype.appendChild.apply(t,i.concat(Array.prototype.slice.call(arguments)))}t.$.content.appendChild(e)}else t.error(t.localize("invalidNode",{elementType:t.nodeName.toLowerCase(),method:"appendChild",node:"node"}))}},{key:"collapse",value:function(e){if(this.collapsible){if(this._ignorePropertyValue||!this.collapsed){var t=this.closest("smart-splitter")||(this.getRootNode()&&this.getRootNode().host?this.getRootNode().host.closest("smart-splitter"):void 0);if(!t)return;var i=t._items.indexOf(this);i===t._items.length-1?e=!0:0===i&&(e=!1);for(var a,n=e?-1:1,s=i+n,o=t._items[s];o&&o.collapsed;)s+=n,o=t._items[s];if(!o)return void(this.collapsed=!1);delete this._ignorePropertyValue,this._sizeBeforeCollapse||(this._sizeBeforeCollapse=this[t._measurements.size]),o._sizeBeforeCollapse||(o._sizeBeforeCollapse=o[t._measurements.size]),this.previousElementSibling instanceof Smart.SplitterBar?a=this.previousElementSibling:this.nextElementSibling instanceof Smart.SplitterBar&&(a=this.nextElementSibling);var r=o[t._measurements.size]+this[t._measurements.size],l=a?a[t._measurements.size]:this._sizeLimits[t._measurements.minDimension];if(r&&r-l<l)return void(this.collapsed=!1);if(this.hasAnimation&&!t._isInitializing&&(this.$.addClass("animate"),o.$.addClass("animate"),this.addEventListener("transitionend",this._transitionEndHandler,{once:!0}),this.addEventListener("transitioncancel",this._transitionEndHandler,{once:!0}),o.addEventListener("transitionend",this._transitionEndHandler,{once:!0}),o.addEventListener("transitioncancel",this._transitionEndHandler,{once:!0})),!this._paddings){var d=getComputedStyle(this);this._paddings=(parseFloat(d.getPropertyValue("padding-"+t._measurements.position))||0)+(parseFloat(d.getPropertyValue("padding-"+t._measurements.position2))||0)}void 0!==o._sizeBeforeCollapse&&(o._sizeBeforeCollapse=o._sizeBeforeCollapse+this._sizeBeforeCollapse),o._sizeLimits&&o._sizeLimits[t._measurements.maxDimension]&&r>o._sizeLimits[t._measurements.maxDimension]&&(o._sizeLimits.ignoreUpdate=!0,o._sizeBeforeCollapse?o.style[t._measurements.maxDimension]=o._sizeBeforeCollapse+"px":o.style[t._measurements.maxDimension]=""),o._sizeBeforeCollapse&&(o.style[t._measurements.dimension]=o._sizeBeforeCollapse+"px"),this.style[t._measurements.dimension]=this.style[t._measurements.minDimension]="0",this.style.padding="0",this._neighbourItem=o,this.collapsed=!0,t.$.fireEvent("collapse",{itemIndex:t._items.indexOf(this)}),e?(this.previousElementSibling.itemCollapsed=!0,this.previousElementSibling.showFarButton=!(this.previousElementSibling.showNearButton=!1)):(this.nextElementSibling.itemCollapsed=!0,this.nextElementSibling.showNearButton=!(this.nextElementSibling.showFarButton=!1))}}else this.collapsed=!1}},{key:"expand",value:function(){if(this._ignorePropertyValue||this.collapsed){var e=this.closest("smart-splitter")||(this.getRootNode()&&this.getRootNode().host?this.getRootNode().host.closest("smart-splitter"):void 0);if(!e)return void(this.collapsed=!0);if(!this._neighbourItem)return void(this.collapsed=!0);if(delete this._ignorePropertyValue,!this._neighbourItem._ignorePropertyValue&&this._neighbourItem.collapsed){var t=e._items.indexOf(this._neighbourItem),i=e._items.indexOf(this)>e._items.indexOf(this._neighbourItem)?-1:1;for(this._neighbourItem=e._items[t];this._neighbourItem&&this._neighbourItem.collapsed;)t+=i,this._neighbourItem=e._items[t]}if(!this._neighbourItem)return void(this.collapsed=!0);this.min&&this._setSize("min",this.min,!0);var a=this._neighbourItem._sizeBeforeCollapse,n=this._sizeLimits[e._measurements.minDimension],s=this._neighbourItem._sizeLimits[e._measurements.minDimension];if(a&&a-n<s)return void(this.collapsed=!0);if(!this._neighbourItem._paddings){var o=getComputedStyle(this._neighbourItem);this._neighbourItem._paddings=(parseFloat(o.getPropertyValue("padding-"+e._measurements.position))||0)+(parseFloat(o.getPropertyValue("padding-"+e._measurements.position2))||0)}if(!this._paddings){var r=getComputedStyle(this);this._paddings=(parseFloat(r.getPropertyValue("padding-"+e._measurements.position))||0)+(parseFloat(r.getPropertyValue("padding-"+e._measurements.position2))||0)}if((this.size+"").indexOf("%")>-1&&(!this._sizeBeforeCollapse||0===this._sizeBeforeCollapse)&&this._neighbourItem._sizeBeforeCollapse){var l=0;e._items.map((function(t){return l+=t.collapsed?0:t.style[e._measurements.dimension]&&t.style[e._measurements.dimension].indexOf("%")<-1&&t._sizeBeforeCollapse?t._sizeBeforeCollapse:t.getBoundingClientRect()[e._measurements.dimension]})),this._sizeBeforeCollapse=l*parseFloat(this.size)/100}var d=Math.min(Math.max(n,this._sizeBeforeCollapse),a-this._neighbourItem._paddings-this._paddings-s);if(d<0)return void(this.collapsed=!0);this.hasAnimation&&!e._isInitializing&&(this.$.addClass("animate"),this._neighbourItem.$.addClass("animate"),this.addEventListener("transitionend",this._transitionEndHandler,{once:!0}),this.addEventListener("transitioncancel",this._transitionEndHandler,{once:!0}),this._neighbourItem.addEventListener("transitionend",this._transitionEndHandler,{once:!0}),this._neighbourItem.addEventListener("transitioncancel",this._transitionEndHandler,{once:!0})),this.style.padding="",this.style[e._measurements.minDimension]=this.min?this._sizeLimits[e._measurements.minDimension]+"px":"",this.style[e._measurements.dimension]=(this._sizeBeforeCollapse=d)+"px",this._neighbourItem.style[e._measurements.dimension]=(this._neighbourItem._sizeBeforeCollapse=Math.max(this._neighbourItem._sizeLimits[e._measurements.minDimension],a-d))+"px",this._neighbourItem._sizeLimits[e._measurements.maxDimension]&&(this._neighbourItem.style[e._measurements.maxDimension]=this._neighbourItem._sizeLimits[e._measurements.maxDimension]+"px"),this.collapsed=!1,e.$.fireEvent("expand",{itemIndex:e._items.indexOf(this)}),e._items.indexOf(this)>e._items.indexOf(this._neighbourItem)?(this.previousElementSibling.itemCollapsed=!1,this.previousElementSibling.showNearButton=this._neighbourItem.collapsible):(this.nextElementSibling.itemCollapsed=!1,this.nextElementSibling.showFarButton=this._neighbourItem.collapsible);var h=e._items[e._items.indexOf(this)-1],u=e._items[e._items.indexOf(this)+1];if(h){var c=h.nextElementSibling;c&&c instanceof Smart.SplitterBar&&(h.collapsed?c.showNearButton=this.collapsible:(c.itemCollapsed=!1,c.showNearButton=h.collapsible,c.showFarButton=this.collapsible))}if(u){var m=u.previousElementSibling;m&&m instanceof Smart.SplitterBar&&(u.collapsed?m.showFarButton=u.collapsed:(m.itemCollapsed=!1,m.showNearButton=this.collapsible,m.showFarButton=u.collapsible))}delete this._neighbourItem}}},{key:"insertBefore",value:function(e,t){var i=this;if(e){if(!i.isCompleted||e instanceof HTMLElement&&e.classList.contains("smart-resize-trigger-container")){var a=Array.prototype.slice.call(arguments,2);return HTMLElement.prototype.insertBefore.apply(i,a.concat(Array.prototype.slice.call(arguments)))}i.$.content.insertBefore(e,t||null)}else i.error(i.localize("invalidNode",{elementType:i.nodeName.toLowerCase(),method:"insertBefore",node:"node"}))}},{key:"lock",value:function(){this.locked=!0}},{key:"unlock",value:function(){this.locked=!1}},{key:"ready",value:function(){l(d(t.prototype),"ready",this).call(this)}},{key:"render",value:function(){var e=this.closest("smart-splitter"),i=e&&e.isCompleted;this.setAttribute("role","region"),this._sizeLimits={};var a="string"==typeof this.min&&this.min.indexOf("%")>-1,n=isNaN(parseFloat(this.min))?0:parseFloat(this.min),s=isNaN(parseFloat(this.max))?0:parseFloat(this.max);if(this._sizeLimits.minWidth=this._sizeLimits.minHeight=a&&i?n*e[e._measurements.size]/100:n,a="string"==typeof this.max&&this.max.indexOf("%")>-1,this._sizeLimits.maxWidth=this._sizeLimits.maxHeight=a&&i?s*e[e._measurements.size]/100:s,this.size){a="string"==typeof this.size&&this.size.indexOf("%")>-1;var o="auto"===this.size?this.size:isNaN(parseFloat(this.size))?0:parseFloat(this.size)+(a?"%":"px");i?this.style[e._measurements.dimension]=o:this.style.width=this.style.height=o}this.min&&this._setSize("min",this.min),this.max&&this._setSize("max",this.max),this._updateNearSplitterBars(),this.checkLicense(),l(d(t.prototype),"render",this).call(this)}},{key:"removeChild",value:function(e){var t=this;if(e){if(!t.isCompleted||e instanceof HTMLElement&&e.classList.contains("smart-resize-trigger-container")){var i=Array.prototype.slice.call(arguments,2);return HTMLElement.prototype.appendChild.apply(t,i.concat(Array.prototype.slice.call(arguments)))}t.$.content.removeChild(e)}else t.error(t.localize("invalidNode",{elementType:t.nodeName.toLowerCase(),method:"removeChild",node:"node"}))}},{key:"_expand",value:function(){if(this._neighbourItem&&this._neighbourItem.parentElement)this.expand();else{var e=this.closest("smart-splitter");e&&(delete this._neighbourItem,this.collapsed=!1,e.$.fireEvent("expand",{itemIndex:e._items.indexOf(this)}),this.style[e._measurements.minDimension]=this.min?this._sizeLimits[e._measurements.minDimension]+"px":"",this.style[e._measurements.dimension]=this._sizeBeforeCollapse+"px",e._items.length<2||this.previousElementSibling instanceof Smart.SplitterBar&&(this.previousElementSibling.itemCollapsed=!1,this.previousElementSibling.showNearButton=e._items[e._items.indexOf(this)-1].collapsible))}}},{key:"_mouseEventsHandler",value:function(e){var t=this.closest("smart-splitter")||this.getRootNode().host;(t&&!t.disabled||Smart.Utilities.Core.isMobile)&&("mouseenter"===e.type?this.setAttribute("hover",""):this.removeAttribute("hover"))}},{key:"_propertyValidator",value:function(e,t){return"number"!=typeof t&&"string"!=typeof t?e:t}},{key:"_setSize",value:function(e,t,i){var a=this;if(!a.isCompleted||!a.locked){var n=a.closest("smart-splitter");if(n)if(n.isCompleted){var s="string"==typeof t&&t.indexOf("%")>-1,o=function(){for(var e=n.bars,t=0,i=0;i<e.length;i++)t+=e[i][n._measurements.size];return n.$.container[n._measurements.size]-t}();switch(t=isNaN(parseFloat(t))?"":parseFloat(t),a._sizeLimits||(a._sizeLimits={}),e){case"size":var r=a[n._measurements.size];"auto"!==arguments[1]&&arguments[1]?s?(a.style[n._measurements.dimension]=t+"%",a._sizeBeforeCollapse=t*o/100):a.style[n._measurements.dimension]=(a._sizeBeforeCollapse=t||0)+"px":(a.style[n._measurements.dimension]=arguments[1],a._sizeBeforeCollapse=a[n._measurements.size]);var l=r-a._sizeBeforeCollapse;a._originalSize&&(a._originalSize=a._sizeBeforeCollapse);var d=n._items[n._items.length-1];if(a===d){var h=n._items.find((function(e){return e!==a&&!e.collapsed&&!e.locked&&!e.size}));if(!h)for(var u=Math.max(0,n._items.length-2);u>=0;u--)if(!n._items[u].collapsed&&!n._items[u].locked&&n._items[u]!==a){h=n._items[u];break}h&&(h.style[n._measurements.dimension]=(h._sizeBeforeCollapse=Math.max(0,h[n._measurements.size]+l))+"px")}break;case"min":a._sizeLimits.minWidth=a._sizeLimits.minHeight=s?t*o/100:t,a.style[n._measurements.minDimension]=a.collapsed||!t?"":t+(s?"%":"px"),a.style["min"+n._measurements.restricredDimension]="",t||n._noNeighbourValidation||n._validateNeighbourSizeLimits(a);break;case"max":a._sizeLimits.maxWidth=a._sizeLimits.maxHeight=s?t*o/100:t,a.style[n._measurements.maxDimension]=t?t+(s?"%":"px"):"",a.style["max"+n._measurements.restricredDimension]="",t||n._noNeighbourValidation||n._validateNeighbourSizeLimits(a)}i||n._noItemSizeValidation||n._validateItemSize(!0)}else n.whenReady((function(){return a._setSize(e,t)}))}}},{key:"_styleChangedEventHandler",value:function(e){if(!this.locked)if(this._sizeLimits.ignoreUpdate)delete this._sizeLimits.ignoreUpdate;else if(!this.collapsed){var t,i=this.closest("smart-splitter");e.detail.styleProperties["min-width"]?(t=e.detail.styleProperties["min-width"][i&&"horizontal"===i.orientation?"oldValue":"value"],this._sizeLimits.minWidth=(parseFloat(t)||0)*(t&&t.indexOf("%")>-1?i[i._measurements.size]/100:1)):e.detail.styleProperties["max-width"]?(t=e.detail.styleProperties["max-width"][i&&"horizontal"===i.orientation?"oldValue":"value"],this._sizeLimits.maxWidth=(parseFloat(t)||0)*(t&&t.indexOf("%")>-1?i[i._measurements.size]/100:1)):e.detail.styleProperties["min-height"]?(t=e.detail.styleProperties["min-height"][i&&"horizontal"===i.orientation?"value":"oldValue"],this._sizeLimits.minHeight=(parseFloat(t)||0)*(t&&t.indexOf("%")>-1?i[i._measurements.size]/100:1)):e.detail.styleProperties["max-height"]&&(t=e.detail.styleProperties["max-height"][i&&"horizontal"===i.orientation?"value":"oldValue"],this._sizeLimits.maxHeight=(parseFloat(t)||0)*(t&&t.indexOf("%")>-1?i[i._measurements.size]/100:1))}}},{key:"_transitionEndHandler",value:function(){!this.isCompleted&&this.$.hasClass("animate")||(this.$.removeClass("animate"),this._neighbourItem&&this._neighbourItem.$.hasClass("animate")&&this._neighbourItem.$.removeClass("animate"),((this.size+"").indexOf("%")>-1||this._neighbourItem&&(this._neighbourItem.size+"").indexOf("%")>-1)&&((this.shadowRoot&&this.getRootNode()?this.getRootNode().host:null)||this.closest("smart-splitter"))._validateItemSize())}},{key:"_updateNearSplitterBars",value:function(){this.previousElementSibling instanceof Smart.SplitterBar&&(this.previousElementSibling.showFarButton=this.collapsible),this.nextElementSibling instanceof Smart.SplitterBar&&(this.nextElementSibling.showNearButton=this.collapsible)}},{key:"enableShadowDOM",get:function(){return!1}}],[{key:"properties",get:function(){return{collapsed:{value:!1,type:"boolean"},collapsible:{value:!1,type:"boolean"},locked:{value:!1,type:"boolean"},max:{value:"",type:"any",validator:"_propertyValidator"},min:{value:"",type:"any",validator:"_propertyValidator"},size:{value:"",type:"any",validator:"_propertyValidator"}}}},{key:"listeners",get:function(){return{mouseenter:"_mouseEventsHandler",mouseleave:"_mouseEventsHandler",styleChanged:"_styleChangedEventHandler"}}}]),t}()),Smart("smart-splitter-bar",function(e){function t(){return n(this,t),r(this,d(t).apply(this,arguments))}return h(t,Smart.BaseElement),o(t,[{key:"template",value:function(){return'<div id="container" role="presentation">\n                    <div class="smart-splitter-far-collapse-button" id="farCollapseButton" role="button" aria-label="Collapse next">\n                        <span id="arrowNear" class="smart-arrow" aria-hidden="true"></span>\n                    </div>\n                    <div class="smart-splitter-resize-button" id="resizeButton" aria-hidden="true">\n                        <span></span>\n                    </div>\n                    <div class="smart-splitter-near-collapse-button" id="nearCollapseButton" role="button" aria-label="Collapse previous">\n                        <span id="arrowFar" class="smart-arrow" aria-hidden="true"></span>\n                    </div>\n                </div>'}},{key:"propertyChangedHandler",value:function(e,i,a){switch(e){case"unfocusable":this._setFocusable();break;default:l(d(t.prototype),"propertyChangedHandler",this).call(this,e,i,a)}}},{key:"ready",value:function(){l(d(t.prototype),"ready",this).call(this);this.setAttribute("role","separator"),this.setAttribute("aria-label","Resize"),this._setFocusable()}},{key:"hide",value:function(){var e=this,t=e.closest("smart-splitter");if(e.$.addClass("smart-hidden"),t){var i=t.items;if(t.hasAnimation){for(var a,n=0;n<i.length;n++)i[n].$.hasClass("animate")&&(a=!0,i[n].addEventListener("transitionend",(function(){e.closest("smart-splitter")._autoFitItems()}),{once:!0}));if(a)return}t._autoFitItems()}}},{key:"show",value:function(){var e=this,t=e.closest("smart-splitter");if(e.$.removeClass("smart-hidden"),t){var i=t.items;if(t.hasAnimation){for(var a,n=0;n<i.length;n++)i[n].$.hasClass("animate")&&(a=!0,i[n].addEventListener("transitionend",(function(){e.closest("smart-splitter")._autoFitItems()}),{once:!0}));if(a)return}t._autoFitItems()}}},{key:"lock",value:function(){this.locked=this.unfocusable=!0,this.showNearButton||this.showFarButton||this._setFocusable()}},{key:"unlock",value:function(){this.locked=this.unfocusable=!1,this._setFocusable()}},{key:"_focusEventHandler",value:function(e){"focus"===e.type?this.setAttribute("focus",""):this.removeAttribute("focus")}},{key:"_setFocusable",value:function(){this.disabled||this.unfocusable?this.removeAttribute("tabindex"):this.tabIndex=this.tabIndex>0?this.tabIndex:0}},{key:"_handleHoveredState",value:function(e,t){switch(t){case"mouseenter":if(!e._getTargetItem(this,"previousElementSibling")||!("adjacent"===e.resizeMode?e._getTargetItem(this,"nextElementSibling"):e._getTargetItem(this,"previousElementSibling",!0)))return;this.setAttribute("hover","");break;case"mouseleave":this.removeAttribute("hover")}}},{key:"_mouseEventsHandler",value:function(e){var t=this.closest("smart-splitter")||this.getRootNode().host;t&&t.disabled||Smart.Utilities.Core.isMobile||("mouseenter"!==e.type&&"mouseleave"!==e.type?e.target.closest(".smart-splitter-far-collapse-button")!==this.$.farCollapseButton?e.target.closest(".smart-splitter-near-collapse-button")!==this.$.nearCollapseButton?e.target.closest(".smart-splitter-resize-button")===this.$.resizeButton&&("mouseover"===e.type?this.$.resizeButton.setAttribute("hover",""):this.$.resizeButton.removeAttribute("hover")):"mouseover"===e.type?this.$.nearCollapseButton.setAttribute("hover",""):this.$.nearCollapseButton.removeAttribute("hover"):"mouseover"===e.type?this.$.farCollapseButton.setAttribute("hover",""):this.$.farCollapseButton.removeAttribute("hover"):this._handleHoveredState(t,e.type))}},{key:"enableShadowDOM",get:function(){return!1}}],[{key:"properties",get:function(){return{showNearButton:{value:!1,type:"boolean"},showFarButton:{value:!1,type:"boolean"},itemCollapsed:{value:!1,type:"boolean"},locked:{value:!1,type:"boolean"}}}},{key:"listeners",get:function(){return{mouseenter:"_mouseEventsHandler",mouseleave:"_mouseEventsHandler",mouseover:"_mouseEventsHandler",mouseout:"_mouseEventsHandler",focus:"_focusEventHandler",blur:"_focusEventHandler"}}}]),t}()),Smart("smart-splitter",function(e){function t(){return n(this,t),r(this,d(t).apply(this,arguments))}return h(t,Smart.ContentElement),o(t,[{key:"template",value:function(){return'<div id="container" role="presentation">\n                    <content></content>\n                </div>'}},{key:"propertyChangedHandler",value:function(e,i,a){switch(e){case"dataSource":this._createLayout();break;case"resizeMode":delete this._dragDetails;break;case"orientation":this.bars.forEach((function(e){return e.setAttribute("aria-orientation",a)})),this._setMeasurements(),this.setAttribute("orientation-change","");for(var n=0;n<this._items.length;n++)this._items[n].style[this._measurements.dimension]=this._items[n]["offset"+this._measurements.restricredDimension]+"px",this._items[n].style[this._measurements.restricredDimension.toLowerCase()]="100%",this._items[n].style["max"+this._measurements.restricredDimension]="none",this._items[n].style["min"+this._measurements.restricredDimension]="none",this._items[n].style[this._measurements.maxDimension]=this._items[n].max?this._items[n]._sizeLimits[this._measurements.maxDimension]+"px":"",this._items[n].collapsed?(this._items[n].style.minWidth=this._items[n].style.minHeight="",this._items[n].style[this._measurements.minDimension]="0"):this._items[n].style[this._measurements.minDimension]=this._items[n].min?this._items[n]._sizeLimits[this._measurements.minDimension]+"px":"";this._validateItemSize(),this.removeAttribute("orientation-change");break;case"unfocusable":this._setFocusable();break;default:l(d(t.prototype),"propertyChangedHandler",this).call(this,e,i,a)}}},{key:"appendChild",value:function(e){var t=this;if(!t.isCompleted||e instanceof HTMLElement&&e.classList.contains("smart-resize-trigger-container")){var i=Array.prototype.slice.call(arguments,2);return HTMLElement.prototype.appendChild.apply(t,i.concat(Array.prototype.slice.call(arguments)))}e&&e instanceof Smart.SplitterItem?t.insertBefore(e,null):t.error(t.localize("invalidNode",{elementType:t.nodeName.toLowerCase(),method:"appendChild",node:"node"}))}},{key:"attached",value:function(){l(d(t.prototype),"attached",this).call(this);this.isRendered&&this._validateItemSize()}},{key:"collapse",value:function(e,t){if("number"==typeof e&&(e=this._items[e]),e){var i=this.closest("smart-splitter")||(this.getRootNode()&&this.getRootNode().host?this.getRootNode().host.closest("smart-splitter"):void 0);e instanceof Smart.SplitterItem&&i===this?e.collapse(t):"number"==typeof e&&this._items[e]?e.collapse(t):this.error(this.localize("invalidIndex",{elementType:this.nodeName.toLowerCase(),method:"collapse"}))}}},{key:"expand",value:function(e){if("number"==typeof e&&(e=this._items[e]),e){var t=this.closest("smart-splitter")||(this.getRootNode()&&this.getRootNode().host?this.getRootNode().host.closest("smart-splitter"):void 0);e instanceof Smart.SplitterItem&&t===this?e.expand():"number"==typeof e&&this._items[e]?e.expand():this.error(this.localize("invalidIndex",{elementType:this.nodeName.toLowerCase(),method:"expand"}))}}},{key:"hideBar",value:function(e){"number"==typeof e&&(e=this.bars[e]),e instanceof Smart.SplitterBar?e instanceof Smart.SplitterBar&&(this.enableShadowDOM?e.getRootNode().host:e.closest("smart-splitter"))===this&&e.hide():this.error(this.localize("indexOutOfBound",{elementType:this.nodeName.toLowerCase(),method:"hideBar"}))}},{key:"insert",value:function(e,t){if("string"==typeof t&&(t={content:t}),t&&"object"===a(t))if("number"==typeof e){var i=t instanceof Smart.SplitterItem?t:this._createItem(t);e>=this._items.length||0===this._items.length?this.appendChild(i):this.insertBefore(i,this._items[e])}else this.error(this.localize("invalidIndex",{elementType:this.nodeName.toLowerCase(),method:"insert"}));else this.error(this.localize("invalidSettings",{elementType:this.nodeName.toLowerCase(),method:"insert"}))}},{key:"insertBefore",value:function(e,t){var i=this;function a(){var a=function(){for(var t=e.previousElementSibling;t;){if(t instanceof Smart.SplitterItem)return t;t=t.previousElementSibling}}(),n=a?a.locked:void 0;a&&(a.locked=!1),i._resizeHostItemOnInsert(a,e,l),i._items&&i._items.splice(t?i._items.indexOf(t):i._items.length,0,e),a&&(a.max&&a._setSize("max",a.max,!0),a.min&&a._setSize("min",a.min,!0),n&&(a.locked=!0)),i._validateItemSize()}if(!i.isCompleted){var n=Array.prototype.slice.call(arguments,2);return HTMLElement.prototype.insertBefore.apply(i,n.concat(Array.prototype.slice.call(arguments)))}if(e&&e instanceof Smart.SplitterItem)if(!t||t instanceof Smart.SplitterItem){if(e.style[i._measurements.restricredDimension.toLowerCase()]="100%",e.size){var s="string"==typeof e.size&&e.size.indexOf("%")>-1?"%":"px";e.style[i._measurements.dimension]="auto"===e.size?e.size:isNaN(parseFloat(e.size))?"":parseFloat(e.size)+s,1===i._items.length&&(i._items[0].size="")}else e.style[i._measurements.dimension]="";if(e._sizeBeforeCollapse)if(e.size){var o="string"==typeof e.size&&e.size.indexOf("%")>-1?"%":"px";e.style[i._measurements.dimension]="auto"===e.size?e.size:isNaN(parseFloat(e.size))?0:parseFloat(e.size)+o,e._sizeBeforeCollapse=e[i._measurements.size]}else delete e._sizeBeforeCollapse;e.style["max"+i._measurements.restricredDimension]="none",e.style[i._measurements.maxDimension]=e._sizeLimits&&e.max?e._sizeLimits[i._measurements.maxDimension]+"px":"",e.collapsed?(e.style.minWidth=e.style.minHeight="",e.style[i._measurements.minDimension]=e.style[i._measurements.dimension]="0"):e.style[i._measurements.minDimension]=e._sizeLimits&&e.min?e._sizeLimits[i._measurements.minDimension]+"px":"";for(var r=0;r<i._items.length;r++)i._items[r]._sizeBeforeCollapse||(i._items[r]._sizeBeforeCollapse=i._items[r][i._measurements.size]);var l;i.$.container.insertBefore(e,t||null);var d=i.bars;e.previousElementSibling instanceof Smart.SplitterItem?(l=i._createBar(e,e.previousElementSibling),i.$.container.insertBefore(l,e)):e.nextElementSibling instanceof Smart.SplitterItem&&(l=i._createBar(e,e.nextElementSibling),i.$.container.insertBefore(l,e.nextElementSibling)),l&&d.length>0&&(l.style[i._measurements.restricredDimension.toLowerCase()]=d[0].style[i._measurements.restricredDimension.toLowerCase()]),e.isCompleted?a():(e.__onCompleted=e._onCompleted,e._onCompleted=function(){e.__onCompleted&&(e.__onCompleted(),delete e.__onCompleted),a()})}else i.error(i.localize("invalidNode",{elementType:i.nodeName.toLowerCase(),method:"insertBefore",node:"newNode/referenceNode"}));else i.error(i.localize("invalidNode",{elementType:i.nodeName.toLowerCase(),method:"insertBefore",node:"newNode/referenceNode"}))}},{key:"lockItem",value:function(e){e instanceof Smart.SplitterItem?e.lock():"number"==typeof e&&this._items[e]?(e=this._items[e])&&e.lock():this.error(this.localize("invalidIndex",{elementType:this.nodeName.toLowerCase(),method:"lockItem"}))}},{key:"lockBar",value:function(e){e instanceof Smart.SplitterBar?e.lock():"number"==typeof e?(e=this.bars[e])&&e.lock():this.error(this.localize("invalidIndex",{elementType:this.nodeName.toLowerCase(),method:"lockBar"}))}},{key:"ready",value:function(){l(d(t.prototype),"ready",this).call(this)}},{key:"render",value:function(){this.setAttribute("role","group"),this._isInitializing=!0,this._createLayout(),delete this._isInitializing,this._setFocusable(),l(d(t.prototype),"render",this).call(this)}},{key:"refresh",value:function(){this._resizeEventHandler()}},{key:"remove",value:function(e){e instanceof Smart.SplitterItem&&e.closest("smart-splitter")===this?this.removeChild(e):"number"==typeof e?e>this._items.length||e<0?this.error(this.localize("indexOutOfBound",{elementType:this.nodeName.toLowerCase(),method:"remove"})):this.removeChild(this._items[e]):this.error(this.localize("invalidIndex",{elementType:this.nodeName.toLowerCase(),method:"remove"}))}},{key:"removeAll",value:function(){this._items=[],this.$.container.innerHTML=""}},{key:"removeChild",value:function(e){var t=this;function i(e,i,a){for(var n=e,s=t._items[n];s&&s.collapsed;)s=t._items[n+=a];return s}if(!t.isCompleted||e instanceof HTMLElement&&e.classList.contains("smart-resize-trigger-container")){var a=Array.prototype.slice.call(arguments,2);return HTMLElement.prototype.removeChild.apply(t,a.concat(Array.prototype.slice.call(arguments)))}if(e&&e instanceof Smart.SplitterItem){if(t._items){var n=t._items.indexOf(e);e.collapsed?t.$.container.removeChild(t._items.indexOf(e._neighbourItem)>n?e.nextElementSibling:e.previousElementSibling):e.previousElementSibling instanceof Smart.SplitterBar?t.$.container.removeChild(e.previousElementSibling):e.nextElementSibling instanceof Smart.SplitterBar&&t.$.container.removeChild(e.nextElementSibling),t._items.splice(n,1),n=Math.max(0,n-1);var s=0,o=t._items.filter((function(e){return!e.collapsed&&!e.locked})),r=e._sizeBeforeCollapse||e[t._measurements.size];if(o.map((function(e){return s+=(e.style[t._measurements.dimension]?e._sizeBeforeCollapse:0)||e[t._measurements.size]})),t.$.content.removeChild(e),1===t._items.length&&t._items[0].collapsed||t._items.length>0&&t._items.map((function(e){return e.collapsed})).indexOf(!1)<0){var l=t._items[t._items.length-1],d=l.context;l.context=l,l._expand(),l.context=d}for(var h=0;h<t._items.length;h++)if(t._items[h].collapsed&&t._items[h]._neighbourItem===e){var u=void 0,c=void 0;t._items[h]._neighbourItem=i(n,t._items[h],1),t._items[h]._neighbourItem?(u=t._items[h].nextElementSibling)&&(c=u.context,u.context=u,u.itemCollapsed=!0,u.showNearButton=!(u.showFarButton=!1),u.context=c):(t._items[h]._neighbourItem=i(n,t._items[h],-1),(u=t._items[h].previousElementSibling)&&(c=u.context,u.context=u,u.itemCollapsed=!0,u.showFarButton=!(u.showNearButton=!1),u.context=c))}if("proportional"===t.autoFitMode)for(var m,p,f,g=0;g<o.length;g++)p=(m=o[g]._sizeBeforeCollapse||o[g][t._measurements.size])+r*(m/s),f=o[g]._sizeLimits[t._measurements.minDimension]||0,o[g].style[t._measurements.dimension]=(o[g]._sizeBeforeCollapse=Math.max(0,p))+"px",f>m&&(o[g][t._measurements.minDimension]=p+"px");t._autoFitItems()}}else t.error(t.localize("invalidNode",{elementType:t.nodeName.toLowerCase(),method:"removeChild",node:"node"}))}},{key:"showBar",value:function(e){e instanceof Smart.SplitterBar?e.show():"number"==typeof e?(e=this.bars[e])instanceof Smart.SplitterBar?e.show():this.error(this.localize("indexOutOfBound",{elementType:this.nodeName.toLowerCase(),method:"showBar"})):this.error(this.localize("invalidIndex",{elementType:this.nodeName.toLowerCase(),method:"showBar"}))}},{key:"unlockItem",value:function(e){e instanceof Smart.SplitterItem?e.unlock():"number"==typeof e&&this._items[e]?(e=this._items[e])&&e.unlock():this.error(this.localize("invalidIndex",{elementType:this.nodeName.toLowerCase(),method:"unlockItem"}))}},{key:"unlockBar",value:function(e){e instanceof Smart.SplitterBar?e.unlock():"number"==typeof e?(e=this.bars[e])&&e.unlock():this.error(this.localize("invalidIndex",{elementType:this.nodeName.toLowerCase(),method:"unlockBar"}))}},{key:"update",value:function(e,t){if("number"!=typeof e||(e=this._items[e])){if(e instanceof Smart.SplitterItem&&t&&(this.enableShadowDOM?e.getRootNode().host:this.closest("smart-splitter"))===this)for(var i in t)void 0!==e[i]&&(e[i]=t[i])}else this.error(this.localize("invalidIndex",{elementType:this.nodeName.toLowerCase(),method:"update"}))}},{key:"_autoFitItems",value:function(){var e=this,t=e._items.length;if(0!==t&&"overflow"!==e.autoFitMode){for(var i,a=[],n=[],s=[],o=t-1;o>=0;o--)e._items[o].collapsed?n.push(e._items[o]):e._items[o].locked?a.push(e._items[o]):i?e._items[o].size||s.push(e._items[o]):i=e._items[o];i&&i.size&&s.length>0&&(i=s.filter((function(t){return!t.max&&!t._sizeLimits[e._measurements.maxDimension]}))[0]||i),n.length===t&&((i=n[0]).expand(),i.unlock()),e._autoFitLastItem(i,n,a)}}},{key:"_autoFitLastItem",value:function(e,t,i){var a,n=this,s=n._items.length;1===s&&n._items[0].locked&&((a=n._items[0]).locked=!1),i.length===s&&i[0].unlock(),e||(e=i[0]).unlock();var o=0,r=0;n._items.map((function(e){return o+=e.collapsed?0:e.style[n._measurements.dimension]&&e.style[n._measurements.dimension].indexOf("%")<-1&&e._sizeBeforeCollapse?e._sizeBeforeCollapse:e.getBoundingClientRect()[n._measurements.dimension]})),n.bars.map((function(e){return r+=e[n._measurements.size]}));var l=o+r,d=n.$.container.getBoundingClientRect()[n._measurements.dimension];if(l!==d){var h;h=e.style[n._measurements.dimension].indexOf("%")<-1&&e._sizeBeforeCollapse?e._sizeBeforeCollapse:e.getBoundingClientRect()[n._measurements.dimension];var u=Math.abs(d-l),c=l<d?1:-1;e.style[n._measurements.dimension]=(e._sizeBeforeCollapse=Math.max(0,h+c*u))+"px",e._sizeLimits[n._measurements.maxDimension]&&e._sizeBeforeCollapse>e._sizeLimits[n._measurements.maxDimension]&&(e.style[n._measurements.maxDimension]=(e._sizeLimits[n._measurements.maxDimension]=e._sizeBeforeCollapse)+"px")}a&&(a.locked=!0)}},{key:"_autoFitItemsProportionally",value:function(e,t){var i,a,n=this,s=n._items.filter((function(e){return!e.collapsed})),o=e[n._measurements.size],r=0;s.map((function(e){return r+=e._sizeBeforeCollapse||e[n._measurements.size]})),t&&(r-=t[n._measurements.size]),e.size&&!e.isCompleted&&(e._setSize("size",o),o=e._sizeBeforeCollapse),o=Math.min(n.$.container[n._measurements.size]/2,e[n._measurements.size]),e.style[n._measurements.dimension]=o+"px";for(var l=0;l<s.length;l++)i=(s[l]._sizeBeforeCollapse||s[l][n._measurements.size])/r*(r-o),a=s[l]._sizeLimits[n._measurements.minDimension]||0,s[l].style[n._measurements.dimension]=(s[l]._sizeBeforeCollapse=Math.max(a,i))+"px"}},{key:"_createLayout",value:function(){if(this._items=[],"string"==typeof this.dataSource&&(this.dataSource=JSON.parse(this.dataSource)),null!==this.dataSource&&Array.isArray(this.dataSource)){this.$.container.innerHTML="";for(var e,t=document.createDocumentFragment(),i=0;i<this.dataSource.length;i++)e=this._createItem(this.dataSource[i]),t.appendChild(e);this._handleSplitterBars(t)}else this._handleSplitterBars(this.$.container)}},{key:"_createBar",value:function(e,t){var i=document.createElement("smart-splitter-bar");return e.collapsed?(i.itemCollapsed=!0,this._items.indexOf(e)===this._items.length-1?i.showNearButton=!0:i.showFarButton=!0):(e.collapsible&&(i.showNearButton=!0),t&&t instanceof Smart.SplitterItem&&t.collapsible&&(t===e.nextElementSibling?i.showFarButton=!0:i.showNearButton=!0)),i.setAttribute("aria-controls",e.id+(t?" "+t.id:"")),i.setAttribute("aria-orientation",this.orientation),i}},{key:"_createItem",value:function(e){var t=document.createElement("smart-splitter-item");return e.id&&(t.id=e.id),t.innerHTML=e.content||"",t.collapsible=e.collapsible||!1,t.collapsed=e.collapsed||!1,t.locked=e.locked||!1,e.max&&(t.max=e.max),e.min&&(t.min=e.min),e.size&&(t.size=e.size),t}},{key:"_completeResizing",value:function(e){var t=this;if(t._dragDetails){if(t._splitBarDummy&&t._splitBarDummy.parentElement){if(!e)if(t._dragDetails.firstItem.style[t._measurements.dimension]=(t._dragDetails.firstItem._sizeBeforeCollapse=t._dragDetails.firstItem.currentSize+t._dragDetails.firstItem._paddings)+"px",delete t._dragDetails.firstItem._originalSize,"proportional"!==t.resizeMode)t._dragDetails.secondItem.style[t._measurements.dimension]=(t._dragDetails.secondItem._sizeBeforeCollapse=t._dragDetails.splitAreaSize-t._dragDetails.firstItem.currentSize+t._dragDetails.secondItem._paddings)+"px",delete t._dragDetails.secondItem._originalSize;else{var i=t._dragDetails.itemProportions.length;if(i>1)for(var a=0;a<i;a++)t._dragDetails.itemProportions[a].item.style[t._measurements.dimension]=(t._dragDetails.itemProportions[a].item._sizeBeforeCollapse=t._dragDetails.itemProportions[a].currentSize+t._dragDetails.itemProportions[a].item._paddings)+"px",delete t._dragDetails.itemProportions[a]._originalSize;else t._dragDetails.secondItem[0].style[t._measurements.dimension]=(t._dragDetails.secondItem[0]._sizeBeforeCollapse=Math.floor(t._dragDetails.splitAreaSize-t._dragDetails.firstItem.currentSize+t._dragDetails.firstItem._paddings))+"px",delete t._dragDetails.secondItem[0]._originalSize}t.$.fireEvent("resizeEnd",{firstItem:{index:t._items.indexOf(t._dragDetails.firstItem),oldSize:t._dragDetails.firstItem.originalSize,newSize:t._dragDetails.firstItem[t._measurements.size]},secondItem:Array.isArray(t._dragDetails.secondItem)?{index:t._dragDetails.secondItem.map((function(e){return t._items.indexOf(e)})),oldSize:t._dragDetails.secondItem.map((function(e){return e.originalSize})),newSize:t._dragDetails.secondItem.map((function(e){return e[t._measurements.size]}))}:{index:t._items.indexOf(t._dragDetails.secondItem),oldSize:t._dragDetails.secondItem.originalSize,newSize:t._dragDetails.secondItem[t._measurements.size]}}),t._splitBarDummy.classList.remove("limit-reached"),t._splitBarDummy.parentElement.removeChild(t._splitBarDummy)}t.removeAttribute("dragged"),delete t._dragDetails,delete t._keyboardResizing}}},{key:"_dragStartHandler",value:function(e){this._dragDetails&&e.preventDefault()}},{key:"_downHandler",value:function(e){if(e.stopPropagation(),!this.disabled)if(this._keyboardResizing)this._completeResizing();else{var t=this.shadowRoot||this.isInShadowDOM?e.originalEvent.composedPath()[0]:e.originalEvent.target,i=t.closest("smart-splitter");i||(i=t.getRootNode()&&t.getRootNode().host?t.getRootNode().host.closest("smart-splitter"):void 0);var a=t&&t.closest?t.closest("smart-splitter-bar"):null;if(a&&i===this){if(t.closest(".smart-splitter-near-collapse-button")===a.$.nearCollapseButton)return void(this._collapseButtonPressed={splitBar:a,item:a.previousElementSibling,target:a.$.nearCollapseButton,farCollapse:!1});if(t.closest(".smart-splitter-far-collapse-button")===a.$.farCollapseButton)return void(this._collapseButtonPressed={splitBar:a,item:a.nextElementSibling,target:a.$.farCollapseButton,farCollapse:!0});a.itemCollapsed||a.locked||"none"===this.resizeMode||this._setDragDetails(a,e)}}}},{key:"_moveHandler",value:function(){this.hasAttribute("dragged")&&Smart.Utilities.Core.isMobile&&event.originalEvent.preventDefault()}},{key:"_documentMoveHandler",value:function(e){this._keyboardResizing||this._resize(e)}},{key:"_documentUpHandler",value:function(e){if(this.removeAttribute("dragging-not-allowed"),this.removeAttribute("show-locked-items"),this.disabled)return delete this._dragDetails,void delete this._collapseButtonPressed;var t=this.shadowRoot||this.isInShadowDOM?e.originalEvent.composedPath()[0]:e.originalEvent.target;return this._completeResizing(),this._collapseButtonPressed&&t.closest("."+this._collapseButtonPressed.target.classList[0])===this._collapseButtonPressed.target?(this._collapseButtonPressed.item.collapsed?this.expand(this._collapseButtonPressed.item):this.collapse(this._collapseButtonPressed.item,this._collapseButtonPressed.farCollapse),void delete this._collapseButtonPressed):void 0}},{key:"_ensureItemsReady",value:function(e,t){var i=this,a=function(){var i=function(t){for(var i=0;i<e.length;i++)e[i].context="node"===t?e[i]:document};i("node"),t(),i()};if(0===e.length)a();else{i._nodesReadyListeners=0;for(var n=0;n<e.length;n++){var s=e[n],o=function(){i._nodesReadyListeners--,0===i._nodesReadyListeners&&(a(),delete i._nodesReadyListeners)}.bind(i);s.isCompleted||(i._nodesReadyListeners++,s._onCompleted=o)}0===i._nodesReadyListeners&&a()}}},{key:"_focusHandler",value:function(e){"focus"===e.type?this.setAttribute("focus",""):this.removeAttribute("focus")}},{key:"_getTargetItem",value:function(e,t,i){for(var a=i?this._items[this._items.length-1]:e[t];a;){if(a instanceof Smart.SplitterItem&&!a.collapsed){if(!a.locked)return a;this._dragDetails&&!this._dragDetails.firstItem&&(this._dragDetails.lockedItemsSize+=a[this._measurements.size]+(a.previousElementSibling instanceof Smart.SplitterBar?a.previousElementSibling[this._measurements.size]:0))}a=a[t]}}},{key:"_handleSplitterBars",value:function(e){var t;if(this._items.length<1&&(this._items=e.parentElement?this.items:Array.from(e.children)),this._measurements||this._setMeasurements(),this._items.length<2)for(var i=this.bars,a=0;a<i.length;a++)e.removeChild(i[a]);this._noItemSizeValidation=!0,e.parentElement||e===this.$.container||(this.$.container.appendChild(e),e=this.$.container),this._noItemSizeValidation=!1;for(var n=0;n<this._items.length;n++){if(t=this._items[n],0===n)for(;e.firstElementChild&&e.firstElementChild!==t;)e.removeChild(e.firstElementChild);t.style[this._measurements.restricredDimension.toLowerCase()]="100%",t.style["max"+this._measurements.restricredDimension]="none",t.size||(t.style[this._measurements.dimension]=t._sizeBeforeCollapse?t._sizeBeforeCollapse+"px":"");var s=t.min,o=t.max;if("string"==typeof s&&s.indexOf("%")>-1&&t._setSize("min",s),"string"==typeof o&&o.indexOf("%")>-1&&t._setSize("max",o),t.style[this._measurements.maxDimension]=t.max?t._sizeLimits[this._measurements.maxDimension]+"px":"",t.nextElementSibling){var r=t.nextElementSibling;if(r instanceof Smart.SplitterItem||"smart-splitter-item"===r.tagName.toLowerCase())t.parentNode.insertBefore(this._createBar(t,t.nextElementSibling),t.nextElementSibling);else for((r instanceof Smart.SplitterBar||"smart-splitter-bar"===r.tagName.toLowerCase())&&(r=r.nextElementSibling);r&&(!(r instanceof Smart.SplitterItem)||"smart-splitter-item"!==r.tagName.toLowerCase());)r.parentNode.removeChild(r),r=r.nextElementSibling}if(t.collapsed){var l=t.collapsible;t.style.minWidth=t.style.minHeight="",t.style[this._measurements.minDimension]="0",t._ignorePropertyValue=!0,t.collapsible=!0,t.collapse(),t.collapsible=l}else t.style[this._measurements.minDimension]=t._sizeLimits&&t.min?t._sizeLimits[this._measurements.minDimension]+"px":""}if(t)for(;e.lastElementChild!==t;)e.removeChild(e.lastElementChild);this._ensureItemsReady(this._items,this._validateItemSize.bind(this))}},{key:"_keyDownHandler",value:function(e){if(!this.disabled){var t=this.enableShadowDOM?this.shadowRoot.activeElement:document.activeElement;if("w"===e.key&&e.altKey){e.preventDefault();var i=this.enableShadowDOM?this.shadowRoot.querySelector("smart-splitter-bar"):this.querySelector("smart-splitter-bar");return t!==i&&this._completeResizing(!0),void i.focus()}if(!e.ctrlKey&&this._splitBarDummy&&this._splitBarDummy.parentElement)t=this._splitBarDummy;else if(!(t instanceof Smart.SplitterBar))return;if((this.enableShadowDOM?t.getRootNode().host:t.closest("smart-splitter"))===this)switch(e.key){case"ArrowLeft":case"ArrowRight":case"ArrowUp":case"ArrowDown":if(("ArrowUp"===e.key||"ArrowDown"===e.key)&&"vertical"===this.orientation)return;if(("ArrowLeft"===e.key||"ArrowRight"===e.key)&&"horizontal"===this.orientation)return;e.preventDefault();var a,n,s,o="ArrowLeft"===e.key||"ArrowUp"===e.key?-1:1;if(e.ctrlKey)return this._completeResizing(!0),o<0?(n=t.previousElementSibling,a=t.nextElementSibling):(a=t.previousElementSibling,n=t.nextElementSibling),void(a.collapsed?a.expand():n.collapse(o>0));if(t.locked)return;if("none"===this.resizeMode)return;this._keyboardResizing=!0,this._dragDetails?s=this._dragDetails.position+o*this.resizeStep:(this._setDragDetails(t),s=t[this._measurements.offset]+o*this.resizeStep),this._resize({pageX:s,pageY:s});break;case"Enter":this._completeResizing();break;case"Escape":case"Tab":this._completeResizing(!0)}}}},{key:"_mouseEventsHandler",value:function(e){"mouseenter"!==e.type||Smart.Utilities.Core.isMobile?this.removeAttribute("hover"):this.setAttribute("hover","")}},{key:"_recalcItemSize",value:function(e,t,i){var a,n;if(i||(i=t),e>0)for(var s=0;s<t;s++)n=this._dragDetails.itemProportions[s].item._sizeLimits[this._measurements.minDimension],this._dragDetails.itemProportions[s].currentSize>n&&(e-=a=this._dragDetails.itemProportions[s].currentSize-n<e/i?this._dragDetails.itemProportions[s].currentSize-n:e/i,this._dragDetails.itemProportions[s].currentSize=Math.max(n,this._dragDetails.itemProportions[s].currentSize-a),delete this._dragDetails.itemProportions[s]._originalSize),i=Math.max(1,i-1);else for(var o,r=this._dragDetails.splitAreaSize-this._dragDetails.firstItem.currentSize-(t>1?this._dragDetails.secondItemTotalMinSize-this._dragDetails.itemProportions[0].item._sizeLimits[this._measurements.minDimension]:0),l=0;l<t;l++)o=this._dragDetails.itemProportions[l].item._sizeLimits[this._measurements.maxDimension]?Math.min(this._dragDetails.itemProportions[l].item._sizeLimits[this._measurements.maxDimension],r):r,this._dragDetails.itemProportions[l].currentSize<o&&(e-=a=this._dragDetails.itemProportions[l].currentSize-e/i>o?-1*(o-this._dragDetails.itemProportions[l].currentSize):e/i,this._dragDetails.itemProportions[l].currentSize=Math.min(o,this._dragDetails.itemProportions[l].currentSize-a),delete this._dragDetails.itemProportions[l]._originalSize),i=Math.max(1,i-1);Math.abs(e)>.1&&this._recalcItemSize(e,t,i)}},{key:"_resize",value:function(e){var t=this;if(t._dragDetails){var i,a,n,s=e[t._measurements.pagePosition]-t._dragDetails.position,o=Math.sign(s),r=t._dragDetails.firstItem._sizeLimits[t._measurements.minDimension],l=t._dragDetails.firstItem._sizeLimits[t._measurements.maxDimension];if(t.hasAttribute("dragged")||t.$.fireEvent("resizeStart",{firstItem:{index:t._items.indexOf(t._dragDetails.firstItem),size:t._dragDetails.firstItem[t._measurements.size]},secondItem:Array.isArray(t._dragDetails.secondItem)?{index:t._dragDetails.secondItem.map((function(e){return t._items.indexOf(e)})),size:t._dragDetails.secondItem.map((function(e){return e[t._measurements.size]}))}:{index:t._items.indexOf(t._dragDetails.secondItem),size:t._dragDetails.secondItem[t._measurements.size]}}),t.setAttribute("dragged",""),!(Math.abs(s)<t.resizeStep)){var d=Math.max(t.resizeStep,Math.floor(Math.abs(s)/t.resizeStep)*t.resizeStep),h=s-o*d;switch(t.resizeMode){case"adjacent":case"end":for(o>0?(a=t._dragDetails.splitAreaSize-t._dragDetails.firstItem.currentSize,n=function(){return a-t._dragDetails.secondItemTotalMinSize>=d||l&&t._dragDetails.firstItem.currentSize+t.resizeStep<=l},i=function(){return l&&t._dragDetails.firstItem.currentSize===l||a-t.resizeStep<=t._dragDetails.secondItemTotalMinSize}):(a=t._dragDetails.firstItem.currentSize,n=function(){return a-r>=d||t._dragDetails.secondItemTotalMaxSize&&t._dragDetails.splitAreaSize-t._dragDetails.firstItem.currentSize+t.resizeStep<=t._dragDetails.secondItemTotalMaxSize},i=function(){return t._dragDetails.secondItemTotalMaxSize&&t._dragDetails.splitAreaSize-t._dragDetails.firstItem.currentSize===t._dragDetails.secondItemTotalMaxSize||a-t.resizeStep<=r}),s=0;d>0;)n()&&(s+=o*t.resizeStep),d-=t.resizeStep;t._resizeItem(e,s,h);break;case"proportional":var u,c,m=t._dragDetails.splitAreaSize-t._dragDetails.firstItem.currentSize;for(o>0?(a=Math.abs(m-t._dragDetails.secondItemTotalMinSize),n=function(){return a>=d||l&&t._dragDetails.firstItem.currentSize+t.resizeStep<=l},i=function(){return l&&t._dragDetails.firstItem.currentSize===l||t._dragDetails.splitAreaSize-t._dragDetails.firstItem.currentSize-t.resizeStep<t._dragDetails.secondItemTotalMinSize}):(a=t._dragDetails.firstItem.currentSize,n=function(){return a-r>=d&&(!t._dragDetails.secondItemTotalMaxSize||t._dragDetails.splitAreaSize-t._dragDetails.firstItem.currentSize+t.resizeStep<=t._dragDetails.secondItemTotalMaxSize)},i=function(){return t._dragDetails.secondItemTotalMaxSize&&t._dragDetails.splitAreaSize+t.resizeStep-t._dragDetails.firstItem.currentSize>=t._dragDetails.secondItemTotalMaxSize||t._dragDetails.firstItem.currentSize-t.resizeStep<r});d>0;)n()&&(c=!0,u=Math.min(l?Math.min(l,t._dragDetails.splitAreaSize-t._dragDetails.secondItemTotalMinSize):t._dragDetails.splitAreaSize-t._dragDetails.secondItemTotalMinSize,Math.max(r,t._dragDetails.firstItem.currentSize+o*t.resizeStep)),t._dragDetails.firstItem.currentSize=t._dragDetails.firstItem._sizeBeforeCollapse=Math.floor(u)),d-=t.resizeStep;if(!c)break;var p=t._dragDetails.splitAreaSize-t._dragDetails.firstItem.currentSize,f=t._dragDetails.itemProportions.length;if(t._recalcItemSize(m-p,f),t.liveResize)if(t._dragDetails.firstItem.style[t._measurements.dimension]=t._dragDetails.firstItem.currentSize+t._dragDetails.firstItem._paddings+"px",f>1)for(var g=0;g<f;g++)t._dragDetails.itemProportions[g].item.style[t._measurements.dimension]=t._dragDetails.itemProportions[g].item._sizeBeforeCollapse=t._dragDetails.itemProportions[g].currentSize+t._dragDetails.itemProportions[g].item._paddings+"px";else t._dragDetails.secondItem[0].style[t._measurements.dimension]=(t._dragDetails.secondItem[0]._sizeBeforeCollapse=Math.floor(p+t._dragDetails.itemProportions[0].item._paddings))+"px";else t._splitBarDummy.style[t._measurements.position]=t._dragDetails.firstItem[t._measurements.offset]+t._dragDetails.firstItem.currentSize+t._dragDetails.lockedItemsSize+t._dragDetails.firstItem._paddings+"px";var v=t._dragDetails.firstItem.getBoundingClientRect()["vertical"===t.orientation?"left":"top"]+t._dragDetails.splitBarOffset,_=l&&t._dragDetails.splitAreaSize-l>t._dragDetails.secondItemTotalMinSize?l:t._dragDetails.splitAreaSize-t._dragDetails.secondItemTotalMinSize;t._dragDetails.position=Math.max(v+(t._dragDetails.secondItemTotalMaxSize?Math.max(t._dragDetails.splitAreaSize-t._dragDetails.secondItemTotalMaxSize,r):r)+t._dragDetails.lockedItemsSize+t._dragDetails.firstItem._paddings,Math.min(v+_+t._dragDetails.lockedItemsSize+t._dragDetails.firstItem._paddings,e[t._measurements.pagePosition]-h))}t.liveResize||(i()?t._splitBarDummy.classList.add("limit-reached"):t._splitBarDummy.classList.remove("limit-reached")),t._validateBarsSize()}}}},{key:"_resizeEventHandler",value:function(){this._items&&(this._resizeEventFired=!0,this._validateItemSize(),this._resizeEventFired=!1)}},{key:"_resizeHostItemOnInsert",value:function(e,t,i){if("proportional"!==this.autoFitMode){if(e&&!e.locked){if(t.size)e=function(){for(var e=t.previousElementSibling;e;){if(e instanceof Smart.SplitterItem&&!e.size)return e;e=e.previousElementSibling}}()||e;var n=e[this._measurements.size]-t[this._measurements.size]-i[this._measurements.size],s=Math.max(e._sizeLimits[this._measurements.minDimension],n);e.style[this._measurements.maxDimension]=e.max?isNaN(parseFloat(e.max))?"":parseFloat(e.max)+a(e.max)==="string"&&e.max.indexOf("%")>-1?"%":"px":"";var o=e.style[this._measurements.maxDimension]?parseFloat(e.style[this._measurements.maxDimension]):0;t.size?e.style[this._measurements.dimension]=(e._sizeBeforeCollapse=o?Math.min(o,s):s)+"px":(e.style[this._measurements.dimension]=e.size?"auto"===e.size?e.size:isNaN(parseFloat(e.size))?0:parseFloat(e.size)+("string"==typeof e.size&&e.size.indexOf("%")>-1?"%":"px"):"",e._sizeBeforeCollapse=e[this._measurements.size])}}else this._autoFitItemsProportionally(t,i)}},{key:"_resizeItem",value:function(e,t,i){var a=Math.max(this._dragDetails.firstItem._sizeLimits[this._measurements.minDimension],Math.min(this._dragDetails.splitAreaSize-this._dragDetails.secondItem._sizeLimits[this._measurements.minDimension],this._dragDetails.firstItem._sizeLimits[this._measurements.maxDimension]?Math.min(this._dragDetails.firstItem._sizeLimits[this._measurements.maxDimension],this._dragDetails.firstItem.currentSize+t):this._dragDetails.firstItem.currentSize+t)),n=this._dragDetails.firstItem._sizeLimits[this._measurements.minDimension];this._dragDetails.secondItem._sizeLimits[this._measurements.maxDimension]&&this._dragDetails.splitAreaSize-a>this._dragDetails.secondItem._sizeLimits[this._measurements.maxDimension]&&(n=a=this._dragDetails.splitAreaSize-this._dragDetails.secondItem._sizeLimits[this._measurements.maxDimension]),this._dragDetails.firstItem.currentSize=a,this.liveResize?(this._dragDetails.firstItem.style[this._measurements.dimension]=(this._dragDetails.firstItem._sizeBeforeCollapse=a+this._dragDetails.firstItem._paddings)+"px",this._dragDetails.secondItem.style[this._measurements.dimension]=(this._dragDetails.secondItem._sizeBeforeCollapse=this._dragDetails.splitAreaSize-a+this._dragDetails.firstItem._paddings)+"px",delete this._dragDetails.firstItem._originalSize,delete this._dragDetails._originalSize):this._splitBarDummy.style[this._measurements.position]=this._dragDetails.firstItem[this._measurements.offset]+a+this._dragDetails.lockedItemsSize+this._dragDetails.firstItem._paddings+"px";var s=this._dragDetails.firstItem.getBoundingClientRect()["vertical"===this.orientation?"left":"top"]+this._dragDetails.splitBarOffset;this._dragDetails.position=Math.max(s+n+this._dragDetails.firstItem._paddings,Math.min(s+this._dragDetails.splitAreaSize-this._dragDetails.secondItem._sizeLimits[this._measurements.minDimension]+this._dragDetails.lockedItemsSize+this._dragDetails.firstItem._paddings,e[this._measurements.pagePosition]-i)),this._dragDetails.firstItem._sizeLimits[this._measurements.maxDimension]&&(this._dragDetails.position=Math.min(s+this._dragDetails.firstItem._sizeLimits[this._measurements.maxDimension],this._dragDetails.position))}},{key:"_setFocusable",value:function(){this.disabled||this.unfocusable?this.removeAttribute("tabindex"):this.tabIndex=this.tabIndex>0?this.tabIndex:0}},{key:"_setDragDetails",value:function(e,t){if(this._dragDetails={},this._measurements||this._setMeasurements(),this._dragDetails.scrollAmount=e.parentElement[this._measurements.scroll],this._dragDetails.lockedItemsSize=0,this.setAttribute("show-locked-items",""),!(this._dragDetails.firstItem=this._getTargetItem(e,"previousElementSibling")))return delete this._dragDetails,void this.setAttribute("dragging-not-allowed","");this._dragDetails.firstItem.set("size",""),this._dragDetails.firstItem.currentSize=this._dragDetails.firstItem[this._measurements.size],this._dragDetails.firstItem.originalSize=this._dragDetails.firstItem.currentSize;var i=getComputedStyle(this._dragDetails.firstItem);if(this._dragDetails.firstItem._paddings=(parseFloat(i.getPropertyValue("padding-"+this._measurements.position))||0)+(parseFloat(i.getPropertyValue("padding-"+this._measurements.position2))||0),this._dragDetails.firstItem.currentSize<this._dragDetails.firstItem._sizeLimits[this._measurements.minDimension])delete this._dragDetails;else{if(this._dragDetails.firstItem.currentSize-=this._dragDetails.firstItem._paddings,this._dragDetails.splitAreaSize=0,this._dragDetails.secondItemTotalMaxSize=0,this._dragDetails.secondItemTotalMinSize=0,"proportional"===this.resizeMode){if(this._setProportionalDetails())return}else if(this._setAdjacentOrEndDetails(e))return;var n;t&&"object"===a(t)?n=e.getBoundingClientRect()[this._measurements.position]:(t={pageX:e[this._measurements.offset],pageY:e[this._measurements.offset]},n=e[this._measurements.offset]),this._dragDetails.position=t[this._measurements.pagePosition],this._dragDetails.splitBarOffset=this._dragDetails.position-n,this.liveResize||(this._splitBarDummy||(this._splitBarDummy=document.createElement("div"),this._splitBarDummy.classList.add("smart-splitter-bar-feedback")),this._splitBarDummy.style.width=e.offsetWidth+"px",this._splitBarDummy.style.height=e.offsetHeight+"px",this._splitBarDummy.style.top=e.offsetTop+"px",this._splitBarDummy.style.left=e.offsetLeft+"px",e.parentElement.appendChild(this._splitBarDummy))}}},{key:"_setAdjacentOrEndDetails",value:function(e){if(!(this._dragDetails.secondItem="adjacent"===this.resizeMode?this._getTargetItem(e,"nextElementSibling"):this._getTargetItem(e,"previousElementSibling",!0)))return delete this._dragDetails,this.setAttribute("dragging-not-allowed",""),!0;this._dragDetails.secondItem.set("size",""),this._dragDetails.secondItem.currentSize=this._dragDetails.secondItem[this._measurements.size],this._dragDetails.secondItem.originalSize=this._dragDetails.secondItem.currentSize;var t=getComputedStyle(this._dragDetails.secondItem);this._dragDetails.secondItem._paddings=(parseFloat(t.getPropertyValue("padding-"+this._measurements.position))||0)+(parseFloat(t.getPropertyValue("padding-"+this._measurements.position2))||0),this._dragDetails.secondItem.currentSize-=this._dragDetails.secondItem._paddings,this._dragDetails.splitAreaSize=this._dragDetails.firstItem.currentSize+this._dragDetails.secondItem.currentSize,this._dragDetails.secondItemTotalMaxSize=this._dragDetails.secondItem._sizeLimits[this._measurements.maxDimension],this._dragDetails.secondItemTotalMinSize=this._dragDetails.secondItem._sizeLimits[this._measurements.minDimension]}},{key:"_setMeasurements",value:function(){this._measurements={},"horizontal"===this.orientation?(this._measurements.dimension="height",this._measurements.minDimension="minHeight",this._measurements.maxDimension="maxHeight",this._measurements.restricredDimension="Width",this._measurements.size="offsetHeight",this._measurements.offset="offsetTop",this._measurements.position="top",this._measurements.position2="bottom",this._measurements.pagePosition="pageY",this._measurements.scroll="scrollTop"):(this._measurements.dimension="width",this._measurements.minDimension="minWidth",this._measurements.maxDimension="maxWidth",this._measurements.restricredDimension="Height",this._measurements.size="offsetWidth",this._measurements.offset="offsetLeft",this._measurements.position="left",this._measurements.position2="right",this._measurements.pagePosition="pageX",this._measurements.scroll="scrollLeft"),this._measurements.overflow=getComputedStyle(this).getPropertyValue("overflow")}},{key:"_setProportionalDetails",value:function(){var e;if(this._dragDetails.secondItem=this._items.slice(this._items.indexOf(this._dragDetails.firstItem)+1).filter((function(e){return!e.collapsed&&!e.locked})),0===this._dragDetails.secondItem.length)return delete this._dragDetails,!0;this._dragDetails.splitAreaSize+=this._dragDetails.firstItem.currentSize,this._dragDetails.itemProportions=[];for(var t=0;t<this._dragDetails.secondItem.length;t++){this._dragDetails.secondItem[t].set("size",""),this._dragDetails.secondItem[t].currentSize=this._dragDetails.secondItem[t][this._measurements.size],this._dragDetails.secondItem[t].originalSize=this._dragDetails.secondItem[t].currentSize;var i=getComputedStyle(this._dragDetails.secondItem[t]);this._dragDetails.secondItem[t]._paddings=(parseFloat(i.getPropertyValue("padding-"+this._measurements.position))||0)+(parseFloat(i.getPropertyValue("padding-"+this._measurements.position2))||0),this._dragDetails.secondItem[t].currentSize-=this._dragDetails.secondItem[t]._paddings,this._dragDetails.splitAreaSize+=this._dragDetails.secondItem[t].currentSize,this._dragDetails.itemProportions.push({item:this._dragDetails.secondItem[t],currentSize:this._dragDetails.secondItem[t].currentSize}),this._dragDetails.secondItem[t]._sizeLimits[this._measurements.maxDimension]||(e=!0),this._dragDetails.secondItemTotalMinSize+=this._dragDetails.secondItem[t]._sizeLimits[this._measurements.minDimension],this._dragDetails.secondItemTotalMaxSize+=this._dragDetails.secondItem[t]._sizeLimits[this._measurements.maxDimension]}e&&(this._dragDetails.secondItemTotalMaxSize=0)}},{key:"_validateBarsSize",value:function(){var e=this;if("100%"===(getComputedStyle(e).getPropertyValue("--smart-splitter-bar-fit-size")+"").trim()){var t=e._items[0],i="offset"+e._measurements.restricredDimension,a=e.bars;if(0!==a.length){for(var n=0;n<e._items.length;n++)e._items[n][i]>t[i]&&(t=e._items[n]);t&&t[i]!==a[0][i]&&a.map((function(a){return a.style[e._measurements.restricredDimension.toLowerCase()]=t[i]+"px"}))}}}},{key:"_validateItemSize",value:function(e){var t=this;if("overflow"!==t.autoFitMode){if(t.keepProportionsOnResize&&t._resizeEventFired)t._keepItemProportionsOnResize();else{var i=0,a=0;t._items.map((function(e){return i+=e.collapsed?0:e.style[t._measurements.dimension]&&e.style[t._measurements.dimension].indexOf("%")<-1&&e._sizeBeforeCollapse?e._sizeBeforeCollapse:e.getBoundingClientRect()[t._measurements.dimension]})),t.bars.map((function(e){return a+=e[t._measurements.size]}));var n=i+a-t.$.container.getBoundingClientRect()[t._measurements.dimension];n>0?t._validateItemsSizeOverflowing(n,e):t._validateItemsSizeUnderflowing(n,e)}if(t._autoFitItems(),t._validateBarsSize(),t._splitterSize=t[t._measurements.size],t.enableShadowDOM){var s=t.getRootNode().host;s&&s.enableShadowDOM&&s.isCompleted&&s._validateItemSize&&s._validateItemSize()}}}},{key:"_validateNeighbourSizeLimits",value:function(e){function t(e){e&&(e.min&&e._setSize("min",e.min,!0),e.max&&e._setSize("max",e.max,!0))}if(this._items&&this._items.length){this._noNeighbourValidation=!0;var i=this._items.indexOf(e);t(this._items[i-1]),t(this._items[i+1]),delete this._noNeighbourValidation}}},{key:"_keepItemProportionsOnResize",value:function(){var e=this,t=0,i=0,a=[];e.bars.map((function(i){return t+=i[e._measurements.size]}));for(var n=0;n<e._items.length;n++)e._items[n].collapsed||(a.push(e._items[n]),i+=e._items[n]._sizeBeforeCollapse||e._items[n][e._measurements.size]);e._splitterSize&&(i=e._splitterSize);for(var s=e[e._measurements.size],o=0;o<a.length;o++)a[o].style[e._measurements.dimension].indexOf("%")>-1||(a[o].style[e._measurements.dimension]=(a[o]._sizeBeforeCollapse=(a[o]._sizeBeforeCollapse||a[o][e._measurements.size])/i*s)+"px")}},{key:"_validateItemsSizeOverflowing",value:function(e,t){for(var i,a,n,s,o=this._items.length,r=0,l=[],d=this.$.container.getBoundingClientRect(),h=0;h<this._items.length;h++)a=(n=this._items[h].style[this._measurements.dimension]).indexOf("%")>-1?n:this._items[h][this._measurements.size],n||this._items[h].size||0===this._items[h].size||delete this._items[h]._originalSize,this._items[h]._originalSize=this._items[h]._originalSize?this._items[h]._originalSize:a,l.push(this._items[h].locked);l.indexOf(!1)<0&&((s=this._items[this._items.length-1]).locked=!1);for(var u=o-1;u>=0;u--)this._items[u].collapsed||this._items[u].locked||((this._items[u]._originalSize+"").indexOf("%")>-1?(this._items[u].style[this._measurements.dimension]=this._items[u]._originalSize,this._items[u]._sizeBeforeCollapse=d[this._measurements.dimension]*parseFloat(this._items[u]._originalSize)/100):0!==e&&(r=(i=this._items[u].getBoundingClientRect()[this._measurements.dimension])-e,this._items[u].style[this._measurements.dimension]=(this._items[u]._sizeBeforeCollapse=Math.max(this._items[u]._sizeLimits?this._items[u]._sizeLimits[this._measurements.minDimension]:0,r))+"px",e-=i-this._items[u]._sizeBeforeCollapse));if(e>0)for(var c=o-1;c>=0;c--)if(!this._items[c].collapsed){r=(i=this._items[c].getBoundingClientRect()[this._measurements.dimension])-e;var m=this._items[c]._sizeLimits[this._measurements.minDimension]||this._items[c].min;m&&(m=(m+"").indexOf("%")>-1?parseFloat(m)/100*this._items[c].parentElement[this._measurements.size]:parseFloat(m))>r&&(this._items[c]._sizeLimits.ignoreUpdate=!t,this._items[c].style[this._measurements.minDimension]=Math.max(0,r)+"px"),this._items[c]._originalSize&&(this._items[c]._originalSize+"").indexOf("%")>-1||(this._items[c]._sizeLimits.ignoreUpdate=!t,this._items[c].style[this._measurements.dimension]=(this._items[c]._sizeBeforeCollapse=Math.max(0,r))+"px",e-=i-this._items[c]._sizeBeforeCollapse)}s&&(s.locked=!0)}},{key:"_validateItemsSizeUnderflowing",value:function(e,t){var i,a,n=this._items.length,s=0;e=Math.abs(e),this._items.length>0&&this._items.map((function(e){return e.locked})).indexOf(!1)<0&&((a=this._items[this._items.length-1]).locked=!1);for(var o=0;o<n&&(this._items[o].collapsed||this._items[o][this._measurements.size]>=(this._items[o]._sizeLimits?this._items[o]._sizeLimits[this._measurements.minDimension]:0)||(i=this._items[o][this._measurements.size],s=this._items[o][this._measurements.size]+e,this._items[o][this._measurements.size]<this._items[o]._sizeLimits[this._measurements.minDimension]&&(this._items[o]._sizeLimits.ignoreUpdate=!t,this._items[o].style[this._measurements.minDimension]=(this._items[o]._sizeBeforeCollapse=Math.max(0,Math.min(this._items[o]._sizeLimits[this._measurements.minDimension],s)))+"px"),!((e-=(this._items[o]._sizeBeforeCollapse||this._items[o][this._measurements.size])-i)<=0)));o++);var r=this.$.container.getBoundingClientRect()[this._measurements.dimension];if(e>0)for(var l=0;l<n;l++)if(!this._items[l].collapsed&&!this._items[l].locked&&void 0!==this._items[l]._originalSize){if((this._items[l]._originalSize+"").indexOf("%")>-1)this._items[l].style[this._measurements.dimension]=this._items[l]._originalSize,this._items[l]._sizeBeforeCollapse=parseFloat(this._items[l]._originalSize)*r/100;else if(this._items[l][this._measurements.size]>=this._items[l]._originalSize)e+=this._items[l][this._measurements.size]-this._items[l]._originalSize,this._items[l].style[this._measurements.dimension]=(this._items[l]._sizeBeforeCollapse=this._items[l]._originalSize)+"px";else{var d=(s=Math.min(this._items[l]._originalSize,this._items[l][this._measurements.size]+e))-this._items[l][this._measurements.size];this._items[l][this._measurements.minDimension]<this._items[l]._sizeLimits[this._measurements.minDimension]&&(this._items[l].style[this._measurements.minDimension]=Math.min(this._items[l]._sizeLimits[this._measurements.minDimension],s)+"px"),this._items[l].style[this._measurements.dimension]=(this._items[l]._sizeBeforeCollapse=Math.max(0,Math.min(s,this._items[l]._originalSize)))+"px",e-=d}if(e<=0)break}a&&(a.locked=!0)}},{key:"enableShadowDOM",get:function(){var e=Smart.EnableShadowDOM;return this._isInShadowDOM?!this._isInShadowDOM:this.isCompleted?null!==this.shadowRoot:e}},{key:"items",get:function(){if(this.isReady){for(var e=this.$.container.children,t=[],i=0;i<e.length;i++)(e[i]instanceof Smart.SplitterItem||"Smart-SPLITTER-ITEM"===e[i].tagName)&&t.push(e[i]);return t}}},{key:"hasStyleObserver",get:function(){return"resize"}},{key:"bars",get:function(){if(this.isReady){for(var e=this.$.container.children,t=[],i=0;i<e.length;i++)(e[i]instanceof Smart.SplitterBar||"Smart-SPLITTER-BAR"===e[i].tagName)&&t.push(e[i]);return t}}}],[{key:"properties",get:function(){return{autoFitMode:{allowedValues:["end","proportional","overflow"],value:"proportional",type:"string"},dataSource:{value:null,type:"object?",reflectToAttribute:!1},orientation:{allowedValues:["horizontal","vertical"],value:"vertical",type:"string"},keepProportionsOnResize:{value:!1,type:"boolean"},resizeMode:{allowedValues:["none","adjacent","end","proportional"],value:"adjacent",type:"string"},resizeStep:{value:5,type:"number"},liveResize:{value:!1,type:"boolean"},messages:{extend:!0,value:{en:{invalidIndex:'{{elementType}}: "{{method}}" method accepts an index of type number.',indexOutOfBound:'{{elementType}}: Out of bound index/indexes in "{{method}}" method.',invalidNode:'{{elementType}}: "{{method}}" method accepts an object or an array of objects as it\'s second parameter.',invalidSettings:'{{elementType}}: "{{method}}" method accepts a string or an object as it\'s second parameter.',invalidType:'{{elementType}}: "{{propertyName}}" must be of type string or number.'}},type:"object"}}}},{key:"listeners",get:function(){return{focus:"_focusHandler",blur:"_focusHandler",down:"_downHandler",move:"_moveHandler","document.dragstart":"_dragStartHandler","document.move":"_documentMoveHandler","document.up":"_documentUpHandler",keydown:"_keyDownHandler",resize:"_resizeEventHandler"}}},{key:"styleUrls",get:function(){return["smart.button.css","smart.splitter.css"]}}]),t}())},41:function(e,t,i){"use strict";function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function o(e,t,i){return t&&s(e.prototype,t),i&&s(e,i),e}function r(e,t){return!t||"object"!==a(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function l(e,t,i){return(l="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,i){var a=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=d(e)););return e}(e,t);if(a){var n=Object.getOwnPropertyDescriptor(a,t);return n.get?n.get.call(i):n.value}})(e,t,i||e)}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function h(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}Smart("smart-tab-item",function(e){function t(){return n(this,t),r(this,d(t).apply(this,arguments))}return h(t,Smart.ContentElement),o(t,[{key:"attached",value:function(){l(d(t.prototype),"attached",this).call(this),this.isCompleted&&(this.$.removeClass("right"),this.$.removeClass("left"),this.$.removeClass("top"),this.$.removeClass("bottom"),this.$.removeClass("animate"))}},{key:"propertyChangedHandler",value:function(e,i,a){l(d(t.prototype),"propertyChangedHandler",this).call(this,e,i,a);if(this._preventPropertyChangedHandler)delete this._preventPropertyChangedHandler;else{var n=(Smart.EnableShadowDOM&&this.parentElement&&this.getRootNode().host||this).closest("smart-tabs"),s=n&&n.shadowRoot?{composed:!0,bubbles:!0,cancelable:!0}:void 0;switch(e){case"closeButtonHidden":this.$.fireEvent("closeButtonVisibilityChange",{hidden:a},s);break;case"index":this.$.fireEvent("indexChange",{newIndex:a,oldIndex:i,tabItem:this},s);break;case"label":break;case"labelSize":this.$.fireEvent("labelSizeChange",{size:a},s)}}}},{key:"appendChild",value:function(e){var t=this;if(!t.isCompleted){var i=Array.prototype.slice.call(arguments,2);return HTMLElement.prototype.appendChild.apply(t,i.concat(Array.prototype.slice.call(arguments)))}t.firstElementChild.appendChild(e)}},{key:"_setIndex",value:function(e){var t=this.context;this.context=this,this.index=e,this.context=t}},{key:"enableShadowDOM",get:function(){return!1}}],[{key:"properties",get:function(){return{closeButtonHidden:{value:!1,type:"boolean"},index:{value:null,type:"number?"},selected:{value:!1,type:"boolean"},label:{value:"",type:"string"},labelSize:{value:null,type:"number?"}}}}]),t}()),Smart("smart-tab-items-group",function(e){function t(){return n(this,t),r(this,d(t).apply(this,arguments))}return h(t,Smart.ContentElement),o(t,[{key:"template",value:function(){return""}},{key:"propertyChangedHandler",value:function(e,i,a){l(d(t.prototype),"propertyChangedHandler",this).call(this,e,i,a);if(this._preventPropertyChangedHandler)delete this._preventPropertyChangedHandler;else switch(e){case"label":break;case"labelSize":this.$.fireEvent("labelSizeChange",{size:a})}}},{key:"enableShadowDOM",get:function(){return!1}}],[{key:"properties",get:function(){return{label:{value:"",type:"string"},labelSize:{value:null,type:"number?"}}}}]),t}()),Smart("smart-tabs",function(e){function t(){return n(this,t),r(this,d(t).apply(this,arguments))}return h(t,Smart.BaseElement),o(t,[{key:"template",value:function(){return'<div id="container">\n                    <div id="tabsHeaderSection" class="smart-header smart-tabs-header-section">\n                        <div id="tabsHeaderItems" class="smart-tabs-header-items">\n                            <smart-repeat-button id="scrollButtonNear" class="smart-tabs-scroll-button smart-nav-button smart-spin-button smart-hidden" animation="[[animation]]" unfocusable>\n                                <div id="arrowNear" class="smart-arrow"></div>\n                            </smart-repeat-button>\n                            <div id="tabStrip" class="smart-tab-strip"></div>\n                            <smart-repeat-button id="scrollButtonFar" class="smart-tabs-scroll-button smart-nav-button smart-spin-button smart-hidden" animation="[[animation]]" unfocusable>\n                                <div id="arrowFar" class="smart-arrow"></div>\n                            </smart-repeat-button>\n                            <div id="dropDownButton" class="smart-drop-down-button">\n                                <div id="dropDownButtonArrow" class="smart-drop-down-button-arrow smart-unselectable"></div>\n                            </div>\n                            <span id="tabSelectionBar" class="smart-tabs-selection-bar"></span>\n                            <div id="resizeToken" class="smart-tabs-resize-token smart-hidden"></div>\n                        </div>\n                        <div id="tabHeaderControls" class="smart-tabs-header-controls"></div>\n                    </div>\n                    <div id="tabContentSection" class="smart-tabs-content-section">\n                       <content></content>\n                    </div>\n                    <div id="dropDownButtonDropDown" class="smart-drop-down-button-drop-down smart-hidden"></div>\n                    <input id="hiddenInput" type="hidden" name="[[name]]">\n                </div>'}},{key:"attached",value:function(){l(d(t.prototype),"attached",this).call(this),this.isCompleted&&this.isRendered&&this._applyTabOverflow()}},{key:"ready",value:function(){l(d(t.prototype),"ready",this).call(this);this._flexWritingModeNoFullSupport=!0}},{key:"render",value:function(){this._createElement(),l(d(t.prototype),"render",this).call(this)}},{key:"appendChild",value:function(e){var t=this;if(!t.isCompleted||e instanceof HTMLElement&&e.classList.contains("smart-resize-trigger-container")){var i=Array.prototype.slice.call(arguments,2);return HTMLElement.prototype.appendChild.apply(t,i.concat(Array.prototype.slice.call(arguments)))}e instanceof Smart.TabItem||t.error(t.localize("tabItemRequired",{method:"appendChild"})),t.isRendered?t.insert(t._tabs.length,{node:e}):t.whenRendered((function(){return t.insert(t._tabs.length,{node:e})}))}},{key:"collapse",value:function(){this.collapsible&&!this.collapsed&&(this.collapsed=!0)}},{key:"ensureVisible",value:function(e){if(null!==e&&"wrap"!==this.tabLayout&&"shrink"!==this.tabLayout&&"hidden"!==this.tabPosition){this._validateIndex(e,"ensureVisible"),e=Math.max(0,Math.min(e,this._tabs.length-1));var t=this._tabs[e].group,i=this.$.tabStrip,a=i.getBoundingClientRect(),n=(null===t?this._tabLabelContainers[e]:this._groupLabels[this._groups.indexOf(t)]).getBoundingClientRect();"top"!==this.tabPosition&&"bottom"!==this.tabPosition||!(a.left>n.left||a.right<n.right)?"left"!==this.tabPosition&&"right"!==this.tabPosition||!(a.top>n.top||a.bottom<n.bottom)||(i.scrollTop+=Math.round(n.bottom-i.offsetHeight-a.top)):i.scrollLeft+=Math.round(n.right-i.offsetWidth-a.left),this._updateScrollButtonVisibility(),this.resize&&this._getTabCoordinates()}}},{key:"expand",value:function(){this.collapsible&&this.collapsed&&(this.collapsed=!1)}},{key:"getOffsetFromEdgeOfElement",value:function(e){this._validateIndex(e,"getOffsetFromEdgeOfElement"),e=Math.max(0,Math.min(e,this._tabs.length-1));var t=this._tabs[e],i=this.tabPosition;return"hidden"!==i?Math.abs(t.getBoundingClientRect()[i]-this.getBoundingClientRect()[i]):t.getBoundingClientRect().top-this.getBoundingClientRect().top}},{key:"insert",value:function(e,t){var i,a;if(this._validateIndex(e,"insert"),(void 0===t||void 0===t.label&&void 0===t.content&&void 0===t.node)&&this.error(this.localize("detailsObjectRequired")),void 0===t.node)i=t.group,(a=document.createElement("smart-tab-item")).label=void 0!==t.label?t.label:"",a.labelSize=void 0!==t.labelSize?t.labelSize:null,a.content=t.content;else if(void 0!==(a=t.node).index&&null!==a.index){var n=a.context;a.context=a,a.index=null,a.context=n}a.$.addClass("smart-visibility-hidden"),a.group=null;var s=this._addTabLabelContainer(a),o=s.tabLabelContainer,r=s.dropDownLabelContainer;o.tab=a,a.tabLabelContainer=o;var l={index:e,tab:a,tabLabelContainer:o,dropDownLabelContainer:r};if(0===this._groups.length&&void 0===i)this._insertNoGrouping(l);else if(null!=i){l.group=i;var d=this.$.tabContentSection.querySelector('smart-tab-items-group[label="'+i+'"]');null!==d?(l.smartTabItemsGroup=d,this._insertIntoExistingGroup(l)):this._insertIntoNewGroup(l)}else this._insertNearAGroup(l);this._getReorderItems(),null===this.selectedIndex&&!this.allowToggle&&this._tabs.length&&this._select(0,!0),null!==a.group&&null!==a.labelSize&&"shrink"!==this.tabLayout&&o.style.removeProperty([this._orientationSettings.dimension]),this._applyTabOverflow()}},{key:"insertBefore",value:function(e,t){var i,a=this;if(!a.isCompleted){var n=Array.prototype.slice.call(arguments,2);return HTMLElement.prototype.insertBefore.apply(a,n.concat(Array.prototype.slice.call(arguments)))}e instanceof Smart.TabItem&&(null==t||t instanceof Smart.TabItem)||a.error(a.localize("tabItemRequired",{method:"insertBefore"})),a.contains(e)&&(e.selected&&(i=!0),a.remove(e.index)),null!=t?(a.contains(t)||a.error(a.localize("referenceNodeNotChild",{argument:"referenceNode"})),a.insert(t.index,{node:e})):a.insert(a._tabs.length,{node:e}),i&&a._select(e.index,!1)}},{key:"refreshTabHeader",value:function(){"scroll"===this.tabLayout&&this._checkOverflowScroll(),this._positionTabSelectionBar(this._tabLabelContainers?this._tabLabelContainers[this.selectedIndex]:void 0,!0)}},{key:"remove",value:function(e){var t=this._tabs.length;if(0!==t){this._validateIndex(e,"remove"),e=Math.max(0,Math.min(e,t-1));var i=this._tabs[e],a=this._tabLabelContainers[e];if(a._lazyRemove?a.classList.add("smart-hidden"):a.parentElement.removeChild(a),i.parentElement.removeChild(i),null!==i.group){var n=this.$.tabContentSection.querySelector('smart-tab-items-group[label="'+i.group+'"]');if(0===n.childElementCount){var s=this._groups.indexOf(i.group);this.$.tabStrip.removeChild(this._groupLabels[s]),this._groups.splice(s,1),this.$.container.removeChild(this._groupLabels[0].dropDown),this._groupLabels.splice(s,1),this.$.tabContentSection.removeChild(n)}}t>1?e<this.selectedIndex?this.selectedIndex--:e===this.selectedIndex&&(e===t-1?this._select(e-1,!1):(this._select(e+1,!1),this.selectedIndex--)):(this.selectedIndex=null,this.$.tabContentSection.innerHTML=""),this._tabLabelContainers.splice(e,1),this.$.dropDownButtonDropDown.removeChild(this.$.dropDownButtonDropDown.children[e]),this._tabs.splice(e,1),this._focusedItem===i&&(this._focusedItem=this._tabs[this._focusedItem.index]),this._updateTabIndexes(),this._getReorderItems(),this._applyTabOverflow(),this.ensureVisible(this.selectedIndex),this.$.hiddenInput.value=this.selectedIndex}}},{key:"removeChild",value:function(e){var t=this;if(!t.isCompleted||e instanceof HTMLElement&&e.classList.contains("smart-resize-trigger-container")){var i=Array.prototype.slice.call(arguments,2);return HTMLElement.prototype.removeChild.apply(t,i.concat(Array.prototype.slice.call(arguments)))}e instanceof Smart.TabItem||t.error(t.localize("tabItemRequired",{method:"removeChild"})),t.contains(e)||t.error(t.localize("referenceNodeNotChild",{argument:"node"})),t.remove(e.index)}},{key:"select",value:function(e){0!==this._tabs.length&&(this._validateIndex(e,"select"),e=Math.max(0,Math.min(e,this._tabs.length-1)),this.ensureVisible(e),this._select(e,!0))}},{key:"_setFocusable",value:function(){this.disabled||this.unfocusable?this.removeAttribute("tabindex"):(null===this.getAttribute("tabindex")||this.getAttribute("tabindex")<0)&&this.setAttribute("tabindex",0)}},{key:"update",value:function(e,t,i){if(0!==this._tabs.length){this._validateIndex(e,"update"),e=Math.max(0,Math.min(e,this._tabs.length-1));var a=this._tabs[e];if(void 0!==t&&a.label!==t){var n=this._tabLabelContainers[e].firstElementChild.children[0],s=this.$.dropDownButtonDropDown.children[e];a.label=t,n.innerHTML="",s.innerHTML="",this._setLabel(t,n,s),this._applyTabOverflow()}void 0!==i&&(a.content=i)}}},{key:"_createElement",value:function(){var e=this;e.disabled&&(e.$.scrollButtonNear.disabled=!0,e.$.scrollButtonFar.disabled=!0),e._handlePosition(e.tabPosition),e._handleScrollButtonsPosition(e.scrollButtonsPosition,"both"),null!==e.dataSource&&e._processDataSource(),e._setFocusable(),e.collapsed&&!e.collapsible&&(e.collapsed=!1),e.collapsible&&e.allowToggle&&(e.allowToggle=!1),e._processHTML(),null===e.selectedIndex&&e.$.tabContentSection.setAttribute("show-placeholder",""),setTimeout((function(){return e.refreshTabHeader()}),300),e.$.hiddenInput.value=e.selectedIndex,e.enableShadowDOM&&HTMLElement.prototype.appendChild.apply(e,[e.$.hiddenInput])}},{key:"propertyChangedHandler",value:function(e,i,a){l(d(t.prototype),"propertyChangedHandler",this).call(this,e,i,a);var n=this;switch(e){case"addNewTab":a?n._insertAddNewTab():(n.$.tabStrip.removeChild(n._addNewTab),delete n._addNewTab),n._applyTabOverflow();break;case"allowToggle":a&&n.collapsible?(n.collapsed&&n._toggleCollapsedState(),n.collapsible=!1):a||null!==n.selectedIndex||(n.ensureVisible(n.selectedIndex=0),n._select(n.selectedIndex,!0,null));break;case"closeButtonMode":if("selected"===a){for(var s=0;s<n._tabs.length;s++)n._disableCloseButton(s);n._enableCloseButton(n.selectedIndex)}else{n._disableCloseButton(n.selectedIndex);for(var o=n._tabLabelContainers,r=0;r<o.length;r++){var h=o[r];h.closeButtonEnabled=!0!==n._tabs[r].closeButtonHidden,n._showCloseButton(h)}}n._applyTabOverflow();break;case"closeButtons":for(var u=n._tabLabelContainers,c=a?n._showCloseButton:n._hideCloseButton,m=0;m<u.length;m++){c(u[m])}n._applyTabOverflow();break;case"collapsed":if(!n.collapsible&&a)return void(n.collapsed=!1);break;case"collapsible":!a&&n.collapsed&&(n.collapsed=!1),n.allowToggle=!1,void 0===n.selectedIndex&&n.select(n._focusedItem.index);break;case"dataSource":n.selectedIndex=null;for(var p=0;p<n._groupLabels.length;p++)n.$.container.removeChild(n._groupLabels[p].dropDown);n.$.tabStrip.innerHTML="",n._processDataSource(),n._processHTML();break;case"disabled":n._setFocusable(),n.$.scrollButtonNear.disabled=a,n.$.scrollButtonFar.disabled=a,a||n._updateScrollButtonVisibility(),n._closeDropDownButtonDropDown();break;case"messages":case"scrollMode":case"selectionMode":case"readonly":case"reorder":break;case"overflow":if("scroll"!==n.tabLayout)return;n.$.tabStrip.scrollLeft=0,n.$.tabStrip.scrollTop=0,"hidden"===a?(n.$tabsHeaderSection.removeClass("scroll-buttons-shown"),n.$scrollButtonNear.addClass("smart-hidden"),n.$scrollButtonFar.addClass("smart-hidden")):n._checkOverflowScroll(),n._getTabCoordinates();break;case"tabPosition":n.$.tabSelectionBar.style.transition="none",n._tabPositionChanging=!0,n._closeGroupDropDown(),n._handlePosition(a,i),"shrink"!==n.tabLayout&&n._applyLabelSizes("tabPosition"),n._applyTabOverflow(),delete n._tabPositionChanging,requestAnimationFrame((function(){n.$.tabSelectionBar.style.transition=null}));break;case"resize":a&&n._getTabCoordinates();break;case"scrollButtonsPosition":n._handleScrollButtonsPosition(a,i);break;case"selectedIndex":if(isNaN(a)&&(n.selectedIndex=a=i),!n.allowToggle&&null===a)return void(n.selectedIndex=i);var f=a;null!==a&&(f=Math.max(0,Math.min(a,n._tabs.length-1)),n.ensureVisible(f)),n._select(f,!0,i);break;case"tabLayout":"scroll"===i&&(n.$tabsHeaderSection.removeClass("scroll-buttons-shown"),n.$scrollButtonNear.addClass("smart-hidden"),n.$scrollButtonFar.addClass("smart-hidden")),"shrink"===a?n._applyLabelSizes("shrink",!0):"shrink"===i&&n._applyLabelSizes("shrink",!1),n._applyTabOverflow(),"scroll"===a&&n.disabled&&(n.$.scrollButtonNear.disabled=!0,n.$.scrollButtonFar.disabled=!0),n.ensureVisible(n.selectedIndex);break;case"tabTextOrientation":n._applyTabOverflow(),n.ensureVisible(n.selectedIndex);break;case"unfocusable":n._setFocusable()}}},{key:"_addGroupContainer",value:function(e,t){var i=document.createElement("div"),a=document.createElement("div"),n=document.createElement("div"),s=document.createElement("div"),o=document.createElement("div");return i.className="smart-tab-group-container smart-unselectable",i.$=Smart.Utilities.Extend(i),a.className="smart-tab-label-text-wrapper",null!==t&&"shrink"!==this.tabLayout&&(i.style[this._orientationSettings.dimension]=parseInt(t,10)+"px"),n.className="smart-tab-label-text-container",n.innerHTML=e,s.className="smart-tab-group-arrow",o.className="smart-tab-group-drop-down smart-hidden",o.$=Smart.Utilities.Extend(o),a.appendChild(n),a.appendChild(s),i.appendChild(a),this.$.container.appendChild(o),i.group=e,i.dropDown=o,o.groupContainer=i,{label:i,dropDown:o}}},{key:"_addGroupElements",value:function(e){var t,i=e.groups,a=e.groupLabels,n=e.group,s=i.indexOf(n),o=e.tabLabelContainer;if(-1!==s)(t=a[s]).dropDown.appendChild(o);else{i.push(n);var r=this._addGroupContainer(n,e.smartTabItemsGroup.labelSize),l=r.dropDown;t=r.label,l.appendChild(o),l.groupContainer=r.label,e.documentFragment.appendChild(t),a.push(t)}this.selectedIndex===e.i&&(this._selectedGroup=t,t.$.addClass("smart-tab-group-selected"))}},{key:"_addNewTabHandler",value:function(e,t,i){this._swiping||(i?(e.removeAttribute("hover"),this.insert(this._tabs.length,{label:"New Tab",content:""}),this._select(this._tabs.length-1,!0)):this._reordering||this._swiping||("mouseover"===t?e.setAttribute("hover",""):"mouseout"===t&&e.removeAttribute("hover")))}},{key:"_addTabLabelContainer",value:function(e,t){var i,a=document.createElement("div"),n=document.createElement("div"),s=document.createElement("div"),o=document.createElement("div");return a.className="smart-tab-label-container smart-unselectable",n.className="smart-tab-label-text-wrapper",s.className="smart-tab-label-text-container",o.className="smart-tab-close-button",void 0===t?(this.closeButtons?"default"===this.closeButtonMode&&e.closeButtonHidden||"selected"===this.closeButtonMode&&!e.selected?(o.classList.add("smart-hidden"),a.closeButtonEnabled=!1):(s.classList.add("smart-close-button-enabled"),a.closeButtonEnabled=!0):(o.classList.add("smart-hidden"),a.closeButtonEnabled=!0),(i=document.createElement("div")).className="smart-tab-label-container smart-unselectable",null===e.group&&null!==e.labelSize&&"shrink"!==this.tabLayout&&(a.style[this._orientationSettings.dimension]=parseInt(e.labelSize,10)+"px")):(o.classList.add("smart-hidden"),a.closeButtonEnabled=!1),this._setLabel(e?e.label:"+",s,i),s.$=Smart.Utilities.Extend(s),o.$=Smart.Utilities.Extend(o),n.appendChild(s),n.appendChild(o),a.appendChild(n),a.$=Smart.Utilities.Extend(a),{tabLabelContainer:a,dropDownLabelContainer:i}}},{key:"_animateSelection",value:function(e,t,i){var a="right",n="left";if(this._animatedTab=e,this._animatedOldTab=t,this._animatedTab&&this._animatedOldTab){"left"!==this.tabPosition&&"right"!==this.tabPosition||(a="top",n="bottom");for(var s=0;s<this._tabs.length;s++)this._tabs[s].$.removeClass(a),this._tabs[s].$.removeClass(n),this._tabs[s].$.removeClass("animate");if(e===t)return e.$.hasClass("smart-visibility-hidden")?e.$.removeClass("smart-visibility-hidden"):e.$.addClass("smart-visibility-hidden"),void(this._animatedOldTab.classToRemove=a);i?(e.$.addClass(a),e.$.removeClass("smart-visibility-hidden"),t.$.addClass("animate"),e.$.addClass("animate"),t.$.addClass(n),t.$.addClass("smart-visibility-hidden"),e.$.removeClass(a),this._animatedOldTab.classToRemove=n):(e.$.addClass(n),e.$.removeClass("smart-visibility-hidden"),t.$.addClass("animate"),e.$.addClass("animate"),t.$.addClass(a),t.$.addClass("smart-visibility-hidden"),e.$.removeClass(n),this._animatedOldTab.classToRemove=a)}}},{key:"_applyConditionalTabOverflow",value:function(){var e="left"===this.tabPosition||"right"===this.tabPosition,t=this.$.tabStrip;if("scroll"!==this.tabLayout){if(this._flexWritingModeNoFullSupport&&"shrink"===this.tabLayout&&e&&t.scrollHeight>t.offsetHeight){var i=t.children,a=100/i.length+"%";t.$.addClass("shrink-tabs-vertical");for(var n=0;n<i.length;n++)i[n].style.height=a,i[n].firstElementChild.firstElementChild.classList.add("smart-tab-label-text-container-full-height");this._inlineStyleTabStripChildren=!0}}else this._checkOverflowScroll()}},{key:"_applyLabelSizes",value:function(e,t){for(var i=this._orientationSettings.dimension,a="width"===i?"height":"width",n=0;n<this._reorderItems.length;n++){var s=this._reorderItems[n],o=this._getCorrespondingCustomElement(s);null!==o.labelSize&&("tabPosition"===e&&s.style.removeProperty(a),t?s.style.removeProperty(i):s.style[i]=parseInt(o.labelSize,10)+"px")}}},{key:"_applyTabOverflow",value:function(){if(this._tabs)if(this._removeInlineStyle(),0!==this._tabs.length){var e=this.tabLayout,t=this.tabPosition,i="left"===t||"right"===t,a=this.$.tabStrip;switch(this._closeDropDownButtonDropDown(),e){case"scroll":case"dropDown":this._flexWritingModeNoFullSupport&&"vertical"===this.tabTextOrientation&&i&&this._fixTabStripNotChrome(a);break;case"wrap":if("vertical"===this.tabTextOrientation)if(this._flexWritingModeNoFullSupport)if(i)this._fixTabStripNotChrome(a);else{for(var n=a.children,s=n[0].offsetHeight,o=1;o<n.length;o++)s=Math.max(s,n[o].offsetHeight);for(var r=1;r<n.length;r++)n[r].style.height=s+"px";this._inlineStyleTabStripChildren=!0}else i||a.scrollHeight>a.offsetHeight&&(a.style.height=a.scrollHeight+"px",this._inlineStyleTabStrip=!0);else i&&a.scrollWidth>a.offsetWidth&&(a.style.width=a.scrollWidth+"px","right"===t&&(a.style.flexWrap="wrap-reverse"),this._inlineStyleTabStrip=!0);break;case"shrink":if(i){if(this._flexWritingModeNoFullSupport&&"vertical"===this.tabTextOrientation){for(var l=a.children,d=window.getComputedStyle(l[0].firstElementChild),h=parseInt(d.paddingLeft,10)+parseInt(d.paddingRight,10),u=0,c=0;c<l.length;c++)u=Math.max(u,l[c].firstElementChild.firstElementChild.offsetWidth);a.style.width=h+u+"px",this._inlineStyleTabStrip=!0;break}}else a.scrollWidth>a.offsetWidth&&a.$.addClass("shrink-tabs")}this._applyConditionalTabOverflow(),this._getTabCoordinates(),this._fixTabStripFlex(e),this._toggleNavigationElementsVisibility(),this._positionTabSelectionBar(this._tabLabelContainers[this.selectedIndex],!0)}else this._toggleNavigationElementsVisibility()}},{key:"_checkOverflowScroll",value:function(){var e,t,i,a=this.$tabsHeaderSection,n=this.$.tabStrip,s=this.overflow;"hidden"!==s&&("left"!==this.tabPosition&&"right"!==this.tabPosition?(e=Math.round(n.scrollWidth)>Math.round(n.offsetWidth),t=Math.round(n.scrollLeft)>0,i=Math.round(n.offsetWidth+n.scrollLeft)<Math.round(n.scrollWidth)):(e=Math.round(n.scrollHeight)>Math.round(n.offsetHeight),t=Math.round(n.scrollTop)>0,i=Math.round(n.offsetHeight+n.scrollTop)<Math.round(n.scrollHeight)),"scroll"===s&&(a.addClass("scroll-buttons-shown"),this.$scrollButtonNear.removeClass("smart-hidden"),this.$scrollButtonFar.removeClass("smart-hidden")),e?"auto"===s?(a.hasClass("scroll-buttons-shown")||a.addClass("scroll-buttons-shown"),t?this.$scrollButtonNear.removeClass("smart-hidden"):this.$scrollButtonNear.addClass("smart-hidden"),i?this.$scrollButtonFar.removeClass("smart-hidden"):this.$scrollButtonFar.addClass("smart-hidden"),!1===(t&&i)?a.addClass("one-button-shown"):a.removeClass("one-button-shown"),this.disabled||(this.$.scrollButtonNear.disabled=!1,this.$.scrollButtonFar.disabled=!1)):(a.removeClass("one-button-shown"),this.disabled?(this.$.scrollButtonNear.disabled=!0,this.$.scrollButtonFar.disabled=!0):(this.$.scrollButtonNear.disabled=!t,this.$.scrollButtonFar.disabled=!i)):!e&&"auto"===s&&a.hasClass("scroll-buttons-shown")?(a.removeClass("scroll-buttons-shown"),a.removeClass("one-button-shown"),this.$scrollButtonNear.addClass("smart-hidden"),this.$scrollButtonFar.addClass("smart-hidden")):e||"scroll"!==s||(this.$.scrollButtonNear.disabled=!0,this.$.scrollButtonFar.disabled=!0))}},{key:"_closeButtonVisibilityChangeHandler",value:function(e){var t=(Smart.EnableShadowDOM?e.composedPath()[0]:e.target).index;"selected"!==this.closeButtonMode?e.detail.hidden?this._disableCloseButton(t):this._enableCloseButton(t):this._tabLabelContainers[t].closeButtonEnabled=e.detail.hidden}},{key:"_closeDropDownButtonDropDown",value:function(){this._dropDownButtonDropDownOpened&&(this.$dropDownButtonDropDown.addClass("smart-hidden"),this._dropDownButtonDropDownOpened=!1)}},{key:"_closeGroupDropDown",value:function(){var e=this;e._openDropDown&&(e._openDropDown.rippleInProgress?setTimeout((function(){e._openDropDown&&(e._openDropDown.$.addClass("smart-hidden"),delete e._openDropDown.rippleInProgress,e._openDropDown=void 0)}),450):(e._openDropDown.$.addClass("smart-hidden"),e._openDropDown=void 0))}},{key:"_containerHandler",value:function(e){var t=e.type;if(!(this.disabled||this.readonly||this._resizing&&"mouseout"!==t)&&("down"!==t&&"up"!==t||1===e.which||Smart.Utilities.Core.isMobile)){var i=this.shadowRoot||this.isInShadowDOM?(e.originalEvent||e).composedPath()[0]:(e.originalEvent||e).target;this.$.tabContentSection.contains(i)||(this.$.dropDownButton.contains(i)?this._dropDownButtonHandler(i,e):this.$.dropDownButtonDropDown.contains(i)?this._dropDownButtonHandler(i,e,!0):this._tabStripHandler(i,e))}}},{key:"_disableCloseButton",value:function(e){var t=this._tabLabelContainers[e];t.closeButtonEnabled=!1,this.closeButtons&&this._hideCloseButton(t)}},{key:"_documentMoveHandler",value:function(e){var t=this._orientationSettings;if(this._reordering){this._reorderStartThrown||(this._fireDragEvent(e,"dragStart"),this._reorderStartThrown=!0);for(var i=e[t.coordinate],a="wrap"!==this.tabLayout?function(e){return i>=e[t.from]&&i<=e[t.to]}:function(t){return e.pageX>=t.fromX&&e.pageX<=t.toX&&e.pageY>=t.fromY&&e.pageY<=t.toY},n=!1,s=0;s<this._tabCoordinates.length;s++){if(a(this._tabCoordinates[s])){n=s;break}}!0!==this._preventReorder&&!1!==n&&n!==this._draggedIndex&&(this._reorderTabs(this._draggedIndex,n),this._closeGroupDropDown(),this._draggedIndex=n,this._getReorderItems(),this._getTabCoordinates());var o=this._tabCoordinates[this._draggedIndex];"wrap"!==this.tabLayout&&(i<o[t.from]||i>o[t.to])||"wrap"===this.tabLayout&&(null!==e.originalEvent.target.closest(".smart-tab-label-container")||null!==e.originalEvent.target.closest(".smart-tab-group-container"))&&!(e.pageX>=o.fromX&&e.pageX<=o.toX&&e.pageY>=o.fromY&&e.pageY<=o.toY)?this._preventReorder=!0:this._preventReorder=!1}else this._resizing&&(this.$.resizeToken.style[t.edge]=e[t.coordinate]-this._tabsHeaderSectionCoordinate+"px",this.$resizeToken.removeClass("smart-hidden"))}},{key:"_documentUpHandler",value:function(e){var t=this.shadowRoot||this.isInShadowDOM?e.originalEvent.composedPath()[0]:e.originalEvent.target;this.$.container.contains(t)&&this._containerHandler(e),this._endSwiping(e,Date.now()),!this._openDropDown||this._openDropDown.rippleInProgress||t!==document&&t.closest(".smart-tab-group-container")===this._openDropDown.groupContainer||this._closeGroupDropDown(),this.$.dropDownButton.contains(t)||this._closeDropDownButtonDropDown(),this._endReordering(e,t),this._resize(e),void 0!==this._tabToResize&&(this._tabToResize=void 0)}},{key:"_dropDownButtonHandler",value:function(e,t,i){var a=t.type;if(i){if(e.classList.contains("smart-tab-label-container"))switch(a){case"down":this._downTarget=e;break;case"mouseout":e.removeAttribute("hover");break;case"mouseover":e.setAttribute("hover","");break;case"up":e===this._downTarget&&(this.select(Array.from(this.$.dropDownButtonDropDown.children).indexOf(e)),this._closeDropDownButtonDropDown())}}else if("down"===a)this._downTarget=this.$.dropDownButton;else if("up"===a&&this._downTarget===this.$.dropDownButton)if(this._dropDownButtonDropDownOpened)this._closeDropDownButtonDropDown();else{var n,s;switch(this.tabPosition){case"top":n=this.$.dropDownButton.offsetLeft,s=this.$.tabsHeaderSection.offsetTop+this.$.dropDownButton.offsetHeight;break;case"bottom":n=this.$.dropDownButton.offsetLeft,s=this.$.tabsHeaderSection.offsetTop;break;case"left":n=this.$.dropDownButton.offsetWidth,s=this.$.dropDownButton.offsetTop;break;case"right":n=this.$.tabsHeaderSection.offsetLeft,s=this.$.dropDownButton.offsetTop}this.$.dropDownButtonDropDown.style.left=n+"px",this.$.dropDownButtonDropDown.style.top=s+"px",this.$dropDownButtonDropDown.removeClass("smart-hidden"),this._dropDownButtonDropDownOpened=!0}}},{key:"_enableCloseButton",value:function(e){var t=this._tabLabelContainers[e];t.closeButtonEnabled=!0,this.closeButtons&&this._showCloseButton(t)}},{key:"_endReordering",value:function(e,t){this._reordering&&(this._draggedHoveredTab&&(this._draggedHoveredTab.contains(t)||this._draggedHoveredTab.removeAttribute("hover"),delete this._draggedHoveredTab),this._reorderedIndex=void 0,this._reordering=!1,this._reorderStartThrown=!1,this.removeAttribute("dragged"),e&&this._fireDragEvent(e,"dragEnd"))}},{key:"_endSwiping",value:function(e,t){var i=this;if(i._dragStartDetails){var a=i._orientationSettings,n=i.$.tabStrip,s=Math.abs(i._dragStartDetails.startTime-t),o=200/s,r=(i._dragStartDetails[a.startCoordinate]-e[a.coordinate])*o,l=Math.abs(r),d=function(){return!(r>0&&n[a.scrollDirection]===n[a.scrollSize]-n[a.size]||r<0&&0===n[a.scrollDirection])},h=.03*Math.abs(r)*o;i._scrollingAnimationFrame&&cancelAnimationFrame(i._scrollingAnimationFrame),s<500&&d()?i._scrollingAnimationFrame=window.requestAnimationFrame((function e(){if(h>5){var t=(l-h)/Math.abs(r);t<.1?h/=1.25:t<.15?h/=1.2:t<.2?h/=1.15:t<.25?h/=1.1:t<.3&&(h/=1.05)}h=Math.round(h);var s=n[a.scrollDirection];n[a.scrollDirection]=r>0?Math.min(s+h,n[a.scrollSize]-n[a.size]):Math.max(s-h,0),l-=h,i._updateScrollButtonVisibility(!0);var o=d();l>0&&o?i._scrollingAnimationFrame=window.requestAnimationFrame(e):i._wheelInProgress=!1})):i._wheelInProgress=!1,delete i._dragStartDetails,i._swiping&&delete i._swiping}}},{key:"_fireDragEvent",value:function(e,t){var i,a,n,s=this.$.tabStrip.children[this._draggedIndex],o=s.tab;o?(i=o.selected,a=o.index,n=o.label):n=s.group,this.$.fireEvent(t,{position:{left:e.pageX,top:e.pageY},target:s,selected:i,index:a,label:n})}},{key:"_fixTabStripNotChrome",value:function(e){var t=this;function i(){for(var i=[].slice.call(e.children).filter((function(e){return!e._lazyRemove})),a=i[0].getBoundingClientRect(),n=a.left,s=n+i[0].offsetWidth,o=1;o<i.length;o++)a=i[o].getBoundingClientRect(),n=Math.min(n,a.left),s=Math.max(s,a.left+i[o].offsetWidth);e.style.width=s-n+"px",t._inlineStyleTabStrip=!0}0!==t._tabs.length&&(i(),Smart.Utilities.Core.Browser.Safari&&setTimeout((function(){e.parentElement.classList.add("smart-hidden"),setTimeout((function(){e.parentElement.classList.remove("smart-hidden"),i()}),10)}),10),t.$.fireEvent("tabStripResize"))}},{key:"_fixTabStripFlex",value:function(e){var t=this;t._flexWritingModeNoFullSupport||"vertical"!==t.tabTextOrientation||"left"!==t.tabPosition&&"right"!==t.tabPosition||setTimeout((function(){t.$tabsHeaderSection.addClass("smart-hidden"),setTimeout((function(){t.$tabsHeaderSection.removeClass("smart-hidden"),t._getTabCoordinates(),"scroll"===e&&t._checkOverflowScroll()}),10)}),10)}},{key:"_getCorrespondingCustomElement",value:function(e){return e.$.hasClass("smart-tab-label-container")?e.tab:this.$.tabContentSection.querySelector('smart-tab-items-group[label="'+e.group+'"]')}},{key:"_getReorderItems",value:function(){var e;0===this._groups.length?e=this._tabLabelContainers:(e=Array.from(this.$.tabStrip.children),this.addNewTab&&e.pop()),this._reorderItems=e}},{key:"_getTabCoordinates",value:function(){if((this.reorder||this.resize)&&"hidden"!==this.tabPosition){for(var e=[],t=window.scrollX||window.pageXOffset,i=window.scrollY||window.pageYOffset,a=0;a<this._reorderItems.length;a++){var n=this._reorderItems[a],s=n.getBoundingClientRect(),o=window.getComputedStyle(n),r=parseFloat(o.marginLeft),l=parseFloat(o.marginRight),d=parseFloat(o.marginTop),h=parseFloat(o.marginBottom);e.push({fromX:s.left-r+t,toX:s.right+l+t,fromY:s.top-d+i,toY:s.bottom+h+i})}this._tabCoordinates=e}}},{key:"_getTabs",value:function(){var e=this.shadowRoot?this.shadowRoot.querySelectorAll("smart-tab-item"):this.getElementsByTagName("smart-tab-item");null!==this.selectedIndex&&(0===e.length?this.selectedIndex=null:this.selectedIndex=Math.max(0,Math.min(this.selectedIndex,e.length-1))),this._tabs=Array.from(e),this.$.hiddenInput.value=this.selectedIndex}},{key:"_groupContainerHandler",value:function(e,t){var i=e.dropDown;if("down"===t)return this._downTarget=e,void(this.reorder&&this._reorderItems.length>1&&(this._getTabCoordinates(),this._reordering=!0,this.setAttribute("dragged",""),this._draggedIndex=Array.from(this.$.tabStrip.children).indexOf(e)));this._reordering||this._swiping||(i===this._openDropDown||"mouseover"!==t||e.classList.contains("smart-tab-group-selected")?"mouseout"===t&&e.removeAttribute("hover"):e.setAttribute("hover","")),"up"!==t||this._downTarget!==e||void 0!==this._reorderedIndex||this._swiping||(i===this._openDropDown?(this._closeGroupDropDown(),e.classList.contains("smart-tab-group-selected")||e.setAttribute("hover","")):this._openGroupDropDown(e))}},{key:"_handlePosition",value:function(e,t){if(-1===[void 0,"top","left","hidden"].indexOf(t)||"bottom"!==e&&"right"!==e?"bottom"!==t&&"right"!==t||-1===["top","left","hidden"].indexOf(e)||this.$.container.insertBefore(this.$.tabsHeaderSection,this.$.tabContentSection):this.$.container.insertBefore(this.$.tabContentSection,this.$.tabsHeaderSection),"hidden"===e)return this._orientationSettings={coordinate:"pageY",dimension:"height",edge:"top",from:"fromY",size:"offsetHeight",to:"toY",scrollDirection:"scrollTop",scrollSize:"scrollHeight",startCoordinate:"startY",wheelOffset:35},this.removeAttribute("horizontal"),void this.removeAttribute("vertical");"top"===e||"bottom"===e?(this._orientationSettings={coordinate:"pageX",dimension:"width",edge:"left",from:"fromX",size:"offsetWidth",to:"toX",scrollDirection:"scrollLeft",scrollSize:"scrollWidth",startCoordinate:"startX",wheelOffset:70},this.removeAttribute("vertical"),this.setAttribute("horizontal",""),this.$arrowNear.removeClass("smart-arrow-up"),this.$arrowNear.addClass("smart-arrow-left"),this.$arrowFar.removeClass("smart-arrow-down"),this.$arrowFar.addClass("smart-arrow-right")):(this._orientationSettings={coordinate:"pageY",dimension:"height",edge:"top",from:"fromY",size:"offsetHeight",to:"toY",scrollDirection:"scrollTop",scrollSize:"scrollHeight",startCoordinate:"startY",wheelOffset:35},this.removeAttribute("horizontal"),this.setAttribute("vertical",""),this.$arrowNear.removeClass("smart-arrow-left"),this.$arrowNear.addClass("smart-arrow-up"),this.$arrowFar.removeClass("smart-arrow-right"),this.$arrowFar.addClass("smart-arrow-down"))}},{key:"_handleScrollButtonsPosition",value:function(e,t){var i=this.$.tabsHeaderItems;e!==t&&("both"===e?"near"===t?i.insertBefore(this.$.scrollButtonFar,this.$.dropDownButton):i.insertBefore(this.$.scrollButtonNear,this.$.tabStrip):"near"===e?("far"===t&&i.insertBefore(this.$.scrollButtonNear,this.$.tabStrip),i.insertBefore(this.$.scrollButtonFar,this.$.tabStrip)):("near"===t&&i.insertBefore(this.$.scrollButtonFar,this.$.dropDownButton),i.insertBefore(this.$.scrollButtonNear,this.$.scrollButtonFar)))}},{key:"_hideCloseButton",value:function(e){e.firstElementChild.children[0].$.removeClass("smart-close-button-enabled"),e.firstElementChild.children[1].$.addClass("smart-hidden")}},{key:"_indexChangeHandler",value:function(e){var t=e.detail.oldIndex,i=Math.max(0,Math.min(e.detail.newIndex,this._tabs.length-1));if(t!==i){if(0===this._groups.length)this._reorderTabs(t,i);else{var a=e.detail.tabItem;a._setIndex(t),this.remove(t),this.insert(i,{node:a}),this.selectedIndex===t&&this._select(i,!1)}this._reorderedIndex=void 0}}},{key:"_insertAddNewTab",value:function(){var e=this._addTabLabelContainer(void 0,!0).tabLabelContainer;e.$.addClass("smart-add-new-tab"),this.$.tabStrip.appendChild(e),this._addNewTab=e}},{key:"_insertIntoExistingGroup",value:function(e){var t=e.smartTabItemsGroup,i=e.tab,a=e.tabLabelContainer,n=e.group,s=this._groupLabels[this._groups.indexOf(n)].dropDown,o=e.index;o=Math.max(0,Math.min(o,t.childElementCount)),s.insertBefore(a,s.children[o]);var r,l=t.children[o];r=l?l.index:t.children[o-1].index+1,t.insertBefore(i,l),this._tabLabelContainers.splice(r,0,a),this.$.dropDownButtonDropDown.insertBefore(e.dropDownLabelContainer,this.$.dropDownButtonDropDown.children[r]||null),this._tabs.splice(r,0,i),o=r,i.group=n,this._updateIndexes(o)}},{key:"_insertIntoNewGroup",value:function(e){var t=e.tab,i=e.tabLabelContainer,a=e.group,n=this._addGroupContainer(a),s=n.label;n.dropDown.appendChild(i),this._groups.push(a);var o=Math.max(0,Math.min(e.index,this.$.tabStrip.childElementCount)),r=o;this._addNewTab&&r===this.$.tabStrip.childElementCount&&r--,this.$.tabStrip.insertBefore(s,this.$.tabStrip.children[r]||null),this._groupLabels.push(s);var l=document.createElement("smart-tab-items-group");l.appendChild(t),this.$.tabContentSection.insertBefore(l,this.$.tabContentSection.children[o]),l.label=a;var d=l.previousElementSibling,h=0;d&&(d instanceof Smart.TabItem?h=d.index+1:d&&(h=d.lastElementChild.index+1)),this._tabLabelContainers.splice(h,0,i),this.$.dropDownButtonDropDown.insertBefore(e.dropDownLabelContainer,this.$.dropDownButtonDropDown.children[h]||null),this._tabs.splice(h,0,t),o=h,t.group=a,this._updateIndexes(o)}},{key:"_insertNearAGroup",value:function(e){var t=e.tab,i=e.tabLabelContainer,a=e.index;a=Math.max(0,Math.min(a,this._tabs.length));var n=this._tabs[a-1],s=this._tabs[a],o=s?s.group:void 0;n&&null!==n.group&&s&&null!==o?(s.tabLabelContainer.parentElement.insertBefore(i,s.tabLabelContainer),s.parentElement.insertBefore(t,s),t.group=o):s?null!==o?(this.$.tabStrip.insertBefore(i,this._groupLabels[this._groups.indexOf(o)]),this.$.tabContentSection.insertBefore(t,this.$.tabContentSection.querySelector('smart-tab-items-group[label="'+o+'"]'))):(this.$.tabStrip.insertBefore(i,s.tabLabelContainer),this.$.tabContentSection.insertBefore(t,s)):(this.$.tabStrip.insertBefore(i,this._addNewTab||null),this.$.tabContentSection.appendChild(t)),this._tabLabelContainers.splice(a,0,i),this.$.dropDownButtonDropDown.insertBefore(e.dropDownLabelContainer,this.$.dropDownButtonDropDown.children[a]||null),this._tabs.splice(a,0,t),this._updateIndexes(a)}},{key:"_insertNoGrouping",value:function(e){var t=Math.max(0,Math.min(e.index,this._tabs.length)),i=e.tab,a=e.tabLabelContainer;this.$.tabStrip.insertBefore(a,this._tabLabelContainers[t]||this._addNewTab||null),this.$.tabContentSection.insertBefore(i,this._tabs[t]||null),this._tabLabelContainers.splice(t,0,a),this.$.dropDownButtonDropDown.insertBefore(e.dropDownLabelContainer,this.$.dropDownButtonDropDown.children[t]||null),this._tabs.splice(t,0,i),this._updateIndexes(t)}},{key:"_keydownHandler",value:function(e){var t=e.key;if(!((this.isInShadowDOM?this.getRootNode().activeElement:document.activeElement)!==this||-1===["ArrowLeft","ArrowDown","ArrowRight","ArrowUp","End","Home","Enter"," ","Escape"].indexOf(t)||this.disabled||this.readonly||"none"===this.selectionMode||!this.allowToggle&&null===this.selectedIndex||this._reordering||this._swiping)){e.preventDefault();var i,a,n=this._tabs.length-1,s=0;switch(t){case"ArrowLeft":case"ArrowUp":if(this.collapsible&&e.ctrlKey)return void("ArrowLeft"===t?"right"===this.tabPosition?this.expand():"left"===this.tabPosition&&this.collapse():"ArrowUp"===t&&("bottom"===this.tabPosition?this.expand():"top"===this.tabPosition&&this.collapse()));if(s=-1,0===this.selectedIndex){a=!0;break}i=this.selectedIndex+s;break;case"ArrowRight":case"ArrowDown":if(this.collapsible&&e.ctrlKey)return void("ArrowRight"===t?"right"===this.tabPosition?this.collapse():"left"===this.tabPosition&&this.expand():"ArrowDown"===t&&("bottom"===this.tabPosition?this.collapse():"top"===this.tabPosition&&this.expand()));if(s=1,this.selectedIndex===n){a=!0;break}i=this.selectedIndex+s;break;case"End":if(this.selectedIndex===n){a=!0;break}i=n;break;case"Home":if(0===this.selectedIndex){a=!0;break}i=0;break;case"Enter":case" ":if(!this.allowToggle)return;if(this._focusedItem){this.select(this._focusedItem.index);var o=this._focusedItem.tabLabelContainer.closest(".smart-tab-group-drop-down");o&&this._openGroupDropDown(o.groupContainer)}return;case"Escape":return void(this._openDropDown&&this._closeGroupDropDown())}if(this.allowToggle&&this._tabs.length>0){this._focusedItem?this._focusedItem.tabLabelContainer.removeAttribute("focus"):this._focusedItem=this._focusedItem||this._tabs[this.selectedIndex]||this._tabs[0],this._focusedItem=this._tabs[Math.min(Math.max(0,this._focusedItem.index+s),n)],this._focusedItem.tabLabelContainer.setAttribute("focus",""),this.ensureVisible(this._focusedItem.index);var r=this._focusedItem.tabLabelContainer.closest(".smart-tab-group-drop-down");r&&r.groupContainer?(this._openDropDown&&this._openDropDown!==r.dropDown&&this._closeGroupDropDown(),this._openGroupDropDown(r.groupContainer)):this._openDropDown&&this._closeGroupDropDown()}else a||this.select(i)}}},{key:"_labelContainerHandler",value:function(e,t,i){var a=this,n="up"===i&&a._downTarget===e;if("down"===i&&(a._downTarget=e,"click"===a.selectionMode&&e!==a._addNewTab))if(Smart.Utilities.Core.isMobile&&null===e.tab.group){var s=a.$.tabStrip[a._orientationSettings.scrollDirection];setTimeout((function(){s===a.$.tabStrip[a._orientationSettings.scrollDirection]&&(a._ripple(t,e)&&a._openDropDown&&a._openDropDown.contains(e)&&(a._openDropDown.rippleInProgress=!0))}),100)}else{a._ripple(t,e)&&a._openDropDown&&a._openDropDown.contains(e)&&(a._openDropDown.rippleInProgress=!0)}if(e!==a._addNewTab){var o=e.tab.index,r=!(a._reordering&&void 0!==a._reorderedIndex);n&&o===a.selectedIndex&&(a._closeGroupDropDown(),r&&null===e.tab.group&&a._toggleCollapsedState()),!a._swiping&&(r&&"click"===a.selectionMode&&n||!a._reordering&&(a.selectionMode===i||"mouseenter"===a.selectionMode&&"mouseover"===i))&&a._select(o,!0),a._reordering||a._swiping||"click"!==a.selectionMode&&"dblclick"!==a.selectionMode||("mouseover"!==i||e.hasAttribute("selected")?"mouseout"===i&&e.removeAttribute("hover"):e.setAttribute("hover","")),a.reorder&&"down"===i&&null===e.tab.group&&a._reorderItems.length>1&&(a._getTabCoordinates(),a._reordering=!0,a.setAttribute("dragged",""),e.hasAttribute("hover")&&(a._draggedHoveredTab=e),0===a._groups.length?a._draggedIndex=e.tab.index:a._draggedIndex=Array.from(a.$.tabStrip.children).indexOf(e))}else a._addNewTabHandler(e,i,n)}},{key:"_labelSizeChangeHandler",value:function(e){var t,i=e.detail.size;"shrink"!==this.tabLayout&&(t=e.target instanceof Smart.TabItem?e.target.tabLabelContainer:this._groupLabels[this._groups.indexOf(e.target.label)],null!==i?t.style[this._orientationSettings.dimension]=parseInt(i,10)+"px":t.style.removeProperty(this._orientationSettings.dimension),this._applyTabOverflow())}},{key:"_openGroupDropDown",value:function(e){e&&(this._openDropDown&&this._openDropDown.$.addClass("smart-hidden"),e.dropDown.$.removeClass("smart-hidden"),this._positionGroupDropDown(e),this._openDropDown=e.dropDown,e.removeAttribute("hover"))}},{key:"_orderTabs",value:function(){var e=[],t=[],i=!0,a=!1;if(0===this.getElementsByTagName("smart-tab-items-group").length)for(var n=0;n<this._tabs.length;n++){var s=this._tabs[n],o=s.index;if(i&&null!==o&&(i=!1),-1!==e.indexOf(o||0)&&(a=!0,null!==o))break;e.push(o||0),t.push({tab:s,index:o})}if(!a){var r=e.slice(0).sort((function(e,t){return e-t}));JSON.stringify(e)===JSON.stringify(r)&&(i=!0)}if(i||a){i||this.warn(this.localize("ambiguousIndexes"));for(var l=0;l<this._tabs.length;l++)this._tabs[l]._setIndex(l)}else{t.sort((function(e,t){return e.index-t.index}));for(var d=0;d<t.length;d++){var h=t[d].tab;h._setIndex(d),this.$.tabContentSection.removeChild(h)}for(var u=0;u<t.length;u++){var c=t[u].tab;this.$.tabContentSection.appendChild(c),this._tabs[u]=c}}}},{key:"_populateTabStrip",value:function(){for(var e=document.createDocumentFragment(),t=[],i=[],a=[],n=null,s=0;s<this._tabs.length;s++){var o=this._tabs[s],r=o.parentElement,l=r instanceof Smart.TabItemsGroup?r.label:null;o.group=l;var d=this._addTabLabelContainer(o),h=d.tabLabelContainer,u=d.dropDownLabelContainer;this.selectedIndex===s&&(h.$.addClass("smart-tab-selected"),h.setAttribute("selected",""),n=h),o.tabLabelContainer=h,h.tab=o,t.push(h),null===l?e.appendChild(h):this._addGroupElements({documentFragment:e,groups:i,groupLabels:a,i:s,group:l,tabLabelContainer:h,smartTabItemsGroup:r}),this.$.dropDownButtonDropDown.appendChild(u)}this.$.tabStrip.appendChild(e),this._tabLabelContainers=t,this._groups=i,this._groupLabels=a,this._positionTabSelectionBar(n,!0)}},{key:"_positionTabSelectionBar",value:function(e,t){var i=this;if(e){var a,n,s,o,r=i.tabPosition;t&&(i.$.tabSelectionBar.style.transition="none"),e.tab.group&&(e=i._groupLabels[i._groups.indexOf(e.tab.group)]),"top"===r||"bottom"===r?("wrap"===i.tabLayout?(n=e.offsetTop,"top"===r&&(n+=e.offsetHeight-i.$.tabSelectionBar.offsetHeight),n+="px"):n=null,o=null,a=-i.$.tabStrip.scrollLeft+e.offsetLeft+"px",s=e.offsetWidth+"px"):"left"!==r&&"right"!==r||("wrap"===i.tabLayout?(a=e.offsetLeft,"left"===r&&(a+=e.offsetWidth-i.$.tabSelectionBar.offsetWidth),a+="px"):a=null,s=null,n=-i.$.tabStrip.scrollTop+e.offsetTop+"px",o=e.offsetHeight+"px"),Smart.Utilities.Core.isMobile&&i.hasAnimation&&!t?requestAnimationFrame((function(){requestAnimationFrame(l)})):l(),t&&!i._tabPositionChanging&&requestAnimationFrame((function(){return i.$.tabSelectionBar.style.transition=null}))}function l(){i.$.tabSelectionBar.style.top=n,i.$.tabSelectionBar.style.height=o,i.$.tabSelectionBar.style.left=a,i.$.tabSelectionBar.style.width=s}}},{key:"_positionGroupDropDown",value:function(e){var t=this.tabPosition,i=e.dropDown,a=window.getComputedStyle(this.$.tabsHeaderSection),n=parseFloat(a.paddingLeft),s=parseFloat(a.paddingTop);if("top"===t||"bottom"===t){if(i.style.left=e.offsetLeft-this.$.tabStrip.scrollLeft+n+"px","top"===t)i.style.top=e.offsetTop+e.offsetHeight+s+"px";else{var o=e.getBoundingClientRect().top-this.$.container.getBoundingClientRect().top+s;0,i.style.top=o+"px"}}else i.style.top=e.offsetTop-this.$.tabStrip.scrollTop+s+"px",i.style.left="left"===t?e.offsetLeft+e.offsetWidth+n+"px":e.getBoundingClientRect().left-this.$.container.getBoundingClientRect().left+n+"px"}},{key:"_processDataSource",value:function(){var e=this.dataSource;function t(e,i){var a;if(Array.isArray(e.items)&&e.items.length>0){a=document.createElement("smart-tab-items-group");for(var n=0;n<e.items.length;n++)e.items[n].items||t(e.items[n],a)}else a=document.createElement("smart-tab-item"),!0===e.closeButtonHidden&&(a.closeButtonHidden=!0),void 0!==e.content&&(a.innerHTML=e.content),void 0!==e.index&&(a.index=e.index),!0===e.selected&&(a.selected=e.selected);void 0!==e.label&&(a.label=e.label),void 0!==e.labelSize&&(a.labelSize=e.labelSize),i.appendChild(a)}if(this.$.tabContentSection.innerHTML="",null!==e)for(var i=0;i<e.length;i++){t(e[i],this.$.tabContentSection)}}},{key:"_processHTML",value:function(){this._getTabs(),this._orderTabs(),this._validateInitialSelection(),this._populateTabStrip(),this.addNewTab&&this._insertAddNewTab(),this._getReorderItems(),this._applyTabOverflow(),this.ensureVisible(this.selectedIndex),this.$.hiddenInput.value=this.selectedIndex}},{key:"_removeInlineStyle",value:function(){var e=this.$.tabStrip;if(this._inlineStyleTabStripChildren){for(var t=e.children,i=0;i<t.length;i++)t[i].removeAttribute("style"),t[i].firstElementChild.firstElementChild.classList.remove("smart-tab-label-text-container-full-height");delete this._inlineStyleTabStripChildren}this._inlineStyleTabStrip&&(e.removeAttribute("style"),delete this._inlineStyleTabStrip),e.$.removeClass("shrink-tabs"),e.$.removeClass("shrink-tabs-vertical")}},{key:"_reorderTabs",value:function(e,t){function i(e,t,i){var a=e[t];e.splice(t,1),e.splice(i,0,a)}var a=this.$.tabStrip[this._orientationSettings.scrollDirection];if(0===this._groups.length){var n,s=this._tabs,o=this._tabLabelContainers,r=e>t?t:t+1;this.selectedIndex===e?this.selectedIndex=t:this.selectedIndex<=t&&this.selectedIndex>e?this.selectedIndex--:this.selectedIndex>=t&&this.selectedIndex<e&&this.selectedIndex++,n=o[r]?o[r]:this.addNewTab?this._addNewTab:null,this.$.tabStrip.insertBefore(o[e],n),this.$.dropDownButtonDropDown.insertBefore(this.$.dropDownButtonDropDown.children[e],this.$.dropDownButtonDropDown.children[r]||null),this.$.tabContentSection.insertBefore(s[e],s[r]||null),i(s,e,t),i(o,e,t),this._updateTabIndexes()}else this._reorderTabsGrouping(e,t);this.$.tabStrip[this._orientationSettings.scrollDirection]=a,this.$.fireEvent("reorder",{newIndex:t,originalIndex:e}),this._reorderedIndex=t,this._positionTabSelectionBar(this._tabLabelContainers[this.selectedIndex],!0),this.$.hiddenInput.value=this.selectedIndex}},{key:"_reorderTabsGrouping",value:function(e,t){var i=this.$.tabStrip.children,a=this.$.tabContentSection.children,n=e>t?t:t+1,s=this._tabs[this.selectedIndex];this.$.tabStrip.insertBefore(i[e],i[n]||null),this.$.tabContentSection.insertBefore(a[e],a[n]||null),this._groupLabels=Array.from(this.$.tabStrip.getElementsByClassName("smart-tab-group-container")),this._groups=[];for(var o=0;o<this._groupLabels.length;o++)this._groups.push(this._groupLabels[o].group);this._tabs=Array.from(this.$.tabContentSection.getElementsByTagName("smart-tab-item"));for(var r=document.createDocumentFragment(),l=[],d=0;d<this._tabs.length;d++)r.appendChild(this.$.dropDownButtonDropDown.children[this._tabs[d].index].cloneNode(!0));this.$.dropDownButtonDropDown.innerHTML="",this.$.dropDownButtonDropDown.appendChild(r);for(var h=0;h<this.$.tabStrip.childElementCount;h++){var u=this.$.tabStrip.children[h];u.$.hasClass("smart-tab-label-container")&&u!==this._addNewTab?l.push(u):u.$.hasClass("smart-tab-group-container")&&(l=l.concat(Array.from(u.dropDown.children)))}this._tabLabelContainers=l,this._updateTabIndexes(),s&&(this.selectedIndex=s.index)}},{key:"_resize",value:function(e){if(this._resizing){var t,i=this._orientationSettings,a=e[i.coordinate]-this._resizeFrom,n=this._getCorrespondingCustomElement(this._tabToResize);t=null===n.labelSize?this._tabToResize[i.size]:n.labelSize;var s=Math.max(10,t+a);s!==t&&(n._preventPropertyChangedHandler=!0,n.labelSize=s,this._tabToResize.style[i.dimension]=parseInt(s,10)+"px"),this.$resizeToken.addClass("smart-hidden"),this._applyTabOverflow(),this._resizing=!1,this.removeAttribute("resizing")}}},{key:"_ripple",value:function(e,t){if(this.hasRippleAnimation){var i=document.createElement("div");return i.className="ripple-agent",t.firstElementChild.appendChild(i),setTimeout((function(){t.firstElementChild.removeChild(i)}),1e3),Smart.Utilities.Animation.Ripple.animate(i,e.pageX,e.pageY),!0}}},{key:"_scrollButtonClickHandler",value:function(e){var t=this.$.tabStrip,i=e.target.closest("smart-repeat-button")===this.$.scrollButtonNear?-1:1;if("paging"===this.scrollMode){var a=this._orientationSettings,n={};return this._dragStartDetails={startX:0,startY:0,pageX:0,pageY:0,startTime:Date.now(),target:e.target},this._wheelInProgress=!0,n[a.coordinate]=-i*(t[a.size]/1.1428571428571428),void this._endSwiping(n,this._dragStartDetails.startTime+175)}this.hasAttribute("horizontal")?t.scrollLeft+=10*i:t.scrollTop+=10*i,this._updateScrollButtonVisibility(!0)}},{key:"_select",value:function(e,t,i){var a=this,n=a.hasAnimation;if(void 0===i&&(i=a.selectedIndex),e!==i||a.allowToggle&&(!a.allowToggle||"mouseenter"!==a.selectionMode)){var s=a._tabs[e];if(a._focusedItem&&a._focusedItem.tabLabelContainer.removeAttribute("focus"),null!==i){var o=a._tabs[i];n?a._animateSelection(s,o,e>i):o.$.addClass("smart-visibility-hidden"),o.selected=!1,a._tabLabelContainers[i].$.removeClass("smart-tab-selected"),a._tabLabelContainers[i].removeAttribute("selected"),a.closeButtons&&"selected"===a.closeButtonMode&&a._disableCloseButton(i)}!a.allowToggle||null!==e&&(void 0!==arguments[2]?i:a.selectedIndex)!==e?(s.selected=!0,a.$.tabContentSection.removeAttribute("show-placeholder"),null!==i&&n||s.$.removeClass("smart-visibility-hidden"),a.selectedIndex=e,a._focusedItem=a._tabs[e],a._focusedItem.tabLabelContainer.$.addClass("smart-tab-selected"),a._focusedItem.tabLabelContainer.setAttribute("selected",""),a._positionTabSelectionBar(a._focusedItem.tabLabelContainer,null===i)):(a.selectedIndex=null,a.$.tabContentSection.setAttribute("show-placeholder",""),a.allowToggle&&(a._focusedItem=a._tabs[null===e?i:e],a._focusedItem&&a._focusedItem.tabLabelContainer.setAttribute("focus",""))),null!==e&&(a._tabLabelContainers[e].removeAttribute("hover"),a.closeButtons&&"selected"===a.closeButtonMode&&a._enableCloseButton(e)),t&&(a.$.hiddenInput.value=a.selectedIndex,a.$.fireEvent("change",{index:a.selectedIndex,oldIndex:i})),a._closeGroupDropDown(),s&&null!==s.group?(a._selectedGroup&&a._selectedGroup.$.removeClass("smart-tab-group-selected"),null!==a.selectedIndex&&(a._selectedGroup=a._groupLabels[a._groups.indexOf(s.group)],a._selectedGroup.$.addClass("smart-tab-group-selected"))):a._selectedGroup&&(a._selectedGroup.$.removeClass("smart-tab-group-selected"),delete a._selectedGroup),a.$.hiddenInput.value=a.selectedIndex}else a.$.hiddenInput.value=a.selectedIndex}},{key:"_selectStartHandler",value:function(e){(this._reordering||this._resizing)&&e.preventDefault()}},{key:"_setLabel",value:function(e,t,i){var a=e?document.getElementById(e):null;if(null!==a&&"template"===a.tagName.toLowerCase()){var n=document.importNode(a.content,!0);if(t.appendChild(n),i){var s=document.importNode(a.content,!0);i.appendChild(s)}}else""===e&&(e="&nbsp;"),t.innerHTML=e,i&&(i.innerHTML=e)}},{key:"_showCloseButton",value:function(e){e.closeButtonEnabled&&(e.firstElementChild.children[0].$.addClass("smart-close-button-enabled"),e.firstElementChild.children[1].$.removeClass("smart-hidden"))}},{key:"_tabContentSectionTransitionendHandler",value:function(e){var t=e.target;t instanceof Smart.TabItem&&(t===this._animatedOldTab?(t.$.addClass("smart-hidden"),t.$.removeClass("animate"),t.$.removeClass(this._animatedOldTab.classToRemove),t.$.removeClass("smart-hidden"),delete this._animatedOldTab):t===this._animatedTab&&(t.$.removeClass("animate"),delete this._animatedTab),t.classList.remove("left"),t.classList.remove("right"),t.classList.remove("top"),t.classList.remove("bottom"))}},{key:"_tabsHeaderItemsWheelHandler",value:function(e){var t=this._orientationSettings;if(this.enableMouseWheelAction&&!this._wheelInProgress&&!this.disabled&&this.$.tabStrip[t.size]!==this.$.tabStrip[t.scrollSize]){e.preventDefault(),this._dragStartDetails={startX:e.pageX,startY:e.pageY,pageX:e.pageX,pageY:e.pageY,startTime:Date.now(),target:e.target},this._wheelInProgress=!0;var i={};i[t.coordinate]=e[t.coordinate]+(e.deltaY>0?-1:1)*t.wheelOffset,this._endSwiping(i,this._dragStartDetails.startTime+100)}}},{key:"_tabStripHandler",value:function(e,t){var i=t.type;if("down"===i&&void 0!==this._tabToResize)return this._resizing=!0,void(this._tabsHeaderSectionCoordinate=this.$.tabsHeaderSection.getBoundingClientRect()[this._orientationSettings.edge]);"down"===i&&Smart.Utilities.Core.isMobile&&(this._dragStartDetails={startX:t.pageX,startY:t.pageY,pageX:t.pageX,pageY:t.pageY,startTime:Date.now(),originalTime:Date.now(),target:t.originalEvent.target});var a=e.closest("smart-repeat-button");if("up"===i&&a)return this.focus(),void(this.resize&&this._getTabCoordinates());if(e.classList.contains("smart-tab-close-button"))if("up"===i){if(e===this._downTarget){var n=e.parentElement.parentElement.tab.index;return void(this.$.fireEvent("closing",{index:n}).defaultPrevented||(this.remove(n),this.$.fireEvent("close",{index:n})))}}else{if("down"===i)return void(this._downTarget=e);this._reordering||this._swiping||("mouseover"===i?e.setAttribute("hover",""):"mouseout"===i&&e.removeAttribute("hover"))}var s=e.closest(".smart-tab-label-container");if(null===s){var o=e.closest(".smart-tab-group-container");null!==o&&this._groupContainerHandler(o,i)}else this._labelContainerHandler(s,t,i)}},{key:"_tabStripMouseleaveHandler",value:function(){this.resize&&!this._resizing&&this.hasAttribute("resizing")&&this.removeAttribute("resizing")}},{key:"_tabStripMoveHandler",value:function(e){if(this._dragStartDetails&&!this._dragStartDetails.checked&&(Date.now()-this._dragStartDetails.originalTime<500?(this._endReordering(void 0,void 0),this._dragStartDetails.checked=!0):delete this._dragStartDetails),this._dragStartDetails&&(Math.abs(this._dragStartDetails.pageX-e.pageX)>=5||Math.abs(this._dragStartDetails.pageY-e.pageY)>=5)){var t=this._orientationSettings,i=this._dragStartDetails[t.coordinate]-e[t.coordinate],a=this.$.tabStrip[t.scrollDirection];return this.$.tabStrip[t.scrollDirection]+=i,a!==this.$.tabStrip[t.scrollDirection]&&this._updateScrollButtonVisibility(),this._dragStartDetails={startX:this._dragStartDetails.startX,startY:this._dragStartDetails.startY,pageX:e.pageX,pageY:e.pageY,startTime:this._dragStartDetails.startTime,originalTime:this._dragStartDetails.originalTime,target:e.originalEvent.target,checked:this._dragStartDetails.checked},void(this._swiping=!0)}if(this.resize&&!this._resizing&&!this._reordering&&"shrink"!==this.tabLayout){for(var n,s=this._orientationSettings,o=e[s.coordinate],r=this._tabCoordinates,l=0;l<r.length;l++){var d=r[l][s.to];if(o>=d-4&&o<=d+4){n=this._reorderItems[l],this._resizeFrom=o;break}}void 0!==n?(this._tabToResize=n,this.setAttribute("resizing","")):(this._tabToResize=void 0,this.removeAttribute("resizing"))}}},{key:"_toggleCollapsedState",value:function(){this.collapsible&&(this.collapsed?this.expand():this.collapse())}},{key:"_toggleNavigationElementsVisibility",value:function(){var e,t=this._tabs.length;if(0===t)e="addClass";else{if(1!==t)return;e="removeClass"}"scroll"===this.tabLayout&&"scroll"===this.overflow?(this.$scrollButtonNear[e]("smart-hidden"),this.$scrollButtonFar[e]("smart-hidden")):"dropDown"===this.tabLayout&&this.$dropDownButton[e]("smart-hidden")}},{key:"_updateIndexes",value:function(e){null!==this.selectedIndex&&e<=this.selectedIndex&&this.selectedIndex++,this._updateTabIndexes()}},{key:"_updateScrollButtonVisibility",value:function(e){if("scroll"===this.tabLayout&&"hidden"!==this.overflow){var t=this.$tabsHeaderSection,i=this.$.tabStrip,a=this._orientationSettings,n=!0,s=!0;if(0===Math.round(i[a.scrollDirection])&&(n=!1),Math.round(i[a.size]+i[a.scrollDirection])>=Math.round(i[a.scrollSize])-1&&(s=!1),"auto"===this.overflow){if(n&&s)return this.$scrollButtonNear.removeClass("smart-hidden"),this.$scrollButtonFar.removeClass("smart-hidden"),t.removeClass("one-button-shown"),void(this._tabLabelContainers[this.selectedIndex]&&this._positionTabSelectionBar(this._tabLabelContainers[this.selectedIndex],e));n?this.$scrollButtonNear.removeClass("smart-hidden"):this.$scrollButtonNear.addClass("smart-hidden"),s?this.$scrollButtonFar.removeClass("smart-hidden"):this.$scrollButtonFar.addClass("smart-hidden"),t.addClass("one-button-shown"),this._getTabCoordinates()}else"scroll"!==this.overflow||this.disabled||(this.$.scrollButtonNear.disabled=!n,this.$.scrollButtonFar.disabled=!s);this._tabLabelContainers[this.selectedIndex]&&this._positionTabSelectionBar(this._tabLabelContainers[this.selectedIndex],e)}else this._positionTabSelectionBar(this._tabLabelContainers[this.selectedIndex],e)}},{key:"_updateTabIndexes",value:function(){if(this._tabs.length>0)for(var e=0;e<this._tabs.length;e++)this._tabs[e]._setIndex(e);else this.selectedIndex=null;this.$.hiddenInput.value=this.selectedIndex}},{key:"_validateIndex",value:function(e,t){if(isNaN(parseInt(e,10))||"object"===a(e)){this.error(this.localize("invalidIndex",{method:t}))}}},{key:"_validateInitialSelection",value:function(){for(var e=this.selectedIndex,t=0;t<this._tabs.length;t++){var i=this._tabs[t];e===t?(i.selected=!0,i.$.removeClass("smart-visibility-hidden")):i.selected?null===e?(e=t,i.$.removeClass("smart-visibility-hidden")):(i.selected=!1,i.$.addClass("smart-visibility-hidden")):i.$.addClass("smart-visibility-hidden")}this._tabs.length>0&&null===e&&!this.allowToggle&&(e=0,this._tabs[0].selected=!0,this._tabs[0].$.removeClass("smart-visibility-hidden")),this.selectedIndex=e,null!==this.selectedIndex&&(this._focusedItem=this._tabs[this.selectedIndex])}}],[{key:"properties",get:function(){return{addNewTab:{value:!1,type:"boolean"},allowToggle:{value:!1,type:"boolean"},closeButtonMode:{value:"default",allowedValues:["default","selected"],type:"string"},closeButtons:{value:!1,type:"boolean"},collapsed:{value:!1,type:"boolean"},collapsible:{value:!1,type:"boolean"},dataSource:{value:null,type:"array?",reflectToAttribute:!1},enableMouseWheelAction:{value:!1,type:"boolean"},messages:{value:{en:{ambiguousIndexes:"smart-tabs: Initially set smart-tab-item indexes are ambiguous and are ignored in favour of the HTML structure.",detailsObjectRequired:'smart-tabs: The method "insert" requires a details Object to be passed as a second argument.',invalidIndex:'smart-tabs: "{{method}}" method accepts an index of type number.',referenceNodeNotChild:"smart-tabs: Passed {{argument}} is not part of this smart-tabs element.",tabItemRequired:'smart-tabs: The method "{{method}}" requires a "smart-tab-item" element to be passed as an argument.'}},type:"object",extend:!0},name:{value:"",type:"string"},overflow:{value:"auto",allowedValues:["auto","hidden","scroll"],type:"string"},reorder:{value:!1,type:"boolean"},resize:{value:!1,type:"boolean"},scrollButtonsPosition:{value:"both",allowedValues:["near","far","both"],type:"string"},scrollMode:{value:"paging",allowedValues:["paging","continuous"],type:"string"},selectedIndex:{value:null,type:"number?"},selectionMode:{value:"click",allowedValues:["click","dblclick","mouseenter","none"],type:"string"},tabLayout:{value:"scroll",allowedValues:["scroll","dropDown","wrap","shrink"],type:"string",defaultReflectToAttribute:!0},tabPosition:{value:"top",allowedValues:["top","bottom","left","right","hidden"],type:"string"},tabTextOrientation:{value:"horizontal",allowedValues:["horizontal","vertical"],type:"string"}}}},{key:"listeners",get:function(){return{closeButtonVisibilityChange:"_closeButtonVisibilityChangeHandler",indexChange:"_indexChangeHandler",keydown:"_keydownHandler",labelSizeChange:"_labelSizeChangeHandler",resize:"_applyTabOverflow",styleChanged:"_applyTabOverflow","container.dblclick":"_containerHandler","container.down":"_containerHandler","container.mouseout":"_containerHandler","container.mouseover":"_containerHandler","scrollButtonFar.click":"_scrollButtonClickHandler","scrollButtonNear.click":"_scrollButtonClickHandler","tabContentSection.transitionend":"_tabContentSectionTransitionendHandler","tabsHeaderItems.wheel":"_tabsHeaderItemsWheelHandler","tabStrip.mouseleave":"_tabStripMouseleaveHandler","tabStrip.move":"_tabStripMoveHandler","document.move":"_documentMoveHandler","document.selectstart":"_selectStartHandler","document.up":"_documentUpHandler"}}},{key:"requires",get:function(){return{"Smart.RepeatButton":"smart.button.js"}}},{key:"styleUrls",get:function(){return["smart.tabs.css"]}}]),t}())},70:function(e,t,i){"use strict";function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function n(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function s(e,t){return!t||"object"!==a(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function o(e){return(o=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function r(e,t){return(r=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}Object.defineProperty(t,"__esModule",{value:!0}),t.smartDockingLayout=void 0,i(0),i(1),i(2),i(32),i(28),i(41),i(71);var l=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),s(this,o(t).apply(this,arguments))}var i,a,l;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&r(e,t)}(t,Smart.Component),i=t,(a=[{key:"name",get:function(){return"smartDockingLayout"}}])&&n(i.prototype,a),l&&n(i,l),t}();t.smartDockingLayout=l},71:function(e,t,i){"use strict";function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function n(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function s(e,t){return!t||"object"!==a(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function o(e,t,i){return(o="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,i){var a=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=r(e)););return e}(e,t);if(a){var n=Object.getOwnPropertyDescriptor(a,t);return n.get?n.get.call(i):n.value}})(e,t,i||e)}function r(e){return(r=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}Smart("smart-docking-layout",function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),s(this,r(t).apply(this,arguments))}var i,d,h;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(t,Smart.ContentElement),i=t,h=[{key:"properties",get:function(){return{autoLoadState:{value:!1,type:"boolean"},autoSaveState:{value:!1,type:"boolean"},draggable:{value:!0,type:"boolean"},floatable:{value:!0,type:"boolean"},hideSplitterBars:{value:!1,type:"boolean"},layout:{value:[],type:"array",reflectToAttribute:!1},liveResize:{value:!1,type:"boolean"},messages:{value:{en:{invalidNode:'{{elementType}}: "{{method}}" method accepts an instance of Smart.TabsWindow',invalidNodeRemove:'{{elementType}}: "{{method}}" method accepts an instance of Smart.TabsWindow that is a child of the DockingLayout.',invalidNodeType:'{{elementType}}: The method "{{method}}" requires a "smart-tabs-window" element to be passed as an argument.',invalidTargetNode:'{{elementType}}: The method "{{method}}" requires an index of an item that is not hidden/closed. Only visible items that are part of the Layout are valid.',invalidIndex:'{{elementType}}: "{{method}}" method accepts an index of type number.',noId:"smartDockingLayout requires an id in order to save/load a state."}},type:"object",extend:!0},resizeStep:{value:5,type:"number"},snapMode:{value:"advanced",allowedValues:["simple","advanced"],type:"string"}}}},{key:"listeners",get:function(){return{"autoHideWindow.close":"_autoHideWindowCloseHandler","autoHideWindow.resizeEnd":"_autoHideWindowResizeEndHandler","container.dock":"_dockEventHandler",move:"_moveHandler","document.down":"_documentDownHandler","document.move":"_documentMoveHandler","document.up":"_documentUpHandler","document.selectstart":"_documentSelectStartHandler","document.dragstart":"_documentDragStartHandler","container.tabStripResize":"_containerTabStripResizeHandler","itemsContainer.close":"_itemsContainerCloseHandler","itemsContainer.autoHide":"_itemsContainerAutoHideHandler","itemsContainer.resizeEnd":"_itemsContainerResizeHandler",keydown:"_keyDownHandler",keyup:"_keyUpHandler",mouseleave:"_mouseLeaveHandler"}}},{key:"styleUrls",get:function(){return["smart.dockinglayout.css"]}},{key:"requires",get:function(){return{"Smart.TabsWindow":"smart.window.js","Smart.Splitter":"smart.splitter.js"}}}],(d=[{key:"template",value:function(){return'<div id="container">\n                    <smart-splitter id="horizontalHiddenItemsContainer" class="smart-horizontal-hidden-items-container" orientation="horizontal">\n                        <smart-splitter-item class="smart-docking-layout-item-holder">\n                            <smart-splitter id="verticalHiddenItemsContainer" class="smart-vertical-hidden-items-container">\n                                <smart-splitter-item class="smart-docking-layout-item-holder">\n                                    <smart-splitter id="itemsContainer" class="smart-items-container">\n                                        <content></content>\n                                        <smart-splitter-item id="placeholderItem" class="smart-placeholder" pinned>\n                                            <smart-tabs-window tab-position="hidden" opened header-buttons=\'[]\'>\n                                                <smart-tab-item></smart-tab-item>\n                                            </smart-tabs-window>\n                                        </smart-splitter-item>\n                                    </smart-splitter>\n                                </smart-splitter-item>\n                            </smart-splitter>\n                        </smart-splitter-item>\n                    </smart-splitter>\n                    <smart-tabs-window id="tabsWindowFeedback" class="smart-tabs-window-feedback smart-hidden"></smart-tabs-window>\n                    <smart-tabs-window id="autoHideWindow" class="smart-docking-layout-auto-hide-window" pinned header-buttons=\'["close", "dock"]\' tab-position="hidden">\n                        <smart-tab-item></smart-tab-item>\n                    </smart-tabs-window>\n                </div>'}},{key:"propertyChangedHandler",value:function(e,i,a){switch(e){case"autoSaveState":this._handleAutoSave();break;case"layout":this._handleLayout();break;case"liveResize":case"resizeStep":for(var n=this.getElementsByTagName("smart-splitter"),s=0;s<n.length;s++)n[s][e]=a;"liveResize"===e&&(this.$.autoHideWindow[e]=a);break;case"snapMode":this._handleSnapping(),this._snapFeedback=void 0;break;case"hideSplitterBars":this._setSplitterBarVisibility();break;default:o(r(t.prototype),"propertyChangedHandler",this).call(this,e,i,a)}}},{key:"ready",value:function(){o(r(t.prototype),"ready",this).call(this)}},{key:"render",value:function(){if(this.autoLoadState){var e=this.loadState();e&&(this.layout=e)}this.$.itemsContainer.liveResize=this.liveResize,this.$.itemsContainer.resizeStep=this.resizeStep,this._handleLayout(),this.$tabsWindowFeedback.removeClass("smart-hidden"),this._setFocusable(),this.checkLicense(),o(r(t.prototype),"render",this).call(this)}},{key:"appendChild",value:function(e){var t=this;if(!t.isCompleted){var i=Array.prototype.slice.call(arguments,2);return HTMLElement.prototype.appendChild.apply(t,i.concat(Array.prototype.slice.call(arguments)))}e?e instanceof Smart.TabsWindow?t.insertBefore(e,null):t.error(t.localize("invalidNodeType",{elementType:t.nodeName.toLowerCase(),method:"appendChild"})):t.error(t.localize("invalidNode",{elementType:t.nodeName.toLowerCase(),method:"appendChild"}))}},{key:"autoHideBottom",value:function(e){this._autoHide(e,"bottom")}},{key:"autoHideLeft",value:function(e){this._autoHide(e,"left")}},{key:"autoHideRight",value:function(e){this._autoHide(e,"right")}},{key:"autoHideTop",value:function(e){this._autoHide(e,"top")}},{key:"clearState",value:function(){this.id?window.localStorage.removeItem("smartDockingLayout"+this.id):this.warn(this.localize("noId"))}},{key:"dock",value:function(e){this._dock(e)}},{key:"undock",value:function(e){if("number"==typeof e?e=this._items[e]:"string"==typeof e&&(e=this._getItemById(e)),e&&((this.shadowRoot||this).contains(e)||this._getClosestDockingLayout(e)===this)){var t=e.getRootNode()&&e.getRootNode().host?e.getRootNode().host:void 0,i=e.closest("smart-splitter-item")||(t?t.closest("smart-splitter-item"):void 0);if(i){var a,n=i.getBoundingClientRect();if(e instanceof Smart.TabsWindow){e.autoHide?(this.$.autoHideWindow.close(),e._autoHideWindow&&(e.style.width=e._autoHideWindow.offsetWidth+"px",e.style.height=e._autoHideWindow.offsetHeight+"px"),"left"===e.tabPosition||"right"===e.tabPosition?e.style.height=this.offsetHeight+"px":e.style.width=this.offsetWidth+"px"):(e.style.width=e.offsetWidth+"px",e.style.height=e.offsetHeight+"px"),e.windowParent="body",e.opened=!0,e.autoHide&&(e.tabPosition="top"),e.autoHide=e.allowToggle=e.pinned=!1,e.style.maxWidth=e.style.maxHeight="",a=e;var s=i.closest("smart-splitter");s.removeChild(i),this._removeUnneccessaryItems(s)}else{if(!(e instanceof Smart.TabItem))return;var o,r=e.closest("smart-tabs-window")||(t?t.closest("smart-tabs-window"):void 0);1===r.items.length?(o=r,i.closest("smart-splitter").removeChild(i)):(o=this._createTabsWindowFromObject({label:e.label}),r.removeChild(e),o.appendChild(e)),"body"!==o.windowParent&&(o.windowParent="body"),o.parentElement!==document.body&&document.body.appendChild(o),o.allowToggle=o.autoHide=o.pinned=!1,o.label=e.label,o.opened=!0,o._parentInfo={closestItem:r,position:e.index},a=o,e=r}e._originalTabPosition?a.tabPosition=e._originalTabPosition:e.autoHide&&(a.tabPosition="top"),a.tabTextOrientation=e._originalTextOrientation||"horizontal",a===e&&(delete a._originalTabPosition,delete a._originalTextOrientation),this._setFloatingItemsHeaderButtons(a),a.style.left=n.left+"px",a.style.top=n.top+"px",a.resizeMode="both";var l=this._items.indexOf(e);if(a.layout=this,l>-1&&(this._items.splice(l,1),a.position&&(a.style.top=a.position.top,a.style.left=a.position.left,delete a.position)),0!==this._items.filter((function(e){return e.opened})).length||this.$.placeholderItem.parentElement||this.$.itemsContainer.appendChild(this.$.placeholderItem),this._validateWindowPosition(a),this._setAutoHidePaddings(),this._noStateChangeFiring||(this._handleAutoSave(),this.$.fireEvent("stateChange",{type:"float",item:a})),document.activeElement!==a){var d=document.scrollingElement||document.documentElement,h=d.scrollLeft,u=d.scrollTop;a.focus(),a.bringToFront(),window.scrollTo(h,u)}}}}},{key:"insertBefore",value:function(e,t,i){var a=this;if(!a.isCompleted){var n=Array.prototype.slice.call(arguments,2);return HTMLElement.prototype.insertBefore.apply(a,n.concat(Array.prototype.slice.call(arguments)))}var s,o=e;if(o instanceof Smart.TabsWindow?((e=document.createElement("smart-splitter-item")).size=o.size||"",e.max=o.max||"",e.min=o.min||"",e.locked=o.locked||!1,e.collapsible=o.collapsible||!1,e.collapsed=o.collapsed||!1,e.appendChild(o)):o instanceof Smart.SplitterItem?o=o.querySelector("smart-tabs-window"):a.error(a.localize("invalidNodeType",{elementType:a.nodeName.toLowerCase(),method:"insertBefore"})),o.opened=o.pinned=!0,o.style.width=o.style.height="",o.style.top=o.style.left="",o.style.paddingTop=o.style.paddingBottom="",o.style.paddingLeft=o.style.paddingRight="",e.style.top=e.style.left="",t){if((s=t.closest("smart-splitter"))===a.$.verticalHiddenItemsContainer||s===a.$.horizontalHiddenItemsContainer?(s=a.$.itemsContainer,t=0===a._items.length?null:"top"===t.tabPosition||"left"===t.tabPosition?a._items[0]:a._items[a._items.length-1]):i&&(s=a.$.itemsContainer),!(t instanceof Smart.TabsWindow))return void a.error(a.localize("invalidNodeType",{elementType:a.nodeName.toLowerCase(),method:"insertBefore"}));s.autoFitMode="end",s.insertBefore(e,s._items.filter((function(e){return e.contains(t)}))[0]),a._items.splice(a._items.indexOf(t),0,o)}else s=a.$.itemsContainer,a._dockingAutoHideTabItem&&(s.autoFitMode="end"),a._items.push(o),a.$.itemsContainer.insertBefore(e);if(s.autoFitMode="proportional",o.autoHide)a._autoHide(o,o.autoHidePosition);else{o.autoHide=o.allowToggle=!1,o._originalTabPosition&&(o.tabPosition=o._originalTabPosition,delete o._originalTabPosition),o._originalTextOrientation&&(o.tabTextOrientation=o._originalTextOrientation,delete o._originalTextOrientation),a._setDockedItemsHeaderButtons(o);var r=document.scrollingElement||document.documentElement,l=r.scrollLeft,d=r.scrollTop;o.focus(),window.scrollTo(l,d)}a._items.filter((function(e){return e.opened})).length>0&&a.$.placeholderItem.parentElement&&a.$.itemsContainer.removeChild(a.$.placeholderItem),o.layout=a,o.minimized=!1,o.maximized=!1,o.locked=!1,o.resizeMode="none",a._handleAutoHiddenSplitterBars(),a._setSplitterBarVisibility(),a._handleAutoSave(),a.$.fireEvent("stateChange",{type:"dock",item:o})}},{key:"insertBeforeItem",value:function(e,t){this._insert(e,t,"top","insertBeforeItem")}},{key:"insertAfterItem",value:function(e,t){this._insert(e,t,"bottom","insertAfterItem")}},{key:"insertIntoLeft",value:function(e,t){this._insert(e,t,"inside-left","insertIntoLeft")}},{key:"insertIntoRight",value:function(e,t){this._insert(e,t,"inside-right","insertIntoRight")}},{key:"insertIntoTop",value:function(e,t){this._insert(e,t,"inside-top","insertIntoTop")}},{key:"insertIntoBottom",value:function(e,t){this._insert(e,t,"inside-bottom","insertIntoBottom")}},{key:"insertLayoutTop",value:function(e){this._insert(0,e,"layout-top","insertLayoutTop")}},{key:"insertLayoutBottom",value:function(e){this._insert(0,e,"layout-bottom","insertLayoutBottom")}},{key:"insertLayoutLeft",value:function(e){this._insert(0,e,"layout-left","insertLayoutLeft")}},{key:"insertLayoutRight",value:function(e){this._insert(0,e,"layout-right","insertLayoutRight")}},{key:"insertOutsideTargetGroupTop",value:function(e,t){this._insert(e,t,"outside-top","insertOutsideTargetGroupTop")}},{key:"insertOutsideTargetGroupBottom",value:function(e,t){this._insert(e,t,"outside-bottom","insertOutsideTargetGroupBottom")}},{key:"insertOutsideTargetGroupLeft",value:function(e,t){this._insert(e,t,"outside-left","insertOutsideTargetGroupLeft")}},{key:"insertOutsideTargetGroupRight",value:function(e,t){this._insert(e,t,"outside-right","insertOutsideTargetGroupRight")}},{key:"getAutoHideItems",value:function(e){function t(e){var t=[];if(!e._items)return t;for(var i=0;i<e._items.length;i++)e._items[i].$.hasClass("smart-docking-layout-item-holder")||t.push(e._items[i].getElementsByTagName("smart-tabs-window")[0]);return t}return e?t("horizontal"===e?this.$.horizontalHiddenItemsContainer:this.$.verticalHiddenItemsContainer):t(this.$.horizontalHiddenItemsContainer).concat(t(this.$.verticalHiddenItemsContainer))}},{key:"getIndex",value:function(e){if(this.isReady&&this._items.length)return this._items.indexOf(e)}},{key:"getItemGroupElement",value:function(e){if(this.isReady&&e&&e instanceof Smart.TabsWindow&&(this.shadowRoot||this).contains(e))return e.closest("smart-splitter")}},{key:"getState",value:function(e){for(var t=this.getAutoHideItems(),i=this.undockedItems,a=[],n=0;n<t.length;n++)a.push(this._createTabsWindowStructure(t[n],e));for(var s=0;s<i.length;s++)a.push(this._createTabsWindowStructure(i[s],e));return[{type:"LayoutGroup",items:a.concat(this._createLayoutStructure(this.$.itemsContainer,e)),orientation:this.$.itemsContainer.orientation}]}},{key:"getClosestSplitterBars",value:function(e){if(this._items&&this._items.length&&("string"==typeof e?e=this._getItemById(e):"number"==typeof e&&(e=this._items[parseInt(e)]),e instanceof Smart.TabsWindow&&this._items.find((function(t){return t===e})))){for(var t=e.closest("smart-splitter");t&&!t.bars.length;)t=t.closest("smart-splitter");return t?t.bars:void 0}}},{key:"getJSONStructure",value:function(){return this.getState(!0)}},{key:"loadState",value:function(e){if(!e){if(!this.id)return void this.warn(this.localize("noId"));e=JSON.parse(window.localStorage.getItem("smartDockingLayout"+this.id))}if(e)return this._loadState(e),e}},{key:"remove",value:function(e){"number"==typeof e?e=this._items[e]:"string"==typeof e&&(e=this._getItemById(e)),e instanceof Smart.TabsWindow?e.closest("smart-docking-layout")===this||this._getClosestDockingLayout(e)===this?this.removeChild(e):this.error(this.localize("invalidNodeRemove",{elementType:this.nodeName.toLowerCase(),method:"remove"})):this.error(this.localize("invalidIndex",{elementType:this.nodeName.toLowerCase(),method:"remove"}))}},{key:"removeAll",value:function(){this._removeAll()}},{key:"removeChild",value:function(e){var t=this;if(e)if(e instanceof Smart.TabsWindow){if(!t.isCompleted){var i=Array.prototype.slice.call(arguments,2);return HTMLElement.prototype.removeChild.apply(t,i.concat(Array.prototype.slice.call(arguments)))}var a=e.closest("smart-splitter-item");if(a){var n=a.closest("smart-splitter");n&&(a.closest("smart-splitter").removeChild(a),t._items.splice(t._items.indexOf(e),1),t._removeUnneccessaryItems(n),0!==t._items.filter((function(e){return e.opened})).length||t.$.placeholderItem.parentElement||t.$.itemsContainer.appendChild(t.$.placeholderItem),e.layout=t,t._handleAutoSave(),t.$.fireEvent("stateChange",{type:"remove",item:e}))}}else t.error(t.localize("invalidNodeType",{elementType:t.nodeName.toLowerCase(),method:"removeChild"}));else t.error(t.localize("invalidNode",{elementType:t.nodeName.toLowerCase(),method:"removeChild"}))}},{key:"saveState",value:function(){this.id?window.localStorage.setItem("smartDockingLayout"+this.id,JSON.stringify(this.getJSONStructure())):this.warn(this.localize("noId"))}},{key:"update",value:function(e,t){if("number"==typeof e?e=this._items[parseInt(e)]:"string"==typeof e&&(e=this._getItemById(e)),e&&e instanceof Smart.TabsWindow){if(((this.shadowRoot||this).contains(e)||this._getClosestDockingLayout(e)===this)&&t&&"object"===a(t)){if(t.items)for(var i=0;i<t.items.length;i++)e.update(t.items[i].index,t.items[i].label,t.items[i].content);t.id&&(e.id=t.id),t.label&&(e.label=t.label),e.tabCloseButtons=t.tabCloseButtons||!1,t.headerButtons&&Array.isArray(t.headerButtons)&&(e.headerButtons=0===t.headerButtons.length?["close","autoHide"]:t.headerButtons);var n=e.closest("smart-splitter-item");n&&(e.autoHide?this._autoHide(e):(n.size=void 0!==t.size?t.size:n.size,n.min=void 0!==t.min?t.min:n.min,n.max=void 0!==t.max?t.max:n.max,n.locked=void 0!==t.locked?t.locked:n.locked,n.collapsible=void 0!==t.collapsible?t.collapsible:n.collapsible,n.collapsed=void 0!==t.collapsed?t.collapsed:n.collapsed))}}else this.error(this.localize("invalidNodeType",{elementType:this.nodeName.toLowerCase(),method:"update"}))}},{key:"_autoHide",value:function(e,t){var i=this;if("number"==typeof e?e=i._items[e]:"string"==typeof e&&(e=i._getItemById(e)),e){if(e instanceof Smart.TabItem){var a=e.closest("smart-tabs-window")||(e.getRootNode()&&e.getRootNode().host?e.getRootNode().host.closest("smart-tabs-window"):void 0);if(a&&a.items.length<2)e=a;else{var n=e;if(a){if(a.autoHide&&a.tabPosition===t)return;a.removeChild(e)}(e=i._createTabsWindowFromObject({label:e.label})).appendChild(n)}}if(e instanceof Smart.TabsWindow){var s,o=e.closest("smart-splitter-item"),r=e.closest("smart-splitter")||(e.isInShadowDOM?e.getRootNode().host:void 0)||i.$.itemsContainer,l=i._getAutoHidePositionDetails(t,e,o),d=l.autoHideSplitter;t=l.position,e.offsetHeight&&(s="left"===t||"right"===t?e.offsetWidth:e.offsetHeight),o||(o=document.createElement("smart-splitter-item")).appendChild(e),o.min=30;var h="auto-hide-"+t;if(!e.autoHide||!o.$.hasClass(h)){var u=i._items.indexOf(e);i._items.splice(u,u>-1?1:0),0!==i._items.filter((function(e){return e.opened})).length||i.$.placeholderItem.parentElement||("left"===t?i.$.itemsContainer.insert(1,i.$.placeholderItem):i.$.itemsContainer.appendChild(i.$.placeholderItem)),i._handleAutoHideWindow({position:t,tabsWindow:e,splitterItem:o,autoHideName:h,splitterContainer:r,autoHideSplitter:d}),d.bars.map((function(e){return e.hide()})),(!i.shadowRoot||i.shadowRoot&&i.isCompleted)&&i._setAutoHidePaddings();var c=e.items;if(c)for(var m=0;m<c.length;m++)c[m]._autoHideWindowSize||(c[m]._autoHideWindowSize=s);i.$.autoHideWindow.opened&&i.$.autoHideWindow._tabsWindow&&i.$.autoHideWindow._tabsWindow._setAutoHideWindowSize(i.$.autoHideWindow._tabsWindow.selectedIndex),i.isCompleted&&(i._handleAutoSave(),i.$.fireEvent("stateChange",{type:"autoHide",item:e}),i.shadowRoot&&setTimeout((function(){"top"===t||"bottom"===t?(i.$.horizontalHiddenItemsContainer.items.filter((function(e){return e.className.indexOf("auto-hide-")>-1})).forEach((function(e){var t=e.querySelector("smart-tabs-window");e.style.height="",t.refreshTabs()})),i.$.horizontalHiddenItemsContainer.refresh()):(i.$.verticalHiddenItemsContainer.items.filter((function(e){return e.className.indexOf("auto-hide-")>-1})).forEach((function(e){var t=e.querySelector("smart-tabs-window");e.style.width="",t.refreshTabs()})),i.$.verticalHiddenItemsContainer.refresh()),i._setAutoHidePaddings()}),150))}}else i.error(i.localize("invalidNodeType",{elementType:i.nodeName.toLowerCase(),method:"appendChild"}))}}},{key:"_moveHandler",value:function(){this.hasAttribute("dragged")&&"touchmove"===event.originalEvent.type&&event.originalEvent.preventDefault()}},{key:"_getAutoHidePositionDetails",value:function(e,t,i){var a,n=t.closest("smart-splitter")||this.$.itemsContainer,s=n?n._items.indexOf(i):0;switch(e){case"top":case"bottom":a=this.$.horizontalHiddenItemsContainer;break;case"left":case"right":a=this.$.verticalHiddenItemsContainer;break;default:if("vertical"===n.orientation){var o=(a=this.$.verticalHiddenItemsContainer).items.filter((function(e){return e.className.indexOf("auto-hide-")>-1}));e=1===o.length&&1===this._items.length?o[0].$.hasClass("auto-hide-right")?"right":"left":s>=n.items.length/2?"right":"left"}else{var r=(a=this.$.horizontalHiddenItemsContainer).items.filter((function(e){return e.className.indexOf("auto-hide-")>-1}));e=1===r.length&&1===this._items.length?r[0].$.hasClass("auto-hide-bottom")?"bottom":"top":s>=n.items.length/2?"bottom":"top"}}return{autoHideSplitter:a,position:e}}},{key:"_handleAutoHideWindow",value:function(e){var t=e.autoHideName,i=e.splitterItem,a=e.splitterContainer,n=e.position,s=e.autoHideSplitter,o=e.tabsWindow,r=(this.shadowRoot||this).querySelector("."+t),l="offset"+("left"===n||"right"===n?"Width":"Height");if(o.locked=!1,r){for(var d=[].slice.call(o.isCompleted?o.items:o.children),h=r.querySelector("smart-tabs-window"),u=h.items.length,c=0;c<d.length;c++)h.insert(u,{node:d[c]}),d[c]._autoHideWindowSize=o[l];i.parentElement&&a.removeChild(i),this._removeUnneccessaryItems(a),o=h}else{a&&a.contains(i)&&a.removeChild(i),!this._initializingItems&&o.autoHide||(o._originalTabPosition=o.tabPosition,o._originalTextOrientation=o.tabTextOrientation,o._originalLocked=o.locked),o.autoHideWindow=this.$.autoHideWindow,o.autoHide=o.allowToggle=!0,o.selectedIndex=null,o.$.tabsElement&&o.$.tabsElement.selectedIndex!==o.selectedIndex&&(o.$.tabsElement.selectedIndex=o.selectedIndex),o.tabTextOrientation="right"===n||"left"===n?"vertical":"horizontal",o.tabPosition=n,o.style.top=o.style.left="",o.style.width=o.style.height="",o.opened=!0,o.resizeMode="none";for(var m=0;m<i.classList.length;m++)i.classList[m].indexOf("auto-hide-")>-1&&i.$.removeClass(i.classList[m]);if(i.$.addClass(t),i.style.paddingLeft=i.style.paddingRight=i.style.paddingTop=i.style.paddingBottom="",i.min&&(i.min=""),this._removeUnneccessaryItems(a),"top"===n||"left"===n?s.insert(0,i):s.appendChild(i),s.autoFitMode="proportional",!Smart.Utilities.Core.Browser.Safari||"left"!==n&&"right"!==n){if(Smart.Utilities.Core.Browser.Firefox&&("top"===n||"bottom"===n)){var p=(o.shadowRoot||o).querySelector(".smart-tab-strip");p&&(o.size=p.offsetHeight)}o.size="auto"}else{var f=o.querySelector(".smart-tab-strip");o.size=f.offsetWidth}o.min&&(o.min=""),o.min=30,o.locked=!0,s.autoFitMode="end"}}},{key:"_autoHideWindowCloseHandler",value:function(){var e=this.$.autoHideWindow._tabsWindow,t=document.scrollingElement||document.documentElement,i=t.scrollLeft,a=t.scrollTop;if(e._moveContent(e._autoHideWindow.items[0],e._autoHideWindow._tab),!this.$.autoHideWindow.opened)return e.selectedIndex=null,void(document.activeElement!==e.$.tabsElement&&(e.$.tabsElement.focus(),window.scrollTo(i,a)));e.allowToggle&&null!==e.$.tabsElement.selectedIndex&&(e.select(e.$.tabsElement.selectedIndex),document.activeElement!==e.$.tabsElement&&(e.$.tabsElement.focus(),window.scrollTo(i,a)))}},{key:"_autoHideWindowResizeEndHandler",value:function(e){var t=e.target,i="left"===t.resizeMode||"right"===t.resizeMode?"width":"height";t._tab&&(t._tab._autoHideWindowSize=e.detail[i])}},{key:"_cancelDragOperation",value:function(e){this.removeAttribute("dragged"),this._dragDetails.windowFeedback.removeAttribute("tabs-window-dragged"),this._dragDetails.windowFeedback.removeAttribute("ontop"),this._returnItemToOrigin(this._dragDetails.windowFeedback),this._noStateChangeFiring=!0,e||this._endDrag()}},{key:"_createTabsWindowFromObject",value:function(e,t){var i,a=document.createElement("smart-tabs-window"),n=["close","autoHide"];if(a.layout=this,e.id&&(a.id=e.id),e.disabled&&(a.disabled=e.disabled),e.label&&(a.label=e.label),e.headerPosition&&(a.headerPosition=e.headerPosition),e.tabCloseButtons&&(a.tabCloseButtons=e.tabCloseButtons),e.dropPosition&&(a.dropPosition=e.dropPosition),e.resizeMode&&(a.resizeMode=e.resizeMode),this.hasAnimation||(a.animation="none"),a.draggable=void 0===e.draggable||e.draggable,a.floatable=void 0===e.floatable||e.floatable,a.tabCloseButtons=e.tabCloseButtons?e.tabCloseButtons:a.tabCloseButtons,e.autoHide?(a.autoHideWindow=this.$.autoHideWindow,a.autoHide=a.allowToggle=e.autoHide,a.autoHidePosition=e.autoHidePosition):e.undocked&&(n=["close","maximize","minimize"],a.undocked=e.undocked,a.position={top:e.top?(e.top+"").indexOf("%")>-1?e.top:parseFloat(e.top)+"px":void 0,left:e.left?(e.left+"").indexOf("%")>-1?e.left:parseFloat(e.left)+"px":void 0,width:e.width,height:e.height}),a.tabPosition=e.tabPosition||a.tabPosition,a.opened=a.pinned=!0,e.headerButtons&&(n=e.headerButtons),(!e.headerButtons||Array.isArray(e.headerButtons)&&0===e.headerButtons.length)&&(n=["close","autoHide"]),a.headerButtons=n,a.size=e.size||"",a.max=e.max||"",a.min=e.min?e.min:30,a.locked=e.locked||!1,a.collapsible=e.collapsible||!1,a.collapsed=e.collapsed||!1,e.items&&Array.isArray(e.items))for(var s=0;s<e.items.length;s++)t&&e.items[s].instance?((i=e.items[s].instance).index=null,i.id=e.items[s].id||""):((i=document.createElement("smart-tab-item")).label=e.items[s].label?e.items[s].label:"",i.id=e.items[s].id||"",i.content=e.items[s].content?e.items[s].content:"",i.selected=!!e.items[s].selected&&e.items[s].selected,a._isItemSelected=!0),i.draggable=void 0===e.items[s].draggable||e.items[s].draggable,i.floatable=void 0===e.items[s].floatable||e.items[s].floatable,e.items[s].id&&(i.id=e.items[s].id),a.appendChild(i);return a}},{key:"_createItemsFromArray",value:function(e,t){var i=e,a=i.length;this._removeAll(!0),this._initializingItems=!0;for(var n,s=this.undockedItems,o=0;o<s.length;o++)s[o].layout=null,s[o].parentElement.removeChild(s[o]);1===a&&i[0].type&&"layoutgroup"===i[0].type.toLowerCase()&&(this.$.itemsContainer.orientation=i[0].orientation||this.$.itemsContainer.orientation,this.$.itemsContainer.liveResize=i[0].liveResize||this.$.itemsContainer.liveResize,this.$.itemsContainer.resizeMode=i[0].resizeMode||this.$.itemsContainer.resizeMode,i=i[0].items),this.$.itemsContainer.autoFitMode="end";for(var r=0;r<i.length;r++)(n=this._createLayoutItem(i[r],t))&&(this.$.placeholderItem.parentElement&&this.$.itemsContainer.removeChild(this.$.placeholderItem),this.$.itemsContainer.appendChild(n));0===this._items.filter((function(e){return e.opened})).length?this.$.placeholderItem.parentElement||this.$.itemsContainer.appendChild(this.$.placeholderItem):this.$.placeholderItem.parentElement&&this.$.itemsContainer.removeChild(this.$.placeholderItem),this.$.itemsContainer.autoFitMode="proportional",delete this._initializingItems}},{key:"_createLayoutItem",value:function(e,t){if(e){var i,a=document.createElement("smart-splitter-item");if(e.type&&"layoutgroup"===e.type.toLowerCase()){var n;(i=document.createElement("smart-splitter"))._isInShadowDOM=this.shadowRoot,i.autoFitMode="proportional",e.id&&(i.id=e.id),e.orientation&&(i.orientation=e.orientation),e.resizeMode&&(i.resizeMode=e.resizeMode),i.liveResize=this.liveResize,i.resizeStep=this.resizeStep;for(var s=0;s<e.items.length;s++)(n=this._createLayoutItem(e.items[s],t))&&i.appendChild(n);if(!i.querySelector("smart-splitter-item"))return}else{if((i=this._createTabsWindowFromObject(e.type&&"layoutgroup"===e.type.toLowerCase()?e.items[0]:e,t)).autoHide)return this._autoHide(i,i.autoHidePosition),void delete i.autoHidePosition;if(i.undocked)return this.undock(i),document.body.appendChild(i),i.opened=!0,i.pinned=!1,i.layout=this,i.position&&(i.style.left=i.position.left,i.style.top=i.position.top,i.style.width=i.position.width,i.style.height=i.position.height,delete i.position),void(i.size&&(i.style.left=i.position.left,i.style.top=i.position.top));this._items.push(i)}return a.size=e.size||"",a.max=e.max||"",a.min=e.min||30,a.locked=e.locked||!1,a.collapsible=e.collapsible||!1,a.collapsed=e.collapsed||!1,a.appendChild(i),a}}},{key:"_createLayoutStructure",value:function(e,t){var i,a,n=[],s=e._items,o=s[0].$.content.children[0];function r(e){for(var t=e.firstElementChild;t;){if(t instanceof Smart.Splitter)return t;if(t instanceof Smart.TabsWindow)return t;t=t.nextElementSibling}}1===s.length&&o instanceof Smart.Splitter&&(s=o._items,e===this.$.itemsContainer&&(this.$.itemsContainer.orientation=o.orientation));for(var l=0;l<s.length;l++)if(s[l]!==this.$.placeholderItem){if((a=r(s[l].$.content))instanceof Smart.TabsWindow)i=this._createTabsWindowStructure(a,t);else if(a instanceof Smart.Splitter){for(;1===a._items.length&&a._items[0].$.content.children[0]instanceof Smart.Splitter;)a=a._items[0].$.content.children[0];i=1===a._items.length?this._createTabsWindowStructure(a._items[0].$.content.children[0],t):{type:"LayoutGroup",items:this._createLayoutStructure(a,t),orientation:a.orientation},a.id&&(i.id=a.id),"adjacent"!==a.resizeMode&&(i.resizeMode=a.resizeMode),5!==a.resizeStep&&(i.resizeStep=a.resizeStep),a.liveResize&&(i.resizeStep=a.liveResize)}i.size=s[l][e._measurements.size],s[l].locked&&(i.locked=!0),s[l].min&&(i.min=s[l].min),s[l].max&&(i.max=s[l].max),n.push(i)}return n}},{key:"_createTabsWindowStructure",value:function(e,t){var i,a,n={type:"LayoutPanel"};if(e.id&&(n.id=e.id),e.disabled&&(n.disabled=e.disabled),e.label&&(n.label=e.label),e.autoHide?(n.autoHide=e.autoHide,n.autoHidePosition=e.tabPosition):"top"!==e.tabPosition&&(n.tabPosition=e.tabPosition),e.closest("smart-docking-layout")||this._getClosestDockingLayout(e)||(n.undocked=!0,n.top=e.style.top,n.left=e.style.left,n.width=e.style.width,n.height=e.style.height),e.dropPosition&&"all"!==e.dropPosition[0]&&(n.dropPosition=e.dropPosition),n.draggable=void 0===e.draggable||e.draggable,n.floatable=void 0===e.floatable||e.floatable,void 0!==e.floatable&&(n.floatable=e.floatable),"none"!==e.resizeMode&&(n.resizeMode=e.resizeMode),e.items){n.items=[];for(var s=0;s<e.items.length;s++)n.items.push((i=e.items[s],a=void 0,(a={type:"LayoutPanelItem"}).label=i.label||"",i.selected&&(a.selected=i.selected),i.disabled&&(a.disabled=i.disabled),a.draggable=void 0===i.draggable||i.draggable,a.floatable=void 0===i.floatable||i.floatable,t||(a.instance=i),i.id&&(a.id=i.id),a))}return n}},{key:"_containerTabStripResizeHandler",value:function(e){var t=e.target.closest("smart-splitter");t!==this.$.horizontalHiddenItemsContainer&&t!==this.$.verticalHiddenItemsContainer||(t._resizeEventHandler(),this._setAutoHidePaddings())}},{key:"_getItemById",value:function(e){var t=e;if(e=document.getElementById(t))return e;if(this.shadowRoot&&!(e=this.shadowRoot.querySelector("#"+t))){for(var i=this.items,a=0;a<i.length;a++){var n=i[a];if(n.shadowRoot&&(e=n.shadowRoot.querySelector("#"+t)))return e}i=document.querySelectorAll("smart-tabs-window");for(var s=0;s<i.length;s++){var o=i[s];if(o.layout===this&&o.shadowRoot&&(e=o.shadowRoot.querySelector("#"+t)))return e}}}},{key:"_dock",value:function(e,t){if("number"==typeof e?e=this._items[e]:"string"==typeof e&&(e=this._getItemById(e)),e){var i;if(e instanceof Smart.TabItem){var n=this._handleTabItemDocking(e);e=n.tabsWindow,i=n.newTabsWindow}else"object"!==a(e)||e instanceof HTMLElement||(e=this._createTabsWindowFromObject(e));if(e instanceof Smart.TabsWindow&&e.autoHide){if((this.shadowRoot||this).contains(e)){var s=e.closest("smart-splitter-item"),o=e.closest("smart-splitter"),r=!s.nextElementSibling;t||(t="horizontal"===o.orientation?r?"bottom":"top":r?"right":"left"),0===e.items.length&&s.closest("smart-splitter").removeChild(s),i&&(e=i),e.autoHide&&(this.$.verticalHiddenItemsContainer.contains(e)?this.$.verticalHiddenItemsContainer.removeChild(e.closest("smart-splitter-item")):this.$.horizontalHiddenItemsContainer.contains(e)&&this.$.horizontalHiddenItemsContainer.removeChild(e.closest("smart-splitter-item")),e.tabPosition=e._originalTabPosition||"top",delete e._originalTabPosition),this._setDockedItemsHeaderButtons(e),e.autoHide=e.allowToggle=e.maximized=e.minimized=e.collapsed=e.locked=!1,e.tabTextOrientation="horizontal",this.$.autoHideWindow.close(),this._insert(-1,e,"layout-"+t),this._setAutoHidePaddings(),delete this._dockingAutoHideTabItem}}else this._items.indexOf(e)<0&&(i.autoHide=!1,0===e.items.length&&"simple"===this.snapMode&&e.parentElement.removeChild(e),t?this._insert(-1,i,t?"layout-"+t:void 0):this.appendChild(i))}}},{key:"_handleTabItemDocking",value:function(e){var t,i=(e.isInShadowDOM?e.getRootNode().host:e).closest("smart-tabs-window");if(i){var a=this.$.autoHideWindow;if(!i.autoHide)return{tabsWindow:i,newTabsWindow:i};this._dockingAutoHideTabItem=!0,t=1===i.items.length?i:document.createElement("smart-tabs-window"),delete e._autoHideWindowSize,t.size="left"===a.resizeMode||"right"===a.resizeMode?a.offsetWidth:a.offsetHeight,i.removeChild(e),0!==i.items.length||t.id||(this.shadowRoot||this).contains(i)||i.parentElement.removeChild(i),t.tabCloseButtons=i.tabCloseButtons,t.dropPosition=i.dropPosition,t.draggable=e.draggable,t.floatable=e.floatable}return t||(t=document.createElement("smart-tabs-window")),this.hasAnimation||(t.animation="none"),t.min=30,t.opened=t.pinned=t.autoHide=!0,t.style.maxWidth=t.style.maxHeight="",t._originalTabPosition=i._originalTabPosition||void 0,t._originalTextOrientation=i._originalTextOrientation||void 0,t!==i&&(delete i._originalTabPosition,delete i._originalTextOrientation),t.label=e.label,t.appendChild(e),{tabsWindow:e=i,newTabsWindow:t}}},{key:"_dockEventHandler",value:function(e){var t=e.target;t._tabsWindow&&(t=t._tabsWindow),t.autoHide?this._dock(t.items[t.selectedIndex]):this._autoHide(t,this._items.indexOf(t)<(this._items.length-1)/2)}},{key:"_documentDownHandler",value:function(e){var t=e.originalEvent.target;if(t.shadowRoot)for(t=e.originalEvent.composedPath()[0];t;){if(t.closest(".smart-window")){t=t.closest(".smart-window");break}t=t.getRootNode().host}else t=t.closest(".smart-window");if(this.$.autoHideWindow._tabsWindow&&(!t||t!==this.$.autoHideWindow&&t!==this.$.autoHideWindow._tabsWindow)&&(this.$.autoHideWindow._tabsWindow.selectedIndex=null),this._dragDetails)this._cancelDragOperation();else if(t instanceof Smart.TabsWindow&&this.draggable&&!this.disabled&&!(this._dragDetails||t.maximized||t.minimized||!Smart.Utilities.Core.isMobile&&1!==e.which||t._dragDetails&&"resize"===t._dragDetails.type&&t._dragDetails.started)){var i=e.originalEvent.target.shadowRoot?e.originalEvent.composedPath()[0]:e.originalEvent.target;if(t=i.closest(".smart-header-section")||i.closest(".smart-tab-label-container"),this._dragDetails={},t&&t.classList.contains("smart-header-section")&&("simple"===this.snapMode||i.closest(".smart-buttons-container"))&&(t=void 0),this._dragDetails.windowFeedback=this.$.tabsWindowFeedback,t){var a=t.getRootNode()&&t.getRootNode().host?t.getRootNode().host:t;if(this._dragDetails.selectedTabsWindow=t.closest("smart-tabs-window")||(a?a.closest("smart-tabs-window"):void 0),this._dragDetails.selectedTabsWindow===this.$.autoHideWindow){if(this._dragDetails.selectedItem=this.$.autoHideWindow._tabsWindow.closest("smart-splitter-item"),!this.$.autoHideWindow._tabsWindow.draggable)return void(this._dragDetails=void 0)}else this._dragDetails.selectedItem=this._dragDetails.selectedTabsWindow.closest("smart-splitter-item");if(!this._dragDetails.selectedTabsWindow||!this._dragDetails.selectedTabsWindow.draggable||this._dragDetails.selectedTabsWindow.layout!==this)return void(this._dragDetails=void 0);if(this._dragDetails.offset={x:0,y:0},this._dragDetails.selectedTabLabel=t,this._dragDetails.x=e.pageX,this._dragDetails.y=e.pageY,this._dragDetails.selectedTabLabel.$.hasClass("smart-header-section")){if(!this._dragDetails.selectedItem&&this._dragDetails.selectedTabsWindow.pinned)return void(this._dragDetails=void 0);this._dragDetails.windowFeedback=this._dragDetails.selectedTabsWindow;var n=t.getBoundingClientRect();this._dragDetails.offset.x=e.clientX-n.left,this._dragDetails.offset.y=e.clientY-n.top}else{if(!this._dragDetails.selectedTabLabel.tab||void 0!==this._dragDetails.selectedTabLabel.tab.draggable&&!this._dragDetails.selectedTabLabel.tab.draggable)return void(this._dragDetails=void 0);1===this._dragDetails.selectedTabsWindow.items.length&&(this._dragDetails.windowFeedback=this._dragDetails.selectedTabsWindow,this._dragDetails.windowFeedback.floatable=this._dragDetails.selectedTabsWindow.items[0].floatable)}}this._items.map((function(e){return e.removeAttribute("ontop")})),this._dragDetails.windowFeedback!==this.$.autoHideWindow&&this._dragDetails.windowFeedback.setAttribute("ontop","")}}},{key:"_getClosestDockingLayout",value:function(e){return this._getClosestElement("smart-docking-layout",e)}},{key:"_getClosestElement",value:function(e,t){if(t&&this.shadowRoot&&t.getRootNode())for(var i=t.getRootNode().host;i;){if(!i.closest)return;if(i.closest(e))return i.closest(e);i=i.getRootNode()?i.getRootNode().host:void 0}}},{key:"_documentMoveHandler",value:function(e){var t=this,i=Smart.Utilities.Core.isMobile?document.elementFromPoint(e.pageX-window.pageXOffset,e.pageY-window.pageYOffset):e.originalEvent.target.shadowRoot?e.originalEvent.composedPath()[0]:e.originalEvent.target;if(!t.disabled&&t._dragDetails&&(!t._dragDetails||t._dragDetails.selectedTabsWindow)&&i&&!(Math.abs(e.pageX-t._dragDetails.x)<=5&&Math.abs(e.pageY-t._dragDetails.y)<=5)){var a=document.scrollingElement||document.documentElement,n=a.scrollLeft,s=a.scrollTop,o=t._dragDetails.selectedTabsWindow;if(t._dragDetails.isInsideTheLayout=i.closest&&i.closest("smart-docking-layout")===t,!t._dragDetails.isInsideTheLayout&&t.shadowRoot&&(t._dragDetails.isInsideTheLayout=t._getClosestDockingLayout(i)),t._dragDetails.started=!0,t._dragDetails.windowFeedback===t.$.autoHideWindow){var r,l=t._dragDetails.selectedTabsWindow.getBoundingClientRect();1===t.$.autoHideWindow._tabsWindow.items.length?r=t.$.autoHideWindow._tabsWindow:((r=document.createElement("smart-tabs-window")).draggable=!0,r.min=30,r.layout=t),r.style.width=l.width+"px",r.style.height=l.height+"px",r.style.left=l.left+"px",r.style.top=l.top+"px",r.setAttribute("ontop",""),t._dragDetails.windowFeedback=r,t.$.autoHideWindow.$.addClass("no-transition"),t.$.autoHideWindow.close(),t.$.autoHideWindow.$.removeClass("no-transition")}if(t._setDragDetailsOnMove(i),t.$.autoHideWindow.close(),t._dragDetails.windowFeedback.classList.contains("smart-tabs-window-feedback")){if(t._dragDetails._parentInfo||(t._dragDetails._parentInfo={closestItem:o,position:t._originalTabIndex||t._dragDetails.selectedTabLabel.tab.index},t._originalTabIndex=void 0),t._dragDetails.windowFeedback.parentElement!==document.body&&document.body.appendChild(t._dragDetails.windowFeedback),t._dragDetails.selectedItem){var d=t._dragDetails.selectedItem.closest("smart-splitter");!t._dragDetails.windowFeedback.size&&d&&(t._dragDetails.windowFeedback.size=t._dragDetails.selectedTabsWindow[d._measurements.size])}}else t._handleWindowOnDrag();t._dragDetails.selectedTabLabel.classList.contains("smart-header-section")||t._dragDetails.windowFeedback.setAttribute("tabs-window-dragged",""),(t._dragDetails.windowFeedback.hasAttribute("tabs-window-dragged")||t._dragDetails.selectedTabsWindow===t.$.autoHideWindow||t._dragDetails._parentInfo&&"string"==typeof t._dragDetails._parentInfo.position)&&(t._dragDetails.windowFeedback.style.left=e.pageX-t._dragDetails.offset.x+"px",t._dragDetails.windowFeedback.style.top=e.pageY-t._dragDetails.offset.y+"px",t._setWindowFeedbackSize()),t._dragDetails.windowFeedback.opened=!0,document.activeElement!==t&&(t.focus(),window.scrollTo(n,s));var h=t._dragDetails.hoveredTabsWindow?i.closest(".smart-tabs-header-section"):void 0;t._dragDetails.hoveredTabArea=h||(t._dragDetails.hoveredTabsWindow&&i.closest(".smart-tabs-content-section")?t._dragDetails.hoveredTabsWindow.$.tabsElement.$.tabContentSection:t._dragDetails.hoveredTabsWindow),t.shadowRoot&&t._dragDetails.selectedTabsWindow===t._dragDetails.windowFeedback&&requestAnimationFrame((function(){t._dragDetails&&t._dragDetails.windowFeedback.refreshTabHeader()})),t._setSnappingMarkers(e,h)}}},{key:"_setDragDetailsOnMove",value:function(e){var t;if(!this.hasAttribute("dragged")){this._originalBodyOverflow={overflowX:document.body.style.overflowX,overflowY:document.body.style.overflowY,overflow:document.body.style.overflow};var i=(document.scrollingElement||document.documentElement).scrollHeight>document.documentElement.clientHeight,a=(document.scrollingElement||document.documentElement).scrollWidth>document.documentElement.clientWidth,n=this._dragDetails.selectedTabsWindow;if(document.body.style.overflow=document.body.style.overflowX=document.body.style.overflowY="",i&&!a?document.body.style.overflowX="hidden":a&&!i?document.body.style.overflowY="hidden":a||i||(document.body.style.overflow="hidden"),this._dragDetails.windowFeedback.$.hasClass("smart-tabs-window-feedback")||n===this.$.autoHideWindow){var s=this._dragDetails.selectedTabLabel.tab||this.$.autoHideWindow._tab,o=this.$.tabsWindowFeedback;n===this.$.autoHideWindow&&(n=this.$.autoHideWindow._tabsWindow,(o=this._dragDetails.windowFeedback).label=s.label,o.floatable=s.draggable,o.floatable=s.floatable),Smart.Utilities.Core.isMobile&&navigator.platform&&/iPad|iPhone|iPod/.test(navigator.platform)&&(this._dragDetails.selectedTabLabel._lazyRemove=!0),s.parentElement&&n.removeChild(s),this._originalTabIndex=s.index,o.appendChild(s);var r=this._dragDetails.selectedTabsWindow;if(r===this.$.autoHideWindow)r._tabsWindow.items.length>1&&(o.tabPosition=r.tabPosition,o.tabTextOrientation=r._originalTextOrientation||r.tabTextOrientation);else{var l=r.autoHide;o.tabPosition=r._originalTabPosition||(l?"top":r.tabPosition),o.tabTextOrientation=r._originalTextOrientation||(l?"horizontal":r.tabTextOrientation)}if(s._autoHideWindowSize)o.size=s._autoHideWindowSize;else if(n.autoHide){var d="offset"+("top"===n.tabPosition||"bottom"===n.tabPosition?"Height":"Width");o.size=(n._autoHideWindow||n)[d]}}!(t=this._dragDetails.selectedTabsWindow.closest("smart-docking-layout"))&&this.shadowRoot&&(t=this._getClosestDockingLayout(this._dragDetails.selectedTabsWindow)),t||this._dragDetails.windowFeedback._originalPinnedState||(this._dragDetails.windowFeedback._originalPinnedState=this._dragDetails.windowFeedback.pinned),this._dragDetails.windowFeedback.pinned=!1,this.setAttribute("dragged","")}this._dragDetails.hoveredItem=e.closest("smart-splitter-item"),this.shadowRoot&&!this._dragDetails.hoveredItem&&(this._dragDetails.hoveredItem=this._getClosestElement("smart-splitter-item",e)),this._dragDetails.hoveredItem?(!(t=this._dragDetails.hoveredItem.closest("smart-docking-layout"))&&this.shadowRoot&&(t=this._getClosestDockingLayout(this._dragDetails.hoveredItem)),t&&t===this?this._dragDetails.hoveredTabsWindow=this._dragDetails.hoveredItem.querySelector("smart-tabs-window"):this._dragDetails.hoveredItem=this._dragDetails.hoveredTabsWindow=void 0):this._dragDetails.hoveredTabsWindow=e.closest("smart-tabs-window")||(e.getRootNode()&&e.getRootNode().host?e.getRootNode().host.closest("smart-tabs-window"):void 0),this._dragDetails.hoveredTabsWindow&&(!(t=this._dragDetails.hoveredTabsWindow.closest("smart-docking-layout"))&&this.shadowRoot&&(t=this._getClosestDockingLayout(this._dragDetails.hoveredTabsWindow)),t&&t!==this?this._dragDetails.hoveredTabsWindow=void 0:this._dragDetails.hoveredTabsWindow.bringToFront())}},{key:"_documentDragStartHandler",value:function(e){this._dragDetails&&e.preventDefault()}},{key:"_documentSelectStartHandler",value:function(e){this._dragDetails&&this._dragDetails.started&&e.preventDefault()}},{key:"_documentUpHandler",value:function(e){var t=e.originalEvent||e,i=t.target.shadowRoot?t.composedPath()[0]:t.target;if(!this._dragDetails||this._dragDetails&&!this._dragDetails.started||this.disabled)delete this._dragDetails;else{this._noStateChangeFiring=!0,this.removeAttribute("dragged"),this._dragDetails.windowFeedback.removeAttribute("tabs-window-dragged"),this._dragDetails.windowFeedback.removeAttribute("ontop");var a=i.closest&&i.closest("smart-docking-layout");!a&&this.shadowRoot&&(a=this._getClosestDockingLayout(i)),e.ctrlKey&&(this._snapFeedback._position=a=void 0);var n=this._snapFeedback?this._snapFeedback._position:void 0;if(!a&&!n||a&&!this._dragDetails.hoveredTabArea&&!n)this._dropWindowOutsideLayout(e,n,a);else if(this._dragDetails.hoveredTabsWindow&&n){if(this._dragDetails.hoveredTabArea&&this._dragDetails.hoveredTabArea.classList.contains("smart-tabs-header-section")){var s,o,r,l=this._dragDetails.hoveredTabsWindow.itemLabels.length,d=i.closest(".smart-tab-label-container");if(d&&!d.$.hasClass("smart-add-new-tab")&&d.tab||(d=this._dragDetails.hoveredTabsWindow.itemLabels[l-1],s=!0),o=this._dragDetails.selectedTabLabel.$.hasClass("smart-tab-label-container")&&this._dragDetails.windowFeedback.$.hasClass("smart-tabs-window-feedback")?[this._dragDetails.selectedTabLabel.tab]:[].slice.call(this._dragDetails.windowFeedback.items),this._dragDetails.hoveredTabsWindow.autoHide){var h=this._dragDetails.hoveredTabsWindow.tabPosition;r=this._dragDetails.windowFeedback["offset"+("top"===h||"bottom"===h?"Height":"Width")]}for(var u=0;u<o.length;u++)o[u]._autoHideWindowSize=r||this._dragDetails.windowFeedback.size,this._dragDetails.windowFeedback.removeChild(o[u]),this._dragDetails.hoveredTabsWindow.insert(s?l:d.tab.index,{node:o[u]}),l=this._dragDetails.hoveredTabsWindow.items.length;this._dragDetails.targetWindow=this._dragDetails.hoveredTabsWindow}else this._dragDetails.targetWindow=this._handleItemNesting(),this._eventAlreadyFired=!0;this.$.autoHideWindow.close(),this._noStateChangeFiring=!1}if(this.shadowRoot){var c=this._dragDetails.targetWindow;setTimeout((function(){return c.refreshTabHeader()}),100)}this._endDrag()}}},{key:"_dropWindowOutsideLayout",value:function(e,t,i){var a;if(this.floatable&&(void 0===this._dragDetails.windowFeedback.floatable||this._dragDetails.windowFeedback.floatable)){if(this._dragDetails.windowFeedback.classList.contains("smart-tabs-window-feedback")){var n=this._dragDetails.windowFeedback.items[0];if(n&&void 0!==n.floatable&&!n.floatable)return void this._cancelDragOperation(!0);var s=this._dragDetails.selectedTabLabel.tab,o=document.createElement("smart-tabs-window");this.hasAnimation||(o.animation="none"),o.opened=!0,o.label=s.label,this._dragDetails.windowFeedback.removeChild(s),this._dragDetails.selectedTabLabel.tab.$.removeClass("smart-visibility-hidden"),o.appendChild(this._dragDetails.selectedTabLabel.tab),o.style.left=e.pageX+"px",o.style.top=e.pageY+"px",o.style.maxWidth=o.style.maxHeight="",o.resizeMode=this._dragDetails.selectedTabsWindow.resizeMode,o.tabTextOrientation=this._dragDetails.windowFeedback.tabTextOrientation,o.tabPosition=this._dragDetails.windowFeedback.tabPosition,o.min=30,o.style.width=this._dragDetails.windowFeedback.style.width,o.style.height=this._dragDetails.windowFeedback.style.height,o.draggable=void 0===s.draggable||s.draggable,o.floatable=void 0===s.floatable||s.floatable,document.body.appendChild(o),o.pinned=o.autoHide=o.allowToggle=!1,this._noStateChangeFiring=!1,a=o}else this._dragDetails._parentInfo&&this._dragDetails._parentInfo.closestItem?(this._dragDetails.windowFeedback.parentElement!==document.body&&(this._dragDetails.windowFeedback.windowParent="body",document.body.appendChild(this._dragDetails.windowFeedback)),this._dragDetails.windowFeedback.style.maxWidth=this._dragDetails.windowFeedback.style.maxHeight="",this._dragDetails.windowFeedback.pinned=this._dragDetails.windowFeedback.allowToggle=this._dragDetails.windowFeedback.autoHide=!1,this._dragDetails.selectedTabLabel.$.hasClass("smart-tab-label-container")&&(this._dragDetails.windowFeedback.label=this._dragDetails.selectedTabLabel.tab.label)):t||this._dragDetails.selectedItem instanceof Smart.SplitterItem||!this._dragDetails.selectedTabLabel.$.hasClass("smart-tab-label-container")||this._returnItemToOrigin(this._dragDetails.windowFeedback),(a=this._dragDetails.windowFeedback).locked=!1,this._dragDetails.selectedItem&&(this._noStateChangeFiring=!1);this.$.autoHideWindow.close(),i||(this._dragDetails.windowFeedback.pinned=!1),this._validateWindowPosition(a),this._dragDetails._parentInfo&&(a._parentInfo={closestItem:this._dragDetails._parentInfo.closestItem,position:this._dragDetails._parentInfo.position}),a.layout=this,this._dragDetails.targetWindow=a,a.resizeMode="both",this._setFloatingItemsHeaderButtons(a)}else this._cancelDragOperation(!0)}},{key:"_endDrag",value:function(){var e=this._dragDetails.windowFeedback;if(this.$.tabsWindowFeedback.close(),0===e.$.tabsElement._tabs.length&&e.parentElement&&!e.$.hasClass("smart-tabs-window-feedback")&&e.parentElement.removeChild(e),(this.shadowRoot||this).contains(this._dragDetails.windowFeedback)||void 0===this._dragDetails.windowFeedback._originalPinnedState||(this._dragDetails.windowFeedback.pinned=this._dragDetails.windowFeedback._originalPinnedState,delete this._dragDetails.windowFeedback._originalPinnedState),this._originalBodyOverflow&&(document.body.style.overflow=this._originalBodyOverflow.overflow,document.body.style.eoverflowX=this._originalBodyOverflow.overflowX,document.body.style.overflowY=this._originalBodyOverflow.overflowY,delete this._originalBodyOverflow),this._dragDetails.targetWindow?(this._dragDetails.targetWindow.focus(),this._dragDetails.selectedTabsWindow&&this._dragDetails.selectedTabsWindow.removeAttribute("active")):this._dragDetails.windowFeedback.bringToFront(),this._dragDetails.started=!1,this._dragDetails.hoveredItem=this._dragDetails.hoveredTabsWindow=this._dragDetails.isInsideTheLayout=void 0,e.removeAttribute("dragged"),this._handleSnapping(),this._dragDetails.selectedTabsWindow&&delete this._dragDetails.selectedTabsWindow._ownerLayout,0===e.items.length&&((this.shadowRoot||this).contains(e)&&(e.opened=!1),e.$.hasClass("smart-tabs-window-feedback")&&this.$.container.appendChild(e)),!this._eventAlreadyFired&&!this._noStateChangeFiring){this._handleAutoSave();var t={item:this._dragDetails.targetWindow};t.type=this._items.indexOf(this._dragDetails.targetWindow)>-1?"dock":"float",this.$.fireEvent("stateChange",t)}this._noStateChangeFiring=this._eventAlreadyFired=void 0,this._dragDetails._parentInfo&&this._dragDetails._parentInfo.closestItem&&this._removeUnneccessaryItems(this._dragDetails._parentInfo.closestItem.closest("smart-splitter"));var i=this._getClosestDockingLayout(e);if(e.closest("smart-docking-layout")||i)return e.style.top=e.style.left="",void delete this._dragDetails;e.top&&(e.style.top=e.top),e.left&&(e.style.left=e.left),this._dragDetails.selectedTabLabel&&this._dragDetails.selectedTabLabel._lazyRemove&&(this._dragDetails.selectedTabLabel.parentElement&&this._dragDetails.selectedTabLabel.parentElement.removeChild(this._dragDetails.selectedTabLabel),delete this._dragDetails.selectedTabLabel._lazyRemove),e._cancelDragging(),delete this._dragDetails}},{key:"_getTabItemContent",value:function(e){for(var t=e.isCompleted?e.$.content:e,i=document.createDocumentFragment();t.firstChild;)i.appendChild(t.firstChild);return i}},{key:"_getHeaderLabelDimensions",value:function(){if(this._dragDetails&&this._dragDetails.hoveredTabsWindow){var e,t,i=this._dragDetails.hoveredTabsWindow.$.tabsElement,a="left"===i.tabPosition||"right"===i.tabPosition,n=0,s=0;if(this._dragDetails.hoveredTabArea)e=this._dragDetails.hoveredTabArea.offsetWidth,t=this._dragDetails.hoveredTabArea.offsetHeight,n=this._dragDetails.hoveredTabArea.offsetLeft,s=this._dragDetails.hoveredTabArea.offsetTop;else if(i.$.tabStrip.children.length>0){var o=i.$.tabStrip.children[i.$.tabStrip.children.length-1];n=o.offsetLeft+(a?0:o.offsetWidth),s=o.offsetTop+(a?o.offsetHeight:0),e=o.offsetWidth,t=o.offsetHeight}this._dragDetails.hoveredTabArea=i.$.tabsHeaderSection;var r=0,l=0;"horizontal"===i.tabTextOrientation?r=i.$.scrollButtonNear.offsetWidth:l=i.$.scrollButtonNear.offsetHeight;var d=this._dragDetails.hoveredTabArea.getBoundingClientRect(),h=this._dragDetails.hoveredTabsWindow.$.tabsElement.$.tabStrip,u=h.getBoundingClientRect(),c=u.left-d.left+d.left+n-h.scrollLeft-r,m=u.top-d.top+d.top+s-h.scrollTop-l,p=Math.min(n-h.scrollLeft-r,0),f=Math.min(s-h.scrollTop-l,0);return{width:Math.min(u.width,Math.max(0,e+p),Math.max(0,u.left+u.width-c)),height:Math.min(u.height,Math.max(0,t+f),Math.max(0,u.top+u.height-m)),top:m+window.pageYOffset-f,left:c+window.pageXOffset-p}}}},{key:"_handleAutoSave",value:function(){this.autoSaveState&&this.saveState()}},{key:"_handleAutoHiddenSplitterBars",value:function(){for(var e=this.$.itemsContainer.querySelectorAll(".auto-hide-left,.auto-hide-right, .auto-hide-top, .auto-hide-bottom"),t=0;t<e.length;t++)e[t].previousElementSibling instanceof Smart.SplitterBar?e[t].previousElementSibling.hide():e[t].nextElementSibling instanceof Smart.SplitterBar&&e[t].nextElementSibling.hide()}},{key:"_handleItemPositionInserting",value:function(e,t,i){e.autoHide||i.indexOf("layout")>-1?this._handleLayoutItemInserting(t,e,i):i.indexOf("outside-")>-1?this._handleOutsideItemInserting(t,e,i):(i.indexOf("inside-")>-1?this._handleInsideItemInserting(t,e,i):this._handleNormalItemInserting(t,e,i),this._handleAutoSave(),this.$.fireEvent("stateChange",{type:"dock",item:e}),this._setSplitterBarVisibility())}},{key:"_handleInsideItemInserting",value:function(e,t,i){var a,n=document.createElement("smart-splitter-item"),s=document.createElement("smart-splitter-item"),o=e.closest("smart-splitter-item"),r=e.closest("smart-splitter"),l=this._items.indexOf(e);(a=r&&1===r._items.length?r:document.createElement("smart-splitter"))._isInShadowDOM=this.shadowRoot,a.autoFitMode="proportional",a.liveResize=this.liveResize,a.resizeStep=this.resizeStep,t.windowParent=null,n.appendChild(t),e.windowParent=null,i=i.replace("inside-",""),a.orientation="top"===i||"bottom"===i?"horizontal":"vertical";var d=o["horizontal"===a.orientation?"offsetHeight":"offsetWidth"]/2;if(a.parentElement?a.insertBefore(n,"top"===i||"left"===i?o:null):(s.appendChild(e),e.min&&(s.min=e.min),"top"===i||"left"===i?(a.appendChild(n),a.appendChild(s)):(a.appendChild(s),a.appendChild(n)),o.appendChild(a)),t.size){var h="string"==typeof t.size&&t.size.indexOf("%")>-1;n.size=h?t.size:Math.min(d,parseFloat(t.size))}n.max=t.max||"",n.min=t.min?t.min:30,n.locked=t.locked||!1,n.collapsible=t.collapsible||!1,n.collapsed=t.collapsed||!1,"bottom"!==i&&"right"!==i||(l=Math.min(l+1,this._items.length)),t.pinned=!0,t.autoHide=t.allowToggle=t.maximized=t.minimized=t.collapsed=!1,t._originalTabPosition?(t.tabPosition=t._originalTabPosition,delete t._originalTabPosition):t.tabPosition="top",t._originalTextOrientation?(t.tabTextOrientation=t._originalTextOrientation,delete t._originalTextOrientation):t.tabTextOrientation="horizontal",this._items.splice(l,0,t),this._handleAutoHiddenSplitterBars()}},{key:"_handleLayoutItemInserting",value:function(e,t,i){var a=document.createElement("smart-splitter-item"),n="bottom"===i||"top"===i?"offsetHeight":"offsetWidth";if(t.size||(t.size=t[n]),i=i.replace("layout-",""),a.size=t.size||"",a.max=t.max||"",a.min=t.min||"",a.locked=t.locked||!1,a.collapsible=t.collapsible||!1,a.collapsed=t.collapsed||!1,a.size&&!this._dockingAutoHideTabItem&&(a.size=Math.min(this[n]/2,parseFloat(t.size))),("horizontal"!==this.$.itemsContainer.orientation||"right"!==i&&"left"!==i)&&("vertical"!==this.$.itemsContainer.orientation||"top"!==i&&"bottom"!==i)){var s=i.indexOf("left")>-1||i.indexOf("top")>-1?this._items.filter((function(e){return e.opened}))[0]:void 0;return t.windowParent=null,a.appendChild(t),this.insertBefore(a,s,this.$.itemsContainer),!0}var o,r=this.$.itemsContainer.orientation,l=this.$.itemsContainer,d=[].slice.call(l._items),h=function(e,t){l.appendChild(e),l.insertBefore(t,"right"===i||"bottom"===i?null:e)};t.windowParent=null,a.appendChild(t),d.map((function(e){return e.size=e[l._measurements.size]})),"right"===i||"bottom"===i?this._items.push(t):this._items.splice(0,0,t),l.removeAll(),l.orientation="top"===i||"bottom"===i?"horizontal":"vertical";var u=l[l._measurements.size]-a.size;if(d.length>1){var c=document.createElement("smart-splitter");c._isInShadowDOM=this.shadowRoot,c.autoFitMode="end",c.orientation=r,c.liveResize=this.liveResize,c.resizeStep=this.resizeStep,(o=document.createElement("smart-splitter-item")).min=30,o.appendChild(c),o.size=u,h(o,a);for(var m=0;m<d.length;m++)c.appendChild(d[m]);c.autoFitMode="proportional"}else d[0].size=u,this._dockingAutoHideTabItem&&(l.autoFitMode="end"),h(d[0],a),l.autoFitMode="proportional";this._handleAutoHiddenSplitterBars(),this._handleAutoSave(),this.$.fireEvent("stateChange",{type:"dock",item:t}),this._setSplitterBarVisibility()}},{key:"_handleNormalItemInserting",value:function(e,t,i){var a=e.closest("smart-splitter-item"),n=e.closest("smart-splitter"),s=document.createElement("smart-splitter-item"),o="right"===i||"bottom"===i?n._items.indexOf(a)+1:n._items.indexOf(a),r=this._items.indexOf(e);t.windowParent=null,s.appendChild(t),s.size=t.size||"",s.min=t.min||"",n.insert(o,s),"bottom"!==i&&"right"!==i||(r=Math.min(r+1,this._items.length)),t.pinned=!0,t.locked=!1,t.autoHide=t.allowToggle=t.maximized=t.minimized=t.collapsed=!1,t._originalTabPosition?(t.tabPosition=t._originalTabPosition,delete this._originalTabPosition):t.tabPosition="top",t._originalTextOrientation?(t.tabTextOrientation=t._originalTextOrientation,delete t._originalTextOrientation):t.tabTextOrientation="horizontal",this._items.splice(r,0,t),this._handleAutoHiddenSplitterBars()}},{key:"_handleOutsideItemInserting",value:function(e,t,i){var a=document.createElement("smart-splitter-item"),n=e.closest("smart-splitter");if(n||(n=this.$.itemsContainer),a.size=t.size||"",a.max=t.max||"",a.min=t.min||"",a.locked=t.locked||!1,a.collapsible=t.collapsible||!1,a.collapsed=t.collapsed||!1,n===this.$.itemsContainer)return t.windowParent=null,a.appendChild(t),this.insertBefore(a,i.indexOf("left")>-1||i.indexOf("top")>-1?this._items[0]:void 0,this.$.itemsContainer),!0;var s=n.closest("smart-splitter-item"),o=document.createElement("smart-splitter"),r=document.createElement("smart-splitter-item");if(o._isInShadowDOM=this.shadowRoot,i=i.replace("outside-",""),o.autoFitMode="proportional",o.liveResize=this.liveResize,o.resizeStep=this.resizeStep,t.windowParent=null,a.appendChild(t),r.min=30,r.appendChild(n),o.orientation="top"===i||"bottom"===i?"horizontal":"vertical",s.appendChild(o),"right"===i||"bottom"===i?(o.appendChild(r),o.appendChild(a),this._items.splice(this._items.indexOf(e)+1,0,t)):(o.appendChild(a),o.appendChild(r),this._items.splice(this._items.indexOf(e),0,t)),a.size){var l=a.size;a.size="",a.size=l}else a.size=o[o._measurements.size]/2;this._handleAutoHiddenSplitterBars(),this._handleAutoSave(),this.$.fireEvent("stateChange",{type:"dock",item:t}),this._setSplitterBarVisibility()}},{key:"_handleLayout",value:function(){if(this._items=[],"string"==typeof this.layout&&(this.layout=JSON.parse(this.layout)),null!==this.layout&&Array.isArray(this.layout))this._createItemsFromArray(this.layout);else{var e=Array.from(this.$.itemsContainer.children);this.$.itemsContainer.innerHTML="";for(var t=0;t<e.length;t++){"Smart-TABS-WINDOW"!==e[t].tagName&&e[t].parentElement.removeChild(e[t]),e[t].layout=this;var i=document.createElement("smart-splitter-item");i.appendChild(e[t]),this.$.itemsContainer.appendChild(i),this._items.push(e[t])}}}},{key:"_handleSnapping",value:function(e){"simple"===this.snapMode?this._handleSimpleSnapping(e):this._handleAdvancedSnapping()}},{key:"_handleAdvancedSnapping",value:function(){if(this._dragDetails)if(!this._snapFeedback||this._dragDetails.hoveredTabsWindow||(this._snapFeedback._position=void 0,this._snapFeedback.areaHighlighter&&this._snapFeedback.areaHighlighter.parentElement&&this._snapFeedback.areaHighlighter.parentElement.removeChild(this._snapFeedback.areaHighlighter),this._snapFeedback.headerHighlighter&&this._snapFeedback.headerHighlighter.parentElement&&this._snapFeedback.headerHighlighter.parentElement.removeChild(this._snapFeedback.headerHighlighter),this._dragDetails.hoveredItem))if(this._snapFeedback||(this._snapFeedback={innerSnapElement:document.createElement("div"),outherSnapElement:document.createElement("div"),areaHighlighter:document.createElement("div"),headerHighlighter:document.createElement("div")},this._snapFeedback.innerSnapElement.classList.add("smart-docking-layout-snap"),this._snapFeedback.areaHighlighter.classList.add("smart-docking-layout-snap-highlighter"),this._snapFeedback.headerHighlighter.classList.add("smart-docking-layout-snap-highlighter-header"),this._snapFeedback.innerSnapElement.innerHTML='\n                            <div>\n                                <div class="top">\n                                    <div><div></div></div>\n                                </div>\n                            </div>\n                            <div>\n                                <div class="left">\n                                    <div><div></div></div>\n                                </div>\n                                <div class="center">\n                                    <div><div></div></div>\n                                </div>\n                                <div class="right">\n                                    <div><div></div></div>\n                                </div>\n                            </div>\n                            <div>\n                                <div class="bottom">\n                                    <div><div></div></div>\n                                </div>\n                            </div>',this._snapFeedback.outherSnapElement.innerHTML='\n                            <div class="smart-docking-layout-snap layout-top">\n                                <div><div></div></div>\n                            </div>\n                            <div class="smart-docking-layout-snap layout-left">\n                                <div><div></div></div>\n                            </div>\n                            <div class="smart-docking-layout-snap layout-right">\n                                <div><div></div></div>\n                            </div>\n                            <div class="smart-docking-layout-snap layout-bottom">\n                                <div><div></div></div>\n                            </div>'),this._snapFeedback.areaHighlighter.parentElement&&(this._snapFeedback.areaHighlighter.removeAttribute("position"),this._snapFeedback.areaHighlighter.classList.remove("smart-hidden")),this._snapFeedback.areaHighlighter.style.width="",this._snapFeedback.areaHighlighter.style.height="",this._snapFeedback._position=!this._dragDetails.hoveredItem||this._dragDetails.hoveredItem instanceof Smart.SplitterItem?"":this._dragDetails.hoveredItem.className,this._dragDetails.hoveredItem&&this._dragDetails.hoveredItem.className.indexOf("layout-")>-1){this._snapFeedback._position=this._snapFeedback._position.replace("smart-docking-layout-snap ",""),this._snapFeedback.areaHighlighter.setAttribute("position",this._snapFeedback._position);var e=this._dragDetails.selectedTabsWindow;e.dropPosition.indexOf("all")>-1||e.dropPosition.indexOf(this._snapFeedback._position)>-1?(this._dragDetails.hoveredItem.setAttribute("show",""),this.$.container.appendChild(this._snapFeedback.areaHighlighter),this._dragDetails.hoveredTabsWindow=!0,["layout-left","layout-right"].indexOf(this._snapFeedback._position)>-1?this._snapFeedback.areaHighlighter.style.width=this._dragDetails.windowFeedback.style.width||this._dragDetails.windowFeedback.offsetWidth+"px":["layout-top","layout-bottom"].indexOf(this._snapFeedback._position)>-1&&(this._snapFeedback.areaHighlighter.style.height=this._dragDetails.windowFeedback.style.height||this._dragDetails.windowFeedback.offsetHeight+"px")):(this._dragDetails.hoveredItem.removeAttribute("show"),this._snapFeedback._position=void 0)}else{var t=this._dragDetails.hoveredTabsWindow?this._dragDetails.hoveredTabsWindow.dropPosition:["all"];if(0===t.length&&(t=["all"]),this._dragDetails.hoveredTabsWindow instanceof Smart.TabsWindow&&this._dragDetails.hoveredTabArea&&this._dragDetails.hoveredTabArea.closest(".smart-tabs-header-section")&&(t.indexOf("all")>-1||t.indexOf("header")>-1)){this._dragDetails.hoveredTabArea=this._dragDetails.hoveredTabArea.classList.contains("smart-tab-label-container")?this._dragDetails.hoveredTabArea:void 0;var i=this._getHeaderLabelDimensions(),a=this._snapFeedback.headerHighlighter;a.style.width=i.width+"px",a.style.height=i.height+"px",a.style.top=i.top+"px",a.style.left=i.left+"px",a.classList.remove("smart-hidden"),a.parentElement!==document.body&&document.body.appendChild(a),this._snapFeedback._position="header"}else this._snapFeedback.headerHighlighter.style.width=this._snapFeedback.headerHighlighter.style.height=0;var n=this._snapFeedback.innerSnapElement.closest("smart-splitter-item");if(this._dragDetails.hoveredItem instanceof Smart.SplitterItem){if(n&&this._dragDetails.hoveredItem!==n&&n.removeChild(this._snapFeedback.innerSnapElement),this._dragDetails.hoveredItem.className.indexOf("auto-hide")<0){for(var s=this._snapFeedback.innerSnapElement.querySelectorAll(".top, .bottom, .left, .right, .center"),o=0;o<s.length;o++)t.indexOf(s[o].className)>-1||0===t.indexOf("all")?s[o].setAttribute("show",""):s[o].removeAttribute("show");this._snapFeedback.innerSnapElement.classList.remove("smart-hidden"),this._dragDetails.hoveredItem.contains(this._snapFeedback.innerSnapElement)||this._dragDetails.hoveredItem.appendChild(this._snapFeedback.innerSnapElement)}for(var r,l=[].slice.call(this._snapFeedback.outherSnapElement.children),d=this._dragDetails.selectedTabsWindow,h=0;h<l.length;h++)r=l[h].className.replace("smart-docking-layout-snap ",""),l[h].classList.remove("smart-hidden"),d.dropPosition.indexOf("all")>-1||d.dropPosition.indexOf(r)>-1?l[h].setAttribute("show",""):l[h].removeAttribute("show"),this.$.container.appendChild(l[h])}if(!this._snapFeedback._position||t.indexOf("all")<0&&t.indexOf(this._snapFeedback._position)<0)this._snapFeedback._position=this._dragDetails.hoveredTabArea=void 0;else if("center"===this._snapFeedback._position&&this._items.filter((function(e){return e.opened})).length>0&&(this._dragDetails.hoveredTabArea=this._dragDetails.hoveredTabsWindow.$.tabsElement.$.tabsHeaderSection),["left","right"].indexOf(this._snapFeedback._position)>-1?this._snapFeedback.areaHighlighter.style.width=this._dragDetails.windowFeedback.style.width||this._dragDetails.windowFeedback.offsetWidth+"px":["top","bottom"].indexOf(this._snapFeedback._position)>-1&&(this._snapFeedback.areaHighlighter.style.height=this._dragDetails.windowFeedback.style.height||this._dragDetails.windowFeedback.offsetHeight+"px"),this._snapFeedback.areaHighlighter.setAttribute("position",this._snapFeedback._position),"header"===this._snapFeedback._position)this._dragDetails.hoveredTabsWindow.$.tabsElement.$.tabContentSection.appendChild(this._snapFeedback.areaHighlighter);else{var u=this._dragDetails.hoveredTabsWindow.closest("smart-splitter").orientation;("left"!==this._snapFeedback._position&&"right"!==this._snapFeedback._position||"horizontal"!==u)&&("top"!==this._snapFeedback._position&&"bottom"!==this._snapFeedback._position||"vertical"!==u)||(this._snapFeedback._position="inside-"+this._snapFeedback._position),this._dragDetails.hoveredItem.closest("smart-splitter-item").appendChild(this._snapFeedback.areaHighlighter)}}else if(this._snapFeedback.innerSnapElement&&this._snapFeedback.innerSnapElement.parentElement&&this._snapFeedback.innerSnapElement.parentElement.removeChild(this._snapFeedback.innerSnapElement),this._snapFeedback.outherSnapElement&&!this._dragDetails.isInsideTheLayout)for(var c=[].slice.call(this.$.container.children),m=0;m<c.length;m++)c[m].className.indexOf("smart-docking-layout-snap")>-1&&this._snapFeedback.outherSnapElement.appendChild(c[m])}},{key:"_handleSimpleSnapping",value:function(e){var t=this;if(!e)return t._dragDetails&&(t._dragDetails.hoveredTabsWindow=t._dragDetails.hoveredTabArea=void 0),void(t._snapFeedback&&(t._snapFeedback._position=void 0,t._snapFeedback.parentElement&&t._snapFeedback.classList.add("smart-visibility-hidden")));t._snapFeedback||(t._snapFeedback=document.createElement("div"),t._snapFeedback.addEventListener("transitionend",(function(){t._snapFeedback.classList.contains("smart-visibility-hidden")&&t._snapFeedback.parentElement&&t._snapFeedback.parentElement.removeChild(t._snapFeedback)})));for(var i=0;i<t._snapFeedback.classList.length;i++)t._snapFeedback.classList[i].indexOf("smart-docking-snap-")>-1&&t._snapFeedback.classList.remove(t._snapFeedback.classList[i]);t._snapFeedback._position=e,e=e.replace("inside-",""),t._snapFeedback.classList.add("smart-docking-snap-"+e+"-feedback"),t._snapFeedback.classList.remove("smart-visibility-hidden");var a,n,s,o,r,l=0===e.indexOf("layout")?t._dragDetails.selectedTabsWindow.dropPosition:t._dragDetails.hoveredTabsWindow.dropPosition;0===l.length&&(l=["all"]),l.indexOf("all")>-1||l.indexOf(e)>-1?t._snapFeedback.removeAttribute("disabled"):(t._snapFeedback.setAttribute("disabled",""),t._snapFeedback._position=void 0);var d=t.getBoundingClientRect(),h=getComputedStyle(t._dragDetails.hoveredTabsWindow.$.contentSection),u=parseFloat(h.getPropertyValue("padding-left")||0),c=parseFloat(h.getPropertyValue("padding-right")||0),m=parseFloat(h.getPropertyValue("padding-top")||0),p=parseFloat(h.getPropertyValue("padding-bottom")||0),f=t.$.verticalHiddenItemsContainer.getElementsByClassName("auto-hide-left")[0],g=t.$.horizontalHiddenItemsContainer.getElementsByClassName("auto-hide-top")[0];switch(t._snapFeedback.style.display="",e){case"header":var v=t._getHeaderLabelDimensions();a=v.width,n=v.height,s=v.top,o=v.left,a&&n||(t._snapFeedback.style.display="none");break;case"left":case"right":r=t._dragDetails.hoveredTabArea.getBoundingClientRect(),n=t._dragDetails.hoveredTabArea.offsetHeight,a=t._dragDetails.hoveredTabArea.offsetWidth/2,s=r.top+window.pageYOffset,o=r.left+("right"===e?t._dragDetails.hoveredTabArea.offsetWidth/2:0)+window.pageXOffset;break;case"top":case"bottom":r=t._dragDetails.hoveredTabArea.getBoundingClientRect(),n=t._dragDetails.hoveredTabArea.offsetHeight/2,a=t._dragDetails.hoveredTabArea.offsetWidth,s=r.top+window.pageYOffset+("bottom"===e?t._dragDetails.hoveredTabArea.offsetHeight/2:0),o=r.left+window.pageXOffset;break;case"layout-left":case"layout-right":t._snapFeedback.parentElement&&void 0===t._snapFeedback.maxWidth&&(t._snapFeedback.maxWidth=parseFloat(getComputedStyle(t._snapFeedback).getPropertyValue("max-width"))||0),a=.07*t.$.itemsContainer.offsetWidth-(u+c),t._snapFeedback.maxWidth&&(a=Math.min(t._snapFeedback.maxWidth,a)),n=t.$.itemsContainer.offsetHeight-(m+p),s=d.top+window.pageYOffset+m+(g?g.offsetHeight:0),o=d.left+window.pageXOffset+("layout-left"===e?u:0)+(f?f.offsetWidth:0)+("layout-right"===e?t.$.itemsContainer.offsetWidth-a-c:0);break;case"layout-top":case"layout-bottom":t._snapFeedback.parentElement&&void 0===t._snapFeedback.maxHeight&&(t._snapFeedback.maxHeight=parseFloat(getComputedStyle(t._snapFeedback).getPropertyValue("max-height"))||0),n=.07*t.$.itemsContainer.offsetHeight-(m+p),t._snapFeedback.maxHeight&&(n=Math.min(t._snapFeedback.maxHeight,n)),a=t.$.itemsContainer.offsetWidth-(u+c),s=d.top+window.pageYOffset+(g?g.offsetHeight:0)+("layout-bottom"===e?t.$.itemsContainer.offsetHeight-n+m:m),o=d.left+window.pageXOffset+u+(f?f.offsetWidth:0)}t._snapFeedback.style.height=n+"px",t._snapFeedback.style.width=a+"px",t._snapFeedback.style.left=o+"px",t._snapFeedback.style.top=s+"px",t._snapFeedback._position||(t._dragDetails.hoveredTabArea=void 0),t._snapFeedback.parentElement||document.body.appendChild(t._snapFeedback)}},{key:"_handleItemNesting",value:function(){var e=this._dragDetails.windowFeedback;if(e.classList.contains("smart-tabs-window-feedback")){var t=document.createElement("smart-tabs-window"),i=this._dragDetails.selectedTabLabel.tab;t.min=30,t.opened=t.pinned=!0,t.headerPosition=this._dragDetails.selectedTabsWindow.headerPosition,this._dragDetails.selectedTabsWindow.autoHide?(t.tabTextOrientation=this._dragDetails.selectedTabsWindow._originalTextOrientation||"horizontal",t.tabPosition=this._dragDetails.selectedTabsWindow._originalTabPosition||"top"):(t.tabPosition=this._dragDetails.selectedTabsWindow.tabPosition,t.tabTextOrientation=this._dragDetails.selectedTabsWindow.tabTextOrientation),this.hasAnimation||(t.animation="none"),this._snapFeedback._position.indexOf("top")>-1||this._snapFeedback._position.indexOf("bottom")>-1?t.size=parseFloat(e.style.height)||e.offsetHeight:t.size=parseFloat(e.style.width)||e.offsetWidth,t.label=i.label,t.id="",this._dragDetails.windowFeedback.removeChild(i),t.appendChild(i),t.style.left=t.style.top="",t.draggable=void 0===i.draggable||i.draggable,t.floatable=void 0===i.floatable||i.floatable,e=t}else{var a=e.context;e.context=e,e.windowParent=null,e.context=a,this._snapFeedback._position.indexOf("top")>-1||this._snapFeedback._position.indexOf("bottom")>-1?e.size=parseFloat(e.style.height)||e.offsetHeight:e.size=parseFloat(e.style.width)||e.offsetWidth,e.style.top=e.style.left=e.style.width=e.style.height="",e.pinned=!0,e._originalTabPosition||(e._originalTabPosition=e.tabPosition)}return this._insert(this._items.indexOf(this._dragDetails.hoveredTabsWindow),e,this._snapFeedback._position),e}},{key:"_handleWindowOnDrag",value:function(){if(!this._dragDetails.windowFeedback.hasAttribute("dragged")){var e=this._dragDetails.selectedItem,t=this._dragDetails.selectedTabsWindow,i=t.closest("smart-splitter");if(this._setWindowFeedbackSize(),t!==this.$.autoHideWindow||this._dragDetails._parentInfo){if(i&&i!==this.$.itemsContainer&&1===i._items.length)for(;1===i._items.length&&i!==this.$.itemsContainer;)i=i.parentElement.closest("smart-splitter"),e=e.parentElement.closest("smart-splitter-item");if(!this._dragDetails._parentInfo)if(this._dragDetails._parentInfo={},t.closest("smart-docking-layout")===this||this._getClosestDockingLayout(t)===this)if(t.autoHide)this._dragDetails._parentInfo.closestItem=this.$.itemsContainer,this._dragDetails._parentInfo.position=t.tabPosition,t._originalTabPosition&&(t.tabPosition=t._originalTabPosition),t._originalTextOrientation&&(t.tabTextOrientation=t._originalTextOrientation);else{var a=i._items.indexOf(e);1===i._items.length?(this._dragDetails._parentInfo.position="horizontal"===i.orientation?"top":"left",this._dragDetails._parentInfo.closestItem=void 0):(0===a?(this._dragDetails._parentInfo.position="horizontal"===i.orientation?"top":"left",this._dragDetails._parentInfo.closestItem=i._items[a+1].getElementsByTagName("smart-tabs-window")[0]):(this._dragDetails._parentInfo.position="horizontal"===i.orientation?"bottom":"right",this._dragDetails._parentInfo.closestItem=i._items[a-1].getElementsByTagName("smart-tabs-window")[0]),this._dragDetails._parentInfo.closestItemSize=this._dragDetails._parentInfo.closestItem[i._measurements.size],i!==this._dragDetails._parentInfo.closestItem.closest("smart-splitter")?i===this.$.itemsContainer?this._dragDetails._parentInfo.position="layout-"+this._dragDetails._parentInfo.position:this._dragDetails._parentInfo.position="outside-"+this._dragDetails._parentInfo.position:2===i._items.length&&(this._dragDetails._parentInfo.position="inside-"+this._dragDetails._parentInfo.position))}else this._dragDetails._parentInfo.position={top:t.offsetTop,left:t.offsetLeft}}else this._dragDetails._parentInfo={},t._tabsWindow.items.length>1?(this._dragDetails._parentInfo.closestItem=t._tabsWindow,this._dragDetails._parentInfo.position=this.$.autoHideWindow._tab.index):(this._dragDetails._parentInfo.closestItem=this.$.itemsContainer,this._dragDetails._parentInfo.position=t._tabsWindow.tabPosition,this._dragDetails.windowFeedback.headerButtons=this.$.autoHideWindow._tabsWindow.headerButtons,this._noStateChangeFiring=!0,this.undock(this._dragDetails.windowFeedback)),this._originalTabIndex=void 0;if(i)this._dragDetails.windowFeedback.size=this._dragDetails.windowFeedback[i._measurements.size];else if(t===this.$.autoHideWindow){var n=this.$.autoHideWindow._tabsWindow.tabPosition;this._dragDetails.windowFeedback.size=this.$.autoHideWindow["offset"+("top"===n||"bottom"===n?"Height":"Width")]}this._dragDetails.windowFeedback.setAttribute("dragged",""),this._dragDetails.windowFeedback.parentElement!==document.body&&(this._dragDetails.windowFeedback.windowParent="body",document.body.appendChild(this._dragDetails.windowFeedback)),("advanced"!==this.snapMode&&"none"===this._dragDetails.windowFeedback.tabPosition||this._dragDetails.windowFeedback.autoHide)&&(this._dragDetails.windowFeedback.tabPosition=this._dragDetails.windowFeedback._originalTabPosition||"top"),this._dragDetails.windowFeedback.autoHide=!1,this._dragDetails.windowFeedback.allowToggle=!1;var s=this._items.indexOf(this._dragDetails.windowFeedback);s>-1&&this._items.splice(s,1),e&&e.parentElement&&(0!==this._items.filter((function(e){return e.opened})).length||this.$.placeholderItem.parentElement||(this.$.itemsContainer._items[0].className.indexOf("auto-hide")>-1?this.$.itemsContainer.insert(1,this.$.placeholderItem):this.$.itemsContainer.insert(0,this.$.placeholderItem)),i?(i.removeChild(e),this._dragDetails.initialSplitterOrientation="horizontal"===i.orientation,this._removeUnneccessaryItems(i)):t===this.$.autoHideWindow&&0===this.$.autoHideWindow._tabsWindow.items.length&&this.$.autoHideWindow._tabsWindow.closest("smart-splitter").removeChild(e),this._setAutoHidePaddings())}}},{key:"_setWindowFeedbackSize",value:function(){var e,t,i=this._dragDetails.selectedTabsWindow;this._dragDetails._isWindowFeedbackSizeSet||(i.autoHide&&i._autoHideWindow?"top"===i.tabPosition||"bottom"===i.tabPosition?(e=i.offsetWidth+"px",t=i._autoHideWindow.offsetHeight+"px"):(e=i._autoHideWindow.offsetWidth+"px",t=i.offsetHeight+"px"):(e=i.style.width||i.offsetWidth+"px",t=i.style.height||i.offsetHeight+"px"),this._dragDetails.windowFeedback.style.width=e,this._dragDetails.windowFeedback.style.height=t,this._dragDetails._isWindowFeedbackSizeSet=!0)}},{key:"_insert",value:function(e,t,i){var n=this;if("number"==typeof e){if("object"!==a(t)||t instanceof HTMLElement){if("string"==typeof t)t=n._getItemById(t);else if(t instanceof Smart.TabItem){var s=t.closest("smart-tabs-window");if(!s&&n.shadowRoot&&t.getRootNode()&&t.getRootNode().host&&(s=t.getRootNode().host.closest("smart-tabs-window")),s&&s.autoHide)return void n._dock(s,i);t=n._createTabsWindowFromObject({label:t.label,items:[{label:t.label,content:t.content}]})}}else t=n._createTabsWindowFromObject(t);if(t&&t instanceof Smart.TabsWindow)if((n.shadowRoot||n).contains(t)&&t.autoHide)n._dock(t,i);else{if(i&&i.indexOf("layout")>-1){var o=n._items.filter((function(e){return e.opened}));e=o>0?i.indexOf("left")>-1||i.indexOf("top")>-1?0:o[o.length-1]:0}var r=n._items[e];n._items[e]&&!n._items[e].opened&&(r=n._items.filter((function(e){return e.opened}))[0]),0===n._items.length&&(n.$.itemsContainer.orientation=i.indexOf("left")>-1||i.indexOf("right")>-1?"vertical":"horizontal"),t.style.top=t.style.left="",t.style.width=t.style.height="",t.opened=!0,t.pinned=!0;var l=t.closest("smart-splitter-item");if(r){if(delete t._parentInfo,t.autoHide&&(n.$.verticalHiddenItemsContainer.contains(t)?n.$.verticalHiddenItemsContainer.removeChild(t.closest("smart-splitter-item")):n.$.horizontalHiddenItemsContainer.contains(t)&&n.$.horizontalHiddenItemsContainer.removeChild(t.closest("smart-splitter-item"))),i?n._handleItemPositionInserting(t,r,i):n.insertBefore(t,r||null),l){var d=l.closest("smart-splitter");d&&d.removeChild(l)}if(t.autoHide)n._autoHide(t,i);else{var h=document.scrollingElement||document.documentElement,u=h.scrollLeft,c=h.scrollTop;t.focus(),window.scrollTo(u,c)}n._items.filter((function(e){return e.opened})).length>0&&n.$.placeholderItem.parentElement&&n.$.itemsContainer.removeChild(n.$.placeholderItem),t.layout=n,t.resizeMode="none",t.minimized=!1,t.maximized=!1,n._setDockedItemsHeaderButtons(t)}else if(n.insertBefore(t,r||null),l){var m=l.closest("smart-splitter");!m&&n.shadowRoot&&l.getRootNode()&&l.getRootNode().host&&(m=l.getRootNode().host.closest("smart-splitter")),m&&m.removeChild(l)}}else n.error(n.localize("invalidNode",{elementType:n.nodeName.toLowerCase(),method:arguments[3]||"insert"}))}else n.error(n.localize("invalidIndex",{elementType:n.nodeName.toLowerCase(),method:arguments[3]||"insert"}))}},{key:"_itemsContainerCloseHandler",value:function(e){if(e.target instanceof Smart.Tabs){var t=e.target;0===t._tabs.length&&this.removeChild(t.closest("smart-tabs-window"))}else if(e.target instanceof Smart.TabsWindow){var i=e.target.closest("smart-splitter-item"),a=i.closest("smart-splitter");a&&(a.removeChild(i),this._removeUnneccessaryItems(a)),e.target.close(),0!==this._items.filter((function(e){return e.opened})).length||this.$.placeholderItem.parentElement||this.$.itemsContainer.appendChild(this.$.placeholderItem)}}},{key:"_itemsContainerAutoHideHandler",value:function(e){var t=e.detail.button,i=t.closest("smart-tabs-window")||t.getRootNode().host;if(i){var a=i.closest("smart-splitter-item");if(a){var n=i.closest("smart-splitter");if(n){var s=n.items,o="horizontal"===n.orientation,r=s.indexOf(a)>=s.length/2;o?r?this.autoHideBottom(i):this.autoHideTop(i):r?this.autoHideRight(i):this.autoHideLeft(i)}}}}},{key:"_itemsContainerMenuHandler",value:function(e){var t=this.$.menu,i=this.getBoundingClientRect(),a=e.detail.button.getBoundingClientRect();t.open(a.left-i.left,a.top-i.top),this._menuOpenButton=e.detail.button}},{key:"_itemsContainerResizeHandler",value:function(){var e=event.target._items?event.target._items[event.detail.firstItem.index]:void 0;this._handleAutoSave(),this.$.fireEvent("stateChange",{type:"resize",item:e})}},{key:"_keyDownHandler",value:function(e){if(!this.disabled&&this.hasAttribute("dragged")&&this._snapFeedback)if(e.preventDefault(),"Control"===e.key)if("advanced"===this.snapMode){for(var t in this._snapFeedback)if(this._snapFeedback[t]instanceof HTMLElement){if("outherSnapElement"===t){for(var i=this.$.container.children,a=0;a<i.length;a++)i[a].className.indexOf("smart-docking-layout-snap")>-1&&i[a].classList.add("smart-hidden");continue}this._snapFeedback[t].classList.add("smart-hidden")}}else this._snapFeedback.classList.add("smart-hidden");else"Escape"===e.key&&this._cancelDragOperation()}},{key:"_keyUpHandler",value:function(e){if(!this.disabled&&"Control"===e.key&&this.hasAttribute("dragged")&&this._snapFeedback)if(e.preventDefault(),"advanced"===this.snapMode){for(var t in this._snapFeedback)if(this._snapFeedback[t]instanceof HTMLElement){if("outherSnapElement"===t){for(var i=this.$.container.children,a=0;a<i.length;a++)i[a].className.indexOf("smart-docking-layout-snap")>-1&&i[a].classList.remove("smart-hidden");continue}this._snapFeedback[t].classList.remove("smart-hidden")}this._handleSnapping()}else this._snapFeedback.classList.remove("smart-hidden")}},{key:"_loadState",value:function(e){this._createItemsFromArray(e,!0)}},{key:"_removeAll",value:function(e){function t(e){var t=e._items;if(t)for(var i=0;i<t.length;i++)t[i].$.hasClass("smart-docking-layout-item-holder")||e.removeChild(t[i])}this.$.itemsContainer.removeAll(),t(this.$.horizontalHiddenItemsContainer),t(this.$.verticalHiddenItemsContainer),this._items=[],e||this.$.itemsContainer.appendChild(this.$.placeholderItem)}},{key:"_removeUnneccessaryItems",value:function(e){if(e)for(var t;e._items&&0===e._items.length&&e!==this.$.itemsContainer;)(t=e.closest("smart-splitter-item")).removeChild(e),(e=t.closest("smart-splitter")).removeChild(t)}},{key:"_returnItemToOrigin",value:function(e){if(e&&this._dragDetails){var t=this._dragDetails._parentInfo;if(t)if("number"==typeof t.position)for(var i=[].slice.call(e.items),n=0;n<i.length;n++)e.removeChild(i[n]),t.closestItem.insert(t.position,{node:i[n]});else"object"===a(t.position)?(e.style.top=t.position.top+"px",e.style.left=t.position.left+"px"):t.closestItem?t.closestItem===this.$.itemsContainer?this._autoHide(e,t.position):this._insert(this._items.indexOf(t.closestItem),e,t.position):this.appendChild(e)}}},{key:"_setAutoHidePaddings",value:function(){var e=this.$.verticalHiddenItemsContainer.getElementsByClassName("auto-hide-left")[0],t=this.$.verticalHiddenItemsContainer.getElementsByClassName("auto-hide-right")[0],i=this.$.horizontalHiddenItemsContainer.getElementsByClassName("auto-hide-top")[0],a=this.$.horizontalHiddenItemsContainer.getElementsByClassName("auto-hide-bottom")[0];i&&(i.style.paddingLeft=e?e.offsetWidth+"px":"",i.style.paddingRight=t?t.offsetWidth+"px":""),a&&(a.style.paddingLeft=e?e.offsetWidth+"px":"",a.style.paddingRight=t?t.offsetWidth+"px":"")}},{key:"_setDockedItemsHeaderButtons",value:function(e){var t=e.headerButtons,i=["close","maximize","minimize"],a=t.filter((function(e){return i.indexOf(e)<0}));a=0===a.length?["close","autoHide"]:t,e.headerButtons=a}},{key:"_setFloatingItemsHeaderButtons",value:function(e){var t=["close","autoHide"];e._originalTabPosition=e.tabPosition;var i=e.headerButtons.filter((function(e){return t.indexOf(e)<0}));i=0===i.length?["close","maximize","minimize"]:e.headerButtons,e.headerButtons=i}},{key:"_setFocusable",value:function(){if(this.disabled||this.unfocusable)this.removeAttribute("tabindex");else{var e=this.tabIndex>0?this.tabIndex:0;this.setAttribute("tabindex",e)}}},{key:"_setSnappingMarkers",value:function(e,t){var i=Smart.Utilities.Core.isMobile?document.elementFromPoint(e.pageX-window.pageXOffset,e.pageY-window.pageYOffset):e.originalEvent.target,a=i.closest&&i.closest("smart-docking-layout");if(a||(a=this._getClosestDockingLayout(i)),i.shadowRoot&&(i=e.originalEvent.composedPath()[0]),"advanced"===this.snapMode){if(e.ctrlKey)return;return this._dragDetails.hoveredItem=i.closest(".smart-docking-layout-snap")?i:this._dragDetails.hoveredItem&&this._dragDetails.hoveredItem.getElementsByTagName("smart-splitter").length>0?void 0:this._dragDetails.hoveredItem,this._dragDetails.hoveredTabArea=t?i.closest(".smart-tab-label-container")||t:this._dragDetails.hoveredTabArea,void this._handleSnapping()}if(a&&a===this){if(!this._dragDetails.hoveredTabsWindow||this._dragDetails.windowFeedback!==this.$.tabsWindowFeedback&&this._dragDetails.hoveredTabsWindow===this._dragDetails.selectedTabsWindow)return this._dragDetails.hoveredItem=i.closest(".smart-docking-layout-snap")?i:this._dragDetails.hoveredItem&&this._dragDetails.hoveredItem.getElementsByTagName("smart-splitter").length>0?void 0:this._dragDetails.hoveredItem,void this._handleSnapping();var n={};if(this._dragDetails.hoveredItem){var s=this._dragDetails.hoveredItem.getBoundingClientRect(),o=this.$.itemsContainer.getBoundingClientRect();n.left=this._dragDetails.hoveredItem?s.left-o.left:0,n.top=this._dragDetails.hoveredItem?s.top-o.top:0}else n.left=n.top=0;var r=this.getBoundingClientRect(),l=this.$.itemsContainer.getBoundingClientRect(),d=Math.max(0,e.pageX-window.pageXOffset-r.left-(l.left-r.left)),h=Math.max(0,e.pageY-window.pageYOffset-r.top-(l.top-r.top));if(this._dragDetails.hoveredTabArea===t)this._dragDetails.hoveredTabArea=i.closest(".smart-tab-label-container"),this._handleSnapping("header");else if(this._dragDetails.hoveredItem&&!this._dragDetails.hoveredTabsWindow.autoHide)if(d<.05*this.$.itemsContainer.offsetWidth&&d<.15*this._dragDetails.hoveredItem.offsetWidth)this._handleSnapping("layout-left",e);else if(d>.95*this.$.itemsContainer.offsetWidth&&d>.85*this._dragDetails.hoveredItem.offsetWidth+this._dragDetails.hoveredItem.offsetLeft)this._handleSnapping("layout-right");else if(h<.05*this.$.itemsContainer.offsetHeight)this._handleSnapping("layout-top");else if(h>.95*this.$.itemsContainer.offsetHeight)this._handleSnapping("layout-bottom");else if(i.closest(".smart-tabs-content-section")){var u=this._dragDetails.hoveredItem.closest("smart-splitter").orientation;d<n.left+.3*this._dragDetails.hoveredTabArea.offsetWidth?this._handleSnapping("horizontal"===u?"inside-left":"left"):d>n.left+.7*this._dragDetails.hoveredTabArea.offsetWidth?this._handleSnapping("horizontal"===u?"inside-right":"right"):h<n.top+this._dragDetails.hoveredTabArea.offsetTop+.5*this._dragDetails.hoveredTabArea.offsetHeight+this._dragDetails.hoveredTabsWindow.$.headerSection.offsetHeight?this._handleSnapping("vertical"===u?"inside-top":"top"):this._handleSnapping("vertical"===u?"inside-bottom":"bottom")}else this._handleSnapping();else this._handleSnapping()}else this._handleSnapping()}},{key:"_setSplitterBarVisibility",value:function(){for(var e=this.$.itemsContainer.getElementsByTagName("smart-splitter-bar"),t=0;t<e.length;t++)this.hideSplitterBars?e[t].hide():e[t].show()}},{key:"_validateWindowPosition",value:function(e){e.$.addClass("no-transition","");var t=document.scrollingElement||document.documentElement;t.scrollTop>0?e.style.top=(parseFloat(e.style.top)||e.offsetTop)+"px":e.style.top=Math.max(0,Math.min(parseFloat(e.style.top)||e.offsetTop,document.documentElement.clientHeight-e.offsetHeight))+"px",t.scrollLeft>0?e.style.left=(parseFloat(e.style.left)||e.offsetLeft)+"px":e.style.left=Math.max(0,Math.min(parseFloat(e.style.left)||e.offsetLeft,document.documentElement.clientWidth-e.offsetWidth))+"px",requestAnimationFrame((function(){return e.$.removeClass("no-transition")}))}},{key:"autoHideItems",get:function(){if(this.isReady)return this.getAutoHideItems()}},{key:"items",get:function(){if(this.isReady)return this._items.filter((function(e){return e.opened})).concat(this.getAutoHideItems())}},{key:"closedItems",get:function(){if(this.isReady)return this._items.filter((function(e){return!e.opened}))}},{key:"undockedItems",get:function(){if(this.isReady){for(var e=document.getElementsByTagName("smart-tabs-window"),t=[],i=0;i<e.length;i++)e[i].closest("smart-docking-layout")||this._getClosestDockingLayout(e[i])||e[i].layout!==this||(e[i].undocked=!0,t.push(e[i]));return t}}}])&&n(i.prototype,d),h&&n(i,h),t}())}});
=======
import "../smart.element.js";
import "../smart.button.js";
import "../smart.scrollbar.js";
import "../smart.splitter.js";
import "../smart.window.js";
import "../smart.tabs.js";
import "../smart.dockinglayout.js";

export class smartDockingLayout extends Smart.Component {
	get name() {
		return 'smartDockingLayout';
	}	
}

>>>>>>> origin/master

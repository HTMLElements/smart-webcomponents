/*!
 * 
 * /* Smart HTML Elements v5.0.0 (2019-November) 
 * Copyright (c) 2011-2019 jQWidgets. 
 * License: https://htmlelements.com/license/ * /
 * 
 * 
 */!function(e){var t={};function i(r){if(t[r])return t[r].exports;var a=t[r]={i:r,l:!1,exports:{}};return e[r].call(a.exports,a,a.exports,i),a.l=!0,a.exports}i.m=e,i.c=t,i.d=function(e,t,r){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)i.d(r,a,function(t){return e[t]}.bind(null,a));return r},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=54)}({0:function(e,t,i){"use strict";function r(e,t,i){return(r="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,i){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=u(e)););return e}(e,t);if(r){var a=Object.getOwnPropertyDescriptor(r,t);return a.get?a.get.call(i):a.value}})(e,t,i||e)}function a(e,t){return!t||"object"!==c(t)&&"function"!=typeof t?n(e):t}function n(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}function o(e){var t="function"==typeof Map?new Map:void 0;return(o=function(e){if(null===e)return null;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,i)}function i(){return l(e,arguments,u(this).constructor)}return i.prototype=Object.create(e.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),h(i,e)})(e)}function l(e,t,i){return(l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}()?Reflect.construct:function(e,t,i){var r=[null];r.push.apply(r,t);var a=new(Function.bind.apply(e,r));return i&&h(a,i.prototype),a}).apply(null,arguments)}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function m(e,t,i){return t&&p(e.prototype,t),i&&p(e,i),e}!function(){var e=[],t="Smart";if(window[t]&&window[t].Version){if("5.1.0"===window[t].Version)return;if("5.1.0"!==window[t].Version)t+="5.1.0";else for(var i=2;window[t];)t+=i.toString(),i++}var l=navigator.userAgent.indexOf("Edge")>-1&&navigator.appVersion.indexOf("Edge")>-1;document.elementsFromPoint||(document.elementsFromPoint=document.msElementsFromPoint);var h=function(){function e(){f(this,e)}return m(e,[{key:"addMessages",value:function(e,t){Object.assign(this.messages[e],t)}},{key:"localize",value:function(e,t){if(this.messages&&this.messages[this.locale]){var i=this.messages[this.locale][e];if(""===i)return"";if(i){var r=i;for(var a in t){var n=t[a];i=i.replace(new RegExp("{{"+a+"}}","g"),n)}return this.localizeFormatFunction&&this.localizeFormatFunction(r,i,t),i}}}}],[{key:"moduleName",get:function(){return"LocalizationModule"}},{key:"properties",get:function(){return{messages:{value:{en:{}},type:"object",inherit:!0,reflectToAttribute:!1},locale:{value:"en",type:"string",reflectToAttribute:!1},localizeFormatFunction:{value:void 0,type:"function",reflectToAttribute:!1}}}}]),e}(),p=function(){function e(){f(this,e)}return m(e,[{key:"log",value:function(e){this._logger("log",e)}},{key:"warn",value:function(e){this._logger("warn",e)}},{key:"error",value:function(e){this._logger("error",e)}},{key:"_logger",value:function(e,t){if(this.debugMode){var i=t instanceof Error?t.message:t.toString();console[e](i)}if(this.rethrowError&&"error"===e)throw t}}],[{key:"moduleName",get:function(){return"ErrorModule"}},{key:"properties",get:function(){return{rethrowError:{value:!0,type:"boolean",reflectToAttribute:!1},debugMode:{value:!0,type:"boolean",reflectToAttribute:!1}}}}]),e}(),v=function(){function e(){f(this,e)}return m(e,[{key:"getBindings",value:function(e,t){var i=this,r=0,a={},n=function(e){if(e instanceof HTMLElement)return i.parseAttributes(e);var t=i.parseProperty(e.data?e.data.trim():null,"textContent",e);return t?(i.ownerElement&&e.parentNode===i.ownerElement.$.content&&(t.value=""!==i.ownerElement.$.html?i.ownerElement.$.html:void 0,i.ownerElement.innerHTML=""),{textContent:t}):void 0}(e);n&&(a.data=n),t||(a.mapping=[],t=a),e.getAttribute&&(a.nodeId=e.getAttribute("smart-id"),t&&n&&(t.mapping[a.nodeId]=n)),a.node=e,e.firstChild&&(a.children={});for(var s=e.firstChild;s;s=s.nextSibling)a.children[r++]=i.getBindings(s,t);return a}},{key:"_addRemovePropertyBinding",value:function(e,t,i,r,a){if(e&&t&&i){var n=this,s=n.ownerElement.bindings,o=i.getAttribute("smart-id"),l=e.indexOf("{{")>=0,h=!1;(e=e.replace("{{","").replace("}}","").replace("[[","").replace("]]","")).indexOf("!")>=0&&(e=e.replace("!",""),h=!0);var u=n.ownerElement._properties[e],d={name:e,reflectToAttribute:u.reflectToAttribute,twoWay:l,type:u.type,not:h};if(a&&!r){var c={},f={name:e,targetPropertyName:t,reflectToAttribute:u.reflectToAttribute,twoWay:l,type:u.type,not:h};c[e]=f,s.mapping[o]=c}!function e(a){for(var s in a){var l=a[s];if(l.nodeId===o){l.data||(l.data={}),r?(l.data[t]=null,delete l.data[t]):l.data[t]=d;break}if(l.children)e(l.children);else if(l.node&&l.node.children&&l.node===i.parentElement){var h=l.node;if(!h.firstChild)continue;l.children={};for(var u=0,c=h.firstChild;c;c=c.nextSibling)l.children[u++]=n.getBindings(c);e(l.children)}}}(s.children),r?delete n.ownerElement.boundProperties[e]:n.ownerElement.boundProperties[e]=!0,n.updateBoundNodes(e)}}},{key:"addPropertyBinding",value:function(e,t,i,r){this._addRemovePropertyBinding(e,t,i,!1,r)}},{key:"removePropertyBinding",value:function(e,t,i,r){this._addRemovePropertyBinding(e,t,i,!0,r)}},{key:"parseAttributes",value:function(t){for(var i=void 0,r=0;r<t.attributes.length;r++){var a=t.attributes[r],n=a.name,s=a.value;e.cache["toCamelCase"+n]||(e.cache["toCamelCase"+n]=D.Core.toCamelCase(n));var o=e.cache["toCamelCase"+n];if(n.indexOf("(")>=0){var l=n.substring(1,n.length-1);if(this.ownerElement&&!this.ownerElement.dataContext){this.ownerElement.templateListeners[t.getAttribute("smart-id")+"."+l]=s,t.removeAttribute(n);continue}i||(i={});var h=s.substring(0,s.indexOf("("));i[o]={isEvent:!0,name:l,value:h}}else{var u=this.parseProperty(s,n,t);u&&(i||(i={}),i[o]=u)}}return i}},{key:"parseProperty",value:function(e,t){if(e&&e.length){for(var i,r=e.length,a=0,n=0,s=0,o=!0;n<r;){a=e.indexOf("{{",n);var l=e.indexOf("[[",n),h="}}";if(l>=0&&(a<0||l<a)&&(a=l,o=!1,h="]]"),(s=a<0?-1:e.indexOf(h,a+2))<0)return;i=i||{};var u=e.slice(a+2,s).trim();i.name=u,n=s+2}var d=i.name,c=this.ownerElement?this.ownerElement._properties[d]:null;if(i.twoWay=o,i.ready=!1,this.ownerElement&&(d.indexOf("::")>=0?this.ownerElement.boundProperties[d.substring(0,d.indexOf("::"))]=!0:this.ownerElement.boundProperties[d]=!0),c)i.type=c.type,i.reflectToAttribute=c.reflectToAttribute;else{["checked","selected","async","autofocus","autoplay","controls","defer","disabled","hidden","ismap","loop","multiple","open","readonly","required","scoped"].indexOf(t)>=0?i.type="boolean":i.type="string",i.reflectToAttribute=!0}return i}}},{key:"updateTextNodes",value:function(){this.updateTextNode(this.ownerElement.shadowRoot||this.ownerElement,this.ownerElement.bindings,this.ownerElement)}},{key:"updateTextNode",value:function(e,t,i){if(t){for(var r=0,a=e.firstChild;a&&t.children;a=a.nextSibling)this.updateTextNode(a,t.children[r++],i);if(t&&t.data)for(var n in t.data){var s=t.data[n],o=s.name;"textContent"===n&&s.twoWay&&!s.updating&&void 0!==s.value&&(i[o]=s.value)}}}},{key:"updateBoundProperty",value:function(e,t){if(!t.updating){var i=this.ownerElement;t.updating=!0,i[e]=t.value,t.updating=!1}}},{key:"updateBoundNodes",value:function(e){var t=this;if(t.updateBoundNode(t.ownerElement.shadowRoot||t.ownerElement,t.ownerElement.bindings,t.ownerElement,e),t.ownerElement.detachedChildren.length>0)for(var i=function(i){var r=t.ownerElement.detachedChildren[i],a=r.getAttribute("smart-id"),n=function e(t){if(t.nodeId===a)return t;for(var i in t.children){var r=t.children[i];if((r.getAttribute?r.getAttribute("smart-id"):"")===a)return t;if(r.children){var n=e(r);if(n)return n}}return null}(t.ownerElement.bindings);if(n)t.updateBoundNode(r,n,t.ownerElement,e,!0);else if(r.getAttribute&&t.ownerElement.bindings.mapping){var s=t.ownerElement,o=t.ownerElement.bindings;if(o)for(var l in o.mapping){var h=s.querySelector('[smart-id="'+l+'"]');if(h){var u=o.mapping[l];t.updateBoundData(h,u,s,e)}}}},r=0;r<t.ownerElement.detachedChildren.length;r++)i(r)}},{key:"updateBoundMappedNodes",value:function(){var e=this.ownerElement.bindings,t=this.ownerElement;if(e.mapping)for(var i in e.mapping){var r=t.querySelector('[smart-id="'+i+'"]');if(t.shadowRoot&&((r=t.querySelector('[id="'+i+'"]'))||(r=t.shadowRoot.querySelector('[id="'+i+'"]')||t.shadowRoot.querySelector('[smart-id="'+i+'"]'))),r){var a=e.mapping[i];this.updateBoundData(r,a,t)}else if(t.getAttribute("aria-controls")){var n=document.getElementById(t.getAttribute("aria-controls"));if(!n&&t.shadowRoot&&(n=t.shadowRoot.getElementById(t.getAttribute("aria-controls"))),r=n.querySelector('[smart-id="'+i+'"]')){var s=e.mapping[i];this.updateBoundData(r,s,t)}}}}},{key:"updateBoundNode",value:function(e,t,i,r,a){var n=this;if(t){var s,o,l=0;if(a){if(a&&!t.data)for(var h=e.firstChild;h&&t.children;h=h.nextSibling)h.getAttribute?function(){var e=h.getAttribute("smart-id"),a=function(){for(var i in t.children)if(t.children[i].nodeId===e)return t.children[i]}();n.updateBoundNode(h,a,i,r),l++}():n.updateBoundNode(h,t.children[l++],i,r,a)}else for(var u=e.firstChild;u&&t.children;u=u.nextSibling)u.getAttribute?(s=void 0,o=void 0,s=u.getAttribute("smart-id"),o=function(){for(var e in t.children)if(t.children[e].nodeId===s)return t.children[e]}(),n.updateBoundNode(u,o,i,r),l++):n.updateBoundNode(u,t.children[l++],i,r);if(t&&t.data){var d=t.data;n.updateBoundData(e,d,i,r)}}}},{key:"updateBoundData",value:function(t,i,r,a){var n=this,s=function(s){var o=i[s],l=o.name;if(o.updating)return"continue";if(l.indexOf("::")>=0&&(l=l.substring(0,l.indexOf("::"))),void 0!==a&&a!==l)return"continue";if(l.indexOf("(")>=0){var h=l.substring(l.indexOf("(")),u=l.substring(0,l.indexOf("("));if((h=(h=(h=h.substring(1,h.length-1)).replace(/ /gi,"")).split(",")).length>0&&""!==h[0]){for(var d=[],f=0;f<h.length;f++)d.push(r[h[f]]);o.value=r[u].apply(r,d)}else o.value=r[u]();o.type=c(o.value)}else o.value=r[l];if("innerHTML"===l?t[s].toString().trim()!==r[l].toString().trim()&&(o.ready?t[s]=o.value.toString().trim():r._properties[l].defaultValue!==o.value&&(t[s]=o.value.toString().trim())):o.not?(t[s]=!o.value,o.targetPropertyName&&(t[o.targetPropertyName]=!o.value)):(t[s]=o.value,o.targetPropertyName&&(t[o.targetPropertyName]=o.value)),t.$&&t.$.isNativeElement){e.cache["toDash"+s]||(e.cache["toDash"+s]=D.Core.toDash(s));var p=e.cache["toDash"+s],m=t.$.getAttributeValue(p,o.type);!o.reflectToAttribute||m===o.value&&o.ready||t.$.setAttributeValue(p,o.value,o.type),o.reflectToAttribute||t.$.setAttributeValue(p,null,o.type)}if(!o.ready){if(t.$&&t.$.isCustomElement){e.cache["toDash"+s]||(e.cache["toDash"+s]=D.Core.toDash(s));var v=e.cache["toDash"+s];t._properties||(t._beforeCreatedProperties=t._properties=t.propertyByAttributeName=[]),t._properties[s]||(t._properties[s]={attributeName:v},t._beforeCreatedProperties&&(t._beforeCreatedProperties[s]=t._properties[s]),t.propertyByAttributeName[v]=t._properties[s]);var y=t._properties[s];y.isUpdating=!0,o.reflectToAttribute&&(o.not?t.$.setAttributeValue(y.attributeName,!o.value,o.type):t.$.setAttributeValue(y.attributeName,o.value,o.type)),o.reflectToAttribute||t.$.setAttributeValue(y.attributeName,null,o.type),y.isUpdating=!1}if(o.twoWay){var g=function(i){if(o.value=i,t.$&&t.$.isNativeElement){e.cache["toDash"+s]||(e.cache["toDash"+s]=D.Core.toDash(s));var r=e.cache["toDash"+s],a=t.$.getAttributeValue(r,o.type);o.reflectToAttribute&&a!==o.value&&t.$.setAttributeValue(r,o.value,o.type),o.reflectToAttribute||t.$.setAttributeValue(r,null,o.type)}};if(o.name.indexOf("::")>=0){var _=o.name.indexOf("::"),b=o.name.substring(_+2);n.ownerElement["$"+t.getAttribute("smart-id")].listen(b,(function(){g(t[s]);var e=o.name.substring(0,o.name.indexOf("::"));n.updateBoundProperty(e,o)}))}if(t.$&&t.$.isCustomElement){t._properties[s]&&(t._properties[s].notify=!0),e.cache["toDash"+s]||(e.cache["toDash"+s]=D.Core.toDash(s));var x=e.cache["toDash"+s];n.ownerElement["$"+t.getAttribute("smart-id")].listen(x+"-changed",(function(e){var t=e.detail;g(t.value);var i=n.ownerElement.context;e.context!==document&&(n.ownerElement.context=n.ownerElement),n.updateBoundProperty(o.name,o),n.ownerElement.context=i}))}}}o.ready=!0};for(var o in i)s(o)}}],[{key:"clearCache",value:function(){this.cache={}}},{key:"moduleName",get:function(){return"BindingModule"}}]),e}(),y=function(){function e(){f(this,e)}return m(e,null,[{key:"isBoolean",value:function(e){return"boolean"==typeof e}},{key:"isFunction",value:function(e){return!!(e&&e.constructor&&e.call&&e.apply)}},{key:"isArray",value:function(e){return Array.isArray(e)}},{key:"isObject",value:function(e){return e&&("object"===c(e)||this.isFunction(e))||!1}},{key:"isDate",value:function(e){return e instanceof Date}},{key:"isString",value:function(e){return"string"==typeof e}},{key:"isNumber",value:function(e){return"number"==typeof e}},{key:"getType",value:function(e){var t=this,i=["Boolean","Number","String","Function","Array","Date","Object"].find((function(i){if(t["is"+i](e))return i}));return i?i.toLowerCase():void 0}}]),e}(),g=function(){function e(){f(this,e)}return m(e,null,[{key:"animate",value:function(e,i,r,a){var n=e;if(n&&n instanceof HTMLElement!=!1){if(0===n.getElementsByClassName("smart-ripple").length){var s=document.createElement("span");s.classList.add("smart-ripple"),s.setAttribute("role","presentation");var o=!0,l=null;if(window[t].EnableShadowDOM&&n.enableShadowDOM&&!0!==n.isInShadowDOM){for(var h=0;h<n.shadowRoot.host.shadowRoot.children.length;h++)"link"!==n.shadowRoot.host.shadowRoot.children[h].tagName.toLowerCase()&&(l=n.shadowRoot.host.shadowRoot.children[h]);n.shadowRoot.host.shadowRoot.querySelector(".smart-ripple")&&(o=!1)}else l=n.firstElementChild;o&&(l&&!l.noRipple&&l.offsetHeight>0?l.appendChild(s):n.appendChild(s))}var u=null;if(u=window[t].EnableShadowDOM&&n.shadowRoot?n.shadowRoot.host.shadowRoot.querySelector(".smart-ripple"):n.getElementsByClassName("smart-ripple")[0]){u.innerHTML="",u.classList.remove("smart-animate"),u.style.height=u.style.width=Math.max(n.offsetHeight,n.offsetWidth)+"px";var d=window.getComputedStyle(u.parentElement),c=parseInt(d.borderLeftWidth)||0,f=parseInt(d.borderTopWidth)||0,p=n.getBoundingClientRect(),m=i-(p.left+window.pageXOffset)-u.offsetWidth/2-c,v=r-(p.top+window.pageYOffset)-u.offsetHeight/2-f;u.style.left=m+"px",u.style.top=v+"px",u.classList.add("smart-animate"),u.addEventListener("animationend",(function e(){u.parentElement&&u.parentElement.removeChild(u),a&&a(),u.removeEventListener("animationend",e),u.removeEventListener("animationcancel",e)})),u.addEventListener("animationcancel",(function e(){u.parentElement&&u.parentElement.removeChild(u),a&&a(),u.removeEventListener("animationcancel",e),u.removeEventListener("animationend",e)}))}}}}]),e}(),_=function(){function e(){f(this,e)}return m(e,null,[{key:"easeInQuad",value:function(e,t,i,r){return i*(e/=r)*e+t}},{key:"easeOutQuad",value:function(e,t,i,r){return-i*(e/=r)*(e-2)+t}},{key:"easeInOutQuad",value:function(e,t,i,r){return(e/=r/2)<1?i/2*e*e+t:-i/2*(--e*(e-2)-1)+t}},{key:"easeInCubic",value:function(e,t,i,r){return i*(e/=r)*e*e+t}},{key:"easeOutCubic",value:function(e,t,i,r){return i*((e=e/r-1)*e*e+1)+t}},{key:"easeInOutCubic",value:function(e,t,i,r){return(e/=r/2)<1?i/2*e*e*e+t:i/2*((e-=2)*e*e+2)+t}},{key:"easeInQuart",value:function(e,t,i,r){return i*(e/=r)*e*e*e+t}},{key:"easeOutQuart",value:function(e,t,i,r){return-i*((e=e/r-1)*e*e*e-1)+t}},{key:"easeInOutQuart",value:function(e,t,i,r){return(e/=r/2)<1?i/2*e*e*e*e+t:-i/2*((e-=2)*e*e*e-2)+t}},{key:"easeInQuint",value:function(e,t,i,r){return i*(e/=r)*e*e*e*e+t}},{key:"easeOutQuint",value:function(e,t,i,r){return i*((e=e/r-1)*e*e*e*e+1)+t}},{key:"easeInOutQuint",value:function(e,t,i,r){return(e/=r/2)<1?i/2*e*e*e*e*e+t:i/2*((e-=2)*e*e*e*e+2)+t}},{key:"easeInSine",value:function(e,t,i,r){return-i*Math.cos(e/r*(Math.PI/2))+i+t}},{key:"easeOutSine",value:function(e,t,i,r){return i*Math.sin(e/r*(Math.PI/2))+t}},{key:"easeInOutSine",value:function(e,t,i,r){return-i/2*(Math.cos(Math.PI*e/r)-1)+t}},{key:"easeInExpo",value:function(e,t,i,r){return 0===e?t:i*Math.pow(2,10*(e/r-1))+t}},{key:"easeOutExpo",value:function(e,t,i,r){return e===r?t+i:i*(1-Math.pow(2,-10*e/r))+t}},{key:"easeInOutExpo",value:function(e,t,i,r){return 0===e?t:e===r?t+i:(e/=r/2)<1?i/2*Math.pow(2,10*(e-1))+t:i/2*(2-Math.pow(2,-10*--e))+t}},{key:"easeInCirc",value:function(e,t,i,r){return-i*(Math.sqrt(1-(e/=r)*e)-1)+t}},{key:"easeOutCirc",value:function(e,t,i,r){return i*Math.sqrt(1-(e=e/r-1)*e)+t}},{key:"easeInOutCirc",value:function(e,t,i,r){return(e/=r/2)<1?-i/2*(Math.sqrt(1-e*e)-1)+t:i/2*(Math.sqrt(1-(e-=2)*e)+1)+t}},{key:"easeInElastic",value:function(e,t,i,r){var a=1.70158,n=0,s=i;return 0===e?t:1==(e/=r)?t+i:(n||(n=.3*r),s<Math.abs(i)?(s=i,a=n/4):a=n/(2*Math.PI)*Math.asin(i/s),-s*Math.pow(2,10*(e-=1))*Math.sin((e*r-a)*(2*Math.PI)/n)+t)}},{key:"easeOutElastic",value:function(e,t,i,r){var a=1.70158,n=0,s=i;return 0===e?t:1==(e/=r)?t+i:(n||(n=.3*r),s<Math.abs(i)?(s=i,a=n/4):a=n/(2*Math.PI)*Math.asin(i/s),s*Math.pow(2,-10*e)*Math.sin((e*r-a)*(2*Math.PI)/n)+i+t)}},{key:"easeInOutElastic",value:function(e,t,i,r){var a=1.70158,n=0,s=i;return 0===e?t:2==(e/=r/2)?t+i:(n||(n=r*(.3*1.5)),s<Math.abs(i)?(s=i,a=n/4):a=n/(2*Math.PI)*Math.asin(i/s),e<1?s*Math.pow(2,10*(e-=1))*Math.sin((e*r-a)*(2*Math.PI)/n)*-.5+t:s*Math.pow(2,-10*(e-=1))*Math.sin((e*r-a)*(2*Math.PI)/n)*.5+i+t)}},{key:"easeInBack",value:function(e,t,i,r,a){return void 0===a&&(a=1.70158),i*(e/=r)*e*((a+1)*e-a)+t}},{key:"easeOutBack",value:function(e,t,i,r,a){return void 0===a&&(a=1.70158),i*((e=e/r-1)*e*((a+1)*e+a)+1)+t}},{key:"easeInOutBack",value:function(e,t,i,r,a){return void 0===a&&(a=1.70158),(e/=r/2)<1?i/2*(e*e*((1+(a*=1.525))*e-a))+t:i/2*((e-=2)*e*((1+(a*=1.525))*e+a)+2)+t}},{key:"easeInBounce",value:function(e,t,i,r){return i-this.easeOutBounce(r-e,0,i,r)+t}},{key:"easeOutBounce",value:function(e,t,i,r){return(e/=r)<1/2.75?i*(7.5625*e*e)+t:e<2/2.75?i*(7.5625*(e-=1.5/2.75)*e+.75)+t:e<2.5/2.75?i*(7.5625*(e-=2.25/2.75)*e+.9375)+t:i*(7.5625*(e-=2.625/2.75)*e+.984375)+t}},{key:"easeInOutBounce",value:function(e,t,i,r){return e<r/2?.5*this.easeInBounce(2*e,0,i,r)+t:.5*this.easeOutBounce(2*e-r,0,i,r)+.5*i+t}}]),e}(),b=function(){function e(){f(this,e)}return m(e,null,[{key:"toCamelCase",value:function(e){return e.replace(/-([a-z])/g,(function(e){return e[1].toUpperCase()}))}},{key:"toDash",value:function(e){return e.split(/(?=[A-Z])/).join("-").toLowerCase()}},{key:"unescapeHTML",value:function(e){return(new DOMParser).parseFromString(e,"text/html").documentElement.textContent}},{key:"escapeHTML",value:function(e){var t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"};return String(e).replace(/[&<>"'`=\/]/g,(function(e){return t[e]}))}},{key:"createGUID",value:function(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()}},{key:"getScriptLocation",value:function(){return"./"!==window[t].BaseUrl?window[t].BaseUrl:function(){if(document.currentScript){var e=document.currentScript.src,t=e.lastIndexOf("/");return e=e.substring(0,t)}var i=new Error,r="(",a=")";if(Smart.Utilities.Core.Browser.Safari&&(r="@",a="\n"),i.fileName)return i.fileName.replace("/smart.element.js","");var n=i.stack.split(r);return(n=(n=(n=n[1]).split(a)[0]).split(":")).splice(-2,2),(n=n.join(":")).replace("/smart.element.js","")}()}},{key:"CSSVariablesSupport",value:function(){return window.CSS&&window.CSS.supports&&window.CSS.supports("(--fake-var: 0)")}},{key:"assign",value:function(e,t){var i=this,r=function(e){return e&&"object"===c(e)&&!Array.isArray(e)&&null!==e},a=Object.assign({},e);return r(e)&&r(t)&&Object.keys(t).forEach((function(n){r(t[n])&&n in e?a[n]=i.assign(e[n],t[n]):Object.assign(a,d({},n,t[n]))})),a}},{key:"html",value:function(e,t){var i="",r=e.childNodes;if(!t){for(var a,n=0,s=r.length;n<s&&(a=r[n]);n++){if(a instanceof HTMLElement||a.tagName&&["strong"].indexOf(a.tagName.toLowerCase())>=0){for(var o,l=a.tagName.toLowerCase(),h=a.attributes,u="<"+l,d=0;o=h[d];d++)u+=" "+o.name+'="'+o.value.replace(/[&\u00A0"]/g,D.Core.escapeHTML)+'"';u+=">";["area","base","br","col","command","embed","hr","img","input","keygen","link","meta","param","source","track","wbr"][l]&&(i+=u),i=i+u+this.html(a)+"</"+l+">"}else i+=a.textContent.replace(/[&\u00A0<>]/g,D.Core.escapeHTML)}return i}e.innerHTML=t.replace(/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,"<$1></$2>")}},{key:"isMobile",get:function(){return/(iphone|ipod|ipad|android|iemobile|blackberry|bada)/.test(window.navigator.userAgent.toLowerCase())}},{key:"Browser",get:function(){var e,t=function(t){var i=t.indexOf(e);if(-1!==i){var r=t.indexOf("rv:");return"Trident"===e&&-1!==r?parseFloat(t.substring(r+3)):parseFloat(t.substring(i+e.length+1))}},i={};return i[function(){for(var t=[{string:navigator.userAgent,subString:"Edge",identity:"Edge"},{string:navigator.userAgent,subString:"MSIE",identity:"IE"},{string:navigator.userAgent,subString:"Trident",identity:"IE"},{string:navigator.userAgent,subString:"Firefox",identity:"Firefox"},{string:navigator.userAgent,subString:"Opera",identity:"Opera"},{string:navigator.userAgent,subString:"OPR",identity:"Opera"},{string:navigator.userAgent,subString:"Chrome",identity:"Chrome"},{string:navigator.userAgent,subString:"Safari",identity:"Safari"}],i=0;i<t.length;i++){var r=t[i].string;if(e=t[i].subString,-1!==r.indexOf(t[i].subString))return t[i].identity}return"Other"}()]=!0,i.version=t(navigator.userAgent)||t(navigator.appVersion)||"Unknown",i}}]),e}(),x=[],w=function(){function e(){f(this,e)}return m(e,null,[{key:"watch",value:function(t){x.push(t),e.interval&&clearInterval(e.interval),e.interval=setInterval((function(){e.observe()}),100)}},{key:"observeElement",value:function(e){var t=e,i=e._computedStyle||"resize"!==t.hasStyleObserver?document.defaultView.getComputedStyle(t,null):{},r=!0,a="resize"!==t.hasStyleObserver?["paddingLeft","paddingRight","paddingTop","paddingBottom","borderLeftWidth","borderRightWidth","borderTopWidth","borderBottomWidth","display","visibility","font-size","font-family","font-style","font-weight","max-height","min-height","max-width","min-width","overflow","overflow-x","overflow-y"]:[];if(e.styleProperties&&(a=a.concat(e.styleProperties)),e.observableStyleProperties&&(a=e.observableStyleProperties),t._styleInfo){if(e.isHidden||"none"!==i.display&&(0!==e.offsetWidth&&0!==e.offsetHeight||(e.isHidden=!0)),e.isHidden){if(e.visibilityChangedHandler(),e.isHidden)return;r=!1}for(var n=[],s=0;s<a.length;s++){var o=a[s];t._styleInfo[o]!==i[o]&&(n[o]={oldValue:t._styleInfo[o],value:i[o]},n.length++),t._styleInfo[o]=i[o]}n.length>0&&(t.$.fireEvent("styleChanged",{styleProperties:n},{bubbles:!1,cancelable:!0}),n.display&&r&&t.$.fireEvent("resize",t,{bubbles:!1,cancelable:!0}))}else{t._styleInfo=[];for(var l=0;l<a.length;l++){var h=a[l];t._styleInfo[h]=i[h]}}}},{key:"observe",value:function(){for(var e=0;e<x.length;e++){var t=x[e];this.observeElement(t)}}},{key:"unwatch",value:function(t){e.interval&&clearInterval(e.interval);var i=x.indexOf(t);-1!==i&&x.splice(i,1),x.length>0&&(e.interval=setInterval((function(){e.observe()}),100))}}]),e}(),S=[],k=[],C=["resize","down","up","move","tap","taphold","swipeleft","swiperight","swipetop","swipebottom"],N=function(){function e(t){f(this,e);var i=this;i.target=t,i.$target=new M(t),i.$document=t.$document?t.$document:new M(document),i.id=(Date.now().toString(36)+Math.random().toString(36).substr(2,5)).toUpperCase();var r={handlers:{},boundEventTypes:[],listen:i.listen.bind(i),unlisten:i.unlisten.bind(i)};return i.tapHoldDelay=750,i.swipeMin=10,i.swipeMax=5e3,i.swipeDelay=1e3,i.tapHoldDelay=750,i.inputEventProperties=["clientX","clientY","pageX","pageY","screenX","screenY"],C.forEach((function(e){r[e]=function(t){r.handlers[e]=t},i[e]=function(e){if(!r.handlers[e.type]){if(("mousemove"===e.type||"pointermove"===e.type||"touchmove"===e.type)&&r.handlers.move){var t=i.createEvent(e,"move");r.handlers.move(t)}return!0}return r.handlers[e.type](e)}})),i.listen(),i.handlers=r.handlers,r}return m(e,[{key:"listen",value:function(e){var i=this;if("resize"===e&&!i.target.resizeTrigger&&i.target!==document&&i.target!==window&&!1!==i.target.hasResizeObserver){var r=document.createElement("div");r.className="smart-resize-trigger-container",r.innerHTML='<div class="smart-resize-trigger-container"><div class="smart-resize-trigger"></div></div><div class="smart-resize-trigger-container"><div class="smart-resize-trigger-shrink"></div></div>',r.setAttribute("aria-hidden",!0),window[t].EnableShadowDOM&&i.target.shadowRoot?i.target.shadowRoot.appendChild(r):i.target.appendChild(r),i.target.resizeTrigger=r;var a,n,s,o,l=r.childNodes[0],h=l.childNodes[0],u=r.childNodes[1],d=function(){h.style.width="100000px",h.style.height="100000px",l.scrollLeft=1e5,l.scrollTop=1e5,u.scrollLeft=1e5,u.scrollTop=1e5},c=i.target.offsetWidth,f=i.target.offsetHeight;if(0===c||0===f){i.target.addEventListener("resize",(function e(){d(),i.target.removeEventListener("resize",e)})),d()}else d();i.target.resizeHandler=function(){n||(n=requestAnimationFrame((function(){if(n=0,s=i.target.offsetWidth,o=i.target.offsetHeight,a=s!==c||o!==f,i.target.requiresLayout&&(a=!0),a){c=s,f=o;var e=new CustomEvent("resize",{bubbles:!1,cancelable:!0});i.resize(e),i.target.requiresLayout=!1}}))),d()},l.addEventListener("scroll",i.target.resizeHandler),u.addEventListener("scroll",i.target.resizeHandler)}if(!i.isListening){if(i.isListening=!0,i.isPressed=!1,i.isReleased=!1,i.isInBounds=!1,window.PointerEvent)i.$target.listen("pointerdown.inputEvents"+i.id,i.pointerDown.bind(i)),i.$target.listen("pointerup.inputEvents"+i.id,i.pointerUp.bind(i)),i.$target.listen("pointermove.inputEvents"+i.id,i.pointerMove.bind(i)),i.$target.listen("pointercancel.inputEvents"+i.id,i.pointerCancel.bind(i));else"ontouchstart"in window&&(i.$target.listen("touchmove.inputEvents"+i.id,i.touchMove.bind(i)),i.$target.listen("touchstart.inputEvents"+i.id,i.touchStart.bind(i)),i.$target.listen("touchend.inputEvents"+i.id,i.touchEnd.bind(i)),i.$target.listen("touchcancel.inputEvents"+i.id,i.touchCancel.bind(i))),i.$target.listen("mousedown.inputEvents"+i.id,i.mouseDown.bind(i)),i.$target.listen("mouseup.inputEvents"+i.id,i.mouseUp.bind(i)),i.$target.listen("mousemove.inputEvents"+i.id,i.mouseMove.bind(i)),i.$target.listen("mouseleave.inputEvents"+i.id,i.mouseLeave.bind(i));i.target._handleDocumentUp||(i.target._handleDocumentUp=i.handleDocumentUp.bind(i),i.target._handleDocumentUpId=i.id,i.$document.listen("mouseup.inputEvents"+i.target._handleDocumentUpId,i.target._handleDocumentUp))}}},{key:"unlisten",value:function(e){(this.isListening=!1,window.PointerEvent)?(this.$target.unlisten("pointerdown.inputEvents"+this.id),this.$target.unlisten("pointerup.inputEvents"+this.id),this.$target.unlisten("pointermove.inputEvents"+this.id),this.$target.unlisten("pointercancel.inputEvents"+this.id)):("ontouchstart"in window&&(this.$target.unlisten("touchstart.inputEvents"+this.id),this.$target.unlisten("touchmove.inputEvents"+this.id),this.$target.unlisten("touchend.inputEvents"+this.id),this.$target.unlisten("touchcancel.inputEvents"+this.id)),this.$target.unlisten("mousedown.inputEvents"+this.id),this.$target.unlisten("mouseup.inputEvents"+this.id),this.$target.unlisten("mousemove.inputEvents"+this.id),this.$target.unlisten("mouseleave.inputEvents"+this.id));if(this.target._handleDocumentUp&&(this.$document.unlisten("mouseup.inputEvents"+this.target._handleDocumentUpId,this.target._handleDocumentUp),delete this.target._handleDocumentUp,delete this.target._handleDocumentUpId),"resize"===e&&this.target.resizeTrigger){var t=this.target.resizeTrigger,i=t.childNodes[0],r=t.childNodes[1];i.removeEventListener("scroll",this.target.resizeHandler),r.removeEventListener("scroll",this.target.resizeHandler),this.target.resizeHandler=null,t.parentNode.removeChild(t),delete this.target.resizeTrigger}}},{key:"handleDocumentUp",value:function(e){this.isPressed=!1,this.isReleased=!1,this.resetSwipe(e)}},{key:"createEvent",value:function(e,t){var i=e.touches,r=e.changedTouches,a=i&&i.length?i[0]:r&&r.length?r[0]:void 0,n=new CustomEvent(t,{bubbles:!0,cancelable:!0,composed:void 0!==this.$target.element.getRootNode().host});if(n.originalEvent=e,a){for(var s=0;s<this.inputEventProperties.length;s++){var o=this.inputEventProperties[s];n[o]=a[o]}return n}for(var l in e)l in n||(n[l]=e[l]);return n}},{key:"fireTap",value:function(e){if(clearTimeout(this.tapHoldTimeout),!this.tapHoldFired&&this.isInBounds){var t=this.createEvent(e,"tap");this.tap(t)}}},{key:"initTap",value:function(e){var t=this;t.isInBounds=!0,t.tapHoldFired=!1,t.tapHoldTimeout=setTimeout((function(){if(t.isInBounds){t.tapHoldFired=!0;var i=t.createEvent(e,"taphold");t.taphold(i)}}),t.tapHoldDelay)}},{key:"pointerDown",value:function(e){return this.handleDown(e)}},{key:"mouseDown",value:function(e){if(!(this.isPressed||this.touchStartTime&&new Date-this.touchStartTime<500))return this.handleDown(e)}},{key:"touchStart",value:function(e){return this.touchStartTime=new Date,this.isTouchMoved=!0,this.handleDown(e)}},{key:"mouseUp",value:function(e){if(!(this.isReleased||this.touchEndTime&&new Date-this.touchEndTime<500))return this.handleUp(e)}},{key:"handleDown",value:function(e){this.isReleased=!1,this.isPressed=!0;var t=this.createEvent(e,"down");return(this.handlers.tap||this.handlers.taphold)&&this.initTap(t),(this.handlers.swipeleft||this.handlers.swiperight||this.handlers.swipetop||this.handlers.swipebottom)&&this.initSwipe(t),this.down(t)}},{key:"handleUp",value:function(e){this.isReleased=!0,this.isPressed=!1;var t=this.createEvent(e,"up"),i=this.up(t);return(this.handlers.tap||this.handlers.taphold)&&this.fireTap(t),this.resetSwipe(t),i}},{key:"handleMove",value:function(e){var t=this.move(e);return this.isPressed&&(this._maxSwipeVerticalDistance=Math.max(this._maxSwipeVerticalDistance,Math.abs(this._startY-e.pageY)),this._maxSwipeHorizontalDistance=Math.max(this._maxSwipeHorizontalDistance,Math.abs(this._startX-e.pageX)),t=this.handleSwipeEvents(e)),t}},{key:"touchEnd",value:function(e){return this.touchEndTime=new Date,this.handleUp(e)}},{key:"pointerUp",value:function(e){return this.handleUp(e)}},{key:"pointerCancel",value:function(e){this.pointerUp(e)}},{key:"touchCancel",value:function(e){this.touchEnd(e)}},{key:"mouseLeave",value:function(){this.isInBounds=!1}},{key:"mouseMove",value:function(e){if(!this.isTouchMoved)return this.handleMove(e)}},{key:"pointerMove",value:function(e){return this.handleMove(e)}},{key:"touchMove",value:function(e){for(var t=e.touches,i=e.changedTouches,r=t&&t.length?t[0]:i&&i.length?i[0]:void 0,a=0;a<this.inputEventProperties.length;a++){var n=this.inputEventProperties[a];void 0===e[n]&&(e[n]=r[n])}return this.isTouchMoved=!0,this.handleMove(e)}},{key:"handleSwipeEvents",value:function(e){var t=!0;return(this.handlers.swipetop||this.handlers.swipebottom)&&(t=this.handleVerticalSwipeEvents(e)),!1===t?t:((this.handlers.swipeleft||this.handlers.swiperight)&&(t=this.handleHorizontalSwipeEvents(e)),t)}},{key:"handleVerticalSwipeEvents",value:function(e){var t;return t=e.pageY-this._startY,this.swiped(e,t,"vertical")}},{key:"handleHorizontalSwipeEvents",value:function(e){var t;return t=e.pageX-this._startX,this.swiped(e,t,"horizontal")}},{key:"swiped",value:function(e,t,i){if(i=i||0,Math.abs(t)>=this.swipeMin&&!this._swipeEvent&&!this._swipeLocked){var r=t<0?"swipeleft":"swiperight";if("horizontal"===i?this._swipeEvent=this.createEvent(e,r):(r=t<0?"swipetop":"swipebottom",this._swipeEvent=this.createEvent(e,t<0?"swipetop":"swipebottom")),this[r]&&(this[r](this._swipeEvent),Math.abs(t)<=this.swipeMax))return e.stopImmediatePropagation(),!1}return!0}},{key:"resetSwipe",value:function(){this._swipeEvent=null,clearTimeout(this._swipeTimeout)}},{key:"initSwipe",value:function(e){var t=this;t._maxSwipeVerticalDistance=0,t._maxSwipeHorizontalDistance=0,t._startX=e.pageX,t._startY=e.pageY,t._swipeLocked=!1,t._swipeEvent=null,t._swipeTimeout=setTimeout((function(){t._swipeLocked=!0}),t.swipeDelay)}}]),e}(),A=function(){function e(t,i,r){f(this,e);this.container=t,this.horizontalScrollBar=i,this.verticalScrollBar=r,this.disableSwipeScroll=!1,this.listen()}return m(e,[{key:"scrollWidth",get:function(){return this.horizontalScrollBar?this.horizontalScrollBar.max:-1},set:function(e){e<0&&(e=0),this.horizontalScrollBar&&(this.horizontalScrollBar.max=e)}},{key:"scrollHeight",get:function(){return this.verticalScrollBar?this.verticalScrollBar.max:-1},set:function(e){e<0&&(e=0),this.verticalScrollBar&&(this.verticalScrollBar.max=e)}},{key:"scrollLeft",get:function(){return this.horizontalScrollBar?this.horizontalScrollBar.value:-1},set:function(e){e<0&&(e=0),this.horizontalScrollBar&&(this.horizontalScrollBar.value=e)}},{key:"scrollTop",get:function(){return this.verticalScrollBar?this.verticalScrollBar.value:-1},set:function(e){e<0&&(e=0),this.verticalScrollBar&&(this.verticalScrollBar.value=e)}},{key:"vScrollBar",get:function(){return this.verticalScrollBar}},{key:"hScrollBar",get:function(){return this.horizontalScrollBar}}]),m(e,[{key:"listen",value:function(){var e=this,t=b.isMobile,i=e.horizontalScrollBar,r=e.verticalScrollBar;e.inputEvents=new N(e.container);var a,n,s,o,l,h,u,d,c,f=500,p=function(e){return{amplitude:0,delta:0,initialValue:0,min:0,max:e.max,previousValue:0,pointerPosition:0,targetValue:0,scrollBar:e,value:0,velocity:0}},m=p(i),v=p(r),y=function(){h=Date.now(),u=h-o,o=h;var e=function(e){e.delta=e.value-e.previousValue,e.previousValue=e.value;var t=1e3*e.delta/(1+u);e.velocity=.8*t+.2*e.velocity};e(v),e(m)},g=function(e){return d.value=e>d.max?d.max:e<d.min?d.min:e,d.scrollBar.value=d.value,e>d.max?"max":e<d.min?"min":"value"};function _(){var t,i;d.amplitude&&(e.container.$.fireEvent("kineticScroll"),t=Date.now()-o,(i=-d.amplitude*Math.exp(-t/f))>5||i<-5?(g(d.targetValue+i),cancelAnimationFrame(n),n=0,n=requestAnimationFrame(_)):g(d.targetValue))}e.inputEvents.down((function(i){if(t){var r=i.originalEvent.target,n=r&&r.closest?r.closest("smart-scroll-bar"):void 0;if(n!==e.horizontalScrollBar&&n!==e.verticalScrollBar){s=!0,a=!1;var h=function(e,t){e.amplitude=0,e.pointerPosition=t,e.previousValue=e.value,e.value=e.scrollBar.value,e.initialValue=e.value,e.max=e.scrollBar.max};h(v,i.clientY),h(m,i.clientX),o=Date.now(),clearInterval(l),l=setInterval(y,f)}}})),e.inputEvents.up((function(){if(!s)return!0;if(clearInterval(l),e.disableSwipeScroll)s=!1;else{var t=function(e){d=e,e.amplitude=.8*e.velocity,e.targetValue=Math.round(e.value+e.amplitude),o=Date.now(),cancelAnimationFrame(n),n=requestAnimationFrame(_),e.velocity=0};v.velocity>10||v.velocity<-10?t(v):(m.velocity>10||m.velocity<-10)&&t(m),s=!1}})),e.inputEvents.move((function(t){if(!s)return!0;if(!e.disableSwipeScroll&&(a&&(t.originalEvent.preventDefault(),t.originalEvent.stopPropagation()),m.visible=i.offsetHeight>0,v.visible=r.offsetWidth>0,s&&(m.visible||v.visible))){v.ratio=-v.max/v.scrollBar.offsetHeight,v.delta=(t.clientY-v.pointerPosition)*v.ratio,m.ratio=-m.max/m.scrollBar.offsetWidth,m.delta=(t.clientX-m.pointerPosition)*m.ratio;var n="value",o=function(t,i,r){return t.delta>5||t.delta<-5?(d=t,"min"===(n=t.initialValue+t.delta>d.max?"max":t.initialValue+t.delta<d.min?"min":"value")&&0===t.initialValue||("max"===n&&t.initialValue===t.max||(!t.visible||(e.container.$.fireEvent("kineticScroll"),g(t.initialValue+t.delta),y(),r.originalEvent.preventDefault(),r.originalEvent.stopPropagation(),a=!0,!1)))):null},l=o(v,t.clientY,t);if(null!==l)return l;var h=o(m,t.clientX,t);return null!==h?h:void 0}})),e.scrollTo=function(t,i){var r=!1===i?m:v,a=!1;o||(o=Date.now()),c||(c=Date.now()),Math.abs(Date.now()-c)>375?o=Date.now():a=!0,c=Date.now(),r.value=r.scrollBar.value,r.delta=t-r.value,r.max=r.scrollBar.max,t<=r.min&&(t=r.min),t>=r.max&&(t=r.max),r.targetValue=t;var s=t,l=r.value;r.velocity=100*r.delta/(1+r.max),r.from=l;var h=function(e){return r.value=e>r.max?r.max:e<r.min?r.min:e,r.scrollBar.value=r.value,e>r.max?"max":e<r.min?"min":"value"};cancelAnimationFrame(n),n=requestAnimationFrame((function i(){var u,d=Date.now()-c,f=Math.min(1e3,Date.now()-o),p=r.velocity*Math.exp(f/175);if(a)p<0&&r.value<=t?p=0:p>0&&r.value>=t&&(p=0),(r.value+p<=r.min||r.value+p>=r.max)&&(p=0),p>.5||p<-.5?(h(r.value+p),cancelAnimationFrame(n),n=0,n=requestAnimationFrame(i)):h(r.targetValue);else{if(d>=175)return cancelAnimationFrame(n),e.container.$.fireEvent("kineticScroll"),void(n=0);u=D.Animation.Easings.easeInSine(d,l,s-l,175),h(u),cancelAnimationFrame(n),n=0,n=requestAnimationFrame(i)}}))},e.inputEvents.listen()}},{key:"unlisten",value:function(){this.inputEvents&&this.inputEvents.unlisten(),delete this.inputEvents}}]),e}(),M=function(){function e(t){f(this,e),this.events={},this.handlers={},this.element=t}return m(e,[{key:"hasClass",value:function(e){for(var t=e.split(" "),i=0;i<t.length;i++){if(!this.element.classList.contains(t[i]))return!1}return!0}},{key:"addClass",value:function(e){if(!this.hasClass(e)){for(var t=e.split(" "),i=0;i<t.length;i++)this.element.classList.add(t[i]);this.isNativeElement||w.observeElement(this.element)}}},{key:"removeClass",value:function(e){var t=this;if(0!==arguments.length){for(var i=e.split(" "),r=0;r<i.length;r++)t.element.classList.remove(i[r]);""===t.element.className&&t.element.removeAttribute("class"),t.isNativeElement||w.observeElement(t.element)}else t.element.removeAttribute("class")}},{key:"dispatch",value:function(e){var t=this.events[e.type],i=!1;if(t.length>1)for(var r=0;r<t.length;r++){var a=t[r];if(a.namespace&&a.namespace.indexOf("_")>=0){i=!0;break}}i&&t.sort((function(e,t){var i=e.namespace,r=t.namespace;return(i=-1===i.indexOf("_")?0:parseInt(i.substring(i.indexOf("_")+1)))<(r=-1===r.indexOf("_")?0:parseInt(r.substring(r.indexOf("_")+1)))?-1:i>r?1:0}));for(var n=0;n<t.length;n++){var s=t[n];if(e.namespace=s.namespace,e.context=s.context,e.defaultPrevented)break;var o=s.handler.apply(this.element,[e]);if(void 0!==o&&(e.result=o,!1===o)){e.preventDefault(),e.stopPropagation();break}}return e.result}},{key:"fireEvent",value:function(e,t,i){i||(i={bubbles:!0,cancelable:!0,composed:this.isInShadowDOM}),i.detail=t||{};var r=new CustomEvent(e,i);return r.originalStopPropagation=r.stopPropagation,r.stopPropagation=function(){return r.isPropagationStopped=!0,r.originalStopPropagation()},this.dispatchEvent(r),r}},{key:"dispatchEvent",value:function(e){var t=e.type,i=this.element.context;this.element.context=document,this.element["on"+t]?this.element["on"+t](e):this.element.dispatchEvent(e),this.element.context=i}},{key:"listen",value:function(e,t){var i=this,r=e.split("."),a=r.slice(1).join("."),n=r[0];i.events[n]||(i.events[n]=[]);var s={type:n,handler:t,context:i.element,namespace:a};C.indexOf(n)>=0&&(i.inputEvents||(i.inputEvents=new N(i.element)),i.inputEvents[n]((function(e){i.dispatchEvent(e)})),i.inputEvents.boundEventTypes.push(n),i.inputEvents.listen(n)),0===i.events[n].length&&(i.handlers[n]=i.dispatch.bind(i),"wheel"===n?i.element.addEventListener("wheel",i.handlers[n],!!i.isPassiveSupported&&{passive:!1}):i.element.addEventListener(n,i.handlers[n],!1)),i.events[n].push(s)}},{key:"unlisten",value:function(e){var t=e.split("."),i=t.slice(1).join("."),r=t[0],a=this.events[r];if(this.inputEvents&&this.inputEvents.boundEventTypes.indexOf(r)>=0&&(this.inputEvents.boundEventTypes.splice(this.inputEvents.boundEventTypes.indexOf(r),1),0===this.inputEvents.boundEventTypes.length&&this.inputEvents.unlisten(r)),a){for(var n=0;n<a.length;n++){if(""!==i){var s=a.findIndex((function(e){return e.namespace===i}));a.splice(s,1);break}a=[]}0===a.length&&(this.element.removeEventListener(r,this.handlers[r]),this.events[r]=[],delete this.handlers[r])}}},{key:"getAttributeValue",value:function(e,t){var i=this.element.getAttribute(e);if(this.isNativeElement)return this.deserialize(i,t);var r=this.element.propertyByAttributeName[e];return void 0===r.deserialize?this.deserialize(i,t,r.nullable):this.element[r.deserialize](i)}},{key:"setAttributeValue",value:function(e,t,i){var r,a=!1;if(this.isNativeElement){if(r=this.serialize(t,i),"boolean"===i){if(["checked","selected","async","autofocus","autoplay","controls","defer","disabled","hidden","ismap","loop","multiple","open","readonly","required","scoped"].indexOf(e)>=0)return void(t?this.element.setAttribute(e,""):this.element.removeAttribute(e))}}else{var n=this.element.propertyByAttributeName[e];a=!n||n.nullable,r=n&&n.serialize?this.element[n.serialize](t):this.serialize(t,i,a)}"array"!==i&&"object"!==i||"[]"!==r&&"{}"!==r?void 0===r?(this.element.removeAttribute(e),this.element.shadowRoot&&this.element.$.root&&this.element.$.root.removeAttribute(e)):(this.element.setAttribute(e,r),this.element.shadowRoot&&this.element.$.root&&this.element.$.root.setAttribute(e,r)):this.element.removeAttribute(e)}},{key:"serialize",value:function(e,t,i){if(void 0===t&&(t=D.Types.getType(e)),void 0!==e&&(i||null!==e)){if(i&&null===e)return"null";if("string"===t)return e;if("boolean"===t||"bool"===t){if(!0===e||"true"===e||1===e||"1"===e)return"";if(!1===e||"false"===e||0===e||"0"===e)return}if("array"===t)return JSON.stringify(e);return["string","number","int","integer","float","date","any","function"].indexOf(t)>=0?e.toString():"object"===t?JSON.stringify(e):void 0}}},{key:"deserialize",value:function(e,t,i){var r="null"===e;if(void 0!==e&&(!r||i)){if(r&&i)return null;if("boolean"===t||"bool"===t)return null!==e;if("number"===t||"float"===t)return"NaN"===e?NaN:"Infinity"===e?1/0:"-Infinity"===e?-1/0:parseFloat(e);if("int"===t||"integer"===t)return"NaN"===e?NaN:"Infinity"===e?1/0:"-Infinity"===e?-1/0:parseInt(e);if("string"===t)return e;if("any"===t)return e;if("date"===t)return new Date(e);if("function"===t){if("function"==typeof window[e])return window[e]}else if("array"===t||"object"===t)try{var a=JSON.parse(e);if(a)return a}catch(i){if(window[e]&&"object"===c(window[e]))return window[e];if("array"===t&&e.indexOf("[")>=0){if(e.indexOf("{")>=0){var n=e.replace(/{/gi,"").replace("[","").replace("]","").replace(/'/gi,"").replace(/"/gi,"").trim();n=n.split("},");for(var s=0;s<n.length;s++){for(var o={},l=n[s].trim().split(","),h=0;h<l.length;h++){var u=l[h].split(":")[0].trim(),d=l[h].split(":")[1].trim();o[u]=d}n[s]=o}return n}return e.replace("[","").replace("]","").replace(/'/gi,"").replace(/"/gi,"").trim().split(",")}}}}},{key:"isCustomElement",get:function(){return this.element instanceof window[t].BaseElement==!0||"DIV"!==this.element.tagName&&"SPAN"!==this.element.tagName&&"BUTTON"!==this.element.tagName&&"INPUT"!==this.element.tagName&&"UL"!==this.element.tagName&&"LI"!==this.element.tagName&&document.createElement(this.element.nodeName)instanceof window[t].BaseElement==!0}},{key:"isNativeElement",get:function(){return!this.isCustomElement}},{key:"isPassiveSupported",get:function(){var e=this;if(void 0!==e.supportsPassive)return e.supportsPassive;e.supportsPassive=!1;try{var t=Object.defineProperty({},"passive",{get:function(){e.supportsPassive=!0}});window.addEventListener("testPassive",null,t),window.removeEventListener("testPassive",null,t)}catch(e){}return e.supportsPassive}}]),e}(),T=function(){function e(){f(this,e)}return m(e,null,[{key:"Ripple",get:function(){return g}},{key:"Easings",get:function(){return _}}]),e}(),D=function(){function e(){f(this,e)}return m(e,null,[{key:"Extend",value:function(e){return new M(e)}},{key:"Assign",value:function(t,i){if(t.indexOf(".")>=0){var r=t.split(".");return e[r[0]]||(e[r[0]]={}),void(e[r[0]][r[1]]=i)}e[t]=i}},{key:"Types",get:function(){return y}},{key:"Core",get:function(){return b}},{key:"Animation",get:function(){return T}},{key:"Scroll",get:function(){return A}},{key:"InputEvents",get:function(){return N}}]),e}(),O=D.Extend(document);v.cache={};var E=function(i){function r(){return f(this,r),a(this,u(r).apply(this,arguments))}return s(r,i),m(r,[{key:"template",value:function(){return"<div></div>"}},{key:"registered",value:function(){this.onRegistered&&this.onRegistered()}},{key:"created",value:function(){this.isReady=!1,this._initElement(this),this._setModuleState("created"),this.onCreated&&this.onCreated()}},{key:"completed",value:function(){this.isCompleted=!0,this._onCompleted&&this._onCompleted(),this.onCompleted&&this.onCompleted()}},{key:"whenReady",value:function(e){this.isCompleted?e():(this.whenReadyCallbacks||(this.whenReadyCallbacks=[]),this.whenReadyCallbacks.push(e))}},{key:"whenRendered",value:function(e){this.isRendered?e():(this.whenRenderedCallbacks||(this.whenRenderedCallbacks=[]),this.whenRenderedCallbacks.push(e))}},{key:"addThemeClass",value:function(){""!==this.theme&&this.classList.add("smart-"+this.theme)}},{key:"addDefaultClass",value:function(){this.classList.add(t.toLowerCase()+"-element"),this.classList.add(this.nodeName.toLowerCase())}},{key:"_renderShadowRoot",value:function(){if(this.shadowRoot){this.$.root.classList.add(this.nodeName.toLowerCase());for(var e=0;e<this.attributes.length;e++){var t=this.attributes[e];"class"===t.name||"id"===t.name||"style"===t.name||"tabindex"===t.name||t.name.indexOf("aria")>=0||this.$.root.setAttribute(t.name,t.value)}for(var i=0;i<this.classList.length;i++){var r=this.classList[i];"smart-element-init"!==r&&"smart-element"!==r&&"smart-hidden"!==r&&"smart-visibility-hidden"!==r&&this.$.root.classList.add(r)}}}},{key:"render",value:function(){if(!this.isRendered&&(this.isRendered=!0,this.isRendering=!1,this.context=document,this._renderShadowRoot(),this.whenRenderedCallbacks)){for(var e=0;e<this.whenRenderedCallbacks.length;e++)this.whenRenderedCallbacks[e]();this.whenRenderedCallbacks=[]}this.onRender&&this.onRender(),this.disabled&&this.setAttribute("aria-disabled",!0),this.readonly&&this.setAttribute("aria-readonly",!0)}},{key:"ready",value:function(){if(this._setId(),this.addThemeClass(),this.addDefaultClass(),"collapsed"===this.visibility?this.classList.add("smart-hidden"):"hidden"===this.visibility&&this.classList.add("smart-visibility-hidden"),this.dataContext&&this.applyDataContext(),this.onReady&&this.onReady(),this.shadowRoot&&Smart(this._selector)){if(Smart(this._selector).styleUrls)for(var e=Smart(this._selector).styleUrls,t=0;t<e.length;t++)this.importStyle(e[t]);if(Smart(this._selector).styles){var i=document.createElement("style");i.innerHTML=Smart(this._selector).styles,this.shadowRoot.insertBefore(i,this.shadowRoot.firstChild)}}Smart(this._selector)&&Smart(this._selector).ready&&Smart(this._selector).ready()}},{key:"_setId",value:function(){if(!this.id){var e=this.elementName;this.id=e.slice(0,1).toLowerCase()+e.slice(1)+Math.floor(65536*(1+Math.random())).toString(16).substring(1)}}},{key:"checkLicense",value:function(){"Evaluation"===window[t].License&&-1===window.location.hostname.indexOf("htmlelements")&&-1===window.location.hostname.indexOf("localhost")&&-1===window.location.protocol.indexOf("file")&&(this.logWatermark(),this.logLicense(),window[t].License)}},{key:"logWatermark",value:function(){var e=document.createElement("a");e.href="https://www.htmlelements.com/",e.innerHTML="https://www.htmlelements.com/",e.style.position="absolute",e.style.right="5px",e.style.bottom="5px",e.style.color="#fff",e.style.padding="20px",e.style.borderRadius="5px",e.style.background="#20C933",e.style.cursor="pointer",e.style.zIndex="999999",e.style.display="block",e.style.fontSize="24px",e.style.textDecoration="none",e.style.fontWeight="bold",e.style.opacity=0,e.style.transition="opacity .35s ease-in-out",e.id="watermark",document.getElementById("watermark")||setTimeout((function(){document.getElementById("watermark")||(document.body.appendChild(e),setTimeout((function(){e.style.opacity=1})),setTimeout((function(){e.style.opacity=0,setTimeout((function(){e.parentNode.removeChild(e)}),350)}),6e3))}),1e3)}},{key:"logLicense",value:function(){console.log("****************************************************************************************************************"),console.log("****************************************************************************************************************"),console.log("****************************************************************************************************************"),console.log("*Smart HTML Elements License Key Not Found."),console.log("*This is an evaluation only version, it is not licensed for development projects intended for production."),console.log("*if you want to hide the watermark, please send an email to: info@htmlelements.com for a license."),console.log("****************************************************************************************************************"),console.log("****************************************************************************************************************"),console.log("****************************************************************************************************************")}},{key:"applyDataContext",value:function(e){var t=this,i="string"==typeof t.dataContext?window[t.dataContext]||document[t.dataContext]:t.dataContext;if(e&&(i=e,t.dataContext=e),i){if(!i._uid){i._uid=(Date.now().toString(36)+Math.random().toString(36).substr(2,5)).toUpperCase(),i._properties=[];var r=function(e){var r=i[e];if("function"==typeof r||"_properties"===e||"_uid"===e)return"continue";i._properties[e]=r,Object.defineProperty(i,e,{configurable:!1,enumerable:!0,get:function(){return i._properties[e]},set:function(r){var a=i._properties[e];i._properties[e]=r;var n=[];n[e]={oldValue:a,value:r},n.length++,t.updatingDataContext=!0,O.fireEvent("dataContextPropertyChanged",{dataContext:i,properties:n},{bubbles:!1,cancelable:!0}),t.updatingDataContext=!1}})};for(var a in i)r(a)}if(t.dataContextProperties=t.parseAttributes(t),t.dataContextPropertiesMap={},t.dataContextListeners={},t.dataContextProperties){for(var n in t.updatingDataContext=!0,t.dataContextProperties){var s=t.dataContextProperties[n],o=s.name;if(s.propertyName=n,t.dataContextPropertiesMap[o]=n,v.cache["toDash"+n]||(v.cache["toDash"+n]=D.Core.toDash(o)),s.isEvent&&function(){var e=s.value;t.dataContextListeners[o]&&t.removeEventListener(o,t.dataContextListeners[o]),t.dataContextListeners[o]=function(t){i[e](t)},t.addEventListener(o,t.dataContextListeners[o])}(),o.indexOf(".")>=0){for(var l=o.split("."),h=i[l[0]],u=1;u<l.length;u++)h=h[l[u]];void 0!==h&&(t[n]=h)}else t[n]=i[o]}t.dataContextPropertyChangedHandler=function(e){var i=e.detail.properties;if(e.detail.dataContext===("string"==typeof t.dataContext?window[t.dataContext]||document[t.dataContext]:t.dataContext))for(var r in i){var a=t.dataContextPropertiesMap[r],n=t.context;a&&(t.context=document,t[a]=i[r].value,t.context=n)}},O.listen("dataContextPropertyChanged",t.dataContextPropertyChangedHandler),t.updatingDataContext=!1}else t.dataContextProperties=null}else{t.dataContextProperties=null;window.addEventListener("load",(function e(){("string"==typeof t.dataContext?window[t.dataContext]||document[t.dataContext]:t.dataContext)&&(t.applyDataContext(),window.removeEventListener("load",e))}))}}},{key:"updateDataContextProperty",value:function(e){var t="string"==typeof this.dataContext?window[this.dataContext]||document[this.dataContext]:this.dataContext,i=this.dataContextProperties[e];if(!this.updatingDataContext&&i.twoWay){var r=i.name;if(r.indexOf(".")>=0){for(var a=r.split("."),n=t[a[0]],s=1;s<a.length;s++)n=n[a[s]];void 0!==n&&(n=this[e],S[t._uid]&&(S[t._uid][e]=n))}else t[r]=this[e],S[t._uid]&&(S[t._uid][e]=t[r])}}},{key:"initProperties",value:function(){var e=this;if(Smart(e._selector)&&Smart(e._selector).properties&&(e._initProperties=Smart(e._selector).properties),e.hasAttribute("props")&&!e.props?e._initProperties=window[e.getAttribute("props")]:e.props&&(e._initProperties=e.props),e._initProperties)for(var t=Object.keys(e._initProperties),i=0;i<t.length;i++){var r=t[i],a=e._initProperties[r];if(a.constructor===Smart.ObservableArray||a instanceof Smart.ObservableArray)e[r]=a.toArray();else if(a.constructor===Smart.DataAdapter||"smartDataAdapter"===a.constructor.name||"object"===c(a)&&Smart.DataAdapter&&a instanceof Smart.DataAdapter||a instanceof Smart.Observable||a.constructor===Smart.Observable||"object"!==c(a)||D.Types.isArray(a)){if(void 0===e[r]&&-1===["onReady","onAttached","onDetached","onCreated","onCompleted"].indexOf(r)){var n=e.localize("propertyUnknownName",{name:r});e.log(n)}e[r]=a}else"messages"!==r?"object"===c(a)&&function t(i,r){for(var a=Object.keys(i),n=0;n<a.length;n++){var s=a[n],o=i[s],l=e._properties[r+"_"+s];if(l&&null===l.value){if(void 0===e[r+"_"+s]){var h=e.localize("propertyUnknownName",{name:r+"_"+s});e.log(h)}e[r+"_"+s]=o}else if("object"===c(o)&&!D.Types.isArray(o)&&o&&o.constructor!==Date)t(o,r+"_"+s);else{if(void 0===e[r+"_"+s]){var u=e.localize("propertyUnknownName",{name:r+"_"+s});e.log(u)}e[r+"_"+s]=o}}}(a,r):e[r]=a}}},{key:"setup",value:function(){var e=this;if(e.context=this,!e.isReady||e.isCompleted){if(e.isReady)return e._setModuleState("attached"),e.isAttached=!0,e.attached(),e._handleListeners("listen"),void(e.context=document);e.ownerElement&&e.ownerElement.detachedChildren.indexOf(e)>=0&&e.ownerElement.detachedChildren.splice(e.ownerElement.detachedChildren.indexOf(e),1),e.isReady=!0,e.methods=e.getStaticMember("methods"),e.initProperties(),b.isMobile&&e.classList.add("smart-mobile");for(var t=0;t<e.attributes.length;t+=1){var i=e.propertyByAttributeName[e.attributes[t].name];if(i){var r=e.$.getAttributeValue(i.attributeName,i.type),a=r?r.toString():"";if(!(a.indexOf("{{")>=0||a.indexOf("[[")>=0||"object"!==i.type&&"array"!==i.type&&(e.attributes[t].value.indexOf("{{")>=0||e.attributes[t].value.indexOf("[[")>=0)||void 0===r||i.value===r)){var n=D.Types.getType(r),s=e.attributes[t].value;if(("any"===i.type||"object"===i.type)&&""+e[i.name]===r)continue;if("array"===i.type&&e[i.name]&&JSON.stringify(e[i.name])===r)continue;if("number"===n&&isNaN(r)&&"NaN"!==s&&"Infinity"!==s&&"-Infinity"!==s){var o=e.localize("propertyInvalidValueType",{name:i.name,actualType:"string",type:i.type});e.log(o)}i.isUpdatingFromAttribute=!0,e[i.name]=r,i.isUpdatingFromAttribute=!1}}}for(var l in e._properties){var h=e._properties[l];if("innerHTML"===l&&h.value===h.defaultValue&&(h.value=h.defaultValue=D.Core.html(e)),"boolean"!==h.type&&"bool"!==h.type||"false"===e.getAttribute(h.attributeName)&&(h.isUpdating=!0,e.setAttribute(h.attributeName,""),h.isUpdating=!1),h.defaultReflectToAttribute&&h.reflectToAttribute){if(h.defaultReflectToAttribute&&h.defaultReflectToAttributeConditions){for(var u=!0,d=0;d<h.defaultReflectToAttributeConditions.length;d++){var c=h.defaultReflectToAttributeConditions[d],f=void 0,p=void 0;for(var m in c)f=m,p=c[m];e._properties[f]&&e._properties[f].value!==p&&(u=!1)}if(!u)continue}h.isUpdating=!0,e.$.setAttributeValue(h.attributeName,h.value,h.type),h.isUpdating=!1}}var v=[];if(e.children.length>0)for(var y=0;y<e.children.length;y++){var g=e.children[y];D.Extend(g).isCustomElement&&v.push(g)}e.applyTemplate(),e.complete=function(){if(!e.templateBindingsReady){var t=function(e){e.templateBindingsReady||(e.templateBindingsReady=!0,e.updateTextNodes(),e.updateBoundNodes())};if(e.ownerElement){for(var i=e.ownerElement,r=[];i;)r.push(i),i=i.ownerElement;for(var a=r.length-1;a>=0;a--)t(r[a]);t(e)}else t(e)}var n=function(){if(e._setModuleState("ready"),e.ready(),"auto"!==e.renderMode||e.isRendered||e.render(),e.isAttached=!0,e._setModuleState("attached"),e.attached(),e._handleListeners("listen"),e.isHidden||0!==e.offsetWidth&&0!==e.offsetHeight||(e.isHidden=!0),e.completed(),e.isRendered&&(e.context=document),e.whenReadyCallbacks){for(var t=0;t<e.whenReadyCallbacks.length;t++)e.whenReadyCallbacks[t]();e.whenReadyCallbacks=[]}};if(e.wait)e.classList.add("smart-visibility-hidden");else if(e.classList.contains("smart-async"))requestAnimationFrame((function(){n()}));else{var s=e.shadowParent;e.shadowParent=null;var o=e.parents;if(e.shadowParent=s,0===o.length)return;var l=function(){for(var t=e.ownerElement,i=[];t;)i.push(t),t=t.ownerElement;for(var r=i.length-1;r>=0;r--)i[r].updateBoundMappedNodes()};e.ownerElement&&"HTML"!==o[o.length-1].nodeName?e.ownerElement&&"HTML"===e.ownerElement.parents[e.ownerElement.parents.length-1].nodeName?(l(),n()):e.checkIsInDomInterval=setInterval((function(){var t=e.parents;"HTML"===t[t.length-1].nodeName&&(clearInterval(e.checkIsInDomInterval),l(),n())}),100):n()}};var _=[].slice.call(e.querySelectorAll("[smart-id]")).concat(v);if(e.enableShadowDOM&&!0!==e.isInShadowDOM&&(_=[].slice.call(e.shadowRoot.querySelectorAll("[smart-id]")).concat(v)),0===_.length)e.complete();else{e._completeListeners=0;for(var x=function(t){var i=_[t];if(D.Extend(i).isCustomElement){var r=function(){e._completeListeners--,0===e._completeListeners&&(e.complete(),delete e._completeListeners)}.bind(e);i.isCompleted||i.isUtilityElement||!1!==i.wait||(e._completeListeners++,i._onCompleted||(i.completeHandlers=[],i._onCompleted=function(){for(var e=0;e<i.completeHandlers.length;e++)i.completeHandlers[e]()}),i.completeHandlers.push(r))}},w=0;w<_.length;w++)x(w);0===e._completeListeners&&e.complete()}}}},{key:"visibilityChangedHandler",value:function(){var e=this;e.isReady&&requestAnimationFrame((function(){0===e.offsetWidth||0===e.offsetHeight?e.isHidden=!0:(e.isHidden=!1,e.$.fireEvent("resize",e,{bubbles:!1,cancelable:!0}))}))}},{key:"attributeChangedCallback",value:function(e,t,i){var r=this.propertyByAttributeName[e];if("class"!==e&&"style"!==e||this.visibilityChangedHandler(),r||this.attributeChanged(e,t,i),!(!r||r&&r.isUpdating)){var a=this.$.getAttributeValue(r.attributeName,r.type);void 0!==i&&this[r.name]!==a&&(r.isUpdatingFromAttribute=!0,this[r.name]=void 0!==a?a:this._properties[r.name].defaultValue,r.isUpdatingFromAttribute=!1)}}},{key:"attributeChanged",value:function(e,t,i){}},{key:"attached",value:function(){this.hasStyleObserver&&w.watch(this),this.onAttached&&this.onAttached(),Smart(this._selector)&&Smart(this._selector).attached&&Smart(this._selector).attached()}},{key:"detached",value:function(){this.hasStyleObserver&&w.unwatch(this),this._setModuleState("detached"),this.isAttached=!1,this.ownerElement&&-1===this.ownerElement.detachedChildren.indexOf(this)&&this.ownerElement.detachedChildren.push(this),this._handleListeners("unlisten"),this.onDetached&&this.onDetached(),Smart(this._selector)&&Smart(this._selector).detached&&Smart(this._selector).detached()}},{key:"propertyChangedHandler",value:function(e,t,i){t!==i&&("theme"===e&&(""!==t&&this.classList.remove("smart-"+t),""!==i&&this.classList.add("smart-"+i)),"visibility"===e?("collapsed"===t?this.classList.remove("smart-hidden"):"hidden"===t&&this.classList.remove("smart-visibility-hidden"),"collapsed"===i?this.classList.add("smart-hidden"):"hidden"===i&&this.classList.add("smart-visibility-hidden")):"disabled"!==e&&"readonly"!==e||(i?this.setAttribute("aria-"+e,!0):this.removeAttribute("aria-"+e)),this.propertyChanged&&this.propertyChanged(e,t,i))}},{key:"_handleListeners",value:function(e){var t=this,i=t.tagName.toLowerCase(),r=function(r){var a=function(a){var n=a.split("."),s=n[0],o=t.$;if(n[1])if(s=n[1],o=t["$"+n[0]],"document"===n[0]){var l=t.smartId;""===l&&(l=D.Core.toCamelCase(i)),s=s+"."+l}else t.smartId&&(s=s+"."+t.smartId+"_"+t.parents.length);else t.smartId&&(s=s+"."+t.smartId);var h=r[a];if(!o)return"continue";o[e](s,(function(e){var i=t.context;t.context=t,t[h]&&t[h].apply(t,[e]),t.context=i}))};for(var n in r)a(n)};r(t.getStaticMember("listeners")),r(t.templateListeners),Smart(t._selector)&&Smart(t._selector).properties&&r(Smart(t._selector).listeners)}},{key:"parseTemplate",value:function(){var t=this.template(),i=document.createDocumentFragment();if(e[this.nodeName]&&!l)return e[this.nodeName].cloneNode(!0);if(""===t)return null;var r=document.createElement("div");i.appendChild(r),r.innerHTML=t;var a=r.childNodes;r.parentNode.removeChild(r);for(var n=0;n<a.length;n++)i.appendChild(a[n]);return e[this.nodeName]=i,l?i:i.cloneNode(!0)}},{key:"applyTemplate",value:function(){var e=this,t=e.parseTemplate();if(t&&t.hasChildNodes){var i=t.childNodes[0],r=function(t,i){e["$"+t]=i.$=D.Extend(i),e.$[t]=i,i.ownerElement=e},a=i;if(i.getElementsByTagName("content").length>0){var n=i.getElementsByTagName("content")[0];(a=n.parentNode).removeChild(n)}else{var s=t.querySelectorAll("[inner-h-t-m-l]");s&&s.length>0&&(a=s[0])}e.$.template="template"===i.nodeName.toLowerCase()?i:i.querySelector("template");var o=t.querySelectorAll("[id]");0===o.length&&(o=t.querySelectorAll("*")),r("root",i),r("content",a),e.$.html=e.innerHTML.toString().trim();for(var l=0;l<o.length;l+=1){var h=o[l];""===h.id&&(h.id="child"+l),r(h.id,h),h.setAttribute("smart-id",h.id),e.shadowRoot?h.shadowParent=e:h.removeAttribute("id")}for(!1!==e.hasTemplateBindings?e.bindings=e.getBindings(t):e.bindings=[],e.$root.addClass("smart-container");e.childNodes.length;)a.appendChild(e.firstChild);if(e.appendTemplate(t),e.$.template){var u=document.createElement("div");u.classList.add("smart-template-container"),e.$.templateContainer=u,e.$.template.parentNode.insertBefore(u,e.$.template),e.refreshTemplate()}}}},{key:"refreshTemplate",value:function(){var e=this;if(e.$.templateContainer){e.templateDetached(e.$.templateContainer);var t=e.$.template.content.cloneNode(!0);e.templateBindings=e.getBindings(t),e.templateProperties=[];var i=document.createDocumentFragment();!function t(i,r,a){for(var n in i){var s=i[n],o=s.node.cloneNode();r.appendChild(o);var l=[],h=!1;if(s.data)for(var u in s.data){var d=s.data[u],c=d.name;if(e.templateProperties[c]=!0,o.removeAttribute(D.Core.toDash(u)),"*items"===u)l=e[c],h=!0;else if(c.indexOf("item.")>=0&&void 0!==a)d.value=a[c.substring("item.".length)],o[u]=d.value;else if(c.indexOf("item")>=0&&void 0!==a)d.value=a,o[u]=d.value;else if("*if"===u)if(c.indexOf("(")>=0){var f=c.substring(c.indexOf("(")),p=void 0,m=c.substring(0,c.indexOf("("));if((f=(f=(f=f.substring(1,f.length-1)).replace(/ /gi,"")).split(",")).length>0&&""!==f[0]){for(var v=[],y=0;y<f.length;y++)v.push(e[f[y]]);p=e[m].apply(e,v)}else p=e[m]();!1===p&&r.removeChild(o)}else e[c]||r.removeChild(o);else e.updateBoundNode(o,s,e,c)}if(l.length>0||h){for(var g=0;g<l.length;g++)s.children&&t(s.children,o,l[g]);if("number"==typeof l)for(var _=0;_<l;_++)s.children&&t(s.children,o,_)}else s.children&&t(s.children,o,a)}}(e.templateBindings.children,i),e.$.templateContainer.innerHTML="",e.$.templateContainer.appendChild(i),e.templateAttached(e.$.templateContainer)}}},{key:"templateAttached",value:function(){}},{key:"templateDetached",value:function(){}},{key:"appendTemplate",value:function(e){this.appendChild(e)}},{key:"defineElementModules",value:function(){var e=this.constructor.prototype;if("BaseElement"===e.elementName){e.modules=this.constructor.modules;for(var t=e.modules,i=0;i<t.length;i+=1)this.addModule(t[i])}else for(var r=e.modules,a=0;a<r.length;a+=1){var n=r[a],s=n.prototype;this.defineElementMethods(s.methodNames,s),this.defineElementProperties(n.properties)}}},{key:"watch",value:function(e,t){this._watch=null!==e&&null!==t?{properties:e,propertyChangedCallback:t}:null}},{key:"unwatch",value:function(){this._watch=null}},{key:"set",value:function(e,t,i){var r=this.context;this.context=!0===i?document:this,this[e]=t,this.context=r}},{key:"get",value:function(e){return this[e]}},{key:"_setModuleState",value:function(e,t){for(var i="is"+e.substring(0,1).toUpperCase()+e.substring(1),r="on"+e.substring(0,1).toUpperCase()+e.substring(1),a=0;a<this.modulesList.length;a++){var n=this.modulesList[a];n[i]=!0,n[e]&&n[e](t),n[r]&&n[r](t)}}},{key:"addModule",value:function(e,t){if(e){var i=this.modules.slice(0),r=e.prototype,a=Object.getPrototypeOf(e);if(a.name&&a.name!==e.name&&this.addModule(a),!e.moduleName&&e.name&&(e.moduleName=e.name),-1===i.findIndex((function(t){return e.moduleName===t.moduleName}))&&i.push(e),this.defineModule(e),this.defineElementMethods(r.methodNames,r),this.defineElementProperties(e.properties),this.constructor.prototype.modules=i,t)for(var n in Smart.Elements.tagNames){for(var s=Smart.Elements.tagNames[n],o=Object.getPrototypeOf(s),l=[];o!==HTMLElement;)l.push(o.prototype),o=Object.getPrototypeOf(o);l.indexOf(this)>=0&&s!==this&&s.prototype.addModule(e)}}}},{key:"defineModule",value:function(e){if(!e.isDefined){e.prototype._initModule=function(e){this.ownerElement=e};var t=e.properties||{},i=Object.keys(t),r=Object.getOwnPropertyNames(e.prototype);e.prototype.methodNames=r;for(var a=function(r){var a=i[r],n=t[a];Object.defineProperty(e.prototype,a,{configurable:!1,enumerable:!0,get:function(){return this.ownerElement?this.ownerElement[a]:n.value},set:function(e){this.ownerElement[a]=e}})},n=0;n<i.length;n+=1)a(n);e.isDefined=!0}}},{key:"getStaticMember",value:function(e,i){var r=window[t][this.elementName],a=r[e];i||(i="");for(var n="array"===i?[]:"string"===i?"":{},s=Object.getPrototypeOf(r),o=[];s[e];)o.push(s[e]),s=Object.getPrototypeOf(s);for(var l=o.length-1;l>=0;l--)if("array"===i)for(var h=0;h<o[l].length;h++)-1===n.indexOf(o[l][h])&&n.push(o[l][h]);else"string"===i?-1===n.indexOf(o[l])&&(n+=o[l]):n=D.Core.assign(n,o[l]);if("array"===i){for(var u=0;u<a.length;u++)-1===n.indexOf(a[u])&&n.push(a[u]);return n}return"string"===i?(-1===n.indexOf(a)&&(n+=a),n):D.Core.assign(n,a)}},{key:"defineElementHierarchicalProperties",value:function(e,t){var i=[];!function(e){for(var r=Object.keys(e),a=0;a<r.length;a++){var n=r[a];if("messages"!==n){var s=e[n],o=Object.keys(s),l=o.indexOf("value")>=0&&o.indexOf("type")>=0&&"object"===c(s.value);("propertyObject"===s.type||l)&&function e(r,a){if(r.value){var n=Object.keys(r.value),s=function(s){var o=n[s],l=r.value[o],h=a+"_"+o;if("object"!==c(l)||null===l)return"break";var u=Object.keys(l);if(!(u.indexOf("value")>=0&&u.indexOf("type")>=0))return"break";if("array"!==r.type&&(r.isHierarchicalProperty=!0),l.parentPropertyName=a,t){var d=t._properties[h];if(r.value.hasOwnProperty(o)){if(d.isDefined)return"continue";delete r.value[o]}d.isDefined=!0,Object.defineProperty(r.value,o,{configurable:!1,enumerable:!0,get:function(){return t._properties[h].value},set:function(e){t.updateProperty(t,t._properties[h],e)}})}i[h]||(i[h]=l,i.length++),("propertyObject"===l.type||"object"===c(l.value)&&"array"!==l.type)&&e(t?t._properties[h]:l,h)};e:for(var o=0;o<n.length;o++)switch(s(o)){case"break":break e;case"continue":continue}}}(s,n)}}}(e),i.length>0&&!t&&this.defineElementProperties(i)}},{key:"defineElement",value:function(){var e=this.constructor.prototype,t=this.getStaticMember("properties"),i=Object.getOwnPropertyNames(e);e.extendedProperties={},e.boundProperties={},e.templateListeners={},this.defineElementModules(),this.defineElementMethods(i,e),this.defineElementProperties(t),this.defineElementHierarchicalProperties(this.extendedProperties),e._initElement=function(){var t=this,i=e.extendedProperties,r=Object.keys(i),a=t.modules;t.$=D.Extend(t),t.$document=O,t.smartId=(Date.now().toString(36)+Math.random().toString(36).substr(2,5)).toUpperCase(),t.isCreated||(t.modulesList=[],t._properties=[],t._beforeCreatedProperties&&(t._properties=t._beforeCreatedProperties,delete t._beforeCreatedProperties),t.detachedChildren=[],t.propertyByAttributeName=[]);for(var n=0;n<a.length;n+=1){var s=new(0,a[n]);s._initModule(t),t.modulesList.push(s)}for(var o=function(e){var a=r[e],n=i[a],s=n.value;if(t._properties[a]){if(void 0!==t._properties[a].notify)return"continue";delete t._properties[a]}if(L&&"innerHTML"===a&&delete t[a],-1===window.navigator.userAgent.indexOf("PhantomJS")&&t.hasOwnProperty(a)&&(s=t[a],delete t[a]),"array"===n.type&&null!=s&&(s=s.slice(0)),"object"===n.type&&null!=s&&(s=Array.isArray(s)?s.slice(0):Object.assign({},s)),t._properties[a]={name:a,notify:n.notify,allowedValues:n.allowedValues,type:n.type,nullable:n.nullable,reflectToAttribute:n.reflectToAttribute,defaultReflectToAttribute:n.defaultReflectToAttribute,defaultReflectToAttributeConditions:n.defaultReflectToAttributeConditions,value:s,readOnly:n.readOnly,defaultValue:s,attributeName:n.attributeName,observer:n.observer,inherit:n.inherit,extend:n.extend,validator:n.validator},t.propertyByAttributeName[n.attributeName]=t._properties[a],!n.hasOwnProperty("type")){var o=t.localize("propertyUnknownType",{name:a});t.log(o)}if("any"===n.type||"propertyObject"===n.type)return"continue";var l=D.Types.getType(s);if(null!=s&&n.type!==l&&!n.validator){if("object"===n.type&&"array"===l)return"continue";if("number"===l){if(["integer","int","float"].findIndex((function(e){return e===n.type}))>=0)return"continue"}var h=t.localize("propertyInvalidValueType",{name:a,actualType:l,type:n.type});t.log(h)}},l=0;l<r.length;l+=1)o(l);t.defineElementHierarchicalProperties(t._properties,t),t.isCreated=!0},e.registered()}},{key:"defineElementMethods",value:function(e,t){var i=this.constructor.prototype,r=["constructor","ready","created","render","attached","detached","appendChild","insertBefore","removeChild","connect","disconnectedCallback","connectedCallback","attributeChangedCallback","propertyChangedHandler","enableShadowDOM","isInShadowDOM"],a=function(a){var n=e[a];return n.startsWith("_")||void 0!==r.find((function(e){return e===n}))?"continue":i.extendedProperties[n]?"continue":D.Types.isFunction(t[n])?void(i[n]=function(e,t){var i=Array.prototype.slice.call(arguments,2),r=function(){if(!this.isReady&&"localize"!==t&&"localize"!==t&&"cloneNode"!==t&&"importStyle"!==t&&"log"!==t&&"parseAttributes"!==t){var r=this.localize("elementNotInDOM");this.log(r)}for(var a=this,n=0;n<this.modulesList.length;n++){var s=this.modulesList[n];if(t in s){a=s;break}}var o=this.context,l=i.concat(Array.prototype.slice.call(arguments)),h=null,u=function(e,t){return e===t||("number"===e&&("int"===t||"integer"===t||"float"===t)||("bool"===e&&"boolean"===t||"boolean"===e&&"bool"===t||("object"===e&&"any"===t||void 0)))};if(this.methods){var d=this.methods[t];if(d){var c=d.split(":");h=c[c.length-1].trim();for(var f=d.substring(1+d.indexOf("("),d.lastIndexOf(")")),p=[],m=f.split(","),v="",y=0;y<m.length;y++){var g=m[y];v+=g,g.indexOf(":")>=0?(p.push(v),v=""):v+=","}for(var _=p.length,b=0;b<p.length;b++){var x=p[b].trim(),w=x.split(":"),S=w[0].split("=")[0].trim(),k=S.indexOf("?")>=0,C=w[1].indexOf("?")>=0,N=w[1].replace(/\?/gi,"").trim(),A=N.split("|"),M=w[0].split("=")[1],T=D.Types.getType(l[b]);if(void 0===l[b]&&M){switch(M=M.trim(),N[0]){case"date":var O=M.substring(M.indexOf("(")+1,M.lastIndexOf(")"));M=0===(O=O.length>0?O.split(",").map((function(e){return parseInt(e)})):[]).length?new Date:new Date(O[0],O[1],O[2]);break;case"bool":case"boolean":M="true"===M||"1"===M;break;case"int":case"integer":M=parseInt(M);break;case"float":case"number":M=parseFloat(M);break;case"any":case"object":M=M.indexOf("{")>=0?JSON.parse(M):M}l.push(M)}else k&&_--;if(N!==T&&T){for(var E=!0,F=0;F<A.length;F++)if(u(T,A[F])){E=!1;break}if(E&&(null!==l[b]||!C)){var P=this.localize("methodInvalidValueType",{name:t,actualType:T,type:N,argumentIndex:b});this.log(P)}}if(l.length<_){var I=this.localize("methodInvalidArgumentsCount",{name:t,actualArgumentsCount:l.length,argumentsCount:_});this.log(I)}}}}this.context=this;var L=e.apply(a,l);if(h){var R=void 0===D.Types.getType(L)?"void":D.Types.getType(L);if(!u(R,h)){var B=this.localize("methodInvalidReturnType",{name:t,actualType:R,type:h});this.log(B)}}return this.context=o,L};return r}(t[n],n)):"continue"};for(var n in e)a(n)}},{key:"defineElementProperties",value:function(e){if(e){var t=this.constructor.prototype,i=Object.keys(e),r=this.getStaticMember("properties");Object.assign(t.extendedProperties,e),this.updateProperty=function(e,t,i){var r=e;if(t&&!t.readOnly){if(t.allowedValues){for(var a=!1,n=0;n<t.allowedValues.length;n++)if(t.allowedValues[n]===i){a=!0;break}if(!a){var s=JSON.stringify(t.allowedValues).replace(/\[|\]/gi,"").replace(",",", ").replace(/"/gi,"'"),o="'"+i+"'",l=r.localize("propertyInvalidValue",{name:t.name,actualValue:o,value:s});return void r.log(l)}}var h=t.name,u=r._properties[h].value;if(t.validator&&r[t.validator]){var d=r.context;r.context=r;var f=r[t.validator](u,i);void 0!==f&&(i=f),r.context=d}if(u!==i){if(r.propertyChanging){var p=r.propertyChanging(h,u,i);if(!1===p||null===p)return}if(!t.hasOwnProperty("type")){var m=r.localize("propertyUnknownType",{name:h});r.log(m)}if("array"!==t.type||JSON.stringify(u)!==JSON.stringify(i)){if(null!=i&&"any"!==t.type&&"propertyObject"!==t.type&&t.type!==D.Types.getType(i)&&!t.validator||null===i&&!t.nullable){var v=!0;if("object"===t.type&&"array"===D.Types.getType(i)&&(v=!1),"number"===D.Types.getType(i)){["integer","int","float"].findIndex((function(e){return e===t.type}))>=0&&(v=!1)}if(v){var y=r.localize("propertyInvalidValueType",{name:h,actualType:D.Types.getType(i),type:t.type});return void r.error(y)}}if(t.isUpdating=!0,t.isHierarchicalProperty){!function e(t,i){for(var a=Object.keys(t),n=0;n<a.length;n++){var s=a[n],o=t[s];"object"===c(o)&&!D.Types.isArray(o)&&o&&o.constructor!==Date?e(o,i+"_"+s):r[i+"_"+s]=o}}(i,h)}else r._properties[h].value=i;if(!t.isUpdatingFromAttribute&&t.reflectToAttribute&&r.$.setAttributeValue(t.attributeName,i,t.type),r.isReady&&(!r.ownerElement||r.ownerElement&&r.ownerElement.isReady)){if("wait"===h&&(i||!u||r.isCompleted||(r.classList.remove("smart-visibility-hidden"),r.ownerElement&&r.ownerElement.updateBoundMappedNodes(),r.updateBoundMappedNodes(),r.complete())),"renderMode"===h)return;if(r.context!==r&&!r.wait){var g=r.context;r.context=r,r.propertyChangedHandler(h,u,i),r.context=g,t.observer&&r[t.observer]&&(r.context=r,r[t.observer](u,i),r.context=document),r._watch&&r._watch.properties.indexOf(h)>=0&&r._watch.propertyChangedCallback(h,u,i)}var _=t.notify||r.boundProperties[h];_&&(r.$.fireEvent(t.attributeName+"-changed",{context:r.context,oldValue:u,value:r[h]}),r.boundProperties[h]&&r.updateBoundNodes(h)),_&&r.templateProperties&&r.templateProperties[h]&&r.refreshTemplate(),r.dataContextProperties&&("dataContext"===h?r.applyDataContext():r.dataContextProperties[h]&&r.updateDataContextProperty(h))}t.isUpdating=!1}}}};for(var a=function(a){var n=i[a],s=e[n],o=D.Core.toDash(n),l=s.type||"any",h=l.indexOf("?")>=0||"any"===l;if(h&&"any"!==l&&(s.type=l.substring(0,l.length-1)),s.nullable=h,s.attributeName=o.toLowerCase(),s.name=n,s.reflectToAttribute=void 0===s.reflectToAttribute||s.reflectToAttribute,s.inherit&&r[n]&&(s.value=r[n].value),s.extend&&r[n]&&D.Core.assign(s.value,r[n].value),t.hasOwnProperty(n))return"continue";Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:function(){if(this._properties[n])return this._properties[n].value},set:function(e){this.updateProperty(this,this._properties[n],e)}})},n=0;n<i.length;n+=1)a(n)}}},{key:"classNamesMap",get:function(){return{animation:"smart-animate",rippleAnimation:"smart-ripple"}}},{key:"hasAnimation",get:function(){return"none"!==this.animation}},{key:"hasRippleAnimation",get:function(){return"none"!==this.animation&&"advanced"===this.animation}},{key:"properties",get:function(){return this._properties||(this._properties=[]),this._properties}},{key:"parents",get:function(){for(var e=[],i=this.parentNode;i&&9!==i.nodeType;)i instanceof HTMLElement==!0&&e.push(i),i=i.parentNode;return window[t].EnableShadowDOM&&this.isInShadowDOM&&this.shadowParent&&(e=e.concat(this.shadowParent.parents)),e}},{key:"focused",get:function(){return this.contains(document.activeElement)}},{key:"_selector",get:function(){return this.id?"#"+this.id:this.classList.length>0?"."+this.classList[0]:void 0}},{key:"hasStyleObserver",set:function(e){void 0===this._hasStyleObserver&&(this._hasStyleObserver=e),e?w.watch(this):w.unwatch(this)},get:function(){return void 0===this._hasStyleObserver||this._hasStyleObserver}}],[{key:"properties",get:function(){return{animation:{value:"advanced",type:"string",allowedValues:["none","simple","advanced"]},unfocusable:{value:!1,type:"boolean"},disabled:{value:!1,type:"boolean"},dataContext:{value:null,reflectToAttribute:!1,type:"any"},messages:{value:{en:{propertyUnknownName:"Invalid property name: '{{name}}'!",propertyUnknownType:"'{{name}}' property is with undefined 'type' member!",propertyInvalidValue:"Invalid '{{name}}' property value! Actual value: '{{actualValue}}', Expected value: '{{value}}'!",propertyInvalidValueType:"Invalid '{{name}}' property value type! Actual type: '{{actualType}}', Expected type: '{{type}}'!",methodInvalidValueType:"Invalid '{{name}}' method argument value type! Actual type: '{{actualType}}', Expected type: '{{type}}' for argument with index: '{{argumentIndex}}'!",methodInvalidArgumentsCount:"Invalid '{{name}}' method arguments count! Actual arguments count: '{{actualArgumentsCount}}', Expected at least: '{{argumentsCount}}' argument(s)!",methodInvalidReturnType:"Invalid '{{name}}' method return type! Actual type: '{{actualType}}', Expected type: '{{type}}'!",elementNotInDOM:"Element does not exist in DOM! Please, add the element to the DOM, before invoking a method.",moduleUndefined:"Module is undefined.",missingReference:"{{elementType}}: Missing reference to '{{files}}'.",htmlTemplateNotSuported:"{{elementType}}: Web Browser doesn't support HTMLTemplate elements.",invalidTemplate:"{{elementType}}: '{{property}}' property accepts a string that must match the id of an HTMLTemplate element from the DOM."}},reflectToAttribute:!1,type:"object"},props:{value:null,reflectToAttribute:!1,isHierarchicalProperty:!0,type:"any"},readonly:{value:!1,type:"boolean"},renderMode:{value:"auto",type:"string",reflectToAttribute:!1,allowedValues:["auto","manual"]},rightToLeft:{value:!1,type:"boolean"},theme:{value:window[t].Theme,type:"string"},visibility:{value:"visible",allowedValues:["visible","collapsed","hidden"],type:"string"},wait:{value:!1,type:"boolean"}}}},{key:"requires",get:function(){return{}}},{key:"listeners",get:function(){return{"theme-changed":function(e){this.theme=e.detail.newValue}}}},{key:"methods",get:function(){return{}}},{key:"modules",get:function(){return window[t].Modules}},{key:"version",get:function(){return window[t].Version}}]),r}(o(HTMLElement)),F=[],P=[],I=[],L=!1,R=navigator.userAgent.match(/Chrom(e|ium)\/([0-9]+)\./);R&&(parseInt(R[2],10)<=50&&(L=!0));document.addEventListener("readystatechange",(function e(){if("complete"===document.readyState){I.sort((function(e,t){var i=e.element.parents.length,r=t.element.parents.length;return i<r?-1:i>r?1:0}));for(var t=0;t<I.length;t++)I[t].element.isLoading=!1,I[t].callback();I=[],document.removeEventListener("readystatechange",e)}}));var B=function(e){function i(e,t){var r;f(this,i);var s=n(r=a(this,u(i).call(this)));if(e){t&&(s._initProperties=t);var o=function(e){if("string"==typeof e?document.querySelector(e):e){var i="string"==typeof e?document.querySelector(e):e;if(i instanceof HTMLDivElement){var r=document.createElement(s.tagName),a=!0,n=!1,o=void 0;try{for(var l,h=i.attributes[Symbol.iterator]();!(a=(l=h.next()).done);a=!0){var u=l.value;r.setAttribute(u.name,i.getAttribute(u.name))}}catch(e){n=!0,o=e}finally{try{a||null==h.return||h.return()}finally{if(n)throw o}}for(;i.childNodes.length;)r.appendChild(i.firstChild);return"string"==typeof e&&(r.id=e.substring(1)),r._initProperties=t,i.parentNode&&i.parentNode.replaceChild(r,i),r}if(t){var d=i.context;if(i._initProperties=t,i.isReady){i.context=i;var c={},f={};for(var p in t)c[p]=i[p],f[p]=t[p];Object.getOwnPropertyNames(t).length>0&&(i.initProperties(),i.propertyChangedHandler(t,c,f)),i.context=d}}return i}};if("string"==typeof e){var l=document.querySelectorAll(e),h=[];if(l.length>1){for(var d=0;d<l.length;d++){var c=o(l[d]);h.push(c)}return a(r,h)}}else if(e&&e.length>0){var p=e;if(p.length>1){for(var m=0;m<p.length;m++){var v=o(p[m]);F.push(v)}return a(r,F)}}return a(r,o(e))}return s._styleUrl="",s.isUtilityElement?a(r):(s.created(),r)}return s(i,e),m(i,[{key:"importStyle",value:function(e,t){this._importStyle(e,t)}},{key:"_importStyle",value:function(e,t){var i=this;if(i.shadowRoot&&e){var r=function(e){for(var r=i.shadowRoot.children,a=0;a<r.length;a++){var n=r[a];if(n instanceof HTMLLinkElement&&n.href===e)return t&&t(),null}var s=document.createElement("link");return s.rel="stylesheet",s.type="text/css",s.href=e,s.onload=t,s},a=function(){for(var e=i.shadowRoot.children,t=null,r=0;r<e.length;r++){var a=e[r];a instanceof HTMLLinkElement&&(t=a)}return t}(),n=function(e,t){t.parentNode.insertBefore(e,t.nextSibling)};if(Array.isArray(e)){for(var s=document.createDocumentFragment(),o=0;o<e.length;o++){var l=r(e[o]);l&&s.appendChild(l)}a?n(s,a):i.shadowRoot.insertBefore(s,i.shadowRoot.firstChild)}else{var h=r(e);if(!h)return;a?n(h,a):i.shadowRoot.insertBefore(h,i.shadowRoot.firstChild)}}}},{key:"attributeChanged",value:function(e,t,i){"style-url"===e&&(this.styleUrl=i)}},{key:"attributeChangedCallback",value:function(e,t,a){this.isReady&&r(u(i.prototype),"attributeChangedCallback",this).call(this,e,t,a)}},{key:"styleUrl",get:function(){return this._styleUrl},set:function(e){this._styleUrl=e}},{key:"isInShadowDOM",get:function(){var e=this;if(e.shadowParent)return!0;var t=!1;return void 0!==e.enableShadowDOM&&(t=function(t){for(;t;t=t.parentNode)if(t.host||t.enableShadowDOM||t.shadowRoot)return e.shadowParent=t.host?t.host:t,!0;return!1}(e.parentNode)),t}},{key:"enableShadowDOM",get:function(){return window[t].EnableShadowDOM}}],[{key:"observedAttributes",get:function(){var e=["external-style"];for(var t in this.prototype.extendedProperties){var i=this.prototype.extendedProperties[t];e.push(i.attributeName)}return e}},{key:"styleUrls",get:function(){return[]}},{key:"styles",get:function(){return""}}]),m(i,[{key:"_getRootShadowParent",value:function(){for(var e=this.shadowParent;e;){if(!e.shadowParent)return e;e=e.shadowParent}return e||this.shadowParent}},{key:"_getStyleUrl",value:function(e){var i=D.Core.getScriptLocation()+window[t].StyleBaseUrl+e;return this.shadowParent&&(i=i.replace("scoped/","")),i}},{key:"_getStyleUrls",value:function(){this.nodeName.startsWith(t);for(var e=this.getStaticMember("styleUrls","array"),i=[],r=0;r<e.length;r++){var a=e[r],n=this._getStyleUrl(a);i.push(n)}return i}},{key:"_getShadowDomStyleUrls",value:function(){var e=[].slice.call(this.querySelectorAll("[smart-id]")).concat(this.children);this.enableShadowDOM&&!0!==this.isInShadowDOM&&(e=[].slice.call(this.shadowRoot.querySelectorAll("[smart-id]")).concat(e),e=[].slice.call(this.shadowRoot.querySelectorAll(".smart-element-init")).concat(e));!function t(i,r){for(var a=0;a<i.length;a++){var n=i[a];n.$&&n.$.isCustomElement&&-1===e.indexOf(n)&&r.push(n),t(n.children,r)}}(this.shadowRoot.children,e);var i=[],r=[];this.nodeName.startsWith(t)&&(i=[this._getStyleUrl("smart.common.css")],r=[this._getStyleUrl("smart.misc.css")]);for(var a=this._getStyleUrls(),n=0;n<e.length;n++){var s=e[n];if(s._getStyleUrls)for(var o=s._getStyleUrls(),l=0;l<o.length;l++){var h=o[l];-1===a.indexOf(h)&&a.push(h)}}return i.concat(a).concat(r)}},{key:"_whenStylesReady",value:function(e){this._stylesReady?e():(this.whenStylesReady||(this.whenStylesReady=[]),this.whenStylesReady.push(e))}},{key:"_importShadowRootStyles",value:function(){var e=this,i=e._getShadowDomStyleUrls();e._styleUrls=i,e._styleUrlsReadyCount=0;var r=function(){if(e._stylesReady=!0,e.whenStylesReady){for(var t=0;t<e.whenStylesReady.length;t++)e.whenStylesReady[t]();e.whenStylesReady=[]}if(!e.isRendered&&!e.hasAttribute("wait")&&!e.isRendering){if(e.resizeTrigger){var i=e.resizeTrigger.childNodes[0],r=e.resizeTrigger.childNodes[1];i.scrollLeft=1e5,i.scrollTop=1e5,r.scrollLeft=1e5,r.scrollTop=1e5}e.isRendering=!0,e.context=e,e._renderShadowRoot(),e.render(),e.renderMode="auto"}e.classList.remove("smart-element-init")};if(document.adoptedStyleSheets)if(window[t].AdoptedStyleSheets)e.shadowRoot.adoptedStyleSheets=window[t].AdoptedStyleSheets,r();else{var a=new CSSStyleSheet,n=D.Core.getScriptLocation()+"/styles/smart.default.css";a.replace('@import url("'+n+'")').then((function(e){r()})).catch((function(e){console.error("Failed to load:",e)})),window[t].AdoptedStyleSheets=[a],e.shadowRoot.adoptedStyleSheets=window[t].AdoptedStyleSheets}else for(var s=0;s<i.length;s++){var o=i[s];e._importStyle(o,(function(){e._styleUrlsReadyCount++,e._styleUrlsReadyCount===e._styleUrls.length&&(e._stylesReady=!0,r())}))}}},{key:"_setupShadowRoot",value:function(){this.isRendered||this.wait||(this.renderMode="manual"),this.classList.add("smart-element-init"),this.setup(),this._importShadowRootStyles()}},{key:"connect",value:function(){var e=this;if(e.enableShadowDOM&&!e.shadowRoot&&!0!==e.isInShadowDOM&&(e.attachShadow({mode:"open"}),e.shadowRoot&&e.$.root&&(e.shadowRoot.appendChild(e.$.root),e.$.root.classList.add(e.nodeName.toLowerCase()))),e.shadowRoot||e.shadowParent)if(e.shadowRoot)e._setupShadowRoot();else if(e.shadowParent&&e.enableShadowDOM){var t=e._getRootShadowParent();if(e.isRendered||e.hasAttribute("wait")||(e.renderMode="manual"),e.classList.add("smart-element-init"),e.setup(),t._styleUrls)t._getShadowDomStyleUrls().length!==t._styleUrls.length&&t._importShadowRootStyles();t._whenStylesReady((function(){e.isRendered||e.wait||e.isRendering||(e.isRendering=!0,e.context=e,e.render(),e.renderMode="auto"),e.classList.remove("smart-element-init")}))}else e.setup();else e.setup()}},{key:"connectedCallback",value:function(){var e=this;if(!e.isLoading&&!e.isUtilityElement){e.classList.add("smart-element-init");var t=function(){e.classList.remove("smart-element-init")};if("complete"===document.readyState){var i=e.parents;i.length&&"HTML"===i[i.length-1].nodeName?(e.checkIsInDomTimer&&clearInterval(e.checkIsInDomTimer),t(),e.connect()):(e.checkIsInDomTimer&&clearInterval(e.checkIsInDomTimer),i.length>0&&(e.checkIsInDomTimer=setInterval((function(){var i=e.parents;0===i.length&&clearInterval(e.checkIsInDomTimer),i.length>0&&"HTML"===i[i.length-1].nodeName&&(clearInterval(e.checkIsInDomTimer),t(),e.connect())}),100)))}else e.isLoading=!0,I.push({element:this,callback:function(){this.isReady||(t(),this.connect())}.bind(e)})}}},{key:"disconnectedCallback",value:function(){this.isAttached?(this.shadowParent=null,this.detached()):this._resetShadowParent()}},{key:"adoptedCallback",value:function(){this.setup()}},{key:"appendTemplate",value:function(e){this.shadowRoot?this.shadowRoot.appendChild(e):this.appendChild(e)}},{key:"_resetShadowParent",value:function(){if(this.enableShadowDOM&&null!==this.shadowParent){for(var e=[],t=this.parentNode;t&&9!==t.nodeType;){if(t instanceof HTMLElement==!0)e.push(t);else if(11===t.nodeType&&t.host){t=t.host;continue}t=t.parentNode}for(var i=0;i<e.length;i++)if(e[i]===this.shadowParent)return;e.length>0&&"HTML"===e[e.length-1].nodeName&&(this.shadowParent=null)}}}]),i}(E),H=function(){function e(){f(this,e)}return m(e,null,[{key:"register",value:function(e,i){var r=i.prototype,a=b.toCamelCase(e).replace(/[a-z]+/,""),n=i.version||window[t].Version;if(!window.customElements.get(e)||window.customElements.get(e).version!==n){var s=e;for(n=n.split(".");window.customElements.get(e);)e=s+"-"+n.join("."),n[2]=parseInt(n[2])+1;if(!F[e]){if(e.startsWith(t.toLowerCase()))F[e]=window[t][a]=window[t.toLowerCase()+a]=i;else{var o=e.split("-")[0];o=o.substring(0,1).toUpperCase()+o.substring(1),window[t][o]||(window[t][o]={}),F[e]=window[t][o][a]=window[o.toLowerCase()+a]=i,window[t][a]&&(a=b.toCamelCase(e)),window[t][a]=i}r.elementName=a,r.defineElement(),P[e]&&P[e](r),window.customElements.define(e,i)}}}},{key:"registerElements",value:function(){if(this.toRegister){this.isRegistering=!0;for(var e=0;e<this.toRegister.length;e++){var t=this.toRegister[e];this.register(t.tagName,t.element)}this.isRegistering=!1}}},{key:"get",value:function(e){if(F[e])return F[e]}},{key:"whenRegistered",value:function(e,t){if(!e)throw new Error("Syntax Error: Invalid tag name");var i=P[e],r=this.get(e),a=r?r.modules.length:3;try{i||r?!i&&r?(t(r.prototype),P[e]=void 0):i&&!r?P[e]=function(e){i(e),t(e)}:i&&r&&(r.proto&&(i(r.proto),t(r.proto)),P[e]=void 0):P[e]=function(e){try{t(e)}catch(e){var i=e instanceof Error?e.message:e.toString();console.log(i)}}}catch(e){var n=e instanceof Error?e.message:e.toString();console.log(n)}if(r&&a!==r.prototype.modules.length)for(var s=document.querySelectorAll(e),o=0;o<s.length;o++){var l=s[o];l.isCreated&&l._initElement()}}}]),e}();H.lazyRegister=!1,H.tagNames=[];var V=function(){function e(t,i){f(this,e);var r=this;this.name="observable",t&&Object.assign(r,t);var a;return a=t,Object.getOwnPropertyNames(Object.getPrototypeOf(a)).forEach((function(e){return"constructor"===e||!!e.startsWith("_")||void(r[e]=a[e])})),new Proxy(r,{deleteProperty:function(e,t){return delete e[t],!0},get:function(e,t){return e[t]},set:function(e,t,a){var n=e[t];return n===a||(e[t]=a,!("notifyFn"!==t&&!t.startsWith("_")&&"canNotify"!==t)||(!(!i||-1!==i.indexOf(t))||(!r.canNotify||(r._notify({target:e,propertyName:t,oldValue:n,newValue:a}),!0))))}})}return m(e,[{key:"_notify",value:function(e){if(this.canNotify&&this.notifyFn)for(var t=0;t<this.notifyFn.length;t++)this.notifyFn[t](e)}},{key:"notify",value:function(e){e&&(this.notifyFn||(this.notifyFn=[]),this.notifyFn.push(e))}},{key:"canNotify",get:function(){return void 0===this._canNotify&&(this._canNotify=!0),this._canNotify},set:function(e){this._canNotify=e}}]),e}(),G=function(){function e(){f(this,e);var t=this;t.name="observableArray",t.observables=arguments.length<3?null:arguments[2];var i=new Proxy(t,{deleteProperty:function(e,t){return delete e[t],!0},apply:function(e,t,i){return e.apply(t,i)},get:function(e,i){return e[i]||isNaN(parseInt(i))?e[i]:t.getItem(parseInt(i))},set:function(e,i,r){return e[i]||isNaN(parseInt(i))?(e[i]=r,!0):(t.setItem(parseInt(i),r),!0)}});if(t._addArgs={eventName:"change",object:i,action:"add",index:null,removed:new Array,addedCount:1},t._removeArgs={eventName:"change",object:i,action:"remove",index:null,removed:null,addedCount:0},arguments.length>=1&&Array.isArray(arguments[0])){t._array=[];for(var r=arguments[0],a=0,n=r.length;a<n;a++){var s=t._getItem(t._array.length,r[a]);t._array.push(s)}}else t._array=Array.apply(null,arguments);return 2===arguments.length&&(t.notifyFn=arguments[1]),i}return m(e,[{key:"_notify",value:function(e){this.canNotify&&this.notifyFn&&this.notifyFn(e)}},{key:"notify",value:function(e){e&&(this.notifyFn=e)}},{key:"toArray",value:function(){return this._array}},{key:"_getItem",value:function(e,t){var i=this;return"string"==typeof t?t:"number"==typeof t?t:void 0===t?t:new Proxy(t,{deleteProperty:function(e,t){delete e[t]},set:function(t,r,a){var n=t[r];return t[r]=a,!i._canNotify||!1===t.canNotify||(!(!i.observables||i.observables[r])||(i._notify({eventName:"change",object:i,target:t,action:"update",index:e,path:e+"."+r,oldValue:n,newValue:a,propertyName:r}),!0))}})}},{key:"getItem",value:function(e){return this._array[e]}},{key:"setItem",value:function(e,t){var i=this._array[e];this._array[e]=this._getItem(e,t),this._notify({eventName:"change",object:this._array,action:"update",index:e,removed:[i],addedCount:1})}},{key:"toString",value:function(){return this._array.toString()}},{key:"toLocaleString",value:function(){return this._array.toLocaleString()}},{key:"concat",value:function(){var e=this;e._addArgs.index=e._array.length;var t=e._array.concat.apply(e._array,arguments);return new Smart.ObservableArray(t)}},{key:"join",value:function(e){return this._array.join(e)}},{key:"pop",value:function(){this._removeArgs.index=this._array.length-1,delete this[this._array.length-1];var e=this._array.pop();return this._removeArgs.removed=[e],this._notify(this._removeArgs),this._notifyLengthChange(),e}},{key:"push",value:function(){var e=this;if(e._addArgs.index=e._array.length,1===arguments.length&&Array.isArray(arguments[0]))for(var t=arguments[0],i=0,r=t.length;i<r;i++){var a=e._getItem(e._array.length,t[i]);e._array.push(a)}else{var n=e._getItem(e._addArgs.index,arguments[0]);e._array.push.apply(e._array,[n])}return e._addArgs.addedCount=e._array.length-e._addArgs.index,e._notify(e._addArgs),e._notifyLengthChange(),e._array.length}},{key:"_notifyLengthChange",value:function(){if(this.canNotify){var e=this._createPropertyChangeData("length",this._array.length);this._notify(e)}}},{key:"_createPropertyChangeData",value:function(e,t,i){return{eventName:"change",object:this,action:e,value:t,oldValue:i}}},{key:"reverse",value:function(){return this._array.reverse()}},{key:"shift",value:function(){var e=this._array.shift();return this._removeArgs.index=0,this._removeArgs.removed=[e],this._notify(this._removeArgs),this._notifyLengthChange(),e}},{key:"slice",value:function(e,t){return this._array.slice(e,t)}},{key:"sort",value:function(e){return this._array.sort(e)}},{key:"splice",value:function(e,t,i){var r,a=this,n=a._array.length;if(i&&i.length)for(var s=0;s<i.length;s++)r=a._array.splice(e+s,t,i[s]);else r=a._array.splice.apply(a._array,arguments);if(i){var o=a.canNotify;if(a.canNotify=!1,i.length)for(var l=0;l<i.length;l++)a.setItem(e+l,i[l]);else a.setItem(e,i);a.canNotify=o,a._notify({eventName:"change",object:this,action:"add",index:e,added:r,addedCount:a._array.length>n?a._array.length-n:0})}else a._notify({eventName:"change",object:this,action:"remove",index:e,removed:r,addedCount:a._array.length>n?a._array.length-n:0});return a._array.length!==n&&a._notifyLengthChange(),r}},{key:"unshift",value:function(){var e=this,t=e._array.length,i=e._array.unshift.apply(e._array,arguments);return e._addArgs.index=0,e._addArgs.addedCount=i-t,e._notify(this._addArgs),e._notifyLengthChange(),i}},{key:"indexOf",value:function(e,t){for(var i=t||0,r=this._array.length;i<r;i++)if(this._array[i]===e)return i;return-1}},{key:"lastIndexOf",value:function(e,t){for(var i=t||this._array.length-1;i>=0;i--)if(this._array[i]===e)return i;return-1}},{key:"find",value:function(e,t){return this._array.find(e,t)}},{key:"findIndex",value:function(e,t){return this._array.findIndex(e,t)}},{key:"every",value:function(e,t){return this._array.every(e,t)}},{key:"some",value:function(e,t){return this._array.some(e,t)}},{key:"forEach",value:function(e,t){this._array.forEach(e,t)}},{key:"map",value:function(e,t){return this._array.map(e,t)}},{key:"filter",value:function(e,t){return this._array.filter(e,t)}},{key:"reduce",value:function(e,t){return void 0!==t?this._array.reduce(e,t):this._array.reduce(e)}},{key:"reduceRight",value:function(e,t){return void 0!==t?this._array.reduceRight(e,t):this._array.reduceRight(e)}},{key:"canNotify",get:function(){return void 0===this._canNotify&&(this._canNotify=!0),this._canNotify},set:function(e){this._canNotify=e}},{key:"length",get:function(){return this._array.length},set:function(e){y.isNumber(e)&&this._array&&this._array.length!==e&&this.splice(e,this._array.length-e)}}]),e}();var z={};window[t]&&(z=window[t]),window[t]=function(e,i){var r=e;if(e){if(e.indexOf("#")>=0||e.indexOf(".")>=0)return k[e]?k[e]:i?(k[e]=new i,function(e,t){var i=t.properties;t._properties=[],function i(r,a){for(var n=Object.keys(r),s=function(s){var o=n[s],l=r[o];return t._properties[a+o]=l,Array.isArray(l)?(t._properties[a+o]=new G(l,(function(t){var i=o+"."+t.path,r=t.newValue,a=document.querySelector(e);if(a){for(var n=i.split("."),s=a,l=0;l<n.length;l++){s=s[n[l]]}s=r}})),"continue"):(Object.defineProperty(r,o,{configurable:!1,enumerable:!0,get:function(){return t._properties[a+o]},set:function(e){t._properties[a+o]=e}}),l&&"DataAdapter"===l.constructor.name?"continue":l&&"object"===c(l)&&Smart.DataAdapter&&l instanceof Smart.DataAdapter?"continue":void("object"===c(l)&&l&&Object.keys(l).length>0&&i(l,a+o+".")))},o=0;o<n.length;o++)s(o)}(i,""),Object.defineProperty(t,"properties",{configurable:!1,enumerable:!0,get:function(){return i}});var r=document.querySelector(e);if(r&&r.isReady)for(var a in i)r[a]=i[a]}(e,k[e]),k[e]):void 0;if(i){if(H.tagNames[e]=i,H.lazyRegister){H.toRegister||(H.toRegister=[]);var a=b.toCamelCase(r).replace(/[a-z]+/,"");return window[t][a]=i,void H.toRegister.push({tagName:r,element:i})}H.register(r,i)}}},window.addEventListener("load",(function(){var e=window[t].Elements.tagNames,i=[];for(var r in e){for(var a=e[r],n=document.querySelectorAll("["+r+"]"),s=0;s<n.length;s++){var o=n[s];o instanceof HTMLDivElement&&(o.__proto__=a.prototype,o.created(),o.connectedCallback()),o.classList.add("smart-element-ready")}var l=a.name;"Item"===l&&(l="ListItem"),n=document.querySelectorAll('[is="'+t.toLocaleLowerCase()+l+'"]');for(var h=0;h<n.length;h++)i.push(n[h])}if(i.length>0){var u=function(e){for(var t=[],i=e.parentNode;i&&9!==i.nodeType;)i instanceof HTMLElement==!0&&t.push(i),i=i.parentNode;return t};i.sort((function(e,t){var i=u(e).length,r=u(t).length;return i<r?1:i>r?-1:0}));for(var d=0;d<i.length;d++){var c=i[d],f=c.getAttribute("is");("smartItem"===f?new window.smartListItem(c):new window[f](c)).removeAttribute("is")}}}));var j=function(){function e(t,i){f(this,e);var r=this.name,a=null;return t?a=new window[r](t,i):(a=new window[r])._initProperties=i,this._element=a,a}return m(e,[{key:"name",get:function(){return"Component"}},{key:"element",get:function(){return this._element}}]),e}(),U=function(){function e(i){f(this,e);var r=this;r._id=i.id,i.id?r._appRoot=document.getElementById(r._id):r._id=window[t].Utilities.Core.createGUID(),i.selector&&(r._id=window[t].Utilities.Core.createGUID(),r._appRoot=document.querySelector(i.selector)),r._appRoot||(r._appRoot=document.body),r._appRoot.classList.add("smart-visibility-hidden");var a={};if(i.render){var n=i.render(),s=i.components;!function(){var e=document.createDocumentFragment(),r=document.implementation.createDocument("http://www.w3.org/1999/xhtml","html",null),o=document.createElementNS("http://www.w3.org/1999/xhtml","body"),l=document.createElement("div");r.documentElement.appendChild(o),o.appendChild(l),l.innerHTML=n;for(var h=0;h<s.length;h++){var u=s[h],d=u.name,c=D.Core.toDash(d),f=r.querySelectorAll(d);u.tagName=c;for(var p=0;p<f.length;p++){var m=f[p],v=m.getAttribute("id")||window[t].Utilities.Core.createGUID(),y=document.createElement("div");y.id=v,l.insertBefore(y,m),a["#"+v]={name:d,properties:[],rendered:!1},m.parentNode.removeChild(m)}}e.appendChild(l);var g=document.querySelector(i.selector);g&&g.appendChild(e)}()}r._template=i.template||{},r._data=i.data||{},r._components=a;var o=function(){r._addAttributeBindings(),r._renderForBindings(),r._addModelBindings(),r._observeData(),r.render(),r._appRoot.classList.remove("smart-visibility-hidden")};"complete"===document.readyState?o():window.addEventListener("load",o)}return m(e,[{key:"_addAttributeBindings",value:function(e,t){var i=this,r=new v,a=e?r.getBindings(e):r.getBindings(i._appRoot);t||(t="");!function e(r){var a=function(e){if(e.data){var r=e.node.id;for(var a in r||(e.node.id=r="id"+Math.floor(65536*(1+Math.random())).toString(16).substring(1)),e.data){var n=e.data[a];if("textContent"===a&&(e.node.parentNode.id?r=e.node.parentNode.id:(e.node.id="",e.node.parentNode.id=r)),n.isEvent){var s={};s[n.name]=n.value,i._addListenerBinding(r,s)}else{var o={};o[a]=t+n.name,i._addTemplateBinding(r,o)}}}};for(var n in a(r),r.children){var s=r.children[n];s.node&&s.node.getAttribute&&s.node.getAttribute("smart-for")&&null===s.node.getAttribute("smart-for-rendered")||(a(s),s.children&&e(s))}}(a)}},{key:"toJSON",value:function(){return function e(t,i){for(var r in t)if(!r.startsWith("_")&&"notifyFn"!==r&&"canNotify"!==r&&"name"!==r&&"propertyName"!==r&&"toString"!==r&&"propertyIsEnumerable"!==r&&"valueOf"!==r&&"toLocaleString"!==r&&"hasOwnProperty"!==r&&"isPrototypeOf"!==r){var a=t[r];if("observableArray"!==a.name)if("observable"!==a.name)if("object"!==c(a)||D.Types.isFunction(a))i[r]=a;else{var n=e(a,{});i[r]=n}else{var s={};for(var o in a)if(!o.startsWith("_")&&"propertyIsEnumerable"!==o&&"notifyFn"!==o&&"canNotify"!==o&&"name"!==o&&!o.startsWith("_")&&"notifyFn"!==o&&"canNotify"!==o&&"name"!==o&&"propertyName"!==o&&"toString"!==o&&"valueOf"!==o&&"toLocaleString"!==o&&"hasOwnProperty"!==o&&"isPrototypeOf"!==o)if("object"!==c(a)||"object"!==c(a[o])||D.Types.isFunction(a))s[o]=a[o];else{var l=e(a[o],{});s[o]=l}i[r]=s}else i[r]=a.toArray()}return i}(this._data,{})}},{key:"_addTemplateBinding",value:function(e,t){this.template["#"+e]?this.template["#"+e].bind?Object.assign(this.template["#"+e].bind,t):this.template["#"+e].bind=t:this.template["#"+e]={bind:t}}},{key:"_addListenerBinding",value:function(e,t){this.template["#"+e]?this.template["#"+e].listeners?Object.assign(this.template["#"+e].listeners,t):this.template["#"+e].listeners=t:this.template["#"+e]={listeners:t}}},{key:"_updateDataFromBooleanElement",value:function(e,t){var i=t.checked,r=this._data[i];if(e.value&&"on"!==e.value)if(Array.isArray(r)||"observableArray"===r.name)if(e.checked)r.push(e.value);else{var a=r.indexOf(e.value);a>=0&&r.splice(a,1)}else"radio"!==e.type?e.checked?this._data[i]=e.value:this._data[i]="":e.checked&&(this._data[i]=e.value);else this._data[i]=e.checked}},{key:"_updateDataFromNativeElement",value:function(e,t){var i=this;if("SELECT"===e.tagName&&e.addEventListener("change",(function(){var r=t.value,a=i._data[r];if(e.__updating=!0,Array.isArray(a)||"observableArray"===a.name){if(a=new G,e.selectedOptions)for(var n=0;n<e.selectedOptions.length;n++){var s=e.selectedOptions[n];a.push(s.value)}i._data[r]=a}else i._data[r]=e.value;e.__updating=!1})),"INPUT"===e.tagName||"TEXTAREA"===e.tagName){e.addEventListener("change",(function(){e.__updating=!0,r?i._updateDataFromBooleanElement(e,t):i._data.value=e.value,e.__updating=!1}));var r="checkbox"===e.type||"radio"===e.type;r||e.addEventListener("keyup",(function(){var r=t.value;i._data[r]=e.value}))}}},{key:"_addModelBindings",value:function(e){for(var t=e?e.querySelectorAll("[smart-model]"):this._appRoot.querySelectorAll("[smart-model]"),i=0;i<t.length;i++){var r=t[i],a={value:r.getAttribute("smart-model")};"list"===r.type&&(a={selectedValues:r.getAttribute("smart-model")}),"checkbox"!==r.type&&"radio"!==r.type||(a={checked:r.getAttribute("smart-model")}),r.id||(r.id="id"+Smart.Utilities.Core.createGUID().replace(/-/gi,"")),this._updateDataFromNativeElement(r,a),this._addTemplateBinding(r.id,a)}}},{key:"_renderForBindings",value:function(e){for(var t=this._appRoot.querySelectorAll("[smart-for]"),i=0;i<t.length;i++){var r=t[i],a=r.getAttribute("smart-for"),n=this._data[a];r.id||(r.id="id"+Smart.Utilities.Core.createGUID().replace(/-/gi,"")),r.setAttribute("smart-for-rendered","");for(var s=null!==r.getAttribute("smart-for-self"),o=s?r.parentNode.querySelectorAll(".smart-for-item-"+r.id):r.querySelectorAll(".smart-for-item-"+r.id),l=0;l<o.length;l++)this.template[o[l].id]&&delete this.template[o[l].id],o[l].remove();for(var h=s?r:r.firstElementChild,u=document.createDocumentFragment(),d=0;d<n.length;d++){var c=h.cloneNode(!0);c.style.display="",c.id=r.id+"_"+d,c.classList.add("smart-for-item"),c.classList.add("smart-for-item-"+r.id),c.removeAttribute("smart-for"),u.appendChild(c)}h.style.display="none",s?r.parentNode.insertBefore(u,r.nextSibling):r.appendChild(u);for(var f=this._appRoot.querySelectorAll(".smart-for-item-"+r.id),p=0;p<f.length;p++){var m=f[p];this._addAttributeBindings(m,a+"."+p+".")}}e&&t.length>0&&this.render()}},{key:"notify",value:function(e){var t=this;t.notifyFn=function(i){i.owner=t,e(i)}}},{key:"_notify",value:function(e){if("length"!==e.propertyName){this.notifyFn&&this.notifyFn(e);var t=e.propertyName;for(var i in e.object&&(t=e.object.propertyName),this.template){var r=this.template[i],a=null;for(var n in r.bind)if("function"!=typeof r.bind[n]&&r.bind[n].indexOf(t)>=0){a=n;break}a&&this._setPropertyFromData(r,a)}this._renderForBindings(!0)}}},{key:"_observeData",value:function(){var e=this;e._data=new window[t].Observable(e._data),e._data.canNotify=!1,e._data.notify(e._notify.bind(e));var i=function t(i){for(var r in i.canNotify=!1,i)if("function"!=typeof i[r]){if(!r.startsWith("_")&&"notifyFn"!==r&&"canNotify"!==r&&"name"!==r){var a=i[r];Array.isArray(a)?(i[r]=new Smart.ObservableArray(i[r]),i[r].canNotify=!1,i[r].notify(e._notify.bind(e)),i[r].canNotify=!0,i[r].propertyName=r):a&&"object"===c(a)&&a.constructor===Smart.DataAdapter?i[r].propertyName=r:a&&"object"===c(a)&&a instanceof Date?i[r].propertyName=r:a&&"object"===c(a)&&(i[r]=new Smart.Observable(i[r]),i[r].canNotify=!1,i[r].notify(e._notify.bind(e)),i[r].canNotify=!0,i[r].propertyName=r,t(i[r]))}}else i[r]=i[r].bind(i);i.canNotify=!0};for(var r in e._data)if("function"!=typeof e._data[r]){if(!r.startsWith("_")&&"notifyFn"!==r&&"canNotify"!==r&&"name"!==r){var a=e._data[r];Array.isArray(a)?(e._data[r]=new Smart.ObservableArray(e._data[r]),e._data[r].canNotify=!1,e._data[r].notify(e._notify.bind(e)),e._data[r].canNotify=!0,e._data[r].propertyName=r):"object"===c(a)&&a.constructor===Smart.DataAdapter?e._data[r].propertyName=r:"object"===c(a)&&a instanceof Date?e._data[r].propertyName=r:"object"===c(a)&&(e._data[r]=new Smart.Observable(e._data[r]),e._data[r].canNotify=!1,e._data[r].notify(e._notify.bind(e)),e._data[r].canNotify=!0,e._data[r].propertyName=r,i(e._data[r]))}}else e._data[r]=e._data[r].bind(e._data);e._data.canNotify=!0}},{key:"_setPropertyFromData",value:function(e,t){if(!e.element.__updating&&e.bind){var i=e.bind[t];if("function"!=typeof i){for(var r=i?i.split("."):[],a=this._data,n=0;n<r.length;n++){var s=r[n];if("string"==typeof a)break;if(void 0===a[s]){a=void 0;break}a=a[s]}if(e.bind.computed){var o={item:e,name:i,value:a};e.bind.computed(o),o.value!==a&&(a=o.value)}if(e.element.__updatingProperties=!0,i&&void 0!==a){if("observableArray"===a.name)"checkbox"===e.element.type?e.element[t]=a.indexOf(e.element.value)>=0:e.element[t]=a.toArray().slice(0);else if("observable"===a.name){var l=function e(t){var r=null;for(var a in t)if("function"!=typeof t[a]&&!a.startsWith("_")&&"notifyFn"!==a&&"canNotify"!==a&&"name"!==a){var n=t[a];if(void 0!==n&&!(n&&Array.isArray(n)||n&&"object"===c(n)&&n.constructor===Smart.DataAdapter)){if(n&&"object"===c(n)&&(r=e(t[a])),a===i){r=n;break}if(r)return r}}return r}(a);e.element[t]=l||a}else"radio"===e.element.type?e.element.value===a?e.element[t]=!0:e.element[t]=!1:e.element[t]=a;this._components[e.selector]&&!this._components[e.selector].rendered&&(this._components[e.selector].properties[t]=a)}else e.properties&&(e.element[t]=e.properties[t],this._components[e.selector]&&!this._components[e.selector].rendered&&(this._components[e.selector].properties[t]=e.properties[t]));e.element.__updatingProperties=!1}}}},{key:"render",value:function(){var e=this,t=function(t){var i=e.template[t],r=i.element?i.element:document.querySelector(t),a=i.properties,n=i.listeners,s=i.bind;if(!r)return"continue";for(var o in i.selector=t,i.element=r,r._properties||(r._properties=[]),a){var l=r._properties?r._properties[o]:null;l&&(l.notify=!0),e._setPropertyFromData(i,o)}for(var h in s){var u=r._properties?r._properties[h]:null;u&&(u.notify=!0),e._setPropertyFromData(i,h)}if(e._components&&e._components[t]&&!1===e._components[t].rendered){var d=e._components[t];i.element=d.instance=new window[d.name](t,d.properties),d.rendered=!0}var c=function(t){var r=i.element,a=function(i){r.$||(r.$=Smart.Utilities.Extend(r)),r.$[t](i,(function(t){var r=n[i];if(r.indexOf(".")>=0){for(var a=r.split("."),s=e._data[a[0]],o=1;o<a.length;o++)s=s[a[o]];void 0!==s&&s(t)}else e._data[r]&&e._data[r](t)}))};for(var o in n)a(o);var l=function(i){var a=r._properties?r._properties[i]:null;if(a){var n=function(t){if(!r.__updatingProperties){r.__updating=!0;var a=function(e){if("radio"===r.type)for(var t=r.parentNode.querySelectorAll('[type="radio"]'),i=0;i<t.length;i++)t[i].__updating=e};a(!0);var n=s[i];if("radio"===r.type||"toggle"===r.type||"checkbox"===r.type)e._updateDataFromBooleanElement(r,s);else{!function(e,t,i){var r;for(r=0;r<t.length-1;r++)e=e[t[r]];e[t[r]]=i}(e._data,n.split("."),t.detail.value)}r.__updating=!1,a(!1)}};"textarea"===r.type&&r.$[t]("input.keyup",(function(e){var t=new CustomEvent("keyup",{detail:{originalEvent:e,value:r.$.input.value}});n(t)})),r.$[t](a.attributeName+"-changed",(function(e){n(e)}))}};for(var h in s)l(h)};c("unlisten"),c("listen"),r.onAttached=function(){c("listen")},r.onDetached=function(){c("unlisten")}};for(var i in e.template)t(i)}},{key:"template",get:function(){return this._template},set:function(e){this._template=e,this.render()}},{key:"id",get:function(){return this._id},set:function(e){this._id=e}},{key:"jsonData",get:function(){return this.toJSON()}},{key:"formData",get:function(){var e=new FormData,t=this.toJSON();if(!t)return e;return function t(i,r){for(var a in i){var n=i[a];D.Types.isFunction(n)||("object"!==c(n)||Array.isArray(n)||t(n,a),("object"!==c(n)||Array.isArray(n))&&(""===r?e.append(a,n):e.append(r+"."+a,n)))}}(t,""),e}},{key:"data",get:function(){return this._data||(this._data={}),this._data},set:function(e){this._data=e,this._observeData(),this.render()}}]),e}();Object.assign(window[t],{Elements:H,Modules:[p,h,v],BaseElement:B,Utilities:D,Import:function(e,t){var i=0,r=function(e,t){return new Promise((function(i){var r=document.createElement("script");r.src=e,r.onload=i;for(var a=0;a<document.head.children.length;a++){var n=document.head.children[a];if(n.src&&n.src.toString().indexOf(t)>=0)return void i()}document.head.appendChild(r)}))};return new Promise((function(a){var n=D.Core.getScriptLocation();if(t)for(var s=0;s<e.length;s++){var o=n+"/"+e[s];r(o,e[s]).then((function(){++i===e.length&&a()}))}else!function t(s){if(e[s]){var o=n+"/"+e[s];r(o,e[s]).then((function(){++i===e.length&&a(),t(s+1)}))}}(0)}))},ObservableArray:G,Observable:V,App:U,Component:j,Theme:z.Theme||"",EnableShadowDOM:!1,BaseUrl:"./",StyleBaseUrl:"/styles/default/",Version:"5.1.0",License:"Evaluation"});var $=window[t].Theme;Object.defineProperty(window[t],"Theme",{configurable:!1,enumerable:!0,get:function(){return $},set:function(e){var t=$;$=e,O.fireEvent("theme-changed",{oldValue:t,newValue:e},{bubbles:!0,cancelable:!0})}}),window[t]("smart-base-element",window[t].BaseElement),window[t]("smart-content-element",function(e){function t(){return f(this,t),a(this,u(t).apply(this,arguments))}return s(t,e),m(t,[{key:"template",value:function(){return"<div inner-h-t-m-l='[[innerHTML]]'></div>"}},{key:"ready",value:function(){r(u(t.prototype),"ready",this).call(this);this.applyContent()}},{key:"clearContent",value:function(){for(;this.$.content.firstChild;)this.$.content.removeChild(this.$.content.firstChild)}},{key:"applyContent",value:function(){if(void 0!==this.content)if(""!==this.content&&null!==this.content){if(this.content instanceof HTMLElement)return this.clearContent(),void this.$.content.appendChild(this.content);var e=document.createDocumentFragment(),t=document.createElement("div");e.appendChild(t),this.content instanceof HTMLElement?t.appendChild(this.content):t.innerHTML=this.content;var i=Array.from(t.childNodes);t.parentNode.removeChild(t);for(var r=0;r<i.length;r++)e.appendChild(i[r]);this.clearContent(),this.$.content.appendChild(e)}else this.clearContent();else this.content=this.$.content}},{key:"propertyChangedHandler",value:function(e,i,a){r(u(t.prototype),"propertyChangedHandler",this).call(this,e,i,a);i!==a&&("innerHTML"===e&&(this.content=a,this.applyContent(),this.innerHTML=this.content=D.Core.html(this.$.content)),"content"===e&&this.applyContent())}}],[{key:"properties",get:function(){return{content:{type:"any",reflectToAttribute:!1},innerHTML:{type:"string",reflectToAttribute:!1}}}}]),t}(window[t].BaseElement)),window[t]("smart-scroll-viewer",function(e){function t(){return f(this,t),a(this,u(t).apply(this,arguments))}return s(t,e),m(t,[{key:"template",value:function(){return'<div id="container" class="smart-container" role="presentation">\n                        <div id="scrollViewerContainer" class="smart-scroll-viewer-container" role="presentation">\n                            <div id="scrollViewerContentContainer" inner-h-t-m-l=\'[[innerHTML]]\' class="smart-scroll-viewer-content-container" role="presentation">\n                                <content></content>\n                            </div>\n                        </div>\n                        <smart-scroll-bar id="verticalScrollBar" animation="[[animation]]" disabled="[[disabled]]" right-to-left="[[rightToLeft]]" orientation="vertical"></smart-scroll-bar>\n                        <smart-scroll-bar id="horizontalScrollBar" animation="[[animation]]" disabled="[[disabled]]" right-to-left="[[rightToLeft]]"></smart-scroll-bar>\n                    </div>'}},{key:"appendChild",value:function(e){var t=this;if(e){if(!t.isCompleted||e.classList&&e.classList.contains("smart-resize-trigger-container")){var i=Array.prototype.slice.call(arguments,2);return HTMLElement.prototype.appendChild.apply(t,i.concat(Array.prototype.slice.call(arguments)))}t.$.scrollViewerContentContainer.appendChild(e)}}},{key:"removeChild",value:function(e){var t=this;if(e){if(!t.isCompleted||e.classList&&e.classList.contains("smart-resize-trigger-container")){var i=Array.prototype.slice.call(arguments,2);return HTMLElement.prototype.removeChild.apply(t,i.concat(Array.prototype.slice.call(arguments)))}t.$.scrollViewerContentContainer.removeChild(e)}}},{key:"removeAll",value:function(){this.isCompleted&&(this.$.scrollViewerContentContainer.innerHTML="")}},{key:"_horizontalScrollbarHandler",value:function(e){this.$.scrollViewerContentContainer.style.left=(this.rightToLeft?1:-1)*this.scrollLeft+"px",e.stopPropagation(),this.onHorizontalChange&&this.onHorizontalChange(e)}},{key:"_verticalScrollbarHandler",value:function(e){this.$.scrollViewerContentContainer.style.top=-this.scrollTop+"px",e.stopPropagation(),this.onVerticalChange&&this.onVerticalChange(e)}},{key:"_mouseWheelHandler",value:function(e){this.disabled||!this.computedHorizontalScrollBarVisibility&&!this.computedVerticalScrollBarVisibility||(this.computedVerticalScrollBarVisibility?(e.stopPropagation(),e.preventDefault(),this.scrollHeight>0&&this.scrollTo(this.scrollTop+this._getScrollCoefficient(e,this.offsetHeight))):this.computedHorizontalScrollBarVisibility&&(e.stopPropagation(),e.preventDefault(),this.scrollWidth>0&&this.scrollTo(void 0,this.scrollLeft+this._getScrollCoefficient(e,this.offsetWidth))))}},{key:"_getScrollCoefficient",value:function(e,t){var i,r=e.deltaMode,a=Math.abs(e.deltaY);return 0===r?i=a<100/3?a:t:1===r?i=a<1?a*(100/3):t:2===r&&(i=t),e.deltaY<0?-i:i}},{key:"applyContent",value:function(){r(u(t.prototype),"applyContent",this).call(this),this.refresh()}},{key:"scrollTo",value:function(e,t){this._scrollView&&(void 0!==e&&this._scrollView.scrollTo(e),void 0!==t&&this._scrollView.scrollTo(t,!1))}},{key:"refreshScrollBarsVisibility",value:function(){this._scrollView&&(this._scrollView.hScrollBar.disabled=this.disabled,this._scrollView.vScrollBar.disabled=this.disabled,"disabled"===this.horizontalScrollBarVisibility&&(this._scrollView.hScrollBar.disabled=!0),"disabled"===this.verticalScrollBarVisibility&&(this._scrollView.vScrollBar.disabled=!0),this.scrollWidth>0?this._scrollView.hScrollBar.$.removeClass("smart-hidden"):"visible"!==this.horizontalScrollBarVisibility&&this._scrollView.hScrollBar.$.addClass("smart-hidden"),this.scrollHeight>0?this._scrollView.vScrollBar.$.removeClass("smart-hidden"):"visible"!==this.verticalScrollBarVisibility&&this._scrollView.vScrollBar.$.addClass("smart-hidden"),"hidden"===this.horizontalScrollBarVisibility&&this._scrollView.hScrollBar.$.addClass("smart-hidden"),"hidden"===this.verticalScrollBarVisibility&&this._scrollView.vScrollBar.$.addClass("smart-hidden"),"visible"===this.horizontalScrollBarVisibility&&this._scrollView.hScrollBar.$.removeClass("smart-hidden"),"visible"===this.verticalScrollBarVisibility&&(this._scrollView.vScrollBar.$.removeClass("smart-hidden"),this.disabled||(this._scrollView.vScrollBar.disabled=this.scrollHeight<=0)),this.computedHorizontalScrollBarVisibility&&this.computedVerticalScrollBarVisibility?(this._scrollView.hScrollBar.$.addClass("bottom-corner"),this._scrollView.vScrollBar.$.addClass("bottom-corner")):(this._scrollView.hScrollBar.$.removeClass("bottom-corner"),this._scrollView.vScrollBar.$.removeClass("bottom-corner")))}},{key:"ready",value:function(){r(u(t.prototype),"ready",this).call(this);this.$.verticalScrollBar.setAttribute("aria-controls",this.id),this.$.horizontalScrollBar.setAttribute("aria-controls",this.id),this._scrollView=new Smart.Utilities.Scroll(this,this.$.horizontalScrollBar,this.$.verticalScrollBar),this.refresh()}},{key:"refresh",value:function(){var e=this;function t(){var t=e.$.scrollViewerContentContainer.offsetWidth-e.$.scrollViewerContainer.offsetWidth;return t>0&&"hidden"!==e.horizontalScrollBarVisibility||"visible"===e.horizontalScrollBarVisibility?e.$.scrollViewerContainer.classList.add("hscroll"):e.$.scrollViewerContainer.classList.remove("hscroll"),t}function i(){var t;if(Smart.Utilities.Core.Browser.Safari){var i=e.$.scrollViewerContentContainer.getBoundingClientRect().height,r=e.$.scrollViewerContainer.getBoundingClientRect().height;t=i&&r?parseInt(i)-parseInt(r):e.$.scrollViewerContentContainer.offsetHeight-e.$.scrollViewerContainer.offsetHeight}else t=e.$.scrollViewerContentContainer.offsetHeight-e.$.scrollViewerContainer.offsetHeight;return t>0&&"hidden"!==e.verticalScrollBarVisibility||"visible"===e.verticalScrollBarVisibility?e.$.scrollViewerContainer.classList.add("vscroll"):e.$.scrollViewerContainer.classList.remove("vscroll"),t}if(e.$.scrollViewerContentContainer){var r=e.scrollWidth,a=e.scrollHeight;e.scrollWidth=t(),e.scrollHeight=i(),e.scrollHeight&&a===e.scrollHeight||(e.scrollWidth=t()),e.scrollWidth&&r===e.scrollWidth||(e.scrollHeight=i()),e.computedVerticalScrollBarVisibility&&(e.scrollHeight+=e._scrollView.hScrollBar.offsetHeight),e.computedHorizontalScrollBarVisibility&&(e.scrollWidth+=e._scrollView.vScrollBar.offsetWidth)}}},{key:"attached",value:function(){r(u(t.prototype),"attached",this).call(this),this._scrollView||(this._scrollView=new Smart.Utilities.Scroll(this,this.$.horizontalScrollBar,this.$.verticalScrollBar))}},{key:"detached",value:function(){r(u(t.prototype),"detached",this).call(this),this._scrollView&&(this._scrollView.unlisten(),delete this._scrollView)}},{key:"propertyChangedHandler",value:function(e,i,a){r(u(t.prototype),"propertyChangedHandler",this).call(this,e,i,a),"animation"!==e&&"theme"!==e&&this.refresh()}},{key:"computedHorizontalScrollBarVisibility",get:function(){return this._scrollView&&this._scrollView.hScrollBar?!this._scrollView.hScrollBar.$.hasClass("smart-hidden"):null}},{key:"computedVerticalScrollBarVisibility",get:function(){return this._scrollView&&this._scrollView.vScrollBar?!this._scrollView.vScrollBar.$.hasClass("smart-hidden"):null}},{key:"scrollWidth",get:function(){return this._scrollView&&this._scrollView.hScrollBar?1===this._scrollView.hScrollBar.max&&"visible"===this.horizontalScrollBarVisibility?0:this._scrollView.hScrollBar.max:-1},set:function(e){e<0&&(e=0),this._scrollView&&this._scrollView.hScrollBar&&(0===e&&"visible"===this.horizontalScrollBarVisibility?this._scrollView.hScrollBar.max=0:this._scrollView.hScrollBar.max=e,this.refreshScrollBarsVisibility())}},{key:"scrollHeight",get:function(){return this._scrollView&&this._scrollView.vScrollBar?1===this._scrollView.vScrollBar.max&&"visible"===this.verticalScrollBarVisibility?0:this._scrollView.vScrollBar.max:0},set:function(e){e<0&&(e=0),this._scrollView&&this._scrollView.vScrollBar&&(0===e&&"visible"===this.verticalScrollBarVisibility?this._scrollView.vScrollBar.max=1:this._scrollView.vScrollBar.max=e,this.refreshScrollBarsVisibility())}},{key:"scrollLeft",get:function(){return this._scrollView&&this._scrollView.hScrollBar?this._scrollView.hScrollBar.value:0},set:function(e){e<0&&(e=0),this._scrollView&&this._scrollView.hScrollBar&&(this._scrollView.hScrollBar.value=e)}},{key:"scrollTop",get:function(){return this._scrollView&&this._scrollView.vScrollBar?this._scrollView.vScrollBar.value:0},set:function(e){e<0&&(e=0),this._scrollView&&this._scrollView.vScrollBar&&(this._scrollView.vScrollBar.value=e)}}],[{key:"properties",get:function(){return{horizontalScrollBarVisibility:{type:"string",value:"auto",allowedValues:["auto","disabled","hidden","visible"]},verticalScrollBarVisibility:{type:"string",value:"auto",allowedValues:["auto","disabled","hidden","visible"]}}}},{key:"listeners",get:function(){return{"horizontalScrollBar.change":"_horizontalScrollbarHandler","verticalScrollBar.change":"_verticalScrollbarHandler",wheel:"_mouseWheelHandler"}}},{key:"styleUrls",get:function(){return["smart.scrollviewer.css"]}}]),t}(window[t].ContentElement)),window[t].Utilities.Assign("PositionDetection",function(){function e(t,i,r,a){f(this,e);if(i){var n="dropDown"+Math.floor(65536*(1+Math.random())).toString(16).substring(1);i.id=n,t.setAttribute("aria-controls",n)}this.context=t,this.dropDown=i,this.defaultParent=r,this.closeMethod=a}return m(e,[{key:"handleAutoPositioning",value:function(){var e=this,t=e.context;if("auto"===t.dropDownPosition&&!t.disabled){var i,r=window.requestAnimationFrame,a=Date.now();return i=r((function n(){i=r(n),("auto"!==t.dropDownPosition||t.disabled||null===t.parentElement)&&cancelAnimationFrame(i),Date.now()-a>=200&&(e.scrollHandler(),a=Date.now())}))}}},{key:"checkBrowserBounds",value:function(e){var t=this.context;if("auto"===t.dropDownPosition&&!t.disabled)switch(e){case"vertically":this.checkBrowserBoundsVertically();break;case"horizontally":this.checkBrowserBoundsHorizontally();break;default:this.checkBrowserBoundsVertically(),this.checkBrowserBoundsHorizontally()}}},{key:"checkBrowserBoundsHorizontally",value:function(){var e,t=this.context,i=this.dropDown,r=0;b.isMobile||window.innerWidth===document.documentElement.clientWidth||(r=window.innerWidth-document.documentElement.clientWidth),null!==t._dropDownParent?e=!0:i.style.left="";var a=window.innerWidth-r,n=t.getBoundingClientRect().left;if(n<0&&(i.style.left=(e?0:Math.abs(n))+"px",n=parseFloat(i.style.left)),n+i.offsetWidth>a){var s=n-Math.abs(a-n-i.offsetWidth);e&&(s+=window.pageXOffset),i.style.left=(e?s:s-n)+"px",window.innerWidth===document.documentElement.clientWidth&&(i.style.left=parseFloat(i.style.left)+r+"px"),e&&window.innerHeight===document.documentElement.clientHeight&&this.positionDropDown(!0)}}},{key:"checkBrowserBoundsVertically",value:function(e){var t=this.context,i=this.dropDown,r=t._dropDownListPosition;e||(e=t.getBoundingClientRect()),0!==e.height&&(document.documentElement.clientHeight-Math.abs(e.top+e.height+i.offsetHeight)>=0?t._dropDownListPosition="bottom":e.top-i.offsetHeight>=0?t._dropDownListPosition="top":t._dropDownListPosition="overlay-center",this.updatePositionAttribute(r,t._dropDownListPosition))}},{key:"scrollHandler",value:function(){var e=this.context;if(e.parentElement){var t=e.getBoundingClientRect();if(t.top!==e._positionTop){var i=e._dropDownListPosition;this.checkBrowserBoundsVertically(t),e._dropDownListPosition!==i&&this.positionDropDown(),e._positionTop=t.top}}}},{key:"getDropDownParent",value:function(e){var t=this.context,i=this.dropDown,r=t.dropDownAppendTo;t._positionedParent=null,null===r?t._dropDownParent=null:"body"===r||r===document.body?t._dropDownParent=document.body:r instanceof HTMLElement?t._dropDownParent=r:"string"==typeof r&&(r=document.getElementById(r))instanceof HTMLElement?t._dropDownParent=r:(t.dropDownAppendTo=null,t._dropDownParent=null);var a=t._dropDownParent;if(null!==a){for(;a&&"static"===window.getComputedStyle(a).position&&a!==document.body;)a=a.parentElement;a===document.body?t._positionedParent=null:t._positionedParent=a,i&&(i.setAttribute("animation",t.animation),""!==t.theme&&i.$.addClass(t.theme),e&&(t._dropDownParent.appendChild(i),i.$.addClass("smart-drop-down-repositioned")),-1===t.detachedChildren.indexOf(i)&&t.detachedChildren.push(i))}}},{key:"dropDownAppendToChangedHandler",value:function(){var e=this.context,t=this.dropDown,i=e._dropDownParent;this.getDropDownParent(),e._dropDownParent!==i&&(e[this.closeMethod](),["left","top","font-size","font-family","font-style","font-weight"].forEach((function(e){return t.style[e]=null})),null===e._dropDownParent?(this.defaultParent.appendChild(t),t.$.removeClass("smart-drop-down-repositioned")):(e._dropDownParent.appendChild(t),t.$.addClass("smart-drop-down-repositioned")))}},{key:"dropDownPositionChangedHandler",value:function(){this.dropDown.style.transition="none",this.context[this.closeMethod](),this.setDropDownPosition(),this.handleAutoPositioning()}},{key:"dropDownAttached",value:function(e){var t=this.context;null!==t._dropDownParent&&(t._dropDownParent.appendChild(this.dropDown),this.handleAutoPositioning(),e&&t[e]())}},{key:"dropDownDetached",value:function(){var e=this.context;null!==e._dropDownParent&&document.body.contains(this.dropDown)&&document.body.contains(e._dropDownParent)&&e._dropDownParent.removeChild(this.dropDown)}},{key:"setDropDownPosition",value:function(){var e=this.context,t=e.dropDownPosition,i=e._dropDownListPosition;"auto"===t?this.checkBrowserBounds():e._dropDownListPosition=t,this.updatePositionAttribute(i,e._dropDownListPosition)}},{key:"updatePositionAttribute",value:function(e,t){var i=this.context,r=this.dropDown;i.$.dropDownButton&&!i.$.dropDownButton.hasAttribute(t)&&(i.$.dropDownButton.removeAttribute(e),i.$.dropDownButton.setAttribute(t,"")),r.hasAttribute(t)||(r.style.transition="none",r.removeAttribute(e),r.setAttribute(t,""),requestAnimationFrame((function(){r.style.transition=null})))}},{key:"positionDropDown",value:function(e){var t=this.context,i=this.dropDown;if(t.opened&&null!==t._dropDownParent){var r,a,n=t.getBoundingClientRect();if(this.customPositionDropDown){var s=this.customPositionDropDown(n);r=s.left,a=s.top}else switch(r=n.left,a=n.top,t._dropDownListPosition){case"bottom":a+=t.$.container.offsetHeight-1;break;case"center-bottom":a+=t.$.container.offsetHeight-1,r+=t.offsetWidth-i.offsetWidth/2;break;case"center-top":a-=i.offsetHeight-1,r+=t.offsetWidth-i.offsetWidth/2;break;case"top":a-=i.offsetHeight-1;break;case"overlay-bottom":break;case"overlay-center":a-=i.offsetHeight/2-t.offsetHeight/2;break;case"overlay-top":a-=i.offsetHeight-t.offsetHeight}var o=this.getDropDownOffset();i.style.top=a+o.y+"px",e||(i.style.left=r+o.x+"px")}}},{key:"getDropDownOffset",value:function(){var e,t,i=this.context._positionedParent;if(i){var r=i.getBoundingClientRect();e=-r.left,t=-r.top}else e=window.pageXOffset,t=window.pageYOffset;return{x:e,y:t}}},{key:"placeOverlay",value:function(){var e=this.context;if(e.dropDownOverlay&&!e._overlay){var t=document.createElement("div");t.classList.add("smart-drop-down-overlay"),t.style.width=document.documentElement.scrollWidth+"px",t.style.height=document.documentElement.scrollHeight+"px",document.body.appendChild(t),e._overlay=t}}},{key:"removeOverlay",value:function(e){var t=this,i=t.context;i._overlay&&(i.hasAnimation&&e?requestAnimationFrame((function e(){t.dropDown.getBoundingClientRect().height>0?requestAnimationFrame(e):(document.body.removeChild(i._overlay),delete i._overlay)})):(document.body.removeChild(i._overlay),delete i._overlay))}}]),e}())}()},1:function(e,t,i){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t,i){return t&&n(e.prototype,t),i&&n(e,i),e}function o(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function l(e,t,i){return(l="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,i){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=h(e)););return e}(e,t);if(r){var a=Object.getOwnPropertyDescriptor(r,t);return a.get?a.get.call(i):a.value}})(e,t,i||e)}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}Smart("smart-button",function(e){function t(){return a(this,t),o(this,h(t).apply(this,arguments))}return u(t,Smart.ContentElement),s(t,[{key:"template",value:function(){return"<button class=\"smart-button\" inner-h-t-m-l='[[innerHTML]]' id='button' type='[[type]]' name='[[name]]' value='[[value]]' disabled='[[disabled]]' role=\"presentation\"></button>"}},{key:"focus",value:function(){this.$.button?this.$.button.focus():HTMLElement.prototype.focus.call(this)}},{key:"blur",value:function(){this.$.button?this.$.button.blur():HTMLElement.prototype.blur.call(this)}},{key:"_upHandler",value:function(e){e.stopPropagation(),this.$.setAttributeValue("active",!1)}},{key:"_focusHandler",value:function(){this.$.setAttributeValue("focus",!0)}},{key:"_blurHandler",value:function(){this.$.setAttributeValue("focus",!1)}},{key:"_clickHandler",value:function(e){("release"!==this.clickMode&&"pressAndRelease"!==this.clickMode||this.readonly)&&(e.preventDefault(),e.stopPropagation())}},{key:"_downHandler",value:function(e){if(!(this.disabled||(this.hasRippleAnimation&&Smart.Utilities.Animation.Ripple.animate(this,e.pageX,e.pageY),this.$.setAttributeValue("active",!0),"press"!==this.clickMode&&"pressAndRelease"!==this.clickMode||this.readonly))){var t="buttons"in e?e.buttons:e.which;this.$.fireEvent("click",{buttons:t,clientX:e.clientX,clientY:e.clientY,pageX:e.pageX,pageY:e.pageY,screenX:e.screenX,screenY:e.screenY})}}},{key:"_mouseEnterHandler",value:function(e){if(!this.readonly&&(this.$button.setAttributeValue("hover",!0),this.$.setAttributeValue("hover",!0),"hover"===this.clickMode)){var t="buttons"in e?e.buttons:e.which;this.$.fireEvent("click",{buttons:t,clientX:e.clientX,clientY:e.clientY,pageX:e.pageX,pageY:e.pageY,screenX:e.screenX,screenY:e.screenY})}}},{key:"_touchEndHandler",value:function(){var e=this;setTimeout((function(){e.$button.setAttributeValue("hover",!1),e.$.setAttributeValue("hover",!1)}),300)}},{key:"_mouseLeaveHandler",value:function(){this.$button.setAttributeValue("hover",!1),this.$.setAttributeValue("hover",!1)}},{key:"propertyChangedHandler",value:function(e,i,r){l(h(t.prototype),"propertyChangedHandler",this).call(this,e,i,r);"disabled"===e?(this._setFocusable(),this.$button&&this.$button.setAttributeValue("hover",!1),this.$.setAttributeValue("hover",!1),this instanceof Smart.RepeatButton&&this._stopRepeat()):"unfocusable"===e&&this._setFocusable()}},{key:"_setFocusable",value:function(){var e=this.$.button?this.$.button:this;if(this.disabled||this.unfocusable)return e.removeAttribute("tabindex"),void(e.tabIndex=-1);e.tabIndex=this.tabIndex>0?this.tabIndex:0}},{key:"ready",value:function(){l(h(t.prototype),"ready",this).call(this),this.setAttribute("role","button"),this._setFocusable(),this.enableShadowDOM&&this.$.hiddenInput&&this.appendChild(this.$.hiddenInput)}}],[{key:"properties",get:function(){return{value:{type:"string"},name:{type:"string"},type:{value:"button",type:"string"},clickMode:{allowedValues:["hover","press","release","pressAndRelease"],type:"string",value:"release"}}}},{key:"styleUrls",get:function(){return["smart.button.css"]}},{key:"listeners",get:function(){return{"button.down":"_downHandler","button.mouseenter":"_mouseEnterHandler","button.mouseleave":"_mouseLeaveHandler","button.touchend":"_touchEndHandler","button.click":"_clickHandler","button.up":"_upHandler",up:"_upHandler","button.focus":"_focusHandler","button.blur":"_blurHandler"}}}]),t}()),Smart("smart-repeat-button",function(e){function t(){return a(this,t),o(this,h(t).apply(this,arguments))}return u(t,Smart.Button),s(t,[{key:"_clickHandler",value:function(e){("release"!==this.clickMode||this.preventDefaultClick||this.readonly||this.disabled)&&(e.preventDefault(),e.stopPropagation(),this.preventDefaultClick=!1)}},{key:"_updateInBoundsFlag",value:function(e){this._isPointerInBounds=!0,"mouseleave"===e.type?(this._isPointerInBounds=!1,this.$button.setAttributeValue("hover",!1),this.$.setAttributeValue("hover",!1)):(this.$button.setAttributeValue("hover",!0),this.$.setAttributeValue("hover",!0)),1!==("buttons"in e?e.buttons:e.which)&&this._stopRepeat(e)}},{key:"_startRepeat",value:function(e){var t=this;t._initialTimer||t.readonly||(t._initialTimer=setTimeout((function(){t._repeatTimer=setInterval((function(){if(t._isPointerInBounds){var i="buttons"in e?e.buttons:e.which;t.$.fireEvent("click",{buttons:i,clientX:e.clientX,clientY:e.clientY,pageX:e.pageX,pageY:e.pageY,screenX:e.screenX,screenY:e.screenY}),t.preventDefaultClick=!0}}),t.delay)}),t.initialDelay))}},{key:"_stopRepeat",value:function(){this.readonly||(this.$.setAttributeValue("active",!1),this._repeatTimer&&(clearInterval(this._repeatTimer),this._repeatTimer=null),this._initialTimer&&(clearTimeout(this._initialTimer),this._initialTimer=null))}}],[{key:"properties",get:function(){return{delay:{value:50,type:"number"},initialDelay:{value:150,type:"number"}}}},{key:"listeners",get:function(){return{"button.mousedown":"_startRepeat","button.mouseenter":"_updateInBoundsFlag","button.mouseleave":"_updateInBoundsFlag","document.mouseup":"_stopRepeat"}}}]),t}()),Smart("smart-toggle-button",function(e){function t(){return a(this,t),o(this,h(t).apply(this,arguments))}return u(t,Smart.Button),s(t,[{key:"ready",value:function(){l(h(t.prototype),"ready",this).call(this),this._setAriaState()}},{key:"_setAriaState",value:function(){var e=this.checked;null!==e?this.setAttribute("aria-pressed",e):this.setAttribute("aria-pressed","mixed")}},{key:"_buttonClickHandler",value:function(){}},{key:"_buttonMouseLeaveHandler",value:function(){this.removeAttribute("hover")}},{key:"_buttonMouseEnterHandler",value:function(){this.setAttribute("hover",""),this.disabled||this.readonly||"hover"!==this.clickMode||(this._changeCheckState("pointer"),this.focus(),this._updateHidenInputNameAndValue())}},{key:"_documentUpHandler",value:function(){this._pressed&&(this._pressed=!1,this.disabled||this.readonly||"press"===this.clickMode||(this._changeCheckState("pointer"),this.focus(),this._updateHidenInputNameAndValue()))}},{key:"_downHandler",value:function(e){this.disabled||this.readonly||(this.hasRippleAnimation&&Smart.Utilities.Animation.Ripple.animate(this,e.pageX,e.pageY),this._pressed=!0,"press"!==this.clickMode&&"pressAndRelease"!==this.clickMode||(this._changeCheckState("pointer"),this.$.fireEvent("click"),this._updateHidenInputNameAndValue()),"press"===this.clickMode&&(e.preventDefault(),e.stopPropagation()))}},{key:"_dragStartHandler",value:function(e){e.preventDefault()}},{key:"_keyHandler",value:function(e){if(!0!==this.disabled&&!this.readonly&&32===e.keyCode){if("keydown"===e.type)return void e.preventDefault();if("none"===this.switchMode)return;this._changeCheckState("keyboard"),this._updateHidenInputNameAndValue()}}},{key:"_changeCheckState",value:function(e){var t=null;null===this.checked?this.checked=!0:(t=this.checked,this.checked=!this.checked),this._handleTextSelection(),this.$.fireEvent("change",{value:this.checked,oldValue:t,changeType:e}),this._setAriaState()}},{key:"_handleTextSelection",value:function(){var e=this;e.$.addClass("smart-unselectable"),e.timer&&clearTimeout(e.timer),e.timer=setTimeout((function(){return e.$.removeClass("smart-unselectable")}),500)}},{key:"propertyChangedHandler",value:function(e,i,r){l(h(t.prototype),"propertyChangedHandler",this).call(this,e,i,r);if("checked"===e)return this.$.fireEvent("change",{value:r,oldValue:i,changeType:"api"}),void this._setAriaState();switch(e){case"trueTemplate":this._handleTemplate(!0);break;case"falseTemplate":this._handleTemplate(!1);break;case"indeterminateTemplate":this._handleTemplate()}}},{key:"_htmlBindOnInitialization",value:function(){this._bindContentProperty("trueContent","smart-true-content"),this._bindContentProperty("falseContent","smart-false-content"),this._bindContentProperty("indeterminateContent","smart-indeterminate-content")}},{key:"_bindContentProperty",value:function(e,t){if(this.$[e+"Container"]){var i=document.createElement("div");i.innerHTML=this.innerHTML;var r,a=i.getElementsByClassName(t);if(a.length>0)for(var n=0;n<a.length;n++)r=a[n];""===this[e]&&(this[e]=void 0===r?"":r.outerHTML),this.$[e+"Container"].innerHTML=this[e]}}},{key:"_updateContentProperties",value:function(){var e=this;function t(t){e.$[t+"Container"]&&(e[t]=e.$[t+"Container"].innerHTML)}t("trueContent"),t("falseContent"),t("indeterminateContent")}},{key:"_updateHidenInputValue",value:function(){var e;this.$.hiddenInput&&(e=null===this.checked?"null":!1===this.checked?"off":this.value||"on",this.$.hiddenInput.setAttribute("value",e))}},{key:"_updateHidenInputName",value:function(){if(this.$.hiddenInput){var e=!1===this.checked?"":this.name||"";this.$.hiddenInput.setAttribute("name",e)}}},{key:"_updateHidenInputNameAndValue",value:function(){this._updateHidenInputName(),this._updateHidenInputValue()}},{key:"_handleTemplate",value:function(e,t){var i,r,a;if(!0===e?(i=this.trueTemplate,r=this.$.trueContentContainer,a=this.trueContent):!1===e?(i=this.falseTemplate,r=this.$.falseContentContainer,a=this.falseContent):(i=this.indeterminateTemplate,r=this.$.indeterminateContentContainer,a=this.indeterminateContent),t&&(r.innerHTML=a||""),null!==i&&i)if("function"!=typeof i)if("content"in document.createElement("template"))if(null!==(i=document.getElementById(i))&&"content"in i){for(var n,s=i.content,o=s.childNodes.length,l=/{{\w+}}/g,h=[],u=0;u<o;u++)for(n=l.exec(s.childNodes[u].innerHTML);n;)h.push({childNodeIndex:u,bindingString:n[0]}),n=l.exec(s.childNodes[u].innerHTML);for(var d,c,f=h.length,p=document.importNode(i.content,!0),m=0;m<f;m++){d=p.childNodes[h[m].childNodeIndex],c=h.length;for(var v=0;v<c;v++)d.innerHTML=d.innerHTML.replace(h[m].bindingString,a)}r.innerHTML="";for(var y=0;y<p.childNodes.length;y++)p.childNodes[y].outerHTML&&(r.innerHTML+=p.childNodes[y].outerHTML)}else this.error(this.localize("invalidTemplate",{elementType:this.nodeName.toLowerCase(),property:"template"}));else this.error(this.localize("htmlTemplateNotSuported",{elementType:this.nodeName.toLowerCase()}));else i(r,{value:a})}}],[{key:"properties",get:function(){return{checked:{value:!1,type:"boolean?"},falseContent:{value:"",reflectToAttribute:!1,type:"string"},indeterminateContent:{value:"",reflectToAttribute:!1,type:"string"},indeterminate:{value:!1,type:"boolean"},trueContent:{value:"",reflectToAttribute:!1,type:"string"},indeterminateTemplate:{value:null,type:"any"},trueTemplate:{value:null,type:"any"},falseTemplate:{value:null,type:"any"},type:{value:"toggle",type:"string",defaultReflectToAttribute:!0,readonly:!0}}}},{key:"listeners",get:function(){return{keydown:"_keyHandler",keyup:"_keyHandler",dragstart:"_dragStartHandler","button.click":"_buttonClickHandler","button.mouseenter":"_buttonMouseEnterHandler","button.mouseleave":"_buttonMouseLeaveHandler","document.up":"_documentUpHandler"}}}]),t}())},2:function(e,t,i){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function n(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(e,t,i){return(s="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,i){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=o(e)););return e}(e,t);if(r){var a=Object.getOwnPropertyDescriptor(r,t);return a.get?a.get.call(i):a.value}})(e,t,i||e)}function o(e){return(o=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}Smart("smart-scroll-bar",function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n(this,o(t).apply(this,arguments))}var i,r,h;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(t,Smart.BaseElement),i=t,h=[{key:"properties",get:function(){return{clickRepeatDelay:{type:"integer",value:50},largeStep:{type:"integer",value:100},min:{type:"integer",value:0},max:{type:"integer",value:1e3},mechanicalAction:{value:"switchWhileDragging",allowedValues:["switchUntilReleased","switchWhenReleased","switchWhileDragging"],type:"string"},orientation:{type:"string",value:"horizontal",allowedValues:["horizontal","vertical"]},step:{type:"integer",value:10},showButtons:{type:"boolean",value:!0,defaultReflectToAttribute:!0},value:{type:"integer",value:0}}}},{key:"styleUrls",get:function(){return["smart.scrollbar.css"]}},{key:"listeners",get:function(){return{"nearButton.click":"_nearButtonClickHandler","nearButton.mousedown":"_startRepeat","nearButton.mouseup":"_stopRepeat","nearButton.mouseenter":"_updateInBoundsFlag","nearButton.mouseleave":"_updateInBoundsFlag","farButton.click":"_farButtonClickHandler","farButton.mousedown":"_startRepeat","farButton.mouseup":"_stopRepeat","farButton.mouseenter":"_updateInBoundsFlag","farButton.mouseleave":"_updateInBoundsFlag","track.down":"_trackDownHandler","track.click":"_trackClickHandler","track.move":"_trackMoveHandler","thumb.down":"_dragStartHandler","document.move":"_dragHandler","document.up":"_dragEndHandler",up:"_dragEndHandler","document.selectstart":"_selectStartHandler",resize:"_resizeHandler"}}}],(r=[{key:"template",value:function(){return'<div id="container" class="smart-container" role="presentation">\n                    <div id="nearButton" class="smart-scroll-button smart-arrow-left" role="presentation" aria-hidden="true"></div>\n                    <div  id="track" class="smart-track" role="presentation">\n                        <div id="thumb" class="smart-thumb" role="presentation"></div>\n                    </div>\n                    <div id="farButton" class="smart-scroll-button smart-arrow-right" role="presentation" aria-hidden="true"></div>\n            </div>'}},{key:"_updateInBoundsFlag",value:function(e){var t=e.target;t._isPointerInBounds=!0,"mouseleave"===e.type&&(t._isPointerInBounds=!1),1!==("buttons"in e?e.buttons:e.which)&&this._stopRepeat(e)}},{key:"_startRepeat",value:function(e){var t=this;if(!t.disabled){var i=e.target;i._initialTimer||(i._initialTimer=setTimeout((function(){i._repeatTimer=setInterval((function(){if(i._isPointerInBounds){var t="buttons"in e?e.buttons:e.which;i.$.fireEvent("click",{buttons:t,clientX:e.clientX,clientY:e.clientY,pageX:e.pageX,pageY:e.pageY,screenX:e.screenX,screenY:e.screenY})}}),t.clickRepeatDelay)}),3*t.clickRepeatDelay))}}},{key:"_stopRepeat",value:function(e){if(!this.disabled){var t=e.target;t._repeatTimer&&(clearInterval(t._repeatTimer),t._repeatTimer=null),t._initialTimer&&(clearTimeout(t._initialTimer),t._initialTimer=null)}}},{key:"_calculateThumbSize",value:function(e){var t=this.max-this.min,i="horizontal"===this.orientation?this.$.track.offsetWidth>10:this.$.track.offsetHeight>10,r=0;return t>=1&&i?(r=e/(t+e)*e,this.$.thumb.className.indexOf("smart-hidden")>=0&&this.$thumb.removeClass("smart-hidden")):this.$thumb.addClass("smart-hidden"),Math.max(10,Math.min(r,e))}},{key:"_dragStartHandler",value:function(e){this.disabled||(this.thumbCapture=!0,this.dragStartX=e.clientX,this.dragStartY=e.clientY,this.dragStartValue=this.value,e.stopPropagation(),e.preventDefault())}},{key:"_dragHandler",value:function(e){if(!0===this.thumbCapture){this._isThumbDragged=!0;var t=(this.max-this.min)/(this.scrollBarSize-this.thumbSize),i="horizontal"===this.orientation?(e.clientX-this.dragStartX)*t:(e.clientY-this.dragStartY)*t,r=i;this.rightToLeft&&"horizontal"===this.orientation&&(r=-i),this._updateValue(this.dragStartValue+r),e.stopPropagation(),e.preventDefault(),e.originalEvent&&(e.originalEvent.stopPropagation(),e.originalEvent.preventDefault())}}},{key:"_dragEndHandler",value:function(e){this._trackDownTimer&&(clearInterval(this._trackDownTimer),this._trackDownTimer=null),this.thumbCapture&&(this.thumbCapture=!1,this._isThumbDragged=!1,"switchWhenReleased"===this.mechanicalAction?this._updateValue(this.dragStartValue,this.value):"switchUntilReleased"===this.mechanicalAction&&this._updateValue(this.dragStartValue),e.preventDefault(),e.stopPropagation(),e.originalEvent.preventDefault(),e.originalEvent.stopPropagation())}},{key:"_farButtonClickHandler",value:function(){if(!this.disabled){var e=this.value;this._updateValue(this.value+("horizontal"===this.orientation&&this.rightToLeft?-1:1)*this.step),"switchUntilReleased"===this.mechanicalAction&&this._updateValue(e)}}},{key:"_nearButtonClickHandler",value:function(){if(!this.disabled){var e=this.value;this._updateValue(this.value-("horizontal"===this.orientation&&this.rightToLeft?-1:1)*this.step),"switchUntilReleased"===this.mechanicalAction&&this._updateValue(e)}}},{key:"propertyChangedHandler",value:function(e,i,r){switch(s(o(t.prototype),"propertyChangedHandler",this).call(this,e,i,r),e){case"min":case"max":case"orientation":case"showButtons":this._layout(),"min"===e?this.setAttribute("aria-valuemin",r):"max"===e?this.setAttribute("aria-valuemax",r):"orientation"===e&&this.setAttribute("aria-orientation",r);break;case"value":this._updateValue(i,r);break;default:this._layout()}}},{key:"render",value:function(){this.setAttribute("role","scrollbar"),this.setAttribute("aria-orientation",this.orientation),this.setAttribute("aria-valuemin",this.min),this.setAttribute("aria-valuemax",this.max),this.setAttribute("aria-valuenow",this.value),this._layout(),s(o(t.prototype),"render",this).call(this)}},{key:"_resizeHandler",value:function(){this._layout()}},{key:"refresh",value:function(){this._layout()}},{key:"_layout",value:function(){this.scrollBarSize="horizontal"===this.orientation?this.$.track.offsetWidth:this.$.track.offsetHeight,this.thumbSize=this._calculateThumbSize(this.scrollBarSize),"horizontal"===this.orientation&&this.$.thumb.style.width!==this.thumbSize+"px"?this.$.thumb.style.width=this.thumbSize+"px":"vertical"===this.orientation&&this.$.thumb.style.height!==this.thumbSize+"px"&&(this.$.thumb.style.height=this.thumbSize+"px"),"horizontal"===this.orientation?(this.$.nearButton.classList.contains("smart-arrow-up")&&this.$.nearButton.classList.remove("smart-arrow-up"),this.$.farButton.classList.contains("smart-arrow-down")&&this.$.farButton.classList.remove("smart-arrow-down"),this.$.nearButton.classList.contains("smart-arrow-left")||this.$.nearButton.classList.add("smart-arrow-left"),this.$.farButton.classList.contains("smart-arrow-right")||this.$.farButton.classList.add("smart-arrow-right")):(this.$.nearButton.classList.contains("smart-arrow-left")&&this.$.nearButton.classList.remove("smart-arrow-left"),this.$.farButton.classList.contains("smart-arrow-right")&&this.$.farButton.classList.remove("smart-arrow-right"),this.$.nearButton.classList.contains("smart-arrow-up")||this.$.nearButton.classList.add("smart-arrow-up"),this.$.farButton.classList.contains("smart-arrow-down")||this.$.farButton.classList.add("smart-arrow-down")),this._updateThumbPosition(),(this.value>this.max||this.value<this.min)&&this._updateValue(this.value,this.value>this.max?this.max:this.min)}},{key:"_selectStartHandler",value:function(e){this.thumbCapture&&e.preventDefault()}},{key:"_trackDownHandler",value:function(e){var t=this;e.target===t.$.track&&(t._trackDownTimer&&clearInterval(t._trackDownTimer),t.thumbCapture||(t._trackDownTimer=setInterval((function(){t._trackClickHandler(e)}),t.clickRepeatDelay),e.stopPropagation(),e.preventDefault()))}},{key:"_trackClickHandler",value:function(e){if(!this.disabled){if(this._isThumbDragged)return clearInterval(this._trackDownTimer),void(this._trackDownTimer=null);var t=this.$.thumb.getBoundingClientRect(),i=e.pageX-window.pageXOffset,r=e.pageY-window.pageYOffset,a=(this.rightToLeft?-1:1)*this.value;"horizontal"===this.orientation?i>(this._isThumbDragged?this.dragStartX:t.right)?this._updateValue(this.value+(this.rightToLeft?-1:1)*this.largeStep):i<(this._isThumbDragged?this.dragStartX:t.left)&&this._updateValue(this.value-(this.rightToLeft?-1:1)*this.largeStep):r>(this._isThumbDragged?this.dragStartY:t.bottom)?this._updateValue(this.value+this.largeStep):r<(this._isThumbDragged?this.dragStartY:t.top)&&this._updateValue(this.value-this.largeStep),"switchUntilReleased"===this.mechanicalAction&&this._updateValue(a)}}},{key:"_trackMoveHandler",value:function(e){"touchmove"===e.originalEvent.type&&e.originalEvent.preventDefault()}},{key:"_updateValue",value:function(e,t){var i=this;if(1===arguments.length&&(t=e,e=i.value),(void 0===t||isNaN(t))&&(t=i.min),t>i.max&&(t=i.max),t<i.min&&(t=i.min),i.value=t,e!==t){if(i.setAttribute("aria-valuenow",t),i._updateThumbPosition(),i.thumbCapture&&"switchWhenReleased"===i.mechanicalAction)return;if(i.onChange)return void i.onChange({value:i.value,oldValue:e,min:i.min,max:i.max});i.$.fireEvent("change",{value:i.value,oldValue:e,min:i.min,max:i.max})}}},{key:"_updateThumbPosition",value:function(){var e=this.$.track.offsetHeight,t=this.$.track.offsetWidth,i="horizontal"===this.orientation?t:e,r=this._calculateThumbSize(i),a="horizontal"===this.orientation?t-r:e-r,n=(i-r)/(this.max-this.min)*(this.value-this.min);this.rightToLeft&&"horizontal"===this.orientation&&(n=(i-r)/(this.max-this.min)*(this.max-this.value-this.min)),n=Math.min(a,Math.max(0,n)),"vertical"===this.orientation&&this.$.thumb.style.top!==n+"px"?this.$.thumb.style.top=n+"px":"horizontal"===this.orientation&&this.$.thumb.style.left!==n+"px"&&(this.$.thumb.style.left=n+"px")}}])&&a(i.prototype,r),h&&a(i,h),t}())},21:function(e,t,i){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t,i){return t&&n(e.prototype,t),i&&n(e,i),e}var o=function(){function e(t){a(this,e),t||(t={});var i=Object.assign(this,t);i.key=(65536*(1+Math.random())|0).toString(16).substring(1),i.$document=Smart.Utilities.Extend(document),i.boundSource=!1===i.observable?[]:new Smart.ObservableArray,i.dataItemById=[],void 0===i.allowAdd&&(i.allowAdd=!0),void 0===i.allowRemove&&(i.allowRemove=!0),void 0===i.allowUpdate&&(i.allowUpdate=!0),void 0===t.observable&&(i.observable=!0),t.dataSource||(i.dataSource=[]),t.dataFields||(i.dataFields=[]),t.dataSourceType||(i.dataSourceType="array"),t.id||(i.id=null),t.autoFetch||(i.autoFetch=!0),t.dataFields&&(i.dataFields=t.dataFields),t&&!1!==t.autoBind&&i.dataBind(),i.isInitialized=!0}return s(e,[{key:"_getDataFieldObjects",value:function(e){var t=[];if("number"==typeof e)for(var i="A".charCodeAt(0),r="",a=0,n=0;n<e;n++){var s=String.fromCharCode(i+a);a++;var o=r+s;t.push({name:o,dataType:"string"}),a>=26&&(a=0,r+="A")}else if(e.length>0)for(var l=0;l<e.length;l++){var h=e[l];if("string"==typeof h){var u=h.split(":"),d=u[0].trim(),c=u.length>1?u[1].trim():"string";t.push({name:d,dataType:c})}else t.push(h)}return t}},{key:"_notify",value:function(e){this.canNotify&&this.notifyFn&&this.notifyFn(e)}},{key:"notify",value:function(e){e&&(this.notifyFn=e)}},{key:"toArray",value:function(){return this.boundSource.toArray()}},{key:"dataBind",value:function(){var e=this;e.clear();var t=function(){e.observable&&e.boundSource.notify((function(t){if("update"===t.action&&t.path&&t.path.indexOf(".")>=0&&-1===t.path.indexOf("children")&&-1===t.path.indexOf("loaded")&&-1===t.path.indexOf("level")&&-1===t.path.indexOf("leaf")&&-1===t.path.indexOf("expanded")){for(var i=!1,r=0;r<e.dataFields.length;r++){var a=e.dataFields[r].name;t.path.indexOf(a)>=0&&(i=!0)}e._notify&&i&&e._notify({action:"update",data:t.target,index:t.index})}})),e.groupBy?e.groupBy.toArray&&(e.groupBy=e.groupBy.toArray()):e.groupBy=[],e.groupBy=new Smart.ObservableArray(e.groupBy),e.groupBy.notify((function(){e.boundHierarchy=null,e.refreshHierarchy(),e.onGroup&&e.onGroup()})),e._onBindingComplete()};"string"==typeof e.dataSource&&e.dataSource.indexOf(".json")>=0?(e.url=e.dataSource,e.dataSourceType="json",new l(e,(function(t,i){e.dataSource=t,e._bindToJSON()}))):"string"==typeof e.dataSource&&e.dataSource.indexOf(".xlsx")>=0?(e.url=e.dataSource,e.dataSourceType="xlsx",new l(e,(function(i,r){if(!i[0])return i=[],e._bindToArray(),void t();var a=Object.keys(i[0]),n={},s=[];if(!1!==e.exportHeader){var o=0;for(var l in a){n[a[l]]=e.dataFields[o++].name}for(var h=1;h<i.length;h++){var u=i[h],d={};for(var c in a){var f=a[c];d[n[f]]=u[f]}s.push(d)}e.dataSource=s}e._bindToArray(),t()}))):"string"==typeof e.dataSource&&e.dataSource.indexOf(".csv")>=0?(e.dataSourceType="csv",new l(e,(function(t,i){e._bindToArray()}))):"string"==typeof e.dataSource&&e.dataSource.indexOf(".tsv")>=0?(e.dataSourceType="tsv",new l(e,(function(e,t){}))):"array"===e.dataSourceType?(e._bindToArray(),t()):"json"===e.dataSourceType&&(e._bindToJSON(),t())}},{key:"_onBindingComplete",value:function(){this._buildHierarchy(),this.onBindingComplete&&this.onBindingComplete({data:this.boundSource}),this._notify&&this._notify({action:"bindingComplete",data:this.boundSource}),this.bindingCompleted=!0}},{key:"refreshHierarchy",value:function(){this._buildHierarchy()}},{key:"find",value:function(){var e=this;return e.boundSource.find.apply(e.boundSource,arguments)}},{key:"onVirtualDataSourceRequested",value:function(e,t){var i=this,r=t?t.first:1/0,a=t?t.last:1/0,n=t?t.row:null;if(void 0===r&&(r=1/0),void 0===a&&(a=1/0),i.virtualFirstIndex=r,i.virtualLastIndex=a,i.virtualDataSource){var s=function(s){void 0!==s.virtualDataSourceLength&&(i.virtualDataSourceLength=s.virtualDataSourceLength),new Smart.DataAdapter({dataSource:s.dataSource,dataFields:s.dataFields||i.dataFields,data:t,onBindingComplete:function(t){if(i.virtualDataSourceOnExpand&&n)return t.data&&t.data.length>0?i.add(t.data,n.$.id):n.leaf=!0,i.onFilter&&i.onFilter(),void e();if(r===1/0)i.add(t.data);else{for(var s=[],o=[],l=0;l<t.data.length;l++){var h=t.data[l];r+l<=a&&(s.push(h),o.push(r+l))}i.update(o,s)}i.onFilter&&i.onFilter(),e()}})},o=!1,l=function(e){return 0===Object.entries(e).length&&(e.constructor===Object||e.constructor===Array)},h=l(t.sorting)&&l(t.filtering)&&l(t.grouping)&&!t.row&&"filter"!==t.action&&"sort"!==t.action&&"group"!==t.action;if(i.virtualDataSourceCache&&r!==1/0&&h){for(var u=0,d=r;d<a;d++)i[d].isEmpty||u++;u===a-r&&(o=!0)}o?e():"expand"===t.action?i.virtualDataSourceOnExpand(s,{first:r,last:a,row:t.row,sorting:t.sorting,filtering:t.filtering,grouping:t.grouping,action:t.action}):i.virtualDataSource(s,{first:r,last:a,sorting:t.sorting,filtering:t.filtering,grouping:t.grouping,action:t.action})}else e()}},{key:"add",value:function(e,t){var i=this;if(e){var r=!0,a=function(e){var a=i._getDataItem(e,i.boundSource.length);i[i.boundSource.length]=a,i.dataItemById[a.$.id]=a;var n=i.boundSource.push(a);return void 0!==t&&(a.$.parentId=t),n||(r=!1),a};if(e.length){for(var n=[],s=0;s<e.length;s++){var o=a(e[s]);n.push(o)}i._notify({action:"add",data:n})}else{var l=a(e);i._notify({action:"add",data:l})}return i.refreshHierarchy(),r}}},{key:"refreshIndexes",value:function(){for(var e=0;e<this.boundSource.length;e++)this[e]=this.boundSource[e],this[e].$.index=e,this.dataItemById[this[e].$.id]=this[e]}},{key:"removeLast",value:function(){delete this[this.boundSource.length-1];var e=this.boundSource.pop();return this._notify({action:"removeLast",data:e}),this.refreshHierarchy(),e}},{key:"remove",value:function(e){var t=this.boundSource[e];if(!t)throw new Error("Invalid Item Index");this.boundSource.splice(e,1),this.refreshIndexes(),this._notify({action:"remove",index:e,data:t}),this.refreshHierarchy()}},{key:"update",value:function(e,t){if(!Smart.Utilities.Types.isArray(e)||!Smart.Utilities.Types.isArray(t)||0!==e.length||0!==t.length){if(t.length&&e.length){for(var i=[],r=0;r<e.length;r++){var a=this._getDataItem(t[r],e[r]),n=e[r];i.push(a),this.boundSource[n]=a,this[n]=this.boundSource[n],this.dataItemById[a.$.id]=this[n]}return this._notify({action:"update",index:e,data:i}),void this.refreshHierarchy()}var s=this._getDataItem(t,e);return this.boundSource[e]=s,this[e]=this.boundSource[e],this.dataItemById[s.$.id]=this[e],this._notify({action:"update",index:e,data:s}),this.refreshHierarchy(),s}this.refreshHierarchy()}},{key:"insert",value:function(e,t){t=this._getDataItem(t,e);var i=this.boundSource.splice(e,0,t);return this.refreshIndexes(),this._notify({action:"insert",index:e,data:t}),this.refreshHierarchy(),i}},{key:"move",value:function(e,t){if(!(t>e&&t-e==1||e===t)){var i=this.boundSource.splice(e,1)[0];t>e?(t--,this.boundSource.splice(t,0,i)):this.boundSource.splice(t,0,i),this.refreshIndexes(),this._notify({action:"move",index:t,data:this.boundSource[t]}),this.refreshHierarchy()}}},{key:"indexOf",value:function(e){return this.boundSource.indexOf(e)}},{key:"clear",value:function(){if(!this.isInitialized)return this._cachedValues=[],void(this.dataItemById=[]);for(var e=0;e<this.boundSource.length;e++)delete this[e];this._cachedValues=[],this.boundSource=this.observable?new Smart.ObservableArray:[],this.dataItemById=[],this.refreshHierarchy()}},{key:"_getId",value:function(e,t,i){if(null===e||void 0===e.name||!e.name||!t.getAttribute){if(e&&e.toString().length>0&&t.getAttribute){var r=t.getAttribute(e);if(null!==r&&r.toString().length>0)return r.trim().split(" ").join("").replace(/([ #;?%&,.+*~\':'!^$[\]()=>|\/@])/g,"");var a=e.split(this.mapChar);if(a.length>1){for(var n=t,s=0;s<a.length;s++)void 0!==n&&(n=n[a[s]]);if(void 0!==n)return n}else if(void 0!==t[e])return t[e]}return i}var o=t.getAttribute(e.name);if(null!==o&&o.toString().length>0)return o;if(e.map)try{var l=t.getAttribute(e.map);if(null!==l&&l.toString().length>0)return l}catch(e){return i}}},{key:"_buildHierarchy",value:function(){var e=this;if(e.reservedNames){var t=e.reservedNames;t.leaf||(t.leaf="leaf"),t.parent||(t.parent="parent"),t.expanded||(t.expanded="expanded"),t.checked||(t.checked="checked"),t.selected||(t.selected="selected"),t.level||(t.level="level"),t.data||(t.data="data")}else e.reservedNames={leaf:"leaf",parent:"parent",expanded:"expanded",checked:"checked",selected:"selected",level:"level",icon:"icon",data:"data"};var i=e.reservedNames;if(e.childrenDataField){for(var r=[],a=function(t){var a=Object.assign({},e.boundSource[t]);if(!a)return"continue";r.push(a);var n=function(t){var r=e.childrenDataField.split(e.mapChar),a=null;if(r.length>1){for(var n=t,s=0;s<r.length;s++)void 0!==n&&(n=n[r[s]]);a=n}else a=t.children;t.children=a,(null===t.children||void 0===t.children||t.children&&0===t.children.length)&&(t[i.leaf]=!0)};n(a),a[i.level]=0,a.$||(a.$={}),a[i.parent]=null,a[i.data]=a,void 0===a[i.expanded]&&(a[i.expanded]=!1);!function t(r,a){if(a)for(var s=0;s<a.length;s++){var o=e._getDataItem(a[s],s);o&&(n(o),o[i.level]=r[i.level]+1,o[i.parent]=r,o[i.data]=o,r&&(r.children[s]=o),void 0===o[i.expanded]&&(o[i.expanded]=!1),t(o,o.children))}else r.children=new Array}(a,a.children)},n=0;n<e.boundSource.length;n++)a(n);if(e.boundHierarchy=r,!e._boundSourceUpdate){for(var s=0;s<e.boundHierarchy.length;s++){var o=e.boundHierarchy[s];o.children&&function t(i){if(e.dataItemById[i.$.id]||(e.boundSource.canNotify=!1,e.dataItemById[i.$.id]=i,e[e.boundSource.length]=i,e.boundSource.push(i),e.boundSource.canNotify=!0),i.children)for(var r=0;r<i.children.length;r++){var a=i.children[r];a.children&&t(a)}}(o)}e._boundSourceUpdate=!0}}e.xmlRoot&&"xml"===e.dataSourceType&&(e.boundHierarchy=this._getHierarchy("uid","_parentuid","children",null,e.boundSource)),e.keyDataField&&e.parentDataField&&(e.boundHierarchy=this._getHierarchy(e.keyDataField,e.parentDataField,"children",null,e.boundSource)),e.groupBy&&e.groupBy.length>0&&(e.boundHierarchy=this._getGroupHierarchy(e.groupBy,"children","label",null,"data",null,"parent",e.boundSource)),e.virtualDataSourceOnExpand&&(e.boundHierarchy=this._getHierarchy("id","parentId","children",null,e.boundSource))}},{key:"_getGroupHierarchy",value:function(e,t,i,r,a,n,s,o,l){l||(l=0);for(var h=this.reservedNames,u=function(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()},d=new Array,c=0;c<e.length;c++)d[c]=u();t||(t="children"),i||(i="group"),a||(a="item"),s||(s="parent"),void 0===n&&(n="value");for(var f=new Array,p=new Array,m=0,v=function(e){var t=e;if(r)for(var i in r){var a=r[i];a.name&&a.map&&(t[a.map]=t[a.name])}return t},y=0;y<o.length;y++){var g=Object.assign({},v(o[y]));g[h.leaf]=!1;for(var _=new Array,b=0,x=0;x<e.length;x++){var w=e[x],S=g[w];null!==S&&(_[b++]={value:S,group:w,hash:d[x]})}if(_.length!==e.length)break;for(var k=null,C="",N=0;N<_.length;N++){var A=_[N].value,M=_[N].group;if(void 0===p[C=C+"_"+_[N].hash+"_"+A]||null===p[C]){if(null===k){(k={$:{}})[h.level]=0,k[h.leaf]=!1,k[s]=null,k[i]=A,k[a]=g,k.groupDataField=M,void 0!==g[h.expanded]?k[h.expanded]=g[h.expanded]:k[h.expanded]=!1,n&&(k[n]=g[n]),k[t]=new Array;var T=f.length+l;this.id&&"number"!=typeof g.$.id&&!isFinite(g.$.id)||(T="Item"+T),void 0===k.$.id&&(k.$.id=T),f[m++]=k}else{var D={$:{}};D[h.level]=k[h.level]+1,D[s]=k,D[i]=A,D[t]=new Array,D[a]=g,D.groupDataField=M,D[h.leaf]=!1,void 0!==g[h.expanded]?D[h.expanded]=g[h.expanded]:D[h.expanded]=!1,n&&(D[n]=g[n]),void 0===D.$.id&&(D.$.id=k.$.id+"_"+k[t].length),k[t][k[t].length]=D,k=D}p[C]=k}else k=p[C]}g&&(g[h.leaf]=!0),null!==k?(null===this.id?void 0===g.$.id&&(g.$.id=k.$.id+"_"+k[t].length):void 0===g.$.id&&-1===g.$.id.toString().indexOf(k.$.id)&&(g.$.id=k.$.id+"_"+g.$.id),g[s]=k,g[h.level]=k[h.level]+1,k[t][k[t].length]=g):void 0===g.$.id&&(g.$.id=u())}return f}},{key:"_getHierarchy",value:function(e,t,i,r,a){var n=this,s=new Array,o=this.boundSource;if(a&&(o=a),0===this.boundSource.length)return null;for(var l=null!==i?i:"children",h=new Array,u=o,d=u.length,c=n.reservedNames,f=function(e){var t=e;if(r)for(var i in r){var a=r[i];a.name&&a.map&&(t[a.map]=t[a.name])}return t},p=0;p<d;p++){var m=u[p],v=m[t],y=m[e];"parentId"===t&&(v=m.$.parentId),"id"===e&&(y=m.$.id),m[l]=new Array,h[y]={parentId:v,item:m}}for(var g=0;g<d;g++){var _=u[g],b=_[t],x=_[e];if("parentId"===t&&(b=_.$.parentId),"id"===e&&(x=_.$.id),void 0!==h[b]){var w={parentId:b,item:h[x].item},S=h[b].item;S[l]||(S[l]=new Array);var k=S[l].length;w=w.item,c?void 0===w[c.parent]&&(w[c.parent]=S):void 0===w.parent&&(w.parent=S);var C=f(w);S[l][k]=C,h[b].item=S,h[x].item=w}else{var N=h[x].item;c?void 0===N[c.parent]&&(N[c.parent]=null):void 0===N.parent&&(N.parent=null);var A=f(N);c?A[c.level]=0:A.level=0,s[s.length]=A}}if(0!==s.length){!function e(t,i){for(var r=0;r<i.length;r++){var a=i[r];c?a[c.level]=t:a.level=t;var s=a[l];s&&s.length>0?e(t+1,s):n.virtualDataSourceOnExpand?void 0===a.leaf&&(a.leaf=!1):c?a[c.leaf]=!0:a.leaf=!0}}(0,s)}return s}},{key:"summarize",value:function(e,t){Array.isArray(e)||(e=[e]);for(var i=[],a=0;a<e.length;a++){var n=e[a];for(var s in n){var o=n[s];i.push({dataField:s,functions:o})}}e=i;var l={},h=new Array;t||(t=this.boundSource);var u=t.length;if(0!==u&&void 0!==u){for(var d=function(i){for(var a=t[i],n=function(t){var n=e[t],s=a[n.dataField];if(n.functions){l[n.dataField]=l[n.dataField]||{},h[n.dataField]=h[n.dataField]||0,h[n.dataField]++;var o=function(e){for(var t in e){var i=l[n.dataField][t];null==i&&(l[n.dataField][t]=0,i=0),"function"==typeof e[t]&&(i=e[t](i,s,n.dataField,a)),l[n.dataField][t]=i}},u=parseFloat(s);(u=!isNaN(u))&&(s=parseFloat(s)),"number"==typeof s&&isFinite(s)?n.functions.forEach((function(e){var t=l[n.dataField][e];if(null==t&&(t=0,"min"===this&&(t=9999999999999),"max"===this&&(t=-9999999999999)),"sum"===e||"avg"===e||"stdev"===e||"stdevp"===e||"var"===e||"varp"===e)t+=parseFloat(s);else if("product"===e)0===i?t=parseFloat(s):t*=parseFloat(s);else if("min"===e)t=Math.min(t,parseFloat(s));else if("max"===e)t=Math.max(t,parseFloat(s));else if("count"===e)t++;else if("object"===r(e))return void o(e);l[n.dataField][e]=t})):n.functions.forEach((function(e){if("min"===e||"max"===e||"count"===e||"product"===e||"sum"===e||"avg"===e||"stdev"===e||"stdevp"===e||"var"===e||"varp"===e){if(null===s)return!0;var t=l[n.dataField][e];return null==t&&(t=0),l[n.dataField][e]=t,!0}"object"===r(e)&&o(e)}))}},s=0;s<e.length;s++)n(s)},c=0;c<u;c++)d(c);for(var f=function(i){var r=e[i];if(!r.functions)return"continue";if(l[r.dataField]||(l[r.dataField]={},r.functions.forEach((function(e){l[r.dataField][e]=0}))),void 0!==l[r.dataField].avg){var a=l[r.dataField].avg,n=h[r.dataField];l[r.dataField].avg=0===n||void 0===n?0:a/n}else void 0!==l[r.dataField].count&&(l[r.dataField].count=u);(l[r.dataField].stdev||l[r.dataField].stdevp||l[r.dataField].var||l[r.dataField].varp)&&r.functions.forEach((function(e){if("stdev"===e||"var"===e||"varp"===e||"stdevp"===e){for(var i=l[r.dataField][e],a=u,n=i/u,s=0,o=0;o<u;o++){var h=t[o][r.dataField];s+=(h-n)*(h-n)}var d="stdevp"===e||"varp"===e?a:a-1;0===d&&(d=1),"var"===e||"varp"===e?l[r.dataField][e]=s/d:"stdevp"!==e&&"stdev"!==e||(l[r.dataField][e]=Math.sqrt(s/d))}}))},p=0;p<e.length;p++)f(p);return l}}},{key:"_getDataItem",value:function(e,t){var i={},a="number"==typeof this.dataSource||this.dataSourceLength;if(!e)return{$:{id:t},isEmpty:!0,index:t};if("string"==typeof e&&(e={"":e}),a){for(var n=0;n<this.dataFields.length;n++){i[(this.dataFields?this.dataFields[n]:{}).name]=""}return i.$={},i.$.id=t,i.$.index=t,i}var s=e;if(void 0!==s.expanded&&(i.expanded=s.expanded,"true"===s.expanded||!0===s.expanded||1===s.expanded?i.expanded=!0:i.expanded=!1),this.childrenDataField?void 0!==s[this.childrenDataField]&&(i.children=s[this.childrenDataField]):void 0!==s.children?i.children=s.children:void 0!==s.items&&(i.children=s.items),void 0!==s.leaf&&(i.leaf=s.leaf),void 0!==s.level&&(i.level=s.level),this.keyDataField&&void 0!==s[this.keyDataField]&&(i[this.keyDataField]=s[this.keyDataField]),this.parentDataField&&void 0!==s[this.parentDataField]&&(i[this.parentDataField]=s[this.parentDataField]),0===this.dataFields.length)for(var o=Object.getOwnPropertyNames(e),l=0;l<o.length;l++)this.dataFields.push({name:o[l],dataType:"string"});for(var h=0;h<this.dataFields.length;h++){var u=this.dataFields?this.dataFields[h]:{},d="";if(null!=u){if(e.length&&(d=e[h]),u.map){var c=u.map.split(this.mapChar);if(c.length>0){for(var f=s,p=0;p<c.length;p++)s&&(f=f[c[p]]);d=f}else d=s[u.map]}null!=d?d=d.toString():void 0===d&&null!==d&&(d="");var m=!1;""===d&&(m=!0,null!=(d=e[u.name])?"array"!==u.dataType&&"date"!==u.dataType&&(d=d.toString()):d=""),"[object Object]"===d&&u.map&&m&&(d=""),this._cachedValues[d+"_"+u.dataType]?d=this._cachedValues[d+"_"+u.dataType]:("bool"===u.dataType||"boolean"===u.dataType?"true"===d||"1"===d?d=!0:"false"!==d&&"0"!==d||(d=!1):d=this.$document.deserialize(""+d,u.dataType,!0),this._cachedValues[d+"_"+u.dataType]=d),"string"!==u.dataType&&"boolean"!==u.dataType&&"bool"!==u.dataType&&(isNaN(d)||d===-1/0||d===1/0)&&(d=0),i[u.name]=d}}var v=t;return this.id?"object"===r(v=s[this.id])&&(v=t):this.dataItemById&&this.dataItemById[v]&&(v=this.length),i.$||(i.$={}),i.$.id=v,i.$.index=t,new Object(i)}},{key:"_bindToArray",value:function(){var e="number"==typeof this.dataSource||this.dataSourceLength,t=[];this.boundSource.canNotify=!1;for(var i=0;i<this.length;i++){var r=e?{}:this.dataSource[i],a=this._getDataItem(r,i);t.push(a)}if(e&&this.dataSourceLength&&this.dataSource.length>0)for(var n=0;n<this.dataSource.length;n++){var s=this.dataSource[n].cell,o=this.dataSource[n].value,l=s.replace(/[^0-9]/g,""),h=s.replace(/[0-9]/g,"");t[l-1][h]=o}this.boundSource=!1===this.observable?t:new Smart.ObservableArray(t);for(var u=0;u<this.length;u++)this[u]=this.boundSource[u],this.dataItemById[this[u].$.id]=this[u];this.boundSource.canNotify=!0}},{key:"_bindToJSON",value:function(){var e=[],t=Object.entries(this.dataSource);this.boundSource.canNotify=!1;for(var i=0;i<t.length;i++){var r=t[i],a=this._getDataItem(r,i);e.push(a)}this.boundSource=!1===this.observable?e:new Smart.ObservableArray(e);for(var n=0;n<this.length;n++)this[n]=this.boundSource[n],this.dataItemById[this[n].$.id]=this[n];this.boundSource.canNotify=!0}},{key:"sortBy",value:function(e,t,i){var r=this;if(!t)for(var a=0;a<r.dataFields.length;a++){var n=r.dataFields[a];if(n.name===e){t=n.dataType;break}}if(r.boundHierarchy){var s=function a(n){r._sort(n,e,i,t);for(var s=0;s<n.length;s++){var o=n[s];o.children&&a(o.children)}};s(r.boundHierarchy)}else r._sort(r.boundSource,e,i,t)}},{key:"_createFilter",value:function(e,t){for(var i={"=":"EQUAL","<>":"NOT_EQUAL","<":"LESS_THAN",">":"GREATER_THAN","<=":"LESS_THAN_OR_EQUAL",">=":"GREATER_THAN_OR_EQUAL",equal:"EQUAL","not equal":"NOT_EQUAL","less than":"LESS_THAN","greater than":"GREATER_THAN","greater than or equal":"GREATER_THAN_OR_EQUAL","less than or equal":"LESS_THAN_OR_EQUAL","starts with":"STARTS_WITH","ends with":"ENDS_WITH",null:"null","":"EMPTY",isblank:"EMPTY",isnotblank:"NOT_EMPTY",contains:"CONTAINS",notcontains:"DOES_NOT_CONTAIN",startswith:"STARTS_WITH",endswith:"ENDS_WITH",NULL:"NULL",NOT_NULL:"NOT_NULL"},r=[],a=0;a<t.length;a++){for(var n=t[a],s=-1===n.indexOf('"')?n.split(" "):n.split('"'),o=[],l=0;l<s.length;l++){var h=s[l];""!==h&&o.push(h.trim())}r.push(o)}for(var u=new Smart.FilterGroup,d=[],c=[],f=0;f<r.length;f++){var p=r[f];if(p.length>1){for(var m=new Smart.FilterGroup,v="and",y=0,g=0;g<p.length;g++){var _=p[g];if("and"!==_&&"or"!==_){if(2===++y){var b=m.createFilter(e,_,i[p[g-1]]);y=0,v&&m.addFilter(v,b)}}else v=_}c.push(m)}else{var x=p[0];if("and"!==x&&"or"!==x)throw new Error('Filter Exprresion expects "AND" or "OR", but the token is: '+x);d.push(x)}}var w=0;if(1===c.length)return c[0];for(var S=0;S<c.length;S++){var k=d[w];(S+1)%2==0&&w++,k||(k="and"),u.addFilter(k,c[S])}return u}},{key:"filterBy",value:function(e){for(var t=this,i=function(){for(var i=0;i<t.dataFields.length;i++){var r=t.dataFields[i];if(r.name===e)return r.dataType}}(),r=arguments.length,a=new Array(r>1?r-1:0),n=1;n<r;n++)a[n-1]=arguments[n];var s=t._createFilter(i,a),o=t.boundSource.filter((function(t){return s.evaluate(t[e])}));return o}},{key:"_filter",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"and",i=this,r=[],a=[];if(0!==e.length){var n,s,o=function(e){for(var t=0;t<i.dataFields.length;t++){var r=i.dataFields[t];if(r.name===e)return r.dataType}};"and"===t?(n=!0,s=function(e,t,i){return e&&t.evaluate(i[t.dataField])}):(n=!1,s=function(e,t,i){return e||t.evaluate(i[t.dataField])});for(var l=0;l<e.length;l++){var h=e[l],u=h[0],d=null;(d=h[1]instanceof Smart.FilterGroup?h[1]:i._createFilter(o(u),h.splice(1)))&&(a.push(u),d.dataField=u,r.push(d))}if(i.boundHierarchy){var c=function(e){for(var t=n,i=0;i<r.length;i++){var a=r[i];t=s(t,a,e)}return e.$.filtered=t,t},f=function e(t,r,a){for(var n=0,s=0;s<t.length;s++){var o=t[s];c(o),o.$.filtered&&n++,o.children&&e(o.children,o,r)}n>0&&i.groupBy.length>0&&r?(r.$.filtered=!0,a&&!a.$.filtered&&(a.$.filtered=!0)):n>0&&n!==t.length&&r&&(r.$.filtered=null,a&&!a.$.filtered&&(a.$.filtered=null))};f(i.boundHierarchy,null,null)}else for(var p=0;p<i.boundSource.length;p++){for(var m=i.boundSource[p],v=n,y=0;y<r.length;y++){var g=r[y];v=s(v,g,m)}m.$.filtered=v}i.onFilter&&i.onFilter()}else i.clearFilter()}},{key:"clearGroup",value:function(){this.groupBy=[],this.boundHierarchy=null,this.refreshHierarchy(),this.onGroup&&this.onGroup()}},{key:"clearFilter",value:function(){for(var e=0;e<this.boundSource.length;e++){this.boundSource[e].$.filtered=!0}if(this.boundHierarchy){!function e(t,i,r){for(var a=0;a<t.length;a++){var n=t[a];n.$.filtered=!0,n.$.filtered,n.children&&e(n.children,n,i)}i&&(i.$.filtered=!0,r&&!r.$.filtered&&(r.$.filtered=!0))}(this.boundHierarchy,null,null)}this.onFilter&&this.onFilter()}},{key:"clearSort",value:function(){this._sort(this.boundSource,[],[],[])}},{key:"_sort",value:function(e,t,i,a,n){var s=!1;if(0!==e.length){if(e&&e.constructor&&e instanceof Smart.ObservableArray&&(s=!0),(!e||!Array.isArray(e)||0===e.length||!t||Array.isArray(t)&&0===t.length)&&!s&&!this.boundHierarchy)throw new Error("sort: Missing or Invalid arguments!");"string"==typeof t&&(t=[t]);var o=[],l=[];void 0===i&&(i=[]);for(var h=function(e,t){var i;switch(t||r(e)){case"string":i=(new Intl.Collator).compare;break;case"number":i=function(e,t){return e-t};break;case"boolean":case"bool":i=function(e,t){return e===t?0:!1===e?-1:1};break;case"date":case"time":case"dateTime":e instanceof Date?i=function(e,t){return e.getTime()-t.getTime()}:(e instanceof Smart.Utilities.DateTime||e instanceof Smart.Utilities.BigNumber)&&(i=function(e,t){return e.compare(t)});break;case"object":if(e instanceof Date)i=function(e,t){return e.getTime()-t.getTime()};else if(e instanceof Smart.Utilities.DateTime||e instanceof Smart.Utilities.BigNumber)i=function(e,t){return e.compare(t)};else if(e instanceof Smart.Utilities.Complex||window.NIComplex&&e instanceof window.NIComplex){var a=new Smart.Utilities.ComplexNumericProcessor;i=function(e,t){return a.compareComplexNumbers(e,t)}}}return i},u=0;u<t.length;u++){void 0===i[u]||"asc"===i[u]||"ascending"===i[u]?o[u]=1:o[u]=-1;var d=e[0][t[u]];l[u]=h(d,a[u])}if(n)n(e,t,i,l);else{e.sort((function(e,i){for(var r=0;r<t.length;r++){var a=l[r](e[t[r]],i[t[r]]);if(0===a){if(t[r+1])continue;return void 0!==e._index?(e._index-i._index)*o[r]:0}return a*o[r]}if(0===t.length)return e.$.index<i.$.index?-1:e.$.index>i.$.index?1:0}));for(var c=0;c<e.length;c++)this[c]=e[c]}}}},{key:"filter",value:function(e,t,i){Smart.DataAdapter.Filter(this.boundSource,e,t,i)}},{key:"sort",value:function(e,t,i){Smart.DataAdapter.Sort(this.boundSource,e,t,i)}},{key:"dataFields",get:function(){return this._dataFields},set:function(e){return this._dataFields=this._getDataFieldObjects(e),this._dataFields}},{key:"dataSource",get:function(){return this._dataSource||(this._dataSource=[]),this._dataSource},set:function(e){this._dataSource=e,this.isInitialized&&(this.boundSource=!1===this.observable?[]:new Smart.ObservableArray,this.dataItemById=[],this.bindingCompleted=!1,this.dataBind())}},{key:"canNotify",get:function(){return void 0===this._canNotify&&(this._canNotify=!0),this._canNotify},set:function(e){this._canNotify=e}},{key:"length",get:function(){return void 0!==this.virtualDataSourceLength?this.virtualDataSourceLength:this.dataSourceLength?this.dataSourceLength:"number"==typeof this.dataSource?this.dataSource:this.bindingCompleted?this.boundSource.length:this.dataSource&&"string"!=typeof this.dataSource&&this.dataSource.length?this.dataSource.length:this.boundSource.length}}],[{key:"Filter",value:function(e,t,i,r){return e.filter((function(e){for(var a=!0,n=0;n<i.length;n++){var s=i[n],o=t[n];a=r?a&&r(e,o,s):a&&s.evaluate(e[o])}return a}))}},{key:"Sort",value:function(e,t,i,a){var n=function(e){var t;switch(r(e)){case"string":t=(new Intl.Collator).compare;break;case"number":t=function(e,t){return e-t};break;case"boolean":t=function(e,t){return e===t?0:!1===e?-1:1};break;case"object":if(e instanceof Date)t=function(e,t){return e.getTime()-t.getTime()};else if(e instanceof Smart.Utilities.DateTime||e instanceof BigNumberNG)t=function(e,t){return e.compare(t)};else if(e instanceof Smart.Utilities.Complex||window.NIComplex&&e instanceof window.NIComplex){var i=new Smart.Utilities.ComplexNumericProcessor;t=function(e,t){return i.compareComplexNumbers(e,t)}}}return t};if(e&&Array.isArray(e)&&0!==e.length&&t&&(!Array.isArray(t)||0!==t.length)){"string"==typeof t&&(t=[t]);var s=[],o=[];void 0===i&&(i=[]);for(var l=0;l<t.length;l++)void 0===i[l]||"asc"===i[l]||"ascending"===i[l]?s[l]=1:s[l]=-1,o[l]=n(e[0][t[l]]);if(!a){var h=e.slice(0);return h.sort((function(e,i){for(var r=0;r<t.length;r++){var a=o[r](e[t[r]],i[t[r]]);if(0===a){if(t[r+1])continue;return void 0!==e._index?(e._index-i._index)*s[r]:0}return a*s[r]}})),h}a(e,t,i,o)}}}]),e}();Smart.DataAdapter=o;var l=function(){function e(t,i){a(this,e);this.config=t,this.callback=i,!1!==t.autoFetch&&this.call(t)}return s(e,[{key:"call",value:function(e){e||(e=this.config);var t="GET",i=e.url,r=null,a=!0;if(e.type&&(t=e.type),e.data)if("GET"===t){for(var n in i+="?",e.data)e.data.hasOwnProperty(n)&&(i+=encodeURI(n+"="+e.data[n]+"&"));"&"===i.charAt(i.length-1)&&(i=i.slice(0,i.length-1))}else"POST"===t&&(r=JSON.stringify(e.data));e&&!1===e.async&&"xlsx"!==e.dataSourceType&&(a=!1),void 0!==window.fetch&&a?this.ajaxFetch(e,t,i,r):this.ajaxXMLHttpRequest(e,t,i,r,a)}},{key:"ajaxFetch",value:function(e,t,i,r){var a,n,s,o,l=this,h={method:t};switch(e.dataSourceType){case"json":a="json";break;case"xlsx":a="arrayBuffer";break;default:a="text"}if((e&&e.contentType&&(h.headers=new Headers({"Content-Type":e.contentType})),null!==r&&(h.body=r),e.timeout&&(s=setTimeout((function(){o=!0}),e.timeout)),e.beforeSend)&&!1===e.beforeSend(h,e))return;fetch(i,h).then((function(e){if(o)throw n=408,new Error("timeout");if(s&&clearTimeout(s),n=e.status,!e.ok)throw new Error(e.statusText);return e[a]()})).then((function(t){if("arrayBuffer"===a)return JSZip.loadAsync(t).then((function(t){return t.files["xl/worksheets/sheet1.xml"].async("text").then((function(i){return t.files["xl/sharedStrings.xml"].async("text").then((function(t){var r=l.parseXLSXData(i,t);l.ajaxComplete(e,r,n)}))}))}));l.ajaxComplete(e,t,n)})).catch((function(t){"JSZip is not defined"===t.message&&(t.message="JSZip is not defined. Please include a reference to JSZip to be able to load data from XLSX files."),e&&e.loadError&&e.loadError(n,t),l.callback&&l.callback(t,n)}))}},{key:"ajaxXMLHttpRequest",value:function(e,t,i,r,a){var n=new XMLHttpRequest,s=this;if((n.open(t,i,a),n.ontimeout=function(){e&&e.loadError&&e.loadError(408,"timeout")},n.onload=function(){if(4===n.readyState){var t=n.status,i=n.response;t>=200&&t<=299?("json"===e.dataSourceType&&(i=JSON.parse(i)),s.ajaxComplete(e,i,t)):e&&e.loadError&&e.loadError(t,i)}},n.onerror=function(){e&&e.loadError&&e.loadError(n.status,n.response)},e&&e.contentType&&n.setRequestHeader("Content-Type",e.contentType),a&&e.timeout&&(n.timeout=e.timeout),e.beforeSend)&&!1===e.beforeSend(n,e))return;n.send(r)}},{key:"ajaxComplete",value:function(e,t,i){if(e){if(e.beforeLoadComplete){var r=e.beforeLoadComplete(t);r&&(t=r)}e.loadComplete&&e.loadComplete(t,i),this.callback&&this.callback(t,i)}}},{key:"parseXLSXData",value:function(e,t){var i=new DOMParser,r=i.parseFromString(t,"text/xml"),a=Array.from(r.getElementsByTagName("si")),n=[],s=i.parseFromString(e,"text/xml"),o=Array.from(s.getElementsByTagName("row")),l=[];return a.forEach((function(e){var t=e.getElementsByTagName("t");if(1===t.length)n.push(t[0].innerHTML);else{var i="";(t=Array.from(t)).forEach((function(e){i+=e.innerHTML})),n.push(i)}})),o.forEach((function(e){var t={};Array.from(e.getElementsByTagName("c")).forEach((function(e){var i,r=e.getAttribute("r").match(/\D+/)[0],a=e.getAttribute("t"),s=e.getElementsByTagName("v")[0].innerHTML;switch(a){case"s":i=n[parseFloat(s)];break;case"b":i=1===parseFloat(s);break;default:i=parseFloat(s)}t[r]=i})),l.push(t)})),l}}]),e}()},29:function(e,t,i){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Smart.Utilities.Assign("DataExporter",function(){function e(t,i,r,a){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);t||(t={}),this.style=t.style,this.header=t.header,this.exportHeader=t.exportHeader||!0,this.hierarchical=t.hierarchical,this.expandChar=t.expandChar||"+",this.collapseChar=t.collapseChar||"-",this.pageOrientation=t.pageOrientation,!this.hierarchical&&i&&i.length>0?this.groupBy=i:this.mergedCells=t.mergedCells,!this.groupBy&&r&&Object.keys(r).length>0&&(this.filterBy=r),a&&(this.conditionalFormatting=a),this.timeBetween1900And1970=new Date(1970,0,1).getTime()-new Date(1900,0,1).getTime()}var t,i,n;return t=e,(i=[{key:"downloadFile",value:function(e,t,i){var r;if(!i)return e;if(r=e instanceof Blob?e:new Blob([e],{type:t}),window.navigator.msSaveOrOpenBlob)window.navigator.msSaveOrOpenBlob(r,i);else{var a=document.createElement("a"),n=URL.createObjectURL(r);a.href=n,a.download=i,a.style.position="absolute",a.style.visibility="hidden",document.body.appendChild(a),a.click(),setTimeout((function(){document.body.removeChild(a),window.URL.revokeObjectURL(n)}),0)}}},{key:"exportData",value:function(e,t,i,r){if(this.actualHierarchy=this.hierarchical,t=t.toLowerCase(),this.exportHeader&&(this.header?(0===(e=e.slice(0)).length&&(this.actualHierarchy=!1),this.processComplexHeader(this.header,e,t)):1===e.length&&(this.actualHierarchy=!1)),0!==e.length){"xlsx"===t&&(this.xlsxStartIndex=this.complexHeader?this.complexHeader.length:+this.exportHeader),this.actualHierarchy&&(e=this.processHierarchicalData(e,t)),this.getDatafields(e),i&&i.slice(i.length-t.length-1,i.length)!=="."+t&&(i+="."+t);var a=null;switch(t){case"csv":a=this.exportToCSVAndTSV(e,{delimiter:", ",MIME:"text/csv",toRemove:2},i);break;case"html":a=this.exportToHTML(e,i);break;case"jpeg":case"png":this.exportToImage(e,i,t,r);break;case"json":a=this.exportToJSON(e,i);break;case"pdf":a=this.exportToPDF(e,i);break;case"tsv":a=this.exportToCSVAndTSV(e,{delimiter:"\t",MIME:"text/tab-separated-values",toRemove:1},i);break;case"xlsx":a=this.exportToXLSX(e,i);break;case"xml":a=this.exportToXML(e,i)}return r&&a&&r(a),delete this.complexHeader,a}console.warn("No data to export.")}},{key:"exportToCSVAndTSV",value:function(e,t,i){for(var r=this.datafields,a="",n=0;n<e.length;n++){for(var s=e[n],o="",l=0;l<r.length;l++)this.actualHierarchy&&0===l?o+=('""'+t.delimiter).repeat(s._level-1)+'"'+s[r[l]]+'"'+t.delimiter+('""'+t.delimiter).repeat(this.maxLevel-s._level):o+='"'+s[r[l]]+'"'+t.delimiter;a+=o=o.slice(0,o.length-t.toRemove)+"\n"}return this.downloadFile(a,t.MIME,i)}},{key:"exportToHTML",value:function(e,t){var i=this,r=i.datafields,a=i.style,n="",s=0,o="";if(e=i.processGroupingInformation(e),i.data=e,i.exportHeader&&(n=i.getHTMLHeader(r,e),s=1),arguments[2]){var l=Array.from(document.getElementsByTagName("script")),h=l.find((function(e){return-1!==e.src.indexOf("html2canvas")}));o='<script type="text/javascript" src="'.concat(h.src,'"><\/script>')}var u='<!DOCTYPE html>\n<html>\n<head>\n    <meta charset="UTF-8">\n    <style type="text/css">\n'.concat(i.getRowStyle()).concat(i.getColumnStyle(),"\n    </style>").concat(o).concat(i.toggleableFunctionality(),"\n</head>\n<body>\n    <table").concat(i.getTableStyle(),">").concat(n,"\n        <tbody>\n"),d={},c={},f=[];i.getMergedCellsInfo(d,c);e:for(var p=s;p<e.length;p++){var m=e[p],v=p-s,y=i.getAlternationIndex(v," rowN"),g="",_="",b="",x=0;if(i.actualHierarchy)m._collapsed&&(g=" collapsed"),_=' level="'.concat(m._level,'"');else if(i.groupBy)for(var w=0;w<i.groupBy.length;w++){var S=i.groupBy[w],k=m[S],C=i.groups[S][k];if(b+=k,-1===f.indexOf(b)){u+='            <tr class="row">\n                <td class="column group" style="padding-left: '.concat(25*x,'px;" colspan="').concat(i.datafields.length,'">').concat(C,"</td>\n            </tr>"),f.push(b),p--;continue e}x++}var N='            <tr class="row row'.concat(v).concat(y).concat(g,'"').concat(_);t||(N+=' style="page-break-inside: avoid;"'),N+=">\n";for(var A=0;A<r.length;A++){var M=A+","+v,T=1,D=1;if(d[M])T=d[M].colspan,D=d[M].rowspan;else if(c[M])continue;var O=r[A],E=m[O],F="";if(i.actualHierarchy&&0===A){var P="";m._expanded?P=i.collapseChar:!1===m._expanded&&(P=i.expandChar),F='<div class="toggle-element" style="margin-left: '.concat(25*(m._level-1)+5,'px;" expanded>').concat(P,"</div>")}E=i.getFormattedValue(E,O);var I="";if(a&&a.columns&&a.columns[O]&&a.columns[O][v]){var L=a.columns[O][v];I+="border-color: ".concat(L.border,"; background-color: ").concat(L.background,"; color: ").concat(L.color,';"')}0===A&&x>1&&(I+="padding-left: ".concat(25*(x-1),'px;"')),I&&(I=' style="'.concat(I,'"')),N+='                <td class="column column'.concat(O,'"').concat(I,' colspan="').concat(T,'" rowspan="').concat(D,'">').concat(F+E,"</td>\n")}u+=N+"            </tr>\n"}return u+="        </tbody>\n    </table>\n</body>\n</html>",arguments[2]?u:this.downloadFile(u,"text/html",t)}},{key:"exportToImage",value:function(e,t,i,r){try{html2canvas}catch(e){throw new Error("smart-grid: Missing reference to 'html2canvas.min.js'.")}var a=null,n=this.exportToHTML(e,t,!0),s=document.createElement("iframe");return s.style.position="absolute",s.style.top=0,s.style.left=0,s.style.border="none",s.style.width="100%",s.style.height="100%",s.style.opacity=0,document.body.appendChild(s),s.contentDocument.write(n),function e(){s.contentDocument.body&&s.contentDocument.body.firstElementChild?s.contentWindow.html2canvas(s.contentDocument.body.firstElementChild).then((function(e){var n=new Smart.Utilities.Draw(document.createElement("div"));a=e.toDataURL("image/png"),r?r(a):(document.body.appendChild(e),n.exportImage(void 0,e,i,t)),s.remove(),e.remove()})):requestAnimationFrame(e)}(),a}},{key:"getMergedCellsInfo",value:function(e,t,i){if(this.mergedCells){var r=i&&0!==i[this.datafields.length-1];this.mergedCellsPDF=this.mergedCells.slice(0);for(var a=0;a<this.mergedCellsPDF.length;a++){var n=this.mergedCellsPDF[a],s=n.colspan,o=n.rowspan;if(!(o<2&&s<2)){var l=n.cell[1],h=n.cell[0];if(r&&s>1){var u=i[h],d=i[h+s-1],c=[];if(d>u){var f=u,p=h,m=0;e:for(var v=u;v<=d;v++){for(var y=p,g=0;i[p]===f;)if(p++,g++,++m===s){c.push({start:y,span:g});break e}c.push({start:y,span:g}),f=i[p]}s=c[0].span;for(var _=1;_<c.length;_++)this.mergedCellsPDF.push({cell:[c[_].start,l],colspan:c[_].span,rowspan:o,originalCell:h})}}for(var b=h;b<h+s;b++)for(var x=l;x<l+o;x++){var w=b+","+x;b!==h||x!==l?t[w]=!0:e[w]={colspan:s,rowspan:o,originalCell:n.originalCell}}}}}}},{key:"getAlternationIndex",value:function(e,t){if(!this.style)return"";var i=this.style.rows;return i&&i.alternationCount&&((void 0===i.alternationStart||e>=i.alternationStart)&&(void 0===i.alternationEnd||e<=i.alternationEnd)||i.alternationStart===i.alternationEnd)?t+e%i.alternationCount:""}},{key:"getFormattedValue",value:function(e,t){var i=this.style;if(t&&i&&i.columns&&i.columns[t]&&i.columns[t].format){if("number"==typeof e)return this.formatNumber(e,i.columns[t].format);if(e instanceof Date)return this.formatDate(e,i.columns[t].format)}else if(e instanceof Date)return this.formatDate(e,"d");return e}},{key:"exportToJSON",value:function(e,t){return this.downloadFile(JSON.stringify(e,this.datafields.concat("rows")),"application/json",t)}},{key:"exportToPDF",value:function(e,t){var i,r=this.datafields,a=+this.exportHeader,n=[],s={},o={},l={},h=a?this.complexHeader?this.complexHeader.length:1:0,u={pageOrientation:this.pageOrientation||"portrait"},d=[],c=[];function f(){for(var e=[],t=0;t<i.length;t++)e.push([]);return e}e=this.processGroupingInformation(e),this.data=e,this.headerRows=h,this.getPDFStyle();var p=this.styleInfo;i=p?this.wrapPDFColumns(u,l):[{body:d,datafields:r}],a&&(d=this.getPDFHeader(r,i,l)),this.getMergedCellsInfo(s,o,l);e:for(var m=a;m<e.length;m++){var v=e[m],y="",g=0;if(this.groupBy)for(var _=0;_<this.groupBy.length;_++){var b=this.groupBy[_],x=v[b],w=this.groups[b][x];if(y+=x,-1===n.indexOf(y)){this.createGroupHeaderRow(i,{text:w,style:["row","cell","group"],marginLeft:7.5*g}),n.push(y),m--;continue e}g++}for(var S=f(),k=m-a,C=this.getAlternationIndex(k,""),N=0;N<r.length;N++){var A=r[N],M={style:["row","row"+k,"cell","cell"+A]},T=l[N]||0;if(void 0!==C&&M.style.splice(1,0,"rowN"+C),this.mergedCellsPDF){var D=N+","+k,O=s[D];if(O){if(M.colSpan=O.colspan,M.rowSpan=O.rowspan,void 0!==O.originalCell){M.text="",M.style[M.style.length-1]="cell"+r[O.originalCell],S[T].push(M);continue}}else if(o[D]){S[T].push({});continue}}var E=this.getFormattedValue(v[A],A);M.text=E.toString(),this.getUniqueStylePDF(M,A,k),this.setIndentation(M,{j:N,currentRecord:v,value:E,outlineLevel:g}),S[T].push(M)}for(var F=0;F<i.length;F++)i[F].body.push(S[F])}if(p){for(var P=0;P<i.length;P++){for(var I=i[P].body,L=h-1;L>=0;L--)I.unshift(d[P][L]);c.push({table:{headerRows:h,widths:i[P].widths,heights:function(e){return p.heights[e]?p.heights[e]:p.defaultHeight?p.defaultHeight:void 0},body:I},pageBreak:"after"})}delete c[i.length-1].pageBreak,u.styles=p.styles}else{for(var R=i[0].body,B=h-1;B>=0;B--)R.unshift(d[0][B]);c=[{table:{headerRows:h,body:R}}],u.styles={header:{bold:!0},group:{bold:!0}}}u.content=c,pdfMake.createPdf(u).download(t),delete this.mergedCellsPDF,delete this.styleInfo}},{key:"getPDFStyle",value:function(){var e=this,t=e.style;if(!t)return"";var i=e.data[0],r=t.header,a=t.columns,n=t.rows,s={heights:[],widths:Array(e.datafields.length).fill("*"),styles:{header:{},row:{},cell:{},group:{fillColor:"#FFFFFF",color:"#000000",bold:!0}}};function o(t,r){if(t)for(var a in t)if(t.hasOwnProperty(a))if(void 0===i[a])if("height"===a&&"header"===r)for(var n=0;n<e.headerRows;n++)s.heights[n]=parseInt(t[a],10)/e.headerRows/1.57;else e.storePDFStyle({prop:a,value:t[a],toUpdate:r});else for(var o in t[a])if(isNaN(o)&&t[a].hasOwnProperty(o)){var l=t[a][o],h=e.datafields.indexOf(a);"width"===o&&"*"===s.widths[h]?s.widths[h]=parseFloat(l):e.storePDFStyle({prop:o,value:l,toUpdate:r+a})}}if(e.styleInfo=s,o(r,"header"),o(a,"cell"),n){for(var l in n)if(n.hasOwnProperty(l)&&-1===l.indexOf("alt")){var h=n[l];if(isNaN(l))"height"===l?s.defaultHeight=parseFloat(h)/1.57:e.storePDFStyle({prop:l,value:h,toUpdate:"row"});else for(var u in h)h.hasOwnProperty(u)&&("height"===u?s.heights[parseFloat(l)+e.headerRows]=parseFloat(h[u])/1.57:e.storePDFStyle({prop:u,value:h[u],toUpdate:"row"+l}))}if(n.alternationCount)for(var d=0;d<n.alternationCount;d++){var c={};n["alternationIndex".concat(d,"Color")]&&(c.color=n["alternationIndex".concat(d,"Color")]),n["alternationIndex".concat(d,"BackgroundColor")]&&(c.fillColor=n["alternationIndex".concat(d,"BackgroundColor")]),s.styles["rowN"+d]=c}}}},{key:"storePDFStyle",value:function(e){var t=this.styleInfo.styles[e.toUpdate];t||(t={},this.styleInfo.styles[e.toUpdate]=t);var i=e.value;switch(e.prop){case"backgroundColor":t.fillColor=i;break;case"color":t.color=i;break;case"fontSize":t.fontSize=parseFloat(i);break;case"fontStyle":"italic"===i&&(t.italics=!0);break;case"fontWeight":"bold"===i&&(t.bold=!0);break;case"textAlign":t.alignment=i}}},{key:"wrapPDFColumns",value:function(e,t){for(var i=this.styleInfo,r="portrait"===e.pageOrientation?775:1155,a=[],n=0,s=0;s<i.widths.length;s++){var o=i.widths[s],l=o;if("*"===o?l=150:o>=r?(l=r,o="*"):o/=1.57,void 0!==a[n]){var h=a[n];h.width+l>r?(n++,s--):(t[s]=n,h.width+=l,h.widths.push(o),h.datafields.push(this.datafields[s]))}else a[n]={body:[],width:l,widths:[o],datafields:[this.datafields[s]]},t[s]=n}return a}},{key:"getPDFHeader",value:function(e,t,i){for(var r=[],a=this.headerRows,n=this.complexHeader?this.complexHeader:[Object.values(this.data[0])],s=[],o=[],l=0;l<a;l++)for(var h=n[l],u=0;u<h.length;u++){var d=i[u]||0;s[d]||(s[d]=[]),s[d][l]||(s[d][l]=[]),s[d][l].push(h[u])}function c(e,t,i){for(var r=0;r<a;r++){for(var n=e[r],s=[],o=0;o<n.length;o++){var l=n[o],h=1,u=1;if(n[o-1]&&n[o-1]===l||e[r-1]&&e[r-1][o]===l)s.push({});else{for(var d=o+1;n[d]&&n[d]===n[d-1];)h++,d++;for(d=r+1;e[d]&&e[d][o]===l;)u++,d++;var c=r===a-1||u+r===a?i.datafields[o]:null,f={text:l,colSpan:h,rowSpan:u};c?f.style=["header","header"+c]:(f.alignment="center",f.style="header"),s.push(f)}}t.push(s)}}for(var f=0;f<t.length;f++)o=[],c(s[f],o,t[f]),r.push(o);return r}},{key:"createGroupHeaderRow",value:function(e,t){for(var i=0;i<e.length;i++){var r=Object.assign({},t),a=e[i].datafields.length,n=[r];r.colSpan=a,n.length=a,n.fill({},1,a-1),e[i].body.push(n)}}},{key:"getUniqueStylePDF",value:function(e,t,i){var r=this.style;if(r&&r.columns&&r.columns[t]){var a,n,s,o,l,h=r.columns[t][i];h&&(e.fillColor=(a=h.background,n=/rgba\((\d+),(\d+),(\d+)\,(\d*.\d+|\d+)\)/gi.exec(a.replace(/\s/g,"")),s=parseFloat(n[1]).toString(16).toUpperCase(),o=parseFloat(n[2]).toString(16).toUpperCase(),l=parseFloat(n[3]).toString(16).toUpperCase(),"#"+"0".repeat(2-s.length)+s+"0".repeat(2-o.length)+o+"0".repeat(2-l.length)+l),e.color=h.color.toLowerCase())}}},{key:"setIndentation",value:function(e,t){if(0===t.j)if(this.actualHierarchy){var i=t.currentRecord;void 0!==i._expanded?(e.marginLeft=25*(i._level-1),e.text=this.collapseChar+" "+t.value):e.marginLeft=25*(i._level-1)+6}else t.outlineLevel>1&&(e.marginLeft=7.5*(t.outlineLevel-1))}},{key:"exportToXLSX",value:function(e,t){var i=this,r=i.style;if(e=i.processGroupingInformation(e,!0),i.data=e,i.getColumnsArray(),i.complexHeaderMergedCells=[],i.complexHeaderMergeInfo)for(var a in i.complexHeaderMergeInfo)if(i.complexHeaderMergeInfo.hasOwnProperty(a)){var n=i.complexHeaderMergeInfo[a];if(n.from[0]===n.to[0]&&n.from[1]===n.to[1])continue;i.complexHeaderMergedCells.push({from:i.columnsArray[n.from[1]]+(n.from[0]+1),to:i.columnsArray[n.to[1]]+(n.to[0]+1)})}i.getConditionalFormatting(),r||(r=i.generateDefaultStyle(e));var s=i.generateSharedStrings(e),o=s.collection,l=s.xml,h=i.generateStyles(r),u=i.groupBy?i.generateSheet1WithGrouping(e,o):i.generateSheet1(e,o),d=i.generateAuxiliaryFiles(),c=new JSZip,f=c.folder("_rels"),p=c.folder("docProps"),m=c.folder("xl"),v=m.folder("_rels"),y=m.folder("theme"),g=m.folder("worksheets");f.file(".rels",d._relsRels),p.file("app.xml",d.docPropsAppXml),p.file("core.xml",d.docPropsCoreXml),v.file("workbook.xml.rels",d.xl_relsWorkbookXmlRels),y.file("theme1.xml",d.xlThemeTheme1Xml),g.file("sheet1.xml",u),m.file("sharedStrings.xml",l),m.file("styles.xml",h),m.file("workbook.xml",d.xlWorkbookXml),c.file("[Content_Types].xml",d.Content_TypesXml),c.generateAsync({type:"blob",mimeType:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}).then((function(e){return i.downloadFile(e,"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",t)})),delete i.conditionalFormattingXLSX,delete i.complexHeaderMergeInfo,delete i.defaultRowHeight,delete i.rowHeight}},{key:"processGroupingInformation",value:function(e,t){var i;if(!this.groupBy)return e;if(e=e.slice(0),this.exportHeader&&(t&&this.complexHeader?(i=e.slice(0,this.complexHeader.length),e.splice(0,this.complexHeader.length)):(i=[e[0]],e.splice(0,1))),e.length>1){var a=function(e,t){var i;switch(t||r(e)){case"string":i=(new Intl.Collator).compare;break;case"number":i=function(e,t){return e-t};break;case"boolean":case"bool":i=function(e,t){return e===t?0:!1===e?-1:1};break;case"date":case"time":case"dateTime":e instanceof Date?i=function(e,t){return e.getTime()-t.getTime()}:(e instanceof Smart.Utilities.DateTime||e instanceof Smart.Utilities.BigNumber)&&(i=function(e,t){return e.compare(t)});break;case"object":if(e instanceof Date)i=function(e,t){return e.getTime()-t.getTime()};else if(e instanceof Smart.Utilities.DateTime||e instanceof Smart.Utilities.BigNumber)i=function(e,t){return e.compare(t)};else if(e instanceof Smart.Utilities.Complex||window.NIComplex&&e instanceof window.NIComplex){var a=new Smart.Utilities.ComplexNumericProcessor;i=function(e,t){return a.compareComplexNumbers(e,t)}}}return i};!function(e,t,i,r){if(e&&Array.isArray(e)&&0!==e.length&&t&&(!Array.isArray(t)||0!==t.length)){"string"==typeof t&&(t=[t]);var n=[],s=[];void 0===i&&(i=[]);for(var o=0;o<t.length;o++)void 0===i[o]||"asc"===i[o]||"ascending"===i[o]?n[o]=1:n[o]=-1,s[o]=a(e[0][t[o]]);r?r(e,t,i,s):e.sort((function(e,i){for(var r=0;r<t.length;r++){var a=s[r](e[t[r]],i[t[r]]);if(0===a){if(t[r+1])continue;return void 0!==e._index?(e._index-i._index)*n[r]:0}return a*n[r]}}))}}(e,this.groupBy)}return i&&(e=i.concat(e)),this.getGroupLabels(e),e}},{key:"exportToXML",value:function(e,t){var i=this.datafields.slice(0),r='<?xml version="1.0" encoding="UTF-8" ?>\n<table>\n';return-1===i.indexOf("rows")&&i.push("rows"),r+=function e(t,r){for(var a="",n=0;n<t.length;n++){var s=t[n];a+=r+"<row>\n";for(var o=0;o<i.length;o++){var l=i[o];if("rows"!==l)a+=r+"    <".concat(l,">").concat(s[l],"</").concat(l,">\n");else{if(!s.rows)continue;a+="".concat(r,"    <rows>\n").concat(e(s.rows,r+"        ")).concat(r,"    </rows>\n")}}a+=r+"</row>\n"}return a}(e,"    ")+"</table>",this.downloadFile(r,"application/xml",t)}},{key:"formatDate",value:function(e,t){if(!Smart.Utilities.DateTime)return e;try{return new Smart.Utilities.DateTime(e).toString(t)}catch(t){return e}}},{key:"formatNumber",value:function(e,t){if(!Smart.Utilities.NumberRenderer)return e;var i=(new Smart.Utilities.NumberRenderer).formatNumber(e,t);return void 0===i?e:i}},{key:"generateAuxiliaryFiles",value:function(){var e=(new Date).toISOString();return{_relsRels:'<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\n<Relationships xmlns="http://schemas.openxmlformats.org/package/2006/relationships"><Relationship Id="rId3" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties" Target="docProps/app.xml"/><Relationship Id="rId2" Type="http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties" Target="docProps/core.xml"/><Relationship Id="rId1" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument" Target="xl/workbook.xml"/></Relationships>',docPropsAppXml:'<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\n<Properties xmlns="http://schemas.openxmlformats.org/officeDocument/2006/extended-properties" xmlns:vt="http://schemas.openxmlformats.org/officeDocument/2006/docPropsVTypes"><Application>Microsoft Excel</Application><DocSecurity>0</DocSecurity><ScaleCrop>false</ScaleCrop><HeadingPairs><vt:vector size="2" baseType="variant"><vt:variant><vt:lpstr>Worksheets</vt:lpstr></vt:variant><vt:variant><vt:i4>1</vt:i4></vt:variant></vt:vector></HeadingPairs><TitlesOfParts><vt:vector size="1" baseType="lpstr"><vt:lpstr>Sheet1</vt:lpstr></vt:vector></TitlesOfParts><Company></Company><LinksUpToDate>false</LinksUpToDate><SharedDoc>false</SharedDoc><HyperlinksChanged>false</HyperlinksChanged><AppVersion>16.0300</AppVersion></Properties>',docPropsCoreXml:'<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\n<cp:coreProperties xmlns:cp="http://schemas.openxmlformats.org/package/2006/metadata/core-properties" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:dcterms="http://purl.org/dc/terms/" xmlns:dcmitype="http://purl.org/dc/dcmitype/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><dc:creator>Smart HTML Elements</dc:creator><cp:lastModifiedBy>Smart HTML Elements</cp:lastModifiedBy><dcterms:created xsi:type="dcterms:W3CDTF">'.concat(e,'</dcterms:created><dcterms:modified xsi:type="dcterms:W3CDTF">').concat(e,"</dcterms:modified></cp:coreProperties>"),xl_relsWorkbookXmlRels:'<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\n<Relationships xmlns="http://schemas.openxmlformats.org/package/2006/relationships"><Relationship Id="rId3" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles" Target="styles.xml"/><Relationship Id="rId2" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme" Target="theme/theme1.xml"/><Relationship Id="rId1" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet" Target="worksheets/sheet1.xml"/><Relationship Id="rId4" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings" Target="sharedStrings.xml"/></Relationships>',xlThemeTheme1Xml:'<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\n<a:theme xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main" name="Office Theme"><a:themeElements><a:clrScheme name="Office"><a:dk1><a:sysClr val="windowText" lastClr="000000"/></a:dk1><a:lt1><a:sysClr val="window" lastClr="FFFFFF"/></a:lt1><a:dk2><a:srgbClr val="44546A"/></a:dk2><a:lt2><a:srgbClr val="E7E6E6"/></a:lt2><a:accent1><a:srgbClr val="4472C4"/></a:accent1><a:accent2><a:srgbClr val="ED7D31"/></a:accent2><a:accent3><a:srgbClr val="A5A5A5"/></a:accent3><a:accent4><a:srgbClr val="FFC000"/></a:accent4><a:accent5><a:srgbClr val="5B9BD5"/></a:accent5><a:accent6><a:srgbClr val="70AD47"/></a:accent6><a:hlink><a:srgbClr val="0563C1"/></a:hlink><a:folHlink><a:srgbClr val="954F72"/></a:folHlink></a:clrScheme><a:fontScheme name="Office"><a:majorFont><a:latin typeface="Calibri Light" panose="020F0302020204030204"/><a:ea typeface=""/><a:cs typeface=""/><a:font script="Jpan" typeface=" Light"/><a:font script="Hang" typeface=" "/><a:font script="Hans" typeface=" Light"/><a:font script="Hant" typeface=""/><a:font script="Arab" typeface="Times New Roman"/><a:font script="Hebr" typeface="Times New Roman"/><a:font script="Thai" typeface="Tahoma"/><a:font script="Ethi" typeface="Nyala"/><a:font script="Beng" typeface="Vrinda"/><a:font script="Gujr" typeface="Shruti"/><a:font script="Khmr" typeface="MoolBoran"/><a:font script="Knda" typeface="Tunga"/><a:font script="Guru" typeface="Raavi"/><a:font script="Cans" typeface="Euphemia"/><a:font script="Cher" typeface="Plantagenet Cherokee"/><a:font script="Yiii" typeface="Microsoft Yi Baiti"/><a:font script="Tibt" typeface="Microsoft Himalaya"/><a:font script="Thaa" typeface="MV Boli"/><a:font script="Deva" typeface="Mangal"/><a:font script="Telu" typeface="Gautami"/><a:font script="Taml" typeface="Latha"/><a:font script="Syrc" typeface="Estrangelo Edessa"/><a:font script="Orya" typeface="Kalinga"/><a:font script="Mlym" typeface="Kartika"/><a:font script="Laoo" typeface="DokChampa"/><a:font script="Sinh" typeface="Iskoola Pota"/><a:font script="Mong" typeface="Mongolian Baiti"/><a:font script="Viet" typeface="Times New Roman"/><a:font script="Uigh" typeface="Microsoft Uighur"/><a:font script="Geor" typeface="Sylfaen"/><a:font script="Armn" typeface="Arial"/><a:font script="Bugi" typeface="Leelawadee UI"/><a:font script="Bopo" typeface="Microsoft JhengHei"/><a:font script="Java" typeface="Javanese Text"/><a:font script="Lisu" typeface="Segoe UI"/><a:font script="Mymr" typeface="Myanmar Text"/><a:font script="Nkoo" typeface="Ebrima"/><a:font script="Olck" typeface="Nirmala UI"/><a:font script="Osma" typeface="Ebrima"/><a:font script="Phag" typeface="Phagspa"/><a:font script="Syrn" typeface="Estrangelo Edessa"/><a:font script="Syrj" typeface="Estrangelo Edessa"/><a:font script="Syre" typeface="Estrangelo Edessa"/><a:font script="Sora" typeface="Nirmala UI"/><a:font script="Tale" typeface="Microsoft Tai Le"/><a:font script="Talu" typeface="Microsoft New Tai Lue"/><a:font script="Tfng" typeface="Ebrima"/></a:majorFont><a:minorFont><a:latin typeface="Calibri" panose="020F0502020204030204"/><a:ea typeface=""/><a:cs typeface=""/><a:font script="Jpan" typeface=""/><a:font script="Hang" typeface=" "/><a:font script="Hans" typeface=""/><a:font script="Hant" typeface=""/><a:font script="Arab" typeface="Arial"/><a:font script="Hebr" typeface="Arial"/><a:font script="Thai" typeface="Tahoma"/><a:font script="Ethi" typeface="Nyala"/><a:font script="Beng" typeface="Vrinda"/><a:font script="Gujr" typeface="Shruti"/><a:font script="Khmr" typeface="DaunPenh"/><a:font script="Knda" typeface="Tunga"/><a:font script="Guru" typeface="Raavi"/><a:font script="Cans" typeface="Euphemia"/><a:font script="Cher" typeface="Plantagenet Cherokee"/><a:font script="Yiii" typeface="Microsoft Yi Baiti"/><a:font script="Tibt" typeface="Microsoft Himalaya"/><a:font script="Thaa" typeface="MV Boli"/><a:font script="Deva" typeface="Mangal"/><a:font script="Telu" typeface="Gautami"/><a:font script="Taml" typeface="Latha"/><a:font script="Syrc" typeface="Estrangelo Edessa"/><a:font script="Orya" typeface="Kalinga"/><a:font script="Mlym" typeface="Kartika"/><a:font script="Laoo" typeface="DokChampa"/><a:font script="Sinh" typeface="Iskoola Pota"/><a:font script="Mong" typeface="Mongolian Baiti"/><a:font script="Viet" typeface="Arial"/><a:font script="Uigh" typeface="Microsoft Uighur"/><a:font script="Geor" typeface="Sylfaen"/><a:font script="Armn" typeface="Arial"/><a:font script="Bugi" typeface="Leelawadee UI"/><a:font script="Bopo" typeface="Microsoft JhengHei"/><a:font script="Java" typeface="Javanese Text"/><a:font script="Lisu" typeface="Segoe UI"/><a:font script="Mymr" typeface="Myanmar Text"/><a:font script="Nkoo" typeface="Ebrima"/><a:font script="Olck" typeface="Nirmala UI"/><a:font script="Osma" typeface="Ebrima"/><a:font script="Phag" typeface="Phagspa"/><a:font script="Syrn" typeface="Estrangelo Edessa"/><a:font script="Syrj" typeface="Estrangelo Edessa"/><a:font script="Syre" typeface="Estrangelo Edessa"/><a:font script="Sora" typeface="Nirmala UI"/><a:font script="Tale" typeface="Microsoft Tai Le"/><a:font script="Talu" typeface="Microsoft New Tai Lue"/><a:font script="Tfng" typeface="Ebrima"/></a:minorFont></a:fontScheme><a:fmtScheme name="Office"><a:fillStyleLst><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:gradFill rotWithShape="1"><a:gsLst><a:gs pos="0"><a:schemeClr val="phClr"><a:lumMod val="110000"/><a:satMod val="105000"/><a:tint val="67000"/></a:schemeClr></a:gs><a:gs pos="50000"><a:schemeClr val="phClr"><a:lumMod val="105000"/><a:satMod val="103000"/><a:tint val="73000"/></a:schemeClr></a:gs><a:gs pos="100000"><a:schemeClr val="phClr"><a:lumMod val="105000"/><a:satMod val="109000"/><a:tint val="81000"/></a:schemeClr></a:gs></a:gsLst><a:lin ang="5400000" scaled="0"/></a:gradFill><a:gradFill rotWithShape="1"><a:gsLst><a:gs pos="0"><a:schemeClr val="phClr"><a:satMod val="103000"/><a:lumMod val="102000"/><a:tint val="94000"/></a:schemeClr></a:gs><a:gs pos="50000"><a:schemeClr val="phClr"><a:satMod val="110000"/><a:lumMod val="100000"/><a:shade val="100000"/></a:schemeClr></a:gs><a:gs pos="100000"><a:schemeClr val="phClr"><a:lumMod val="99000"/><a:satMod val="120000"/><a:shade val="78000"/></a:schemeClr></a:gs></a:gsLst><a:lin ang="5400000" scaled="0"/></a:gradFill></a:fillStyleLst><a:lnStyleLst><a:ln w="6350" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/><a:miter lim="800000"/></a:ln><a:ln w="12700" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/><a:miter lim="800000"/></a:ln><a:ln w="19050" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/><a:miter lim="800000"/></a:ln></a:lnStyleLst><a:effectStyleLst><a:effectStyle><a:effectLst/></a:effectStyle><a:effectStyle><a:effectLst/></a:effectStyle><a:effectStyle><a:effectLst><a:outerShdw blurRad="57150" dist="19050" dir="5400000" algn="ctr" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="63000"/></a:srgbClr></a:outerShdw></a:effectLst></a:effectStyle></a:effectStyleLst><a:bgFillStyleLst><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:solidFill><a:schemeClr val="phClr"><a:tint val="95000"/><a:satMod val="170000"/></a:schemeClr></a:solidFill><a:gradFill rotWithShape="1"><a:gsLst><a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="93000"/><a:satMod val="150000"/><a:shade val="98000"/><a:lumMod val="102000"/></a:schemeClr></a:gs><a:gs pos="50000"><a:schemeClr val="phClr"><a:tint val="98000"/><a:satMod val="130000"/><a:shade val="90000"/><a:lumMod val="103000"/></a:schemeClr></a:gs><a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="63000"/><a:satMod val="120000"/></a:schemeClr></a:gs></a:gsLst><a:lin ang="5400000" scaled="0"/></a:gradFill></a:bgFillStyleLst></a:fmtScheme></a:themeElements><a:objectDefaults/><a:extraClrSchemeLst/><a:extLst><a:ext uri="{05A4C25C-085E-4340-85A3-A5531E510DB2}"><thm15:themeFamily xmlns:thm15="http://schemas.microsoft.com/office/thememl/2012/main" name="Office Theme" id="{62F939B6-93AF-4DB8-9C6B-D6C7DFDC589F}" vid="{4A3C46E8-61CC-4603-A589-7422A47A8E4A}"/></a:ext></a:extLst></a:theme>',xlWorkbookXml:'<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\n<workbook xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:r="http://schemas.openxmlformats.org/officeDocument/2006/relationships" xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" mc:Ignorable="x15 xr xr6 xr10 xr2" xmlns:x15="http://schemas.microsoft.com/office/spreadsheetml/2010/11/main" xmlns:xr="http://schemas.microsoft.com/office/spreadsheetml/2014/revision" xmlns:xr6="http://schemas.microsoft.com/office/spreadsheetml/2016/revision6" xmlns:xr10="http://schemas.microsoft.com/office/spreadsheetml/2016/revision10" xmlns:xr2="http://schemas.microsoft.com/office/spreadsheetml/2015/revision2"><fileVersion appName="xl" lastEdited="7" lowestEdited="7" rupBuild="20325"/><workbookPr defaultThemeVersion="166925"/><mc:AlternateContent xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"><mc:Choice Requires="x15"><x15ac:absPath url="C:UsersjqwidgetsDesktop" xmlns:x15ac="http://schemas.microsoft.com/office/spreadsheetml/2010/11/ac"/></mc:Choice></mc:AlternateContent><xr:revisionPtr revIDLastSave="0" documentId="13_ncr:1_{0DEDCB6D-5403-4CD8-AAA5-59B6D238A8B6}" xr6:coauthVersionLast="34" xr6:coauthVersionMax="34" xr10:uidLastSave="{00000000-0000-0000-0000-000000000000}"/><bookViews><workbookView xWindow="0" yWindow="0" windowWidth="19200" windowHeight="6950" xr2:uid="{0CB664E6-3800-4A88-B158-B46A682E7484}"/></bookViews><sheets><sheet name="Sheet1" sheetId="1" r:id="rId1"/></sheets><calcPr calcId="179021"/><extLst><ext uri="{140A7094-0E35-4892-8432-C4D2E57EDEB5}" xmlns:x15="http://schemas.microsoft.com/office/spreadsheetml/2010/11/main"><x15:workbookPr chartTrackingRefBase="1"/></ext></extLst></workbook>',Content_TypesXml:'<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\n<Types xmlns="http://schemas.openxmlformats.org/package/2006/content-types"><Default Extension="bin" ContentType="application/vnd.openxmlformats-officedocument.spreadsheetml.printerSettings"/><Default Extension="rels" ContentType="application/vnd.openxmlformats-package.relationships+xml"/><Default Extension="xml" ContentType="application/xml"/><Override PartName="/xl/workbook.xml" ContentType="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml"/><Override PartName="/xl/worksheets/sheet1.xml" ContentType="application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml"/><Override PartName="/xl/theme/theme1.xml" ContentType="application/vnd.openxmlformats-officedocument.theme+xml"/><Override PartName="/xl/styles.xml" ContentType="application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml"/><Override PartName="/xl/sharedStrings.xml" ContentType="application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml"/><Override PartName="/docProps/core.xml" ContentType="application/vnd.openxmlformats-package.core-properties+xml"/><Override PartName="/docProps/app.xml" ContentType="application/vnd.openxmlformats-officedocument.extended-properties+xml"/></Types>'}}},{key:"generateDefaultStyle",value:function(e){var t={},i=this.datafields,r=this.complexHeader?e[this.complexHeader.length]:e[+this.exportHeader];if(!r)return t;for(var a=0;a<i.length;a++)r[i[a]]instanceof Date&&(t.columns||(t.columns=[]),t.columns[i[a]]={format:"d"});return t}},{key:"generateGroupRow",value:function(e){var t=e.rowNumber,i="A"+t,r='        <row r="'.concat(t,'" outlineLevel="').concat(e.outlineLevel,'" spans="1:').concat(e.numberOfColumns,'"').concat(this.getCustomRowHeight(t-1),' x14ac:dyDescent="0.45">\n            <c r="').concat(i,'" t="s" s="0">\n                <v>').concat(e.sharedStringIndex,"</v>\n            </c>\n        </row>\n");return e.mergedCells.push({from:i,to:this.columnsArray[e.numberOfColumns-1]+t}),r}},{key:"generateSharedStrings",value:function(e){var t=this.datafields,i=[],r="",a=0,n=0;function s(e){a++,-1===i.indexOf(e)&&(n++,i.push(e),r+="<si><t>".concat(e,"</t></si>"))}for(var o=0;o<e.length;o++)for(var l=e[o],h=0;h<t.length;h++){var u=l[t[h]];"string"==typeof u&&s(u)}if(this.groupLabels)for(var d=0;d<this.groupLabels.length;d++)s(this.groupLabels[d]);return r='<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\n<sst xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" count="'.concat(a,'" uniqueCount="').concat(n,'">').concat(r,"</sst>"),{collection:i,xml:r}}},{key:"generateSheet1",value:function(e,t){var i=this,r=i.columnsArray.length,a=e.length,n=i.columnsArray[r-1]+a,s=i.datafields,o=i.getFilters(),l=[].concat(i.complexHeaderMergedCells),h='<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\n<worksheet xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:r="http://schemas.openxmlformats.org/officeDocument/2006/relationships" xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" mc:Ignorable="x14ac xr xr2 xr3" xmlns:x14ac="http://schemas.microsoft.com/office/spreadsheetml/2009/9/ac" xmlns:xr="http://schemas.microsoft.com/office/spreadsheetml/2014/revision" xmlns:xr2="http://schemas.microsoft.com/office/spreadsheetml/2015/revision2" xmlns:xr3="http://schemas.microsoft.com/office/spreadsheetml/2016/revision3" xr:uid="{7F25248B-C640-4C64-AD47-C0EA0E5D90D0}">\n    <sheetPr filterMode="'.concat(""!==o,'" />\n    <dimension ref="A1:').concat(n,'" />\n    <sheetViews>\n        <sheetView tabSelected="1" workbookViewId="0" />\n    </sheetViews>\n    <sheetFormatPr defaultRowHeight="14.5" x14ac:dyDescent="0.35" />').concat(i.getCustomColumnWidths(),"\n    <sheetData>\n");function u(e,t){return i.columnsArray[e]+t}for(var d=0;d<=e.length;d++){var c=e[d],f=d+1,p="";if(i.actualHierarchy){var m=e[d-1];m&&m._collapsed&&(!c||m._level>c._level)&&(p=' collapsed="true"')}if(d===e.length){p&&(h+='        <row r="'.concat(f,'" outlineLevel="').concat(Math.max(e[d-1]._level-2,0),'" hidden="false" collapsed="true" />\n'));break}for(var v='        <row r="'.concat(f,'"').concat(i.getOutlineLevel(c),' hidden="').concat(c._hidden||c._collapsed||!1,'"').concat(p,' spans="1:').concat(r,'"').concat(i.getCustomRowHeight(f-1),' x14ac:dyDescent="0.45">\n'),y=0;y<s.length;y++){var g=i.getXLSXCellStyle(u(y,f));v+=i.getActualCellData(c[s[y]],{r:u(y,f),s:g},t)}h+=v+="        </row>\n"}return h+="    </sheetData>".concat(i.conditionalFormattingXLSX.conditions).concat(o).concat(i.getMergedCells(l),'\n    <pageMargins left="0.7" right="0.7" top="0.75" bottom="0.75" header="0.3" footer="0.3" />\n    <pageSetup paperSize="9" orientation="portrait" r:id="rId1" />\n</worksheet>')}},{key:"generateSheet1WithGrouping",value:function(e,t){var i=this,r=i.columnsArray.length,a=e.length,n=i.columnsArray[r-1]+a,s=i.datafields,o=[].concat(i.complexHeaderMergedCells),l='<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\n<worksheet xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:r="http://schemas.openxmlformats.org/officeDocument/2006/relationships" xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" mc:Ignorable="x14ac xr xr2 xr3" xmlns:x14ac="http://schemas.microsoft.com/office/spreadsheetml/2009/9/ac" xmlns:xr="http://schemas.microsoft.com/office/spreadsheetml/2014/revision" xmlns:xr2="http://schemas.microsoft.com/office/spreadsheetml/2015/revision2" xmlns:xr3="http://schemas.microsoft.com/office/spreadsheetml/2016/revision3" xr:uid="{7F25248B-C640-4C64-AD47-C0EA0E5D90D0}">\n    <dimension ref="A1:'.concat(n,'" />\n    <sheetViews>\n        <sheetView tabSelected="1" workbookViewId="0" />\n    </sheetViews>\n    <sheetFormatPr defaultRowHeight="14.5" x14ac:dyDescent="0.35" />').concat(i.getCustomColumnWidths(),"\n    <sheetData>\n"),h=0,u=[];function d(e,t){return i.columnsArray[e]+t}e:for(var c=0;c<e.length;c++){var f=e[c],p=c+1+h,m=0,v="";if(!i.exportHeader||!i.complexHeader&&0!==c||i.complexHeader&&c>=i.complexHeader.length){for(var y="",g=0;g<i.groupBy.length;g++){var _=i.groupBy[g],b=f[_],x=i.groups[_][b];if(y+=b,-1===u.indexOf(y)){var w=t.indexOf(x);l+=i.generateGroupRow({rowNumber:p,outlineLevel:m,numberOfColumns:r,sharedStringIndex:w,mergedCells:o}),u.push(y),c--,h++;continue e}m++}v=' outlineLevel="'.concat(m,'"')}for(var S='        <row r="'.concat(p,'"').concat(v,' spans="1:').concat(r,'"').concat(i.getCustomRowHeight(p-1),' x14ac:dyDescent="0.45">\n'),k=0;k<s.length;k++){var C=i.getXLSXCellStyle(d(k,c+1));S+=i.getActualCellData(f[s[k]],{r:d(k,p),s:C},t)}l+=S+="        </row>\n"}return l+="    </sheetData>".concat(i.getMergedCells(o),'\n    <pageMargins left="0.7" right="0.7" top="0.75" bottom="0.75" header="0.3" footer="0.3" />\n    <pageSetup paperSize="9" orientation="portrait" r:id="rId1" />\n</worksheet>')}},{key:"getActualCellData",value:function(e,t,i){var r=t.r,a=t.s||' s="0"';if("string"==typeof e)return'            <c r="'.concat(r,'" t="s"').concat(a,">\n                <v>").concat(i.indexOf(e),"</v>\n            </c>\n");if("boolean"==typeof e)return'            <c r="'.concat(r,'" t="b"').concat(a,">\n                <v>").concat(+e,"</v>\n            </c>\n");if(e instanceof Date){var n=(e.getTime()+this.timeBetween1900And1970)/864e5+2;return'            <c r="'.concat(r,'"').concat(a,">\n                <v>").concat(n,"</v>\n            </c>\n")}return'            <c r="'.concat(r,'"').concat(a,">\n                <v>").concat(e,"</v>\n            </c>\n")}},{key:"getColumnsArray",value:function(){var e=this.datafields.length,t=[];function i(e){return e<26?"":String.fromCharCode(64+Math.floor(e/26))}for(var r=0;r<e;r++)t.push(i(r)+String.fromCharCode(65+(r<26?r:r%26)));this.columnsArray=t}},{key:"getColumnStyle",value:function(){var e=this.style;if(!e)return"        .header { border: 1px solid black; padding: 5px; }\n        .column { border: 1px solid black; padding: 5px; }\n        .group { background-color: #FFFFFF; color: #000000; font-weight: bold; }";var t={header:"border: 1px solid black; padding: 5px; ",column:"white-space: nowrap; overflow: hidden; border: 1px solid black; padding: 5px; ",group:"background-color: #FFFFFF; color: #000000; font-weight: bold; "},i=this.data[0],r="",a=e.header||{};for(var n in a)if(a.hasOwnProperty(n)){var s=a[n];if(i[n]){for(var o in t["header"+n]||(t["header"+n]=""),s)if(s.hasOwnProperty(o)){var l=Smart.Utilities.Core.toDash(o)+": "+s[o]+"; ";t["header"+n]+=l,"width"===o&&(t["column"+n]||(t["column"+n]=""),t["column"+n]+=l)}}else"height"===n&&this.complexHeader?t.header+="height: "+parseInt(a[n],10)/this.complexHeader.length+"px; ":t.header+=Smart.Utilities.Core.toDash(n)+": "+a[n]+"; "}var h=e.columns||{};for(var u in h)if(h.hasOwnProperty(u)){var d=h[u];if(i[u])for(var c in t["column"+u]||(t["column"+u]=""),d)isNaN(c)&&d.hasOwnProperty(c)&&"format"!==c&&(t["column"+u]+=Smart.Utilities.Core.toDash(c)+": "+d[c]+"; ");else t.column+=Smart.Utilities.Core.toDash(u)+": "+d+"; "}for(var f in t)t.hasOwnProperty(f)&&(r+="        .".concat(f," { ").concat(t[f],"}\n"));return r}},{key:"getCustomColumnWidths",value:function(){if(!this.style||!this.columnWidth||0===this.columnWidth.length)return"";for(var e="\n    <cols>\n",t=0;t<this.columnWidth.length;t++){var i=this.columnWidth[t];void 0!==i&&(i=Math.round(parseFloat(i))/11,e+='        <col min="'.concat(t+1,'" max="').concat(t+1,'" width="').concat(i,'" customWidth="1" />\n'))}return e+="    </cols>"}},{key:"getCustomFilter",value:function(e,t){var i,r="equal";switch(e instanceof Date&&(e=(e.getTime()+this.timeBetween1900And1970)/864e5+2),t=t.toUpperCase()){case"EMPTY":i="";break;case"NOT_EMPTY":i="",r="notEqual";break;case"CONTAINS":case"CONTAINS_CASE_SENSITIVE":i="*".concat(e,"*");break;case"DOES_NOT_CONTAIN":case"DOES_NOT_CONTAIN_CASE_SENSITIVE":i="*".concat(e,"*"),r="notEqual";break;case"STARTS_WITH":case"STARTS_WITH_CASE_SENSITIVE":i="".concat(e,"*");break;case"ENDS_WITH":case"ENDS_WITH_CASE_SENSITIVE":i="*".concat(e);break;case"EQUAL":case"EQUAL_CASE_SENSITIVE":i=e;break;case"NULL":i=null;break;case"NOT_NULL":i=null,r="notEqual";break;case"NOT_EQUAL":i=e,r="notEqual";break;case"LESS_THAN":i=e,r="lessThan";break;case"LESS_THAN_OR_EQUAL":i=e,r="lessThanOrEqual";break;case"GREATER_THAN":i=e,r="greaterThan";break;case"GREATER_THAN_OR_EQUAL":i=e,r="greaterThanOrEqual"}return'                <customFilter val="'.concat(i,'" operator="').concat(r,'"/>\n')}},{key:"getCustomRowHeight",value:function(e){return this.style&&(this.rowHeight[e]||this.defaultRowHeight)||""}},{key:"getDatafields",value:function(e){var t=e[0],i=[];for(var r in t)t.hasOwnProperty(r)&&"_"!==r.charAt(0)&&i.push(r);this.datafields=i}},{key:"getFilters",value:function(){var e=this.filterBy;if(!e)return"";var t="";for(var i in e)if(e.hasOwnProperty(i)){var r=this.datafields.indexOf(i);if(-1===r)continue;var a=e[i],n=a.filters;t+='        <filterColumn colId="'.concat(r,'">\n            <customFilters and="').concat(!a.operator,'">\n');for(var s=0;s<n.length;s++)t+=this.getCustomFilter(n[s].value,n[s].condition);t+="            </customFilters>\n        </filterColumn>"}return t?t='\n    <autoFilter ref="A1:'.concat(this.columnsArray[this.columnsArray.length-1]+this.data.length,'">\n').concat(t,"\n    </autoFilter>"):""}},{key:"getGroupLabels",value:function(e){for(var t=void 0!==this.xlsxStartIndex?this.xlsxStartIndex:+this.exportHeader,i={},r=[],a=t;a<e.length;a++)for(var n=e[a],s=0;s<this.groupBy.length;s++){var o=this.groupBy[s],l=n[o],h=i[o];void 0===h&&(i[o]={},h=i[o]),void 0===h[l]&&(h[l]=(this.exportHeader?e[t-1][o]:o)+": "+l,r.push(h[l]))}this.groups=i,this.groupLabels=r}},{key:"getHTMLHeader",value:function(e,t){var i="\n        <thead>\n";if(!this.complexHeader){i+="            <tr>\n";for(var r=0;r<e.length;r++){var a=e[r];i+='                <th class="header header'.concat(a,'">').concat(t[0][a],"</th>\n")}return i+="            </tr>\n        </thead>"}for(var n=0;n<this.complexHeader.length;n++){var s=this.complexHeader[n];i+="            <tr>\n";for(var o=0;o<s.length;o++){var l=s[o],h=1,u=1;if(!(s[o-1]&&s[o-1]===l||this.complexHeader[n-1]&&this.complexHeader[n-1][o]===l)){for(var d=o+1;s[d]&&s[d]===s[d-1];)h++,d++;for(d=n+1;this.complexHeader[d]&&this.complexHeader[d][o]===l;)u++,d++;var c=n===this.complexHeader.length-1||u+n===this.complexHeader.length?" header"+e[o]:"";i+='                <th class="header'.concat(c,'" colspan="').concat(h,'" rowspan="').concat(u,'">').concat(l,"</th>\n")}}i+="            </tr>\n"}return i+="        </thead>"}},{key:"getConditionalFormatting",value:function(){var e=this.conditionalFormatting;if(e){for(var t=[],i="",r="",a=e.length-1;a>=0;a--){var n=e[a],s=this.columnsArray[this.datafields.indexOf(n.column)],o=s+(this.xlsxStartIndex+1),l=o+":"+s+this.data.length,h=n.background+n.color,u=this.getConditionalAttributes(n,o),d=t.indexOf(h);-1===d&&(r+='        <dxf>\n            <font>\n                <b val="0"/>\n                <i val="0"/>\n                <color rgb="'.concat("White"===n.color?"FFFFFFFF":"FF000000",'"/>\n                <sz val="10"/>\n            </font>\n            <fill>\n                <patternFill>\n                    <bgColor rgb="').concat(this.toARGB(n.background),'"/>\n                </patternFill>\n            </fill>\n        </dxf>\n'),d=t.length,t.push(h)),i+='    <conditionalFormatting sqref="'.concat(l,'">\n        <cfRule dxfId="').concat(d,'" text="').concat(u.text,'" rank="').concat(u.rank,'" percent="').concat(u.percent,'" bottom="').concat(u.bottom,'" equalAverage="').concat(u.equalAverage,'" aboveAverage="').concat(u.aboveAverage,'"').concat(u.operator).concat(u.timePeriod,' priority="').concat(a+2,'" type="').concat(u.type,'">\n').concat(u.formula,"        </cfRule>\n    </conditionalFormatting>\n")}r='    <dxfs count="'.concat(t.length,'">\n').concat(r,"    </dxfs>"),this.conditionalFormattingXLSX={conditions:i,styles:r}}else this.conditionalFormattingXLSX={conditions:"",styles:""}}},{key:"getConditionalAttributes",value:function(e,t){var i=e.condition,r=e.comparator,a="",n=0,s=0,o=0,l=0,h="",u="",d="",c="";switch(i){case"equal":h="equal",d="cellIs",c="            <formula>".concat(r,"</formula>\n");break;case"lessThan":h="lessThan",d="cellIs",c="            <formula>".concat(r,"</formula>\n");break;case"greaterThan":h="greaterThan",d="cellIs",c="            <formula>".concat(r,"</formula>\n");break;case"notEqual":h="notEqual",d="cellIs",c="            <formula>".concat(r,"</formula>\n");break;case"between":h="between",d="cellIs",c="            <formula>".concat(e.min,"</formula>\n            <formula>").concat(e.max,"</formula>\n");break;case"duplicate":d="duplicateValues",c="            <formula>0</formula>\n";break;case"topNItems":n=r,d="top10";break;case"bottomNItems":n=r,o=1,d="top10";break;case"topNPercent":n=r,s=1,d="top10";break;case"bottomNPercent":n=r,s=1,o=1,d="top10";break;case"aboveAverage":l=1,d="aboveAverage",c="            <formula>0</formula>\n";break;case"belowAverage":d="aboveAverage",c="            <formula>0</formula>\n";break;case"contains":a=r,h="containsText",d="containsText",c='            <formula>NOT(ISERROR(SEARCH("'.concat(r,'",').concat(t,")))</formula>\n");break;case"doesNotContain":a=r,h="notContains",d="notContainsText",c='            <formula>ISERROR(SEARCH("'.concat(r,'",').concat(t,"))</formula>\n");break;case"dateOccur":u=' timePeriod="'.concat(r,'"'),d="timePeriod"}return h&&(h=' operator="'.concat(h,'" ')),{text:a,rank:n,percent:s,bottom:o,equalAverage:0,aboveAverage:l,operator:h,timePeriod:u,type:d,formula:c}}},{key:"getMergedCells",value:function(e){for(var t="",i=0;i<e.length;i++)e[i].from!==e[i].to&&(t+='\n        <mergeCell ref="'.concat(e[i].from,":").concat(e[i].to,'" />\n'));if(this.mergedCells)for(var r=0;r<this.mergedCells.length;r++){var a=this.mergedCells[r];if(!(a.rowspan<2&&a.colspan<2)){var n=this.columnsArray[a.cell[0]]+(a.cell[1]+this.xlsxStartIndex+1),s=this.columnsArray[a.cell[0]+a.colspan-1]+(a.cell[1]+this.xlsxStartIndex+a.rowspan);t+='\n        <mergeCell ref="'.concat(n,":").concat(s,'" />\n')}}return t&&(t='\n    <mergeCells count="'.concat(e.length,'">').concat(t,"    </mergeCells>")),t}},{key:"getNumFmtIndex",value:function(e,t){var i=t.collection.indexOf(e);return-1===i?(i=t.collection.length+100,t.collection.push(e),t.xml+='<numFmt numFmtId="'.concat(i,'" formatCode="').concat(e,'"/>')):i+=100,i}},{key:"getOutlineLevel",value:function(e){return this.actualHierarchy&&1!==e._level?' outlineLevel="'.concat(e._level-1,'"'):""}},{key:"getRowStyle",value:function(){var e=this.style;if(!e)return"";var t=e.rows;if(!t)return"";var i={row:""},r="";for(var a in t)if(t.hasOwnProperty(a)&&"alternationCount"!==a&&"alternationStart"!==a&&"alternationEnd"!==a){var n=t[a];if(-1===a.indexOf("alt"))if(isNaN(a))i.row+=Smart.Utilities.Core.toDash(a)+": "+t[a]+"; ";else for(var s in i["row"+a]||(i["row"+a]=""),n)n.hasOwnProperty(s)&&(i["row"+a]+=Smart.Utilities.Core.toDash(s)+": "+n[s]+"; ");else{var o=a.slice(16,17),l=a.slice(17);i["rowN"+o]||(i["rowN"+o]=""),i["rowN"+o]+="Color"===l?"color : "+n+"; ":"BorderColor"===l?"border-color : "+n+"; ":"background-color : "+n+"; "}}var h=Object.keys(i);h.sort((function(e,t){if("row"===e)return-1;if("row"===t)return 1;var i=!isNaN(e.slice(3)),r=!isNaN(t.slice(3));return i&&!r?1:!i&&r?-1:+(e<t)}));for(var u=0;u<h.length;u++)r+="        .".concat(h[u]," { ").concat(i[h[u]],"}\n");return r}},{key:"getTableStyle",value:function(){var e=this.style;if(!e)return' style="table-layout: fixed; border: 1px solid black; border-collapse: collapse;"';var t="table-layout: fixed; ";for(var i in e)e.hasOwnProperty(i)&&-1===["header","columns","rows"].indexOf(i)&&(t+=Smart.Utilities.Core.toDash(i)+": "+e[i]+"; ");return t&&(t=' style="'+t+'"'),t}},{key:"getXLSXCellStyle",value:function(e){return void 0!==this.cellStyleMapping[e]?' s="'.concat(this.cellStyleMapping[e],'"'):""}},{key:"getXLSXFormat",value:function(e,t){if("number"==typeof t){var i=parseFloat(e.slice(1))||0,r=i>0?"."+"0".repeat(i):"";switch(e=e.slice(0,1)){case"C":case"c":return"$#,0"+r;case"D":case"d":return i?"0".repeat(i):"0";case"E":case"e":return"0"+r+e+"000";case"F":case"f":return"0"+r;case"N":case"n":return"#,0"+r;case"P":case"p":return"#,0"+r+" %";default:return}}else if(t instanceof Date){switch(e){case"d":return"m/d/yyyy";case"D":return"nnnnmmmm dd, yyyy";case"t":return"h:m AM/PM";case"T":return"h:mm:ss AM/PM";case"f":return"nnnnmmmm dd, yyyy h:m AM/PM";case"F":return"nnnnmmmm dd, yyyy h:mm:ss AM/PM";case"M":return"mmmm d";case"Y":return"yyyy mmmm";case"FP":case"PP":return"yyyy-mm-dd hh:mm:ss";case"FT":case"PT":return"hh:mm:ss"}return e=(e=(e=(e=e.replace(/f|u|n|p|e|a|x|o/gi,"")).replace(/tt/gi,"AM/PM")).replace(/:{2,}|:\s|:$|\.$/g,"")).trim()}}},{key:"processColumnStyle",value:function(e){var t=e.header,i=e.columns,r=this.data[0],a=this.xlsxStartIndex;if(this.columnWidth=[],a&&t)for(var n=0;n<this.columnsArray.length;n++){var s=this.columnsArray[n],o=s+a,l=t[this.datafields[n]];for(var h in t)if(t.hasOwnProperty(h)&&void 0===r[h])if(this.complexHeader)for(var u=0;u<this.complexHeader.length;u++)"height"!==h?this.storeCellStyle(s+(u+1),h,t[h]):this.rowHeight[u]=' ht="'.concat(parseFloat(t.height)/this.complexHeader.length/2,'"');else{if("height"===h){this.rowHeight[0]=' ht="'.concat(parseFloat(t.height)/2,'"');continue}this.storeCellStyle(o,h,t[h])}if(l)for(var d in l)if(l.hasOwnProperty(d)){if("width"===d){this.columnWidth[n]=l.width;continue}this.storeCellStyle(o,d,l[d])}}else if(t)for(var c=0;c<this.columnsArray.length;c++){var f=t[this.datafields[c]];f&&void 0!==f.width&&(this.columnWidth[c]=f.width)}if(!i)return"";for(var p=a;p<this.data.length;p++)for(var m=0;m<this.columnsArray.length;m++){var v=this.columnsArray[m]+(p+1),y=this.datafields[m],g=i[y];for(var _ in i)i.hasOwnProperty(_)&&void 0===r[_]&&this.storeCellStyle(v,_,i[_]);if(g)for(var b in g)isNaN(b)&&g.hasOwnProperty(b)&&this.storeCellStyle(v,b,g[b],this.data[p][y])}}},{key:"processComplexHeader",value:function(e,t,i){var r={},a=-1!==["html","jpeg","pdf","png","xlsx"].indexOf(i)&&e.columngroups,n=[],s={},o=[],l=0;function h(t){for(var i=0;i<e.columngroups.length;i++){var r=e.columngroups[i];if(r.name===t)return r}}function u(e){for(var t=[];e;){if(t.unshift(e.label),!e.parentGroup)return t;e=h(e.parentGroup)}}if(a){for(var d=0;d<e.columngroups.length;d++){var c=e.columngroups[d],f=u(c);s[c.name]=f,l=Math.max(l,f.length)}l++;for(var p=0;p<l;p++)o[p]=[]}for(var m=0;m<e.columns.length;m++){var v=e.columns[m];if(r[v.dataField]=v.label,a&&(n[m]=v.dataField,o[l-1][m]=v.label,v.columnGroup))for(var y=s[v.columnGroup],g=0;g<y.length;g++)o[g][m]=y[g]}if(o.length>1){for(var _=Object.keys(r).length,b=0;b<l-1;b++){for(var x={},w=0;w<_;w++){if(void 0===o[b][w]){for(var S=b+1;void 0===o[S][w];)S++;o[b][w]=o[S][w]}x[n[w]]=o[b][w]}"xlsx"===i&&t.splice(b,0,x)}if(this.complexHeader=o,"xlsx"!==i)t.unshift(r);else{t.splice(l-1,0,r);for(var k={},C=0;C<l;C++)for(var N=0;N<_;N++){var A=o[C][N];k[A]?k[A].to=[C,N]:(k[A]={from:[C,N]},k[A].to=k[A].from)}this.complexHeaderMergeInfo=k}}else t.unshift(r)}},{key:"processHierarchicalData",value:function(e,t){var i="xlsx"!==t?+this.exportHeader:this.xlsxStartIndex,r={},a=[],n=0,s=!1;if(void 0===e[i]._keyDataField)return this.processNestedData(e,t,i);for(var o=i;o<e.length;o++){var l=Object.assign({},e[o]),h=l._parentDataField;void 0===r[h]?r[h]=[l]:r[h].push(l)}if(i)for(var u=0;u<i;u++)a.push(Object.assign({},e[u])),-1===["json","pdf","xml"].indexOf(t)&&(a[u]._level=1);return"json"!==t&&"xml"!==t?function e(t,i,o){var l=r[t];if(n=Math.max(n,i),void 0!==l)for(var h=0;h<l.length;h++){var u=l[h],d=u._keyDataField;u._collapsed=o,u._level=i,a.push(u),r[d]&&(s=!0,u._expanded=void 0===u._expanded||u._expanded,e(d,i+1,o||!u._expanded))}}(null,1,!1):function e(i,a,o){var l=r[i];if(n=Math.max(n,a),void 0!==l)for(var h=0;h<l.length;h++){var u=l[h],d=u._keyDataField,c=void 0;if("json"===t)for(var f in c={},u)u.hasOwnProperty(f)&&"_"!==f.charAt(0)&&(c[f]=u[f]);else c=Object.assign({},u);o.push(c),r[d]&&(s=!0,c.rows=[],e(d,a+1,c.rows))}}(null,1,a),s||(this.actualHierarchy=!1),this.maxLevel=n,a}},{key:"processNestedData",value:function(e,t,i){var r=[],a=0,n=!1;if(i)for(var s=0;s<i;s++)r.push(Object.assign({},e[s])),-1===["json","pdf","xml"].indexOf(t)&&(r[s]._level=1);return"json"!==t&&"xml"!==t?function e(t,i,s,o){a=Math.max(a,s);for(var l=t;l<i.length;l++){var h=Object.assign({},i[l]);h._collapsed=o,h._level=s,r.push(h),h.children&&h.children.length>0&&(n=!0,h._expanded=void 0===h._expanded||h._expanded,e(0,h.children,s+1,o||!h._expanded)),delete h.children}}(i,e,1,!1):function e(t,i,s,o){a=Math.max(a,o);for(var l=t;l<i.length;l++){var h=Object.assign({},i[l]);1===o?r[l]=h:s[l]=h,h.children&&h.children.length>0&&(n=!0,h.rows=[],e(0,h.children,h.rows,o+1)),delete h.children}}(i,e,void 0,1),n||(this.actualHierarchy=!1),this.maxLevel=a,r}},{key:"processRowStyle",value:function(e){var t=this,i=e.rows;if(t.rowHeight=[],i){var r=t.xlsxStartIndex;i.height&&(t.defaultRowHeight=' ht="'.concat(parseFloat(i.height)/2,'"'));for(var a=r;a<t.data.length;a++){var n=a-r;for(var s in i)i.hasOwnProperty(s)&&-1===s.indexOf("alt")&&isNaN(s)&&"height"!==s&&h(n,s,i[s]);if(i.alternationCount&&((void 0===i.alternationStart||n>=i.alternationStart)&&(void 0===i.alternationEnd||n<=i.alternationEnd)||i.alternationStart===i.alternationEnd)){var o=(n-(i.alternationStart||0))%i.alternationCount;i["alternationIndex".concat(o,"Color")]&&h(n,"color",i["alternationIndex".concat(o,"Color")]),i["alternationIndex".concat(o,"BorderColor")]&&h(n,"borderColor",i["alternationIndex".concat(o,"BorderColor")]),i["alternationIndex".concat(o,"BackgroundColor")]&&h(n,"backgroundColor",i["alternationIndex".concat(o,"BackgroundColor")])}if(i[n])for(var l in i[n])if(i[n].hasOwnProperty(l)){if("height"===l){t.rowHeight[a]=' ht="'.concat(parseFloat(i[n].height)/2,'"');continue}h(n,l,i[n][l])}}}function h(e,i,a){for(var n=0;n<t.columnsArray.length;n++){var s=t.columnsArray[n]+(e+1+r);t.storeCellStyle(s,i,a)}}}},{key:"storeCellStyle",value:function(e,t,i){var r=this.styleMap[e];switch(t){case"backgroundColor":r.fills.fgColor=i;break;case"color":r.fonts.color=i;break;case"fontFamily":r.fonts.name=i.replace(/"/g,"'");break;case"fontSize":r.fonts.sz=parseFloat(i);break;case"fontStyle":"italic"===i?r.fonts.i=!0:delete r.fonts.i;break;case"fontWeight":"bold"===i?r.fonts.b=!0:delete r.fonts.b;break;case"numFmt":r.numFmt=i;break;case"textAlign":r.alignment.horizontal=i;break;case"textDecoration":"underline"===i?r.fonts.u=!0:delete r.fonts.u;break;case"verticalAlign":"middle"===i&&(i="center"),r.alignment.vertical=i}}},{key:"toARGB",value:function(e){e=e.replace(/\s/g,"");var t=/rgb\((\d+),(\d+),(\d+)\)/gi.exec(e);if(null!==t){var i=parseFloat(t[1]).toString(16).toUpperCase(),r=parseFloat(t[2]).toString(16).toUpperCase(),a=parseFloat(t[3]).toString(16).toUpperCase();return"FF"+"0".repeat(2-i.length)+i+"0".repeat(2-r.length)+r+"0".repeat(2-a.length)+a}var n=/rgba\((\d+),(\d+),(\d+)\,(\d*.\d+|\d+)\)/gi.exec(e);if(null!==n){var s=Math.round(255*parseFloat(n[4])).toString(16).toUpperCase(),o=parseFloat(n[1]).toString(16).toUpperCase(),l=parseFloat(n[2]).toString(16).toUpperCase(),h=parseFloat(n[3]).toString(16).toUpperCase();return"0".repeat(2-s.length)+s+"0".repeat(2-o.length)+o+"0".repeat(2-l.length)+l+"0".repeat(2-h.length)+h}var u=/^#(.)(.)(.)$/gi.exec(e);if(null!==u){var d=u[1].toUpperCase(),c=u[2].toUpperCase(),f=u[3].toUpperCase();return"FF"+d+d+c+c+f+f}return"FF"+e.toUpperCase().slice(1)}},{key:"toggleableFunctionality",value:function(){return this.actualHierarchy?'\n    <style type="text/css">\n        .toggle-element {\n            width: 5px;\n            height: 1px;\n            padding-right: 5px;\n            float: left;\n            text-align: right;\n            cursor: pointer;\n            user-select: none;\n        }\n\n        .collapsed {\n            display: none;\n        }\n    </style>\n    <script type="text/javascript">\n        window.onload = function () {\n            var expandChar = \''.concat(this.expandChar,"',\n                collapseChar = '").concat(this.collapseChar,"',\n                toggleElements = document.getElementsByClassName('toggle-element');\n\n            function getParent(child) {\n                var prevSibling = child.previousElementSibling;\n\n                while (prevSibling) {\n                    if (child.getAttribute('level') > prevSibling.getAttribute('level')) {\n                        return prevSibling;\n                    }\n\n                    prevSibling = prevSibling.previousElementSibling;\n                }\n\n            }\n\n            function getFirstCollapsedAncestor(child) {\n                var parent = getParent(child);\n\n                while (parent) {\n                    if (parent.firstElementChild.firstElementChild.innerHTML === expandChar) {\n                        return parent;\n                    }\n\n                    parent = getParent(parent);\n                }\n            }\n\n            for (var i = 0; i < toggleElements.length; i++) {\n                toggleElements[i].addEventListener('click', function (event) {\n                    var expanded = this.innerHTML === collapseChar,\n                        row = this.parentElement.parentElement,\n                        sibling = row.nextElementSibling;\n\n                    if (expanded) {\n                        this.innerHTML = expandChar;\n                    }\n                    else {\n                        this.innerHTML = collapseChar;\n                    }\n\n                    while (sibling && row.getAttribute('level') < sibling.getAttribute('level')) {\n                        if (expanded) {\n                            sibling.style.display = 'none';\n                        }\n                        else {\n                            var firstCollapsedAncestor = getFirstCollapsedAncestor(sibling);\n\n                            if (!firstCollapsedAncestor || firstCollapsedAncestor === row) {\n                                sibling.classList.remove('collapsed');\n                                sibling.style.display = null;\n                            }\n\n                        }\n\n                        sibling = sibling.nextElementSibling;\n                    }\n                });\n            }\n        }\n    <\/script>"):""}},{key:"generateStyles",value:function(e){if(this.cellStyleMapping={},0===Object.keys(e).length&&!this.complexHeader)return'<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\n<styleSheet xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" mc:Ignorable="x14ac x16r2 xr" xmlns:x14ac="http://schemas.microsoft.com/office/spreadsheetml/2009/9/ac" xmlns:x16r2="http://schemas.microsoft.com/office/spreadsheetml/2015/02/main" xmlns:xr="http://schemas.microsoft.com/office/spreadsheetml/2014/revision"><fonts count="1" x14ac:knownFonts="1"><font><sz val="11"/><color theme="1"/><name val="Calibri"/><family val="2"/><charset val="204"/><scheme val="minor"/></font></fonts><fills count="2"><fill><patternFill patternType="none"/></fill><fill><patternFill patternType="gray125"/></fill></fills><borders count="1"><border><left/><right/><top/><bottom/><diagonal/></border></borders><cellStyleXfs count="1"><xf numFmtId="0" fontId="0" fillId="0" borderId="0"/></cellStyleXfs><cellXfs count="1"><xf numFmtId="0" fontId="0" fillId="0" borderId="0" xfId="0"/></cellXfs><cellStyles count="1"><cellStyle name="Normal" xfId="0" builtinId="0"/></cellStyles>'.concat(this.conditionalFormattingXLSX.styles||'<dxfs count="0"/>','<tableStyles count="0" defaultTableStyle="TableStyleMedium2" defaultPivotStyle="PivotStyleLight16"/><extLst><ext uri="{EB79DEF2-80B8-43e5-95BD-54CBDDF9020C}" xmlns:x14="http://schemas.microsoft.com/office/spreadsheetml/2009/9/main"><x14:slicerStyles defaultSlicerStyle="SlicerStyleLight1"/></ext><ext uri="{9260A510-F301-46a8-8635-F512D64BE5F5}" xmlns:x15="http://schemas.microsoft.com/office/spreadsheetml/2010/11/main"><x15:timelineStyles defaultTimelineStyle="TimeSlicerStyleLight1"/></ext></extLst></styleSheet>');this.styleMap={};for(var t=0;t<this.data.length;t++)for(var i=0;i<this.columnsArray.length;i++)this.styleMap[this.columnsArray[i]+(t+1)]={numFmts:{},fonts:{},fills:{},borders:{},alignment:{}};if(e&&e.columns)for(var r=0;r<this.columnsArray.length;r++){var a=this.datafields[r];if(e.columns[a]&&e.columns[a].format){var n=this.getXLSXFormat(e.columns[a].format,this.data[this.data.length-1][a]);n&&(e.columns[a].numFmt=n)}}this.processRowStyle(e),this.processColumnStyle(e);for(var s={},o=0;o<this.complexHeaderMergedCells.length;o++){var l=this.complexHeaderMergedCells[o];parseFloat(l.to[1])!==this.complexHeader.length?(this.styleMap[l.from].alignment.horizontal="center",this.styleMap[l.from].alignment.vertical="center"):s[l.to]=l.from}for(var h={xml:'<font><sz val="11" /><color theme="1" /><name val="Calibri" /><family val="2" /><charset val="204" /><scheme val="minor" /></font>',collection:["default"]},u={xml:'<fill><patternFill patternType="none" /></fill><fill><patternFill patternType="gray125" /></fill>',collection:["default","gray125"]},d={xml:"",collection:[]},c={xml:'<xf fontId="0" fillId="0" borderId="1"/>',collection:["default"]},f=0;f<this.data.length;f++)for(var p=0;p<this.columnsArray.length;p++){var m=this.columnsArray[p]+(f+1),v=this.styleMap[m],y="",g="",_="",b=[],x=[],w=[],S=[];for(var k in v.fonts)if(v.fonts.hasOwnProperty(k)){var C=v.fonts[k];switch(k){case"color":b[0]=C,y+='<color rgb="'.concat(this.toARGB(C),'" />');break;case"name":b[1]=C,y+='<name val="'.concat(C,'" />');break;case"sz":b[2]=C,y+='<sz val="'.concat(C,'" />');break;case"i":b[3]=C,y+="<i />";break;case"b":b[4]=C,y+="<b />";break;case"u":b[5]=C,y+="<u />"}}for(var N in v.fills)if(v.fills.hasOwnProperty(N)){var A=v.fills[N];switch(N){case"fgColor":x[0]=A,g+='<fgColor rgb="'.concat(this.toARGB(A),'" />')}}for(var M in v.alignment)if(v.alignment.hasOwnProperty(M)){var T=v.alignment[M];switch(M){case"horizontal":w[0]=T,_+='horizontal="'.concat(T,'" ');break;case"vertical":w[1]=T,_+='vertical="'.concat(T,'" ')}}if(b=b.toString(),x=x.toString(),""!==y){var D=h.collection.indexOf(b);-1===D&&(D=h.collection.length,h.xml+="<font>"+y+"</font>",h.collection.push(b)),S[0]=D}if(""!==g){var O=u.collection.indexOf(x);-1===O&&(O=u.collection.length,u.xml+='<fill><patternFill patternType="solid">'+g+"</patternFill></fill>",u.collection.push(x)),S[1]=O}w.length>0&&(S[2]=_),void 0!==v.numFmt&&(S[3]=this.getNumFmtIndex(v.numFmt,d));var E=S.toString();if(""!==E){var F=c.collection.indexOf(E);if(-1===F){var P="<xf ";F=c.collection.length,void 0!==S[0]&&(P+='fontId="'.concat(S[0],'" ')),void 0!==S[1]&&(P+='fillId="'.concat(S[1],'" ')),void 0!==S[3]&&(P+='numFmtId="'.concat(S[3],'" ')),void 0!==S[2]?P+='applyAlignment="1" borderId="1"><alignment '.concat(_,"/></xf>"):P+=' borderId="1"/>',c.xml+=P,c.collection.push(E)}this.cellStyleMapping[s[m]||m]=F}}return d.collection.length&&(d.xml='<numFmts count="'.concat(d.collection.length,'">').concat(d.xml,"</numFmts>")),'<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\n<styleSheet xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" mc:Ignorable="x14ac x16r2 xr" xmlns:x14ac="http://schemas.microsoft.com/office/spreadsheetml/2009/9/ac" xmlns:x16r2="http://schemas.microsoft.com/office/spreadsheetml/2015/02/main" xmlns:xr="http://schemas.microsoft.com/office/spreadsheetml/2014/revision">'.concat(d.xml,'<fonts count="').concat(h.collection.length,'" x14ac:knownFonts="1">').concat(h.xml,'</fonts><fills count="').concat(u.collection.length,'">').concat(u.xml,'</fills><borders count="2"><border><left/><right/><top/><bottom/></border><border><left style="hair"/><right style="hair"/><top style="hair"/><bottom style="hair"/><diagonal/></border></borders><cellStyleXfs count="1"><xf numFmtId="0" fontId="0" fillId="0" borderId="0"/></cellStyleXfs><cellXfs count="').concat(c.collection.length,'">').concat(c.xml,'</cellXfs><cellStyles count="1"><cellStyle name="Normal" xfId="0" builtinId="0"/></cellStyles>').concat(this.conditionalFormattingXLSX.styles,'<dxfs count="0"/><tableStyles count="0" defaultTableStyle="TableStyleMedium2" defaultPivotStyle="PivotStyleLight16"/><extLst><ext uri="{EB79DEF2-80B8-43e5-95BD-54CBDDF9020C}" xmlns:x14="http://schemas.microsoft.com/office/spreadsheetml/2009/9/main"><x14:slicerStyles defaultSlicerStyle="SlicerStyleLight1"/></ext><ext uri="{9260A510-F301-46a8-8635-F512D64BE5F5}" xmlns:x15="http://schemas.microsoft.com/office/spreadsheetml/2010/11/main"><x15:timelineStyles defaultTimelineStyle="TimeSlicerStyleLight1"/></ext></extLst></styleSheet>')}}])&&a(t.prototype,i),n&&a(t,n),e}())},54:function(e,t,i){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function o(e){return(o=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}Object.defineProperty(t,"__esModule",{value:!0}),t.smartDataAdapter=t.smartChart=void 0,i(0),i(1),i(2),i(21),i(9),i(55),i(56),i(57),i(58),i(59),i(29);var u=function(e){function t(){return a(this,t),s(this,o(t).apply(this,arguments))}var i,r,h;return l(t,Smart.Component),i=t,(r=[{key:"name",get:function(){return"smartChart"}}])&&n(i.prototype,r),h&&n(i,h),t}();t.smartChart=u;var d=function(e){function t(){return a(this,t),s(this,o(t).apply(this,arguments))}return l(t,Smart.DataAdapter),t}();t.smartDataAdapter=d},55:function(e,t,i){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function n(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(e,t,i){return(s="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,i){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=o(e)););return e}(e,t);if(r){var a=Object.getOwnPropertyDescriptor(r,t);return a.get?a.get.call(i):a.value}})(e,t,i||e)}function o(e){return(o=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}Smart("smart-chart",function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n(this,o(t).apply(this,arguments))}var i,h,u;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(t,Smart.BaseElement),i=t,u=[{key:"properties",get:function(){return{animationDuration:{value:300,type:"number"},backgroundColor:{value:null,type:"string?"},backgroundImage:{value:"",type:"string"},borderLineColor:{value:null,type:"string?"},borderLineWidth:{value:1,type:"number"},caption:{value:"Caption",type:"string"},clip:{value:!0,type:"boolean"},colorScheme:{value:"scheme01",type:"string"},columnSeriesOverlap:{value:!1,type:"boolean"},crosshairsColor:{value:null,type:"string?"},crosshairsDashStyle:{value:"2,2",type:"string"},crosshairsLineWidth:{value:1,type:"number"},dataSource:{value:[],type:"object",reflectToAttribute:!1},description:{value:"Description",type:"string"},draw:{value:null,type:"function?"},drawBefore:{value:null,type:"function?"},enableAxisTextAnimation:{value:!1,type:"boolean"},enableCrosshairs:{value:!1,type:"boolean"},greyScale:{value:!1,type:"boolean"},legendLayout:{value:{flow:{value:"horizontal",allowedValues:["horizontal","vertical"],type:"string"},height:{value:null,type:"number?"},left:{value:null,type:"number?"},top:{value:null,type:"number?"},width:{value:null,type:"number?"}},type:"object?"},localization:{value:{decimalSeparator:{value:".",type:"string"},patterns:{value:null,type:"object?"},thousandsSeparator:{value:"",type:"string"}},type:"object"},messages:{value:{en:{invalidRadiusDataField:"smart-chart: Invalid radiusDataField value at [{{index}}]",invalidSeries:"smart-chart: Invalid property: each series group must have a 'series' property which must be a valid array.",invalidSeriesGroups:"smart-chart: Invalid property: 'seriesGroups' property is required and must be a valid array.",invalidType:'smart-chart: Invalid serie type "{{type}}".',missingAxis:"smart-chart: seriesGroup[{{index}}] is missing {{axis}} definition.",missingReference:"smart-chart: Missing reference to {{files}}.",missingType:"smart-chart: Invalid property: each series group must have a valid 'type' property."}},type:"object",extend:!0},padding:{value:{bottom:{value:5,type:"number"},left:{value:5,type:"number"},right:{value:5,type:"number"},top:{value:5,type:"number"}},type:"object"},renderEngine:{value:"",allowedValues:["","SVG","HTML5"],type:"string"},rightToLeft:{value:!1,type:"boolean"},seriesGroups:{value:[],type:"any"},showBorderLine:{value:!0,type:"boolean"},showLegend:{value:!0,type:"boolean"},showToolTips:{value:!0,type:"boolean"},showToolTipsOnAllSeries:{value:!1,type:"boolean"},theme:{value:"light",allowedValues:["light","dark"],type:"string"},titlePadding:{value:{bottom:{value:10,type:"number"},left:{value:5,type:"number"},right:{value:5,type:"number"},top:{value:5,type:"number"}},type:"object"},toolTipBackground:{value:null,type:"string?"},toolTipFormatFunction:{value:null,type:"function?"},toolTipHideDelay:{value:4e3,type:"number"},toolTipLineColor:{value:null,type:"string?"},toolTipShowDelay:{value:300,type:"number"},valueAxis:{value:{alternatingBackgroundColor:{value:"",type:"string"},alternatingBackgroundColor2:{value:"",type:"string"},alternatingBackgroundOpacity:{value:1,type:"number"},axisSize:{value:null,type:"any"},bands:{value:null,type:"array?"},baselineValue:{value:0,type:"any"},customDraw:{value:!1,type:"boolean"},flip:{value:!1,type:"boolean"},formatFunction:{value:null,type:"function?"},formatSettings:{value:{dateFormat:{value:null,type:"string?"},decimalPlaces:{value:null,type:"number?"},decimalSeparator:{value:null,type:"string?"},negativeWithBrackets:{value:!1,type:"boolean"},prefix:{value:"",type:"string"},sufix:{value:"",type:"string"},thousandsSeparator:{value:null,type:"string?"}},type:"object"},gridLines:{value:{color:{value:"",type:"string"},custom:{value:null,type:"array?"},dashStyle:{value:"",type:"string"},lineWidth:{value:1,type:"number"},step:{value:null,type:"number?"},unitInterval:{value:null,type:"number?"},visible:{value:!0,type:"any"}},type:"object"},labels:{value:{angle:{value:0,type:"number"},autoRotate:{value:!1,type:"boolean"},class:{value:null,type:"string?"},custom:{value:null,type:"array?"},formatFunction:{value:null,type:"function?"},formatSettings:{value:{dateFormat:{value:null,type:"string?"},decimalPlaces:{value:null,type:"number?"},decimalSeparator:{value:null,type:"string?"},negativeWithBrackets:{value:!1,type:"boolean"},prefix:{value:"",type:"string"},sufix:{value:"",type:"string"},thousandsSeparator:{value:null,type:"string?"}},type:"object"},horizontalAlignment:{value:"center",allowedValues:["left","center","right"],type:"string"},offset:{value:{x:{value:0,type:"number"},y:{value:0,type:"number"}},type:"object"},rotationPoint:{value:"auto",allowedValues:["auto","left","center","right","topleft","topcenter","topright","bottomleft","bottomcenter","bottomright","centermiddle"],type:"string"},step:{value:null,type:"number?"},unitInterval:{value:null,type:"number?"},verticalAlignment:{value:"center",allowedValues:["top","center","bottom"],type:"string"},visible:{value:!0,type:"any"}},type:"object"},line:{value:{color:{value:"",type:"string"},dashStyle:{value:"",type:"string"},lineWidth:{value:1,type:"number"},visible:{value:!0,type:"any"}},type:"object"},logarithmicScale:{value:!1,type:"boolean"},logarithmicScaleBase:{value:10,type:"number"},maxValue:{value:NaN,type:"any"},minValue:{value:NaN,type:"any"},padding:{value:{bottom:{value:0,type:"number"},left:{value:0,type:"number"},right:{value:0,type:"number"},top:{value:0,type:"number"}},type:"object"},position:{value:"left",allowedValues:["left","right","top","bottom"],type:"string"},textRotationAngle:{value:null,type:"number?"},textRotationPoint:{value:"auto",allowedValues:["auto","left","center","right","topleft","topcenter","topright","bottomleft","bottomcenter","bottomright","centermiddle"],type:"string"},tickMarks:{value:{color:{value:"",type:"string"},custom:{value:null,type:"array?"},dashStyle:{value:"",type:"string"},lineWidth:{value:1,type:"number"},size:{value:4,type:"number"},step:{value:null,type:"number?"},unitInterval:{value:null,type:"number?"},visible:{value:!0,type:"any"}},type:"object"},title:{value:{class:{value:null,type:"string?"},horizontalAlignment:{value:"center",allowedValues:["left","center","right"],type:"string"},text:{value:"",type:"string"},verticalAlignment:{value:"center",allowedValues:["top","center","bottom"],type:"string"},visible:{value:!0,type:"boolean"}},type:"object"},unitInterval:{value:null,type:"number?"},valuesOnTicks:{value:!0,type:"boolean"},visible:{value:!0,type:"boolean"}},type:"object"},xAxis:{value:{alternatingBackgroundColor:{value:"",type:"string"},alternatingBackgroundColor2:{value:"",type:"string"},alternatingBackgroundOpacity:{value:1,type:"number"},axisSize:{value:null,type:"any"},bands:{value:null,type:"array?"},baseUnit:{value:null,allowedValues:["year","month","day","hour","minute","second","millisecond",null],type:"string?"},customDraw:{value:!1,type:"boolean"},dataField:{value:"",type:"string"},dateFormat:{value:null,type:"string?"},displayText:{value:null,type:"string?"},flip:{value:!1,type:"boolean"},formatFunction:{value:null,type:"function?"},formatSettings:{value:{dateFormat:{value:null,type:"string?"},decimalPlaces:{value:null,type:"number?"},decimalSeparator:{value:null,type:"string?"},negativeWithBrackets:{value:!1,type:"boolean"},prefix:{value:"",type:"string"},sufix:{value:"",type:"string"},thousandsSeparator:{value:null,type:"string?"}},type:"object"},gridLines:{value:{color:{value:"",type:"string"},custom:{value:null,type:"array?"},dashStyle:{value:"",type:"string"},lineWidth:{value:1,type:"number"},step:{value:null,type:"number?"},unitInterval:{value:null,type:"number?"},visible:{value:!0,type:"any"}},type:"object"},labels:{value:{angle:{value:0,type:"number"},autoRotate:{value:!1,type:"boolean"},class:{value:null,type:"string?"},custom:{value:null,type:"array?"},formatFunction:{value:null,type:"function?"},formatSettings:{value:{dateFormat:{value:null,type:"string?"},decimalPlaces:{value:null,type:"number?"},decimalSeparator:{value:null,type:"string?"},negativeWithBrackets:{value:!1,type:"boolean"},prefix:{value:"",type:"string"},sufix:{value:"",type:"string"},thousandsSeparator:{value:null,type:"string?"}},type:"object"},horizontalAlignment:{value:"center",allowedValues:["left","center","right"],type:"string"},offset:{value:{x:{value:0,type:"number"},y:{value:0,type:"number"}},type:"object"},rotationPoint:{value:"auto",allowedValues:["auto","left","center","right","topleft","topcenter","topright","bottomleft","bottomcenter","bottomright","centermiddle"],type:"string"},step:{value:null,type:"number?"},unitInterval:{value:null,type:"number?"},verticalAlignment:{value:"center",allowedValues:["top","center","bottom"],type:"string"},visible:{value:!0,type:"any"}},type:"object"},line:{value:{color:{value:"",type:"string"},dashStyle:{value:"",type:"string"},lineWidth:{value:1,type:"number"},visible:{value:!0,type:"any"}},type:"object"},logarithmicScale:{value:!1,type:"boolean"},logarithmicScaleBase:{value:10,type:"number"},maxValue:{value:NaN,type:"any"},minValue:{value:NaN,type:"any"},padding:{value:{bottom:{value:0,type:"number"},left:{value:0,type:"number"},right:{value:0,type:"number"},top:{value:0,type:"number"}},type:"object"},position:{value:"bottom",allowedValues:["bottom","top","left","right"],type:"string"},rangeSelector:{value:{backgroundColor:{value:null,type:"string?"},backgroundImage:{value:"",type:"string"},baseUnit:{value:null,allowedValues:["year","month","day","hour","minute","second","millisecond",null],type:"string?"},borderLineColor:{value:null,type:"string?"},borderLineWidth:{value:null,type:"number?"},caption:{value:"",type:"string"},colorScheme:{value:null,type:"string?"},columnSeriesOverlap:{value:!1,type:"boolean"},columnsGapPercent:{value:25,type:"number"},dataField:{value:null,type:"string?"},description:{value:"",type:"string"},greyScale:{value:null,type:"boolean?"},gridLines:{value:{color:{value:"",type:"string"},custom:{value:null,type:"array?"},dashStyle:{value:"",type:"string"},lineWidth:{value:1,type:"number"},step:{value:null,type:"number?"},unitInterval:{value:null,type:"number?"},visible:{value:!0,type:"any"}},type:"object"},labels:{value:{angle:{value:0,type:"number"},autoRotate:{value:!1,type:"boolean"},class:{value:null,type:"string?"},custom:{value:null,type:"array?"},formatFunction:{value:null,type:"function?"},formatSettings:{value:{dateFormat:{value:null,type:"string?"},decimalPlaces:{value:null,type:"number?"},decimalSeparator:{value:null,type:"string?"},negativeWithBrackets:{value:!1,type:"boolean"},prefix:{value:"",type:"string"},sufix:{value:"",type:"string"},thousandsSeparator:{value:null,type:"string?"}},type:"object"},horizontalAlignment:{value:"center",allowedValues:["left","center","right"],type:"string"},offset:{value:{x:{value:0,type:"number"},y:{value:0,type:"number"}},type:"object"},rotationPoint:{value:"auto",allowedValues:["auto","left","center","right","topleft","topcenter","topright","bottomleft","bottomcenter","bottomright","centermiddle"],type:"string"},step:{value:null,type:"number?"},unitInterval:{value:null,type:"number?"},verticalAlignment:{value:"center",allowedValues:["top","center","bottom"],type:"string"},visible:{value:!0,type:"any"}},type:"object"},maxValue:{value:NaN,type:"any"},minValue:{value:NaN,type:"any"},padding:{value:{bottom:{value:0,type:"number"},left:{value:0,type:"number"},right:{value:0,type:"number"},top:{value:0,type:"number"}},type:"object"},position:{value:null,allowedValues:["bottom","top","left","right"],type:"string?"},renderTo:{value:null,type:"any"},rightToLeft:{value:null,type:"boolean?"},seriesGapPercent:{value:10,type:"number"},seriesGroups:{value:null,type:"array?"},serieType:{value:"area",type:"string"},showBorderLine:{value:null,type:"boolean?"},size:{value:null,type:"number?"},skipOverlappingPoints:{value:!0,type:"boolean"},titlePadding:{value:{bottom:{value:10,type:"number"},left:{value:5,type:"number"},right:{value:5,type:"number"},top:{value:5,type:"number"}},type:"object"},unitInterval:{value:null,type:"number?"},valueAxis:{value:{alternatingBackgroundColor:{value:"",type:"string"},alternatingBackgroundColor2:{value:"",type:"string"},alternatingBackgroundOpacity:{value:1,type:"number"},axisSize:{value:null,type:"any"},bands:{value:null,type:"array?"},baselineValue:{value:0,type:"any"},customDraw:{value:!1,type:"boolean"},flip:{value:!1,type:"boolean"},formatFunction:{value:null,type:"function?"},formatSettings:{value:{dateFormat:{value:null,type:"string?"},decimalPlaces:{value:null,type:"number?"},decimalSeparator:{value:null,type:"string?"},negativeWithBrackets:{value:!1,type:"boolean"},prefix:{value:"",type:"string"},sufix:{value:"",type:"string"},thousandsSeparator:{value:null,type:"string?"}},type:"object"},gridLines:{value:{color:{value:"",type:"string"},custom:{value:null,type:"array?"},dashStyle:{value:"",type:"string"},lineWidth:{value:1,type:"number"},step:{value:null,type:"number?"},unitInterval:{value:null,type:"number?"},visible:{value:!0,type:"any"}},type:"object"},labels:{value:{angle:{value:0,type:"number"},autoRotate:{value:!1,type:"boolean"},class:{value:null,type:"string?"},custom:{value:null,type:"array?"},formatFunction:{value:null,type:"function?"},formatSettings:{value:{dateFormat:{value:null,type:"string?"},decimalPlaces:{value:null,type:"number?"},decimalSeparator:{value:null,type:"string?"},negativeWithBrackets:{value:!1,type:"boolean"},prefix:{value:"",type:"string"},sufix:{value:"",type:"string"},thousandsSeparator:{value:null,type:"string?"}},type:"object"},horizontalAlignment:{value:"center",allowedValues:["left","center","right"],type:"string"},offset:{value:{x:{value:0,type:"number"},y:{value:0,type:"number"}},type:"object"},rotationPoint:{value:"auto",allowedValues:["auto","left","center","right","topleft","topcenter","topright","bottomleft","bottomcenter","bottomright","centermiddle"],type:"string"},step:{value:null,type:"number?"},unitInterval:{value:null,type:"number?"},verticalAlignment:{value:"center",allowedValues:["top","center","bottom"],type:"string"},visible:{value:!0,type:"any"}},type:"object"},line:{value:{color:{value:"",type:"string"},dashStyle:{value:"",type:"string"},lineWidth:{value:1,type:"number"},visible:{value:!0,type:"any"}},type:"object"},logarithmicScale:{value:!1,type:"boolean"},logarithmicScaleBase:{value:10,type:"number"},maxValue:{value:NaN,type:"any"},minValue:{value:NaN,type:"any"},padding:{value:{bottom:{value:0,type:"number"},left:{value:0,type:"number"},right:{value:0,type:"number"},top:{value:0,type:"number"}},type:"object"},position:{value:"left",allowedValues:["left","right","top","bottom"],type:"string"},textRotationAngle:{value:null,type:"number?"},textRotationPoint:{value:"auto",allowedValues:["auto","left","center","right","topleft","topcenter","topright","bottomleft","bottomcenter","bottomright","centermiddle"],type:"string"},tickMarks:{value:{color:{value:"",type:"string"},custom:{value:null,type:"array?"},dashStyle:{value:"",type:"string"},lineWidth:{value:1,type:"number"},size:{value:4,type:"number"},step:{value:null,type:"number?"},unitInterval:{value:null,type:"number?"},visible:{value:!0,type:"any"}},type:"object"},title:{value:{class:{value:null,type:"string?"},horizontalAlignment:{value:"center",allowedValues:["left","center","right"],type:"string"},text:{value:"",type:"string"},verticalAlignment:{value:"center",allowedValues:["top","center","bottom"],type:"string"},visible:{value:!0,type:"boolean"}},type:"object"},unitInterval:{value:null,type:"number?"},valuesOnTicks:{value:!0,type:"boolean"},visible:{value:!1,type:"boolean"}},type:"object"},visible:{value:!1,type:"boolean"}},type:"object"},textRotationAngle:{value:null,type:"number?"},textRotationPoint:{value:"auto",allowedValues:["auto","left","center","right","topleft","topcenter","topright","bottomleft","bottomcenter","bottomright","centermiddle"],type:"string"},tickMarks:{value:{color:{value:"",type:"string"},custom:{value:null,type:"array?"},dashStyle:{value:"",type:"string"},lineWidth:{value:1,type:"number"},size:{value:4,type:"number"},step:{value:null,type:"number?"},unitInterval:{value:null,type:"number?"},visible:{value:!0,type:"any"}},type:"object"},title:{value:{class:{value:null,type:"string?"},horizontalAlignment:{value:"center",allowedValues:["left","center","right"],type:"string"},text:{value:"",type:"string"},verticalAlignment:{value:"center",allowedValues:["top","center","bottom"],type:"string"},visible:{value:!0,type:"boolean"}},type:"object"},toolTipFormatFunction:{value:null,type:"function?"},toolTipFormatSettings:{value:{dateFormat:{value:null,type:"string?"},decimalPlaces:{value:null,type:"number?"},decimalSeparator:{value:null,type:"string?"},negativeWithBrackets:{value:!1,type:"boolean"},prefix:{value:"",type:"string"},sufix:{value:"",type:"string"},thousandsSeparator:{value:null,type:"string?"}},type:"object"},type:{value:"auto",allowedValues:["auto","date","basic","linear"],type:"string"},unitInterval:{value:null,type:"number?"},valuesOnTicks:{value:!0,type:"boolean"},visible:{value:!0,type:"boolean"}},type:"object"}}}},{key:"listeners",get:function(){return{click:"_clickHandler",down:"_downMoveHandler",mouseleave:"_mouseleaveHandler",move:"_moveHandler",resize:"_resizeHandler","document.move":"_downMoveHandler","document.up":"_documentUpHandler"}}},{key:"requires",get:function(){return{"Smart.Utilities.Draw":"smart.draw.js"}}},{key:"styleUrls",get:function(){return["smart.chart.css"]}}],(h=[{key:"_getFormatSettings",value:function(e,t){if(!e)return null;var i=e[t||"formatSettings"];return i&&(i.dateFormat||null!==i.decimalPlaces||i.decimalSeparator||i.negativeWithBrackets||i.prefix||i.sufix||i.thousandsSeparator)?i:null}},{key:"template",value:function(){return'<div role="presentation"></div>'}},{key:"ready",value:function(){s(o(t.prototype),"ready",this).call(this),this.checkLicense()}},{key:"render",value:function(){this._observeSeriesGroups(),this._isTouchDevice=Smart.Utilities.Core.isMobile,this._setDefaults(),this._createColorsCache(),this.refresh(),this._setAriaProperties(),s(o(t.prototype),"render",this).call(this)}},{key:"detached",value:function(){s(o(t.prototype),"detached",this).call(this),this._ttEl&&this._ttEl.box&&this._ttEl.box.remove(),delete this._ttEl}},{key:"_setAriaProperties",value:function(){}},{key:"_observeSeriesGroups",value:function(){var e=this;function t(t){e.context!==e&&t.newValue!==t.oldValue&&e.update()}e._validateSeriesGroups(),e.seriesGroups=new Smart.ObservableArray(e.seriesGroups),e.seriesGroups.canNotify=!0;for(var i=0;i<e.seriesGroups.length;i++)e.seriesGroups[i].series=new Smart.ObservableArray(e.seriesGroups[i].series),e.seriesGroups[i].series.canNotify=!0,e.seriesGroups[i].series.notify(t);e.seriesGroups.notify(t)}},{key:"_downMoveHandler",value:function(e){var t=e.originalEvent.target;this.shadowRoot&&t===this&&(t=e.originalEvent.composedPath()[0]);var i=t.closest(".smart-chart-range-selector");if(i){var r=i.firstElementChild,a=r.parentChart;this!==r&&this!==a||a["_onSliderMouse"+e.type.slice(0,1).toUpperCase()+e.type.slice(1)](e)}}},{key:"_documentUpHandler",value:function(e){this._draggingRangeSelector&&this._onSliderMouseUp(e)}},{key:"_setDefaults",value:function(){this.axisPadding=5,this.enableEvents=!0,this.enableSampling=!0,this._itemsToggleState=[],this._isToggleRefresh=!1,this._isSelectorRefresh=!1,this._sliders=[],this._selectorRange=[],this._rangeSelectorInstances={},this._resizeState={},this._isRangeSelectorInstance=this._isRangeSelectorInstance||!1,this._renderData={},this._smartPlot=null,this._animTickInt=50,this._seriesTypes=["line","stackedline","stackedline100","spline","stackedspline","stackedspline100","stepline","stackedstepline","stackedstepline100","area","stackedarea","stackedarea100","splinearea","stackedsplinearea","stackedsplinearea100","steparea","stackedsteparea","stackedsteparea100","rangearea","splinerangearea","steprangearea","column","stackedcolumn","stackedcolumn100","rangecolumn","scatter","stackedscatter","stackedscatter100","bubble","stackedbubble","stackedbubble100","pie","donut","candlestick","ohlc","waterfall","stackedwaterfall"],this.colorSchemes=[{name:"scheme01",colors:["#307DD7","#AA4643","#89A54E","#71588F","#4198AF"]},{name:"scheme02",colors:["#7FD13B","#EA157A","#FEB80A","#00ADDC","#738AC8"]},{name:"scheme03",colors:["#E8601A","#FF9639","#F5BD6A","#599994","#115D6E"]},{name:"scheme04",colors:["#D02841","#FF7C41","#FFC051","#5B5F4D","#364651"]},{name:"scheme05",colors:["#25A0DA","#309B46","#8EBC00","#FF7515","#FFAE00"]},{name:"scheme06",colors:["#0A3A4A","#196674","#33A6B2","#9AC836","#D0E64B"]},{name:"scheme07",colors:["#CC6B32","#FFAB48","#FFE7AD","#A7C9AE","#888A63"]},{name:"scheme08",colors:["#3F3943","#01A2A6","#29D9C2","#BDF271","#FFFFA6"]},{name:"scheme09",colors:["#1B2B32","#37646F","#A3ABAF","#E1E7E8","#B22E2F"]},{name:"scheme10",colors:["#5A4B53","#9C3C58","#DE2B5B","#D86A41","#D2A825"]},{name:"scheme11",colors:["#993144","#FFA257","#CCA56A","#ADA072","#949681"]},{name:"scheme12",colors:["#105B63","#EEEAC5","#FFD34E","#DB9E36","#BD4932"]},{name:"scheme13",colors:["#BBEBBC","#F0EE94","#F5C465","#FA7642","#FF1E54"]},{name:"scheme14",colors:["#60573E","#F2EEAC","#BFA575","#A63841","#BFB8A3"]},{name:"scheme15",colors:["#444546","#FFBB6E","#F28D00","#D94F00","#7F203B"]},{name:"scheme16",colors:["#583C39","#674E49","#948658","#F0E99A","#564E49"]},{name:"scheme17",colors:["#142D58","#447F6E","#E1B65B","#C8782A","#9E3E17"]},{name:"scheme18",colors:["#4D2B1F","#635D61","#7992A2","#97BFD5","#BFDCF5"]},{name:"scheme19",colors:["#844341","#D5CC92","#BBA146","#897B26","#55591C"]},{name:"scheme20",colors:["#56626B","#6C9380","#C0CA55","#F07C6C","#AD5472"]},{name:"scheme21",colors:["#96003A","#FF7347","#FFBC7B","#FF4154","#642223"]},{name:"scheme22",colors:["#5D7359","#E0D697","#D6AA5C","#8C5430","#661C0E"]},{name:"scheme23",colors:["#16193B","#35478C","#4E7AC7","#7FB2F0","#ADD5F7"]},{name:"scheme24",colors:["#7B1A25","#BF5322","#9DA860","#CEA457","#B67818"]},{name:"scheme25",colors:["#0081DA","#3AAFFF","#99C900","#FFEB3D","#309B46"]},{name:"scheme26",colors:["#0069A5","#0098EE","#7BD2F6","#FFB800","#FF6800"]},{name:"scheme27",colors:["#FF6800","#A0A700","#FF8D00","#678900","#0069A5"]},{name:"scheme28",colors:["#3A43BA","#281E5D","#48AAAD","#0492C2","#1E456E","#59788D","#52B2C0","#82EDFD"]},{name:"scheme29",colors:["#003F5C","#BC5090","#58508D","#FF6361","#FFA600"]},{name:"scheme30",colors:["#16736F","#A2D56A","#1C515C","#62B773","#EEEF63","#1F313F","#309577"]},{name:"scheme31",colors:["#74CC66","#191A4D","#2D867A","#EEE3CD","#224D19","#0D261B","#5771C7","#B6D7E7","#206052","#6B5724","#C3AF4B","#603620","#536722","#B6E7B9","#34819D","#94ACDB"]},{name:"scheme32",colors:["#87C5FF","#5B5B60","#9BE076","#F7A384","#7479D3","#F13A80","#E4D388","#2BC6B2","#F45B14"]}]}},{key:"_clickHandler",value:function(e){var t=this;if(!t.disabled&&!t._isRangeSelectorInstance){var i=e.pageX||e.clientX||e.screenX,r=e.pageY||e.clientY||e.screenY,a=t.getBoundingClientRect();t._isTouchDevice&&(i=e.pageX,r=e.pageY),i-=a.left,r-=a.top,t._mouseX=i,t._mouseY=r,!isNaN(t._lastClickTs)&&(new Date).valueOf()-t._lastClickTs<100||(this._hostClickTimer=setTimeout((function(){if(t._isTouchDevice||(t._cancelTooltipTimer(),t._hideToolTip(),t._unselect()),t._pointMarker&&t._pointMarker.element){var i=t.seriesGroups[t._pointMarker.gidx],r=i.series[t._pointMarker.sidx];e.stopImmediatePropagation(),t._raiseItemEvent("click",i,r,t._pointMarker.iidx)}}),100),"HTML5"===t.renderEngine&&t._canvasClickHandler(i,r))}}},{key:"_canvasClickHandler",value:function(e,t){var i,r=this.renderer._elements;for(var a in r)if(r.hasOwnProperty(a)&&"0"!==a){var n=r[a];if(t>n.y&&t<n.y+n.height&&e>n.x&&e<n.x+n.width){i=n;break}}if(i&&i.purpose&&"legend-toggle"===i.purpose){var s=i.data;this._toggleSerie(s.groupIndex,s.seriesIndex,s.itemIndex)}}},{key:"_mouseleaveHandler",value:function(){if(!this.disabled&&!this._isRangeSelectorInstance){var e=this._mouseX,t=this._mouseY,i=this._plotRect;i&&e>=i.x&&e<=i.x+i.width&&t>=i.y&&t<=i.y+i.height||(this._cancelTooltipTimer(),this._hideToolTip(0),this._unselect())}}},{key:"_moveHandler",value:function(e){if(!this.disabled){if("touchmove"===e.originalEvent.type&&e.originalEvent.preventDefault(),this._isRangeSelectorInstance){var t=this.parentChart;null===t.xAxis.rangeSelector.renderTo&&(t._unselect(),t._hideToolTip())}else this.style.cursor="default";var i=e.pageX||e.clientX||e.screenX,r=e.pageY||e.clientY||e.screenY,a=this.getBoundingClientRect();this._isTouchDevice&&(i=e.pageX,r=e.pageY),i-=a.left,r-=a.top,this.onmousemove(i,r)}}},{key:"_resizeHandler",value:function(){var e=this.animation;this._isRangeSelectorInstance||(this.animation="none",this.refresh(),this.animation=e)}},{key:"propertyChangedHandler",value:function(e,t,i){switch(e){case"animation":case"theme":this._ttEl&&this._ttEl.box.setAttribute(e,i);break;case"seriesGroups":this._observeSeriesGroups();break;case"xAxis_rangeSelector_renderTo":if(null===i){var r=t.getElementsByClassName("smart-chart-range-selector")[0];r.parentElement.removeChild(r)}}this.refresh()}},{key:"_initRenderer",value:function(){this._draw=new Smart.Utilities.Draw(this.$.content,this.renderEngine),this.renderer=this._draw.renderer,this._smartPlot||(this._smartPlot=new Smart.Utilities.Plot(this.renderer)),this.$.content.firstElementChild.setAttribute("role","presentation")}},{key:"_internalRefresh",value:function(){if(this.offsetWidth||this.offsetHeight||this.getClientRects().length){this._stopAnimations(),this.renderer&&(this._isToggleRefresh||this._isUpdate)||(this._hideToolTip(0),this.$.content.innerHTML="",this._initRenderer());var e=this.renderer;if(e){var t=e.getRect();this._render({x:1,y:1,width:t.width,height:t.height}),this.$.fireEvent("refreshBegin",{instance:this}),e instanceof Smart.Utilities.HTML5Renderer&&e.refresh(),this._isUpdate=!1,this.$.fireEvent("refreshEnd",{instance:this})}}}},{key:"saveAsPNG",value:function(e){return this._saveAsImage("png",e)}},{key:"saveAsJPEG",value:function(e){return this._saveAsImage("jpeg",e)}},{key:"saveAsPDF",value:function(e,t){return this._saveAsImage("pdf",e,t)}},{key:"print",value:function(){return this._saveAsImage("print")}},{key:"_saveAsImage",value:function(e,t,i){return this._draw._widgetToImage(this,e,t,this._hasRangeSelector?this._selectorSaveAsImageCallback:void 0,i)}},{key:"_selectorSaveAsImageCallback",value:function(e,t){for(var i=e,r=0;r<i.seriesGroups.length;r++){var a=i._getXAxis(r);if(a&&a.rangeSelector&&a.rangeSelector.visible&&!a.rangeSelector.renderTo){var n=i._rangeSelectorInstances[r];if(n){var s=n.renderer.getRect(),o=n.renderer.getContainer().getElementsByTagName("canvas")[0].getContext("2d"),l=i._sliders[r],h="horizontal"===i.seriesGroups[r].orientation,u=h?"height":"width",d=h?"width":"height",c=h?"y":"x",f=h?"x":"y",p={};p[c]=l.startOffset+l.rect[c],p[f]=l.rect[f],p[u]=l.endOffset-l.startOffset,p[d]=l.rect[d];var m=a.rangeSelector.colorSelectedRange||"blue",v=a.rangeSelector.colorRangeLine||"grey",y=[];y.push(n.renderer.rect(p.x,p.y,p.width,p.height,{fill:m,opacity:.1}));var g=i.renderer;h?(y.push(n.renderer.line(g._ptrnd(l.rect.x+l.rect.width),g._ptrnd(l.rect.y),g._ptrnd(l.rect.x+l.rect.width),g._ptrnd(p.y),{stroke:v,opacity:.5})),y.push(n.renderer.line(g._ptrnd(l.rect.x+l.rect.width),g._ptrnd(p.y+p.height),g._ptrnd(l.rect.x+l.rect.width),g._ptrnd(l.rect.y+l.rect.height),{stroke:v,opacity:.5})),y.push(n.renderer.line(g._ptrnd(l.rect.x),g._ptrnd(p.y),g._ptrnd(l.rect.x+l.rect.width),g._ptrnd(p.y),{stroke:v,opacity:.5})),y.push(n.renderer.line(g._ptrnd(l.rect.x),g._ptrnd(p.y+p.height),g._ptrnd(l.rect.x+l.rect.width),g._ptrnd(p.y+p.height),{stroke:v,opacity:.5}))):(y.push(n.renderer.line(g._ptrnd(l.rect.x),g._ptrnd(l.rect.y),g._ptrnd(p.x),g._ptrnd(l.rect.y),{stroke:v,opacity:.5})),y.push(n.renderer.line(g._ptrnd(p.x+p.width),g._ptrnd(l.rect.y),g._ptrnd(l.rect.x+l.rect.width),g._ptrnd(l.rect.y),{stroke:v,opacity:.5})),y.push(n.renderer.line(g._ptrnd(p.x),g._ptrnd(l.rect.y),g._ptrnd(p.x),g._ptrnd(l.rect.y+l.rect.height),{stroke:v,opacity:.5})),y.push(n.renderer.line(g._ptrnd(p.x+p.width),g._ptrnd(l.rect.y),g._ptrnd(p.x+p.width),g._ptrnd(l.rect.y+l.rect.height),{stroke:v,opacity:.5}))),n.renderer.refresh();var _=o.getImageData(s.x,s.y,s.width,s.height),b=t.getContext("2d"),x=i.getBoundingClientRect(),w=n.getBoundingClientRect();b.putImageData(_,w.left-x.left,w.top-x.top,1,1,s.width,s.height);for(var S=0;S<y.length;S++)n.renderer.removeElement(y[S]);n.renderer.refresh()}}}return!0}},{key:"refresh",value:function(){this._internalRefresh()}},{key:"update",value:function(){this._isUpdate=!0,this._internalRefresh()}},{key:"clear",value:function(){this.caption="",this.description="",this.refresh()}},{key:"_validateSeriesGroups",value:function(){Array.isArray(this.seriesGroups)||this.seriesGroups instanceof Smart.ObservableArray||this.error(this.localize("invalidSeriesGroups"));for(var e=0;e<this.seriesGroups.length;e++){var t=this.seriesGroups[e];t.type||this.error(this.localize("missingType")),Array.isArray(t.series)||t.series instanceof Smart.ObservableArray||this.error(this.localize("invalidSeries"))}}},{key:"_render",value:function(e){var t=this.renderer;this._colorsCache.clear(),!this._isToggleRefresh&&this._isUpdate&&this._renderData&&this._renderDataClone(),this._renderData=[],t.clear(),this._unselect(),this._hideToolTip(0);var i=this.backgroundImage;this.style.backgroundImage=null==i||""===i?"":-1!==i.indexOf("(")?i:'url("'+i+'")',this._rect=e;var r=this.padding||{left:5,top:5,right:5,bottom:5},a=t.createClipRect(e),n=t.beginGroup();t.setClip(n,a);var s=t.rect(e.x,e.y,e.width-2,e.height-2);if(null==i||""===i?t.attr(s,{fill:this.backgroundColor||this._getThemeColor("background")}):t.attr(s,{fill:"transparent"}),!1!==this.showBorderLine){var o=this.borderLineWidth;(isNaN(o)||o<0||o>10)&&(o=1),t.attr(s,{"stroke-width":o,stroke:this.borderLineColor||this._getThemeColor("line")})}"function"==typeof this.drawBefore&&this.drawBefore(t,e);var l={x:r.left,y:r.top,width:e.width-r.left-r.right,height:e.height-r.top-r.bottom};this._paddedRect=l;var h,u=this.titlePadding||{left:2,top:2,right:2,bottom:2};this.caption&&this.caption.length>0&&(h=t.measureText(this.caption,0,{class:"smart-chart-title-text"}),t.text(this.caption,l.x+u.left,l.y+u.top,l.width-(u.left+u.right),h.height,0,{class:"smart-chart-title-text"},!0,"center","center"),l.y+=h.height,l.height-=h.height),this.description&&this.description.length>0&&(h=t.measureText(this.description,0,{class:"smart-chart-title-description"}),t.text(this.description,l.x+u.left,l.y+u.top,l.width-(u.left+u.right),h.height,0,{class:"smart-chart-title-description"},!0,"center","center"),l.y+=h.height,l.height-=h.height),(this.caption||this.description)&&(l.y+=u.bottom+u.top,l.height-=u.bottom+u.top);var d={x:l.x,y:l.y,width:l.width,height:l.height};this._plotRect=d,this._buildStats(d);for(var c,f=this._isPieOnlySeries(),p=this.seriesGroups,m={xAxis:{},valueAxis:{}},v=0;v<p.length&&!f;v++)if("pie"!==p[v].type&&"donut"!==p[v].type){(me=this._getXAxis(v))||this.error(this.localize("missingAxis",{index:v,axis:"xAxis"}));var y=me===this._getXAxis()?-1:v;m.xAxis[y]=0}var g=this.axisPadding;isNaN(g)&&(g=5);for(var _={left:0,right:0,leftCount:0,rightCount:0},b=[],x=0;x<p.length;x++){var w=p[x];if("pie"!==w.type&&"donut"!==w.type&&!0!==w.spider&&!0!==w.polar){c="horizontal"===w.orientation;var S=(me=this._getXAxis(x))===this._getXAxis()?-1:x,k=(F=this._getValueAxis(x))===this._getValueAxis()?-1:x,C=c?me.axisSize:F.axisSize,N={x:0,y:d.y,width:d.width,height:d.height},A=c?this._getXAxis(x).position:F.position;C&&"auto"!==C||(c?(C=this._renderXAxis(x,N,!0,d).width,1==(1&m.xAxis[S])?C=0:C>0&&(m.xAxis[S]|=1)):(C=this._renderValueAxis(x,N,!0,d).width,1==(1&m.valueAxis[k])?C=0:C>0&&(m.valueAxis[k]|=1))),"left"!==A&&!0===this.rightToLeft&&(A="right"),"right"!==A&&(A="left"),_[A+"Count"]>0&&_[A]>0&&C>0&&(_[A]+=g),b.push({width:C,position:A,xRel:_[A]}),_[A]+=C,_[A+"Count"]++}else b.push({width:0,position:0,xRel:0})}for(var M=Math.max(1,Math.max(e.width,e.height)),T={top:0,bottom:0,topCount:0,bottomCount:0},D=[],O=0;O<p.length;O++){var E=p[O];if("pie"!==E.type&&"donut"!==E.type&&!0!==E.spider&&!0!==E.polar){c="horizontal"===E.orientation,k=(F=this._getValueAxis(O))===this._getValueAxis()?-1:O;var F,P=(me=this._getXAxis(O))===this._getXAxis()?-1:O,I=c?F.axisSize:me.axisSize;A=c?F.position:me.position,I&&"auto"!==I||(c?(I=this._renderValueAxis(O,{x:0,y:0,width:M,height:0},!0,d).height,2==(2&m.valueAxis[k])?I=0:I>0&&(m.valueAxis[k]|=2)):(I=this._renderXAxis(O,{x:0,y:0,width:M,height:0},!0).height,2==(2&m.xAxis[P])?I=0:I>0&&(m.xAxis[P]|=2))),"top"!==A&&(A="bottom"),T[A+"Count"]>0&&T[A]>0&&I>0&&(T[A]+=g),D.push({height:I,position:A,yRel:T[A]}),T[A]+=I,T[A+"Count"]++}else D.push({height:0,position:0,yRel:0})}this._createAnimationGroup("series");var L=!1!==this.showLegend,R=this._legendLayout,B=L?this._renderLegend(R?this._rect:l,!0):{width:0,height:0};if(!R||isNaN(this.legendLayout.left)&&isNaN(this.legendLayout.top)||(B={width:0,height:0}),l.height<T.top+T.bottom+B.height||l.width<_.left+_.right)t.endGroup();else{d.height-=T.top+T.bottom+B.height,d.x+=_.left,d.width-=_.left+_.right,d.y+=T.top;var H=[];if(!f)for(var V=0;V<p.length;V++){var G=p[V];if(!0!==G.polar&&!0!==G.spider&&"pie"!==G.type&&"donut"!==G.type){c="horizontal"===G.orientation;var z=this._getXAxis(V)===this._getXAxis()?-1:V,j=(k=this._getValueAxis(V)===this._getValueAxis()?-1:V,{x:d.x,y:0,width:d.width,height:D[V].height});if("top"!==D[V].position?j.y=d.y+d.height+D[V].yRel:j.y=d.y-D[V].yRel-D[V].height,c){if(4==(4&m.valueAxis[k]))continue;if(!this._isGroupVisible(V))continue;this._renderValueAxis(V,j,!1,d),m.valueAxis[k]|=4}else{if(H.push(j),4==(4&m.xAxis[z]))continue;if(!this._isGroupVisible(V))continue;this._renderXAxis(V,j,!1,d),m.xAxis[z]|=4}}}if(L){var U=this._legendLayout,$=U?this._rect:l,W=l.x+this.renderer._ptrnd((l.width-B.width)/2),X=d.y+d.height+T.bottom,Y=(C=l.width,B.height);U&&(isNaN(this.legendLayout.left)||(W=this.legendLayout.left),isNaN(this.legendLayout.top)||(X=this.legendLayout.top),isNaN(this.legendLayout.width)||(C=this.legendLayout.width),isNaN(this.legendLayout.height)||(Y=this.legendLayout.height)),W+C>$.x+$.width&&(C=$.x+$.width-W),X+Y>$.y+$.height&&(Y=$.y+$.height-X),this._renderLegend({x:W,y:X,width:C,height:Y})}if(this._hasHorizontalLines=!1,!f)for(var q=0;q<p.length;q++){var J=p[q];if(!0!==J.polar&&!0!==J.spider&&"pie"!==J.type&&"donut"!==J.type){c="horizontal"===p[q].orientation;var Z={x:d.x-b[q].xRel-b[q].width,y:d.y,width:b[q].width,height:d.height};if("left"!==b[q].position&&(Z.x=d.x+d.width+b[q].xRel),z=this._getXAxis(q)===this._getXAxis()?-1:q,k=this._getValueAxis(q)===this._getValueAxis()?-1:q,c){if(H.push(Z),8==(8&m.xAxis[z]))continue;if(!this._isGroupVisible(q))continue;this._renderXAxis(q,Z,!1,d),m.xAxis[z]|=8}else{if(8==(8&m.valueAxis[k]))continue;if(!this._isGroupVisible(q))continue;this._renderValueAxis(q,Z,!1,d),m.valueAxis[k]|=8}}}if(!(d.width<=0||d.height<=0)){this._plotRect={x:d.x,y:d.y,width:d.width,height:d.height};for(var Q=0;Q<p.length;Q++)this._drawPlotAreaLines(Q,!0,{gridLines:!1,tickMarks:!1,alternatingBackground:!0}),this._drawPlotAreaLines(Q,!1,{gridLines:!1,tickMarks:!1,alternatingBackground:!0});for(var K=0;K<p.length;K++)this._drawPlotAreaLines(K,!0,{gridLines:!0,tickMarks:!0,alternatingBackground:!1}),this._drawPlotAreaLines(K,!1,{gridLines:!0,tickMarks:!0,alternatingBackground:!1});for(var ee=!1,te=0;te<p.length&&!ee;te++){var ie=p[te];if(void 0!==ie.annotations||"function"==typeof ie.draw||"function"==typeof ie.drawBefore){ee=!0;break}}var re=t.beginGroup();if(this.clip&&!ee){var ae=t.createClipRect({x:d.x-2,y:d.y,width:d.width+4,height:d.height});t.setClip(re,ae)}for(var ne=0;ne<p.length;ne++){var se=p[ne],oe=!1;for(var le in this._seriesTypes)if(this._seriesTypes[le]===se.type){oe=!0;break}oe||this.error(this.localize("invalidType",{type:se.type})),"function"==typeof se.drawBefore&&se.drawBefore(t,e,ne,this),!0!==se.polar&&!0!==se.spider||-1===se.type.indexOf("pie")&&-1===se.type.indexOf("donut")&&this._renderSpiderAxis(ne,d),this._renderAxisBands(ne,d,!0),this._renderAxisBands(ne,d,!1)}for(var he=0;he<p.length;he++){var ue=p[he];if(this._isColumnType(ue.type)?this._renderColumnSeries(he,d):-1!==ue.type.indexOf("pie")||-1!==ue.type.indexOf("donut")?this._renderPieSeries(he,d):-1!==ue.type.indexOf("line")||-1!==ue.type.indexOf("area")?this._renderLineSeries(he,d):-1!==ue.type.indexOf("scatter")||-1!==ue.type.indexOf("bubble")?this._renderScatterSeries(he,d):-1===ue.type.indexOf("candlestick")&&-1===ue.type.indexOf("ohlc")||this._renderCandleStickSeries(he,d,-1!==ue.type.indexOf("ohlc")),ue.annotations){this._moduleAnnotations||this.error(this.localize("missingReference",{files:"smartchart.annotations.js"}));for(var de=0;de<ue.annotations.length;de++)this._renderAnnotation(he,ue.annotations[de],d)}"function"==typeof ue.draw&&ue.draw(t,e,he,this)}if(t.endGroup(),this.disabled){var ce=t.rect(e.x,e.y,e.width,e.height);t.attr(ce,{fill:"#777777",opacity:.5,stroke:"#00FFFFFF"})}"function"==typeof this.draw&&this.draw(t,e),t.endGroup(),this._startAnimation("series"),this._credits&&this._credits();for(var fe=!1,pe=0;pe<this.seriesGroups.length&&!fe;pe++){var me;(me=this._getXAxis(pe))&&me.rangeSelector&&me.rangeSelector.visible&&(fe=!0,this._hasRangeSelector=!0)}if(fe){this._moduleRangeSelector||this.error(this.localize("missingReference",{files:"smartchart.rangeselector.js"}));var ve=[];this._isSelectorRefresh||(this._rangeSelectorInstances={});for(var ye=0;ye<this.seriesGroups.length;ye++){var ge=this._getXAxis(ye);-1===ve.indexOf(ge)&&this._renderXAxisRangeSelector(ye,H[ye])&&ve.push(ge)}}}}}},{key:"_credits",value:function(){}},{key:"_isPieOnlySeries",value:function(){var e=this.seriesGroups;if(0===e.length)return!1;for(var t=0;t<e.length;t++)if("pie"!==e[t].type&&"donut"!==e[t].type)return!1;return!0}},{key:"_renderChartLegend",value:function(e,t,i,r){var a=this.renderer,n={x:t.x,y:t.y,width:t.width,height:t.height};n.width>=6&&(n.x+=3,n.width-=6),n.height>=6&&(n.y+=3,n.height-=6);for(var s={width:n.width,height:0},o=0,l=0,h=20,u=0,d=0,c=0;c<e.length;c++){var f=e[c].css;f||(f="smart-chart-legend-text"),h=20;var p=e[c].text,m=a.measureText(p,0,{class:f});m.height>h&&(h=m.height),m.width>d&&(d=m.width),r?(0!==c&&(l+=h),l>n.height&&(l=0,o+=d+20+10,d=m.width,s.width=o+d)):(0!==o&&(o+=10),o+20+m.width>n.width&&m.width<n.width&&(o=0,l+=h,h=20,u=n.width,s.height=l+h));var v=!1;if(m.width>n.width){v=!0;for(var y=n.width,g=(L=p).split(/\s+/),_=[],b="",x=0;x<g.length;x++){var w=b+(b.length>0?" ":"")+g[x];(N=this.renderer.measureText(w,0,{class:f})).width>y&&w.length>0&&b.length>0?(_.push({text:b}),b=g[x]):b=w,x+1===g.length&&_.push({text:b})}m.width=0;for(var S=0,k=0;k<_.length;k++){var C=_[k].text,N=this.renderer.measureText(C,0,{class:f});m.width=Math.max(m.width,N.width),S+=m.height}m.height=S}var A=o+m.width<n.width&&l+m.height<t.height;if(this._legendLayout&&(A=n.x+o+m.width<this._rect.x+this._rect.width&&n.y+l+m.height<this._rect.y+this._rect.height),!i&&A){var M=e[c].seriesIndex,T=e[c].groupIndex,D=e[c].itemIndex,O=e[c].fillColor,E=e[c].lineColor,F=this._isSerieVisible(T,M,D),P=a.beginGroup(),I=F?e[c].opacity:.1;if(v){for(var L=p,R=(y=n.width,g=L.split(/\s+/),0),B=[],H="",V=0;V<g.length;V++)w=H+(H.length>0?" ":"")+g[V],(N=this.renderer.measureText(w,0,{class:f})).width>y&&w.length>0&&H.length>0?(B.push({text:H,dy:R}),R+=N.height,H=g[V]):H=w,V+1===g.length&&B.push({text:H,dy:R});for(var G=0;G<B.length;G++)C=B[G].text,R=B[G].dy,N=this.renderer.measureText(C,0,{class:f}),r?this.renderer.text(C,n.x+o+15,n.y+l+R,m.width,h,0,{class:f},!1,"left","center"):this.renderer.text(C,n.x+o+15,n.y+l+R,m.width,h,0,{class:f},!1,"center","center");var z=a.rect(n.x+o,n.y+l+5+R/2,10,10);r&&(l+=R),this.renderer.attr(z,{fill:O,"fill-opacity":I,stroke:E,"stroke-width":1,"stroke-opacity":e[c].opacity})}else{var j=a.rect(n.x+o,n.y+l+5,10,10);this.renderer.attr(j,{fill:O,"fill-opacity":I,stroke:E,"stroke-width":1,"stroke-opacity":e[c].opacity,purpose:"legend-toggle",data:e[c]});var U=void 0;U=r?this.renderer.text(p,n.x+o+15,n.y+l,m.width,m.height+5,0,{class:f},!1,"left","center"):this.renderer.text(p,n.x+o+15,n.y+l,m.width,h,0,{class:f},!1,"center","center"),a.attr(U,{purpose:"legend-toggle",data:e[c]})}this.renderer.endGroup(),this._setLegendToggleHandler(T,M,D,P)}r||u<(o+=m.width+20)&&(u=o)}if(i)return s.height=this.renderer._ptrnd(l+h+5),s.width=this.renderer._ptrnd(u),s}},{key:"isSerieVisible",value:function(e,t,i){return this._isSerieVisible(e,t,i)}},{key:"_isSerieVisible",value:function(e,t,i){for(;this._itemsToggleState.length<e+1;)this._itemsToggleState.push([]);for(var r=this._itemsToggleState[e];r.length<t+1;)r.push(!!isNaN(i)||[]);var a=r[t];if(isNaN(i))return a;for(Array.isArray(a)||(r[t]=a=[]);a.length<i+1;)a.push(!0);return a[i]}},{key:"isGroupVisible",value:function(e){return this._isGroupVisible(e)}},{key:"_isGroupVisible",value:function(e){var t=!1,i=this.seriesGroups[e].series;if(!i)return t;for(var r=0;r<i.length;r++)if(this._isSerieVisible(e,r)){t=!0;break}return t}},{key:"_toggleSerie",value:function(e,t,i,r){var a=!this._isSerieVisible(e,t,i);void 0!==r&&(a=r);var n=this.seriesGroups[e],s=n.series[t];if(this.$.fireEvent("toggle",{state:a,seriesGroup:n,serie:s,elementIndex:i}),isNaN(i))this._itemsToggleState[e][t]=a;else{var o=this._itemsToggleState[e][t];for(Array.isArray(o)||(o=[]);o.length<i;)o.push(!0);o[i]=a}this._isToggleRefresh=!0,this.update(),this._isToggleRefresh=!1}},{key:"showSerie",value:function(e,t,i){this._toggleSerie(e,t,i,!0)}},{key:"hideSerie",value:function(e,t,i){this._toggleSerie(e,t,i,!1)}},{key:"_setLegendToggleHandler",value:function(e,t,i,r){var a=this.seriesGroups[e],n=a.series[t].enableSeriesToggle;if(null==n&&(n=!1!==a.enableSeriesToggle),n){var s=this;this.renderer.addHandler(r,"click",(function(){s._toggleSerie(e,t,i)}))}}},{key:"_renderLegend",value:function(e,t){for(var i=[],r=0;r<this.seriesGroups.length;r++){var a=this.seriesGroups[r];if(!1!==a.showLegend)for(var n=0;n<a.series.length;n++){var s=a.series[n];if(!1!==s.showLegend){var o=this._getSerieSettings(r,n),l=void 0;if("pie"!==a.type&&"donut"!==a.type){var h=s.legendFormatSettings||a.legendFormatSettings,u=s.legendFormatFunction||a.legendFormatFunction;l=this._formatValue(s.displayText||s.dataField||"",h,u,r,n,NaN);var d=this._getSeriesColors(r,n),c=this._get([s.legendFillColor,s.legendColor,d.fillColor]),f=this._get([s.legendLineColor,s.legendColor,d.lineColor]);i.push({groupIndex:r,seriesIndex:n,text:l,css:s.displayTextClass,fillColor:c,lineColor:f,opacity:o.opacity})}else for(var p=this._getXAxis(r),m=s.legendFormatSettings||a.legendFormatSettings||this._getFormatSettings(p)||this._getFormatSettings(s)||this._getFormatSettings(a),v=s.legendFormatFunction||a.legendFormatFunction||p.formatFunction||s.formatFunction||a.formatFunction,y=this._getDataLen(r),g=0;g<y;g++){l=this._getDataValue(g,s.displayText,r),l=this._formatValue(l,m,v,r,n,g);var _=this._getColors(r,n,g);i.push({groupIndex:r,seriesIndex:n,itemIndex:g,text:l,css:s.displayTextClass,fillColor:_.fillColor,lineColor:_.lineColor,opacity:o.opacity})}}}}return this._renderChartLegend(i,e,t,this._legendLayout&&"vertical"===this.legendLayout.flow)}},{key:"_getInterval",value:function(e,t){if(!e)return t;var i=this._get([e.unitInterval,t]);return isNaN(e.step)||null===e.step||(i=e.step*t),i}},{key:"_getOffsets",value:function(e,t,i,r,a,n,s,o,l){var h,u=this._getInterval(a[e],o),d=[];if((""===e||a[e].visible&&"custom"!==a[e].visible)&&(d=this._generateIntervalValues(r,u,o,s,l)),"labels"!==e){var c=s?n.left:0;if(!s&&o>1&&(c=n.left*(o+1)),1===d.length&&(c*=2),h=this._valuesToOffsets(d,t,r,i,n,!1,c),!s){var f=(n.left+n.right)*u/o;t.flip?h.unshift(h[0]+f):h.push(h[h.length-1]+f)}}else{var p=n.left;1===d.length&&(p*=2),h=this._valuesToOffsets(d,t,r,i,n,s,p)}var m=this._arraysToObjectsArray([d,h],["value","offset"]);if(t[e]&&t[e].custom)for(var v=this._objectsArraysToArray(t[e].custom,"value"),y=this._objectsArraysToArray(t[e].custom,"offset"),g=this._valuesToOffsets(v,t,r,i,n,s,n.left),_=0;_<t[e].custom.length;_++)m.push({value:v[_],offset:isNaN(y[_])?g[_]:y[_]});return m}},{key:"_renderXAxis",value:function(e,t,i,r){var a=this._getXAxis(e),n=this.seriesGroups[e],s="horizontal"===n.orientation,o={width:0,height:0},l=this._getAxisSettings(a);if(!a||!l.visible||"spider"===n.type)return o;if(!this._isGroupVisible(e)||this._isPieGroup(e))return o;for(var h=this._alignValuesWithTicks(e);this._renderData.length<e+1;)this._renderData.push({});this.rightToLeft&&(a.flip=!0);var u=s?t.height:t.width,d=this._calculateXOffsets(e,u),c=d.axisStats,f=a.rangeSelector&&a.rangeSelector.visible,p=0;f&&(this._moduleRangeSelector||this.error(this.localize("missingReference",{files:"smartchart.rangeselector.js"})),p=this._selectorGetSize(a));var m=s&&"right"===a.position||!s&&"top"===a.position;!i&&f&&(s?(t.width-=p,"right"!==a.position&&(t.x+=p)):(t.height-=p,"top"===a.position&&(t.y+=p)));var v={rangeLength:d.rangeLength,itemWidth:d.itemWidth,intervalWidth:d.intervalWidth,data:d,settings:l,isMirror:m,rect:t};this._renderData[e].xAxis=v;var y=c.interval;if(isNaN(y))return o;s&&(l.title.angle-=90,l.labels.angle-=90);var g,_,b=this._getInterval(l.gridLines,y),x=this._getInterval(l.tickMarks,y),w=this._getInterval(l.labels,y),S=c.min,k=c.max,C=d.padding,N=!0===a.flip||this.rightToLeft,A={min:S,max:k};c.logAxis.enabled&&(A.min=c.logAxis.minPow,A.max=c.logAxis.maxPow),"date"===a.type?(l.gridLines.offsets=this._generateDTOffsets(S,k,u,C,b,y,c.dateTimeUnit,h,NaN,!1,N),l.tickMarks.offsets=this._generateDTOffsets(S,k,u,C,x,y,c.dateTimeUnit,h,NaN,!1,N),g=this._generateDTOffsets(S,k,u,C,w,y,c.dateTimeUnit,h,NaN,!0,N)):(l.gridLines.offsets=this._getOffsets("gridLines",a,u,c,l,C,h,y),l.tickMarks.offsets=this._getOffsets("tickMarks",a,u,c,l,C,h,y),g=this._getOffsets("labels",a,u,c,l,C,h,y)),this._elementRenderInfo&&this._elementRenderInfo.length>e&&(_=this._elementRenderInfo[e].xAxis);var M,T=[];l.labels.formatFunction&&(M=l.labels.formatFunction);var D,O=this._getFormatSettings(l.labels);O&&(D=Object.assign({},O)),"date"===a.type&&(a.dateFormat&&!M?D?D.dateFormat=D.dateFormat||a.dateFormat:D={dateFormat:a.dateFormat}:M||D&&(!D||D.dateFormat)||(M=this._getDefaultDTFormatFn(a.baseUnit||"day")));for(var E=0;E<g.length;E++){var F=g[E].value,P=g[E].offset;if(!isNaN(P)){var I=void 0;"date"!==a.type&&c.useIndeces&&a.dataField&&(I=Math.round(F),null==(F=this._getDataValue(I,a.dataField,e))&&(F=""));var L=this._formatValue(F,D,M,e,void 0,I);null!=L&&""!==L.toString()||(isNaN(I)&&(I=E),I>=c.filterRange.min&&I<=c.filterRange.max&&(L=c.useIndeces?(c.min+I).toString():void 0===F?"":F.toString()));var R={key:F,text:L,targetX:P,x:P};_&&_.itemOffsets[F]&&(R.x=_.itemOffsets[F].x,R.y=_.itemOffsets[F].y),T.push(R)}}var B=this._getAnimProps(e),H=B.enabled&&T.length<500?B.duration:0;!1===this.enableAxisTextAnimation&&(H=0);var V={items:T,renderData:v},G=this._renderAxis(s,m,l,{x:t.x,y:t.y,width:t.width,height:t.height},r,y,!1,!0,V,i,H);return s?G.width+=p:G.height+=p,G}},{key:"_animateAxisText",value:function(e,t){for(var i=e.items,r=e.textSettings,a=0;a<i.length;a++){var n=i[a];if(n&&n.visible){var s=n.targetX,o=n.targetY;isNaN(n.x)||isNaN(n.y)||(s=n.x+(s-n.x)*t,o=n.y+(o-n.y)*t),n.element&&(this.renderer.removeElement(n.element),n.element=void 0),n.element=this.renderer.text(n.text,s,o,n.width,n.height,r.angle,{class:r.style},!1,r.halign,r.valign,r.textRotationPoint)}}}},{key:"_getPolarAxisCoords",value:function(e,t){var i=this.seriesGroups[e],r=t.x+this._draw.getNum([i.offsetX,t.width/2]),a=t.y+this._draw.getNum([i.offsetY,t.height/2]),n=Math.min(t.width,t.height),s=i.radius;this._isPercent(s)&&(s=parseFloat(s)/100*n/2),isNaN(s)&&(s=n/2*.6);var o=this._alignValuesWithTicks(e),l=this._get([i.startAngle,i.minAngle,0])-90;l=isNaN(l)?0:2*Math.PI*l/360;var h=this._get([i.endAngle,i.maxAngle,360])-90;if(l>(h=isNaN(h)?2*Math.PI:2*Math.PI*h/360)){var u=l;l=h,h=u}var d=this.renderer._rnd(Math.abs(l-h)/(2*Math.PI),.001,!0),c=2*Math.PI*s*d,f=this._calcGroupOffsets(e,t).xoffsets;if(f){var p,m=!(Math.abs(Math.abs(h-l)-2*Math.PI)>1e-5);if(i.spider){var v=this._getXAxisStats(e,this._getXAxis(e),c),y=v.interval;(isNaN(y)||0===y)&&(y=1);var g=(v.max-v.min)/y+(m?1:0);if((g=Math.round(g))>2){var _=Math.cos(Math.abs(h-l)/2/g);0===(_=this.renderer._rnd(_,.01))&&(_=1),(p=s/_)>s&&o&&(s=p)}}return{x:r,y:a,r:s=this.renderer._ptrnd(s),adjR:this._get([p,s]),itemWidth:f.itemWidth,rangeLength:f.rangeLength,valuesOnTicks:o,startAngle:l,endAngle:h,isClosedCircle:m,axisSize:c}}}},{key:"_toPolarCoord",value:function(e,t,i,r){var a=Math.abs(e.startAngle-e.endAngle)/(2*Math.PI),n=2*(i-t.x)*Math.PI*a/Math.max(1,t.width)+e.startAngle,s=(t.height+t.y-r)*e.r/Math.max(1,t.height),o=e.x+s*Math.cos(n),l=e.y+s*Math.sin(n);return{x:this.renderer._ptrnd(o),y:this.renderer._ptrnd(l)}}},{key:"_renderSpiderAxis",value:function(e,t){var i=this._getXAxis(e),r=this._getAxisSettings(i);if(i&&r.visible){var a=this.seriesGroups[e],n=this._getPolarAxisCoords(e,t);if(n){var s=this.renderer._ptrnd(n.x),o=this.renderer._ptrnd(n.y),l=n.adjR,h=n.startAngle,u=n.endAngle;if(!(l<1)){var d=this.renderer._rnd(Math.abs(h-u)/(2*Math.PI),.001,!0),c=2*Math.PI*l*d,f=n.isClosedCircle,p=this._renderData[e].xoffsets;if(p.rangeLength){var m=p.axisStats.interval;for((isNaN(m)||m<1)&&(m=1);this._renderData.length<e+1;)this._renderData.push({});var v={rangeLength:p.rangeLength,itemWidth:p.itemWidth,data:p,rect:t,settings:r};this._renderData[e].xAxis=v,this._renderData[e].polarCoords=n;for(var y=!0,g=0;g<e;g++){var _=this._renderData[g].polarCoords,b=this._getXAxis(g),x=!1;for(var w in n)if(n[w]!==_[w]){x=!0;break}x&&b===i||(y=!1)}var S,k,C=r.gridLines,N=r.tickMarks,A=r.labels,M=this._getInterval(C,m),T=this._getInterval(N,m),D=this._getInterval(A,m),O=this._alignValuesWithTicks(e),E=this.renderer,F=p.axisStats,P=F.min,I=F.max,L=this._getPaddingSize(p.axisStats,i,O,c,!0,f,!1),R=!0===i.flip||this.rightToLeft;"date"===i.type?(C.offsets=this._generateDTOffsets(P,I,c,L,M,m,i.baseUnit,!0,0,!1,R),N.offsets=this._generateDTOffsets(P,I,c,L,T,m,i.baseUnit,!0,0,!1,R),S=this._generateDTOffsets(P,I,c,L,D,m,i.baseUnit,!0,0,!0,R)):(r.gridLines.offsets=this._getOffsets("gridLines",i,c,F,r,L,!0,m),r.tickMarks.offsets=this._getOffsets("tickMarks",i,c,F,r,L,!0,m),S=this._getOffsets("labels",i,c,F,r,L,!0,m)),this._elementRenderInfo&&this._elementRenderInfo.length>e&&(k=this._elementRenderInfo[e].xAxis);for(var B=[],H=this._getDataLen(e),V=0;V<S.length;V++){var G=S[V].offset,z=S[V].value,j=void 0;if("date"!==i.type&&F.useIndeces&&i.dataField){if((j=Math.round(z))>=H)continue;null==(z=this._getDataValue(j,i.dataField))&&(z="")}var U=this._formatValue(z,this._getFormatSettings(A.formatSettings),A.formatFunction,e,void 0,j);null!=U&&""!==U.toString()||(U=F.useIndeces?(F.min+V).toString():null==z?"":z.toString());var $={key:z,text:U,targetX:G,x:G};k&&k.itemOffsets[z]&&($.x=k.itemOffsets[z].x,$.y=k.itemOffsets[z].y),B.push($)}var W={stroke:C.color||this._getThemeColor("line"),fill:"none","stroke-width":C.width,"stroke-dasharray":C.dashStyle||""};if(!a.spider)if(1===d)E.circle(s,o,l,W);else{var X=-h/Math.PI*180,Y=-u/Math.PI*180;this.renderer.pieslice(s,o,0,l,Math.min(X,Y),Math.max(X,Y),void 0,W)}var q=h;if(C.visible&&y){O||f||C.offsets.unshift({offset:-L.right});for(var J=0;J<C.offsets.length;J++){var Z=C.offsets[J].offset;O||(Z+=f?L.right/2:L.right);var Q=q+2*Z*Math.PI*d/Math.max(1,c);if(!(Q-u>.01)){var K=this.renderer._ptrnd(s+l*Math.cos(Q)),ee=this.renderer._ptrnd(o+l*Math.sin(Q));E.line(s,o,K,ee,W)}}}if(N.visible&&y){var te={stroke:N.color||this._getThemeColor("line"),fill:"none","stroke-width":N.width,"stroke-dasharray":N.dashStyle||""};O||f||N.offsets.unshift({offset:-L.right});for(var ie=0;ie<N.offsets.length;ie++){var re=N.offsets[ie].offset;O||(re+=f?L.right/2:L.right);var ae=q+2*re*Math.PI*d/Math.max(1,c);if(!(ae-u>.01)){var ne={x:s+l*Math.cos(ae),y:o+l*Math.sin(ae)},se={x:s+(l+5)*Math.cos(ae),y:o+(l+5)*Math.sin(ae)};E.line(this.renderer._ptrnd(ne.x),this.renderer._ptrnd(ne.y),this.renderer._ptrnd(se.x),this.renderer._ptrnd(se.y),te)}}}var oe=[];if(a.spider){var le=[];le="date"===i.type?this._generateDTOffsets(P,I,c,L,m,m,i.baseUnit,!0,0,!1,R):this._getOffsets("",i,c,F,r,L,!0,m),O||f||le.unshift({offset:-L.right});for(var he=0;he<le.length;he++){var ue=le[he].offset;O||(ue+=f?L.right/2:L.right);var de=q+2*ue*Math.PI*d/Math.max(1,c);de-u>.01||oe.push(de)}v.offsetAngles=oe}var ce=this._renderSpiderValueAxis(e,t,O?n.adjR:n.r,oe);if(ce||(ce=[]),a.spider){if(!O)for(var fe=0;fe<ce.length;fe++)ce[fe]=ce[fe]*n.adjR/n.r;ce.push(l),this._renderSpiderLines(s,o,ce,n,oe,W)}if(y&&A.visible){v.polarLabels=[];for(var pe=0;pe<B.length;pe++){var me=q+2*B[pe].x*Math.PI*d/Math.max(1,c);(me=(360-me/(2*Math.PI)*360)%360)<0&&(me=360+me);var ve=E.measureText(B[pe].text,0,{class:r.labels.style}),ye=(O?n.adjR:n.r)+(N.visible?7:2),ge=r.labels,_e=void 0;if(ge.autoRotate){var be=this._draw._ptRotate(s-ve.width/2,o-ye-ve.height,s,o,-me/180*Math.PI),xe=this._draw._ptRotate(s+ve.width/2,o-ye,s,o,-me/180*Math.PI);ve.width=Math.abs(be.x-xe.x),ve.height=Math.abs(be.y-xe.y),_e={x:Math.min(be.x,xe.x),y:Math.min(be.y,xe.y)}}else _e=this._adjustTextBoxPosition(s,o,ve,ye,me,!1,!1,!1);v.polarLabels.push({x:_e.x,y:_e.y,value:B[pe].text}),E.text(B[pe].text,_e.x,_e.y,ve.width,ve.height,ge.autoRotate?90-me:ge.angle,{class:ge.style},!1,ge.halign,ge.valign)}}}}}}}},{key:"_renderSpiderLines",value:function(e,t,i,r,a,n){for(var s=this.renderer,o=r.isClosedCircle,l=0;l<i.length;l++){for(var h=i[l],u=void 0,d=void 0,c=0;c<a.length;c++){var f=a[c],p=this.renderer._ptrnd(e+h*Math.cos(f)),m=this.renderer._ptrnd(t+h*Math.sin(f));u&&s.line(u.x,u.y,p,m,n),u={x:p,y:m},d||(d={x:p,y:m})}d&&o&&s.line(u.x,u.y,d.x,d.y,n)}}},{key:"_renderSpiderValueAxis",value:function(e,t,i,r){var a=this.seriesGroups[e],n=this._getPolarAxisCoords(e,t);if(n){var s=this.renderer._ptrnd(n.x),o=this.renderer._ptrnd(n.y);i=i||n.r;var l=n.startAngle,h=n.endAngle,u=this.renderer._rnd(Math.abs(l-h)/(2*Math.PI),.001,!0);if(!(i<1)){i=this.renderer._ptrnd(i);var d=this._getValueAxis(e),c=this._getAxisSettings(d);if(d&&!1!==c.visible){var f=this._stats.seriesGroups[e].mu,p=c.labels,m=this._getFormatSettings(p);-1!==a.type.indexOf("stacked")&&-1!==a.type.indexOf("100")&&!m&&(m={sufix:"%"});var v=this._get([p.step,p.unitInterval/f]);isNaN(v)&&(v=1),v=Math.max(1,Math.round(v)),this._calcValueAxisItems(e,i,v);var y=c.gridLines,g=c.tickMarks,_=c.labels,b={stroke:y.color||this._getThemeColor("line"),fill:"none","stroke-width":1,"stroke-dasharray":y.dashStyle||""},x=this._renderData[e].valueAxis,w=x.items,S=l;if(w.length&&c.line.visible){isNaN(c.line.angle)||(S=2*Math.PI*c.line.angle/360);var k=s+Math.cos(S)*i,C=o+Math.sin(S)*i;if(-1===r.indexOf(S)){var N=Object.assign({},b);N["stroke-width"]=c.line.lineWidth,N.stroke=c.line.color||this._getThemeColor("line"),N["stroke-dasharray"]=c.line.dashStyle,this.renderer.line(s,o,k,C,N)}}w=w.reverse();var A=this.renderer;x.polarLabels=[];for(var M=0;M<w.length-1;M++){var T=w[M];if(!isNaN(T)){var D=_.formatFunction?_.formatFunction(T):this._formatNumber(T,m),O=A.measureText(D,0,{class:_.style}),E=s+(!1!==d.showTickMarks?3:2),F=o-x.itemWidth*M-O.height/2,P=this._draw._ptRotate(E,F,s,o,S),I=this._draw._ptRotate(E+O.width,F+O.height,s,o,S);E=Math.min(P.x,I.x),F=Math.min(P.y,I.y),O.width=Math.abs(P.x-I.x),O.height=Math.abs(P.y-I.y),E+=c.labels.textOffset.x,F+=c.labels.textOffset.y,x.polarLabels.push({x:E,y:F,value:D}),A.text(D,E,F,O.width,O.height,_.autoRotate?90+180*l/Math.PI:_.angle,{class:_.style},!1,_.halign,_.valign)}}var L=!1!==d.valuesOnTicks,R=this._stats.seriesGroups[e],B=R.mu,H=!0===d.logarithmicScale;H&&(B=1);var V={min:R.min,max:R.max,logAxis:{enabled:!0===H,base:d.logarithmicScaleBase,minPow:R.minPow,maxPow:R.maxPow}};(y.visible||a.spider||d.alternatingBackgroundColor||d.alternatingBackgroundColor2)&&(y.offsets=this._getOffsets("gridLines",d,i,V,c,{left:0,right:0},L,B));var G=[];if(y.visible||a.spider)for(var z={stroke:y.color||this._getThemeColor("line"),fill:"none","stroke-width":1,"stroke-dasharray":y.dashStyle||""},j=0;j<y.offsets.length;j++){var U=this.renderer._ptrnd(y.offsets[j].offset);if(U!==i)if(a.spider)G.push(U);else if(1!==u){var $=-l/Math.PI*180,W=-h/Math.PI*180;this.renderer.pieslice(s,o,0,U,Math.min($,W),Math.max($,W),void 0,z)}else A.circle(s,o,U,z)}if(d.tickMarks&&(d.tickMarks.visible||d.showTickMarks)||(g.visible=!1),g.visible){g.offsets=this._getOffsets("tickMarks",d,i,V,c,{left:0,right:0},L,B);for(var X=2*g.size,Y={stroke:g.color||this._getThemeColor("line"),fill:"none","stroke-width":1,"stroke-dasharray":g.dashStyle||""},q=0;q<g.offsets.length;q++){var J=g.offsets[q].offset;P={x:s+J*Math.cos(S)-X/2*Math.sin(S+Math.PI/2),y:o+J*Math.sin(S)-X/2*Math.cos(S+Math.PI/2)},I={x:s+J*Math.cos(S)+X/2*Math.sin(S+Math.PI/2),y:o+J*Math.sin(S)+X/2*Math.cos(S+Math.PI/2)},A.line(this.renderer._ptrnd(P.x),this.renderer._ptrnd(P.y),this.renderer._ptrnd(I.x),this.renderer._ptrnd(I.y),Y)}}return G}}}}},{key:"_renderAxis",value:function(e,t,i,r,a,n,s,o,l,h,u){if(i.customDraw&&!h)return{width:NaN,height:NaN};var d=i.title,c=i.labels,f=i.tickMarks,p=i.padding,m=f.visible?f.size:0,v={width:0,height:0},y={width:0,height:0};e?v.height=y.height=r.height:v.width=y.width=r.width,!h&&t&&e&&(r.x-=r.width);var g=l.renderData,_=g.itemWidth;if(d.visible&&void 0!==d.text&&null!==d.text&&""!==d){var b=d.angle,x=this.renderer.measureText(d.text,b,{class:d.style});y.width=x.width,y.height=x.height,h||this.renderer.text(d.text,r.x+d.offset.x+(e?t?-p.right-2+2*r.width-y.width:2+p.left:0),r.y+d.offset.y+(e?0:t?p.top+2:r.height-2-y.height-p.bottom),e?y.width:r.width,e?r.height:y.height,b,{class:d.style},!0,d.halign,d.valign,d.rotationPoint)}var w=0,S=o?-_/2:0;o&&!e&&(c.halign="center");var k=r.x,C=r.y,N=c.textOffset;N&&(isNaN(N.x)||(k+=N.x),isNaN(N.y)||(C+=N.y)),e?(k+=p.left+2+(y.width>0?y.width+2:0)+(t?r.width-y.width:0),C+=S):(k+=S,t?(C+=y.height>0?y.height+6:4,C+=m-(o?m:m/4)):C+=o?m:m/4,C+=p.top);var A=0,M=0,T=l.items;g.itemOffsets={},!this._isToggleRefresh&&this._isUpdate||(u=0);for(var D=!1,O=0,E=0;E<T.length&&c.visible;E++,w+=_)if(T[E]&&!isNaN(_)){var F=T[E].text;isNaN(T[E].targetX)||(w=T[E].targetX);var P=this.renderer.measureText(F,c.angle,{class:c.style});if(P.width>M&&(M=P.width),P.height>A&&(A=P.height),O+=e?A:M,!h){if(e&&w>r.height+2||!e&&w>r.width+2)continue;var I=e?k+(t?0===y.width?m:m-2:0):k+w,L=e?C+w:C;g.itemOffsets[T[E].key]={x:I,y:L},D||(!isNaN(T[E].x)||!isNaN(T[E].y)&&u)&&(D=!0),T[E].targetX=I,T[E].targetY=L,T[E].width=e?r.width-p.left-p.right-4-m-(y.width>0?y.width+2:0):_,T[E].height=e?_:r.height-p.top-p.bottom-4-m-(y.height>0?y.height+2:0),T[E].visible=!0}}if(g.avgWidth=0===T.length?0:O/T.length,!h){var R={items:T,textSettings:c};if(!isNaN(u)&&D||(u=0),this._animateAxisText(R,0===u?1:0),0!==u){var B=this;this._enqueueAnimation("series",void 0,void 0,u,(function(e,t,i){B._animateAxisText(t,i)}),R)}}if(v.width+=4+m+y.width+M+(e&&y.width>0?2:0),v.height+=4+m+y.height+A+(!e&&y.height>0?2:0),e?v.width+=p.left+p.right:v.height+=p.top+p.bottom,!h&&i.line.visible){var H={stroke:i.line.color||self._getThemeColor("line"),"stroke-width":i.line.width,"stroke-dasharray":i.line.dashStyle||""};if(e){var V=r.x+r.width+(t?p.left:-p.right);V=this.renderer._ptrnd(V),this.renderer.line(V,r.y,V,r.y+r.height,H)}else{var G=this.renderer._ptrnd(r.y+(t?r.height-p.bottom:p.top));this.renderer.line(this.renderer._ptrnd(r.x),G,this.renderer._ptrnd(r.x+r.width+1),G,H)}}return v.width=this.renderer._rup(v.width),v.height=this.renderer._rup(v.height),v}},{key:"_drawPlotAreaLines",value:function(e,t,i){var r=this.seriesGroups[e],a="horizontal"!==r.orientation;if(this._renderData&&!(this._renderData.length<=e)){var n=t?"valueAxis":"xAxis",s=this._renderData[e][n];if(s){var o=this._renderData.axisDrawState;o||(o=this._renderData.axisDrawState={});var l,h="";t?(h="valueAxis_"+(r.valueAxis?e:"")+(a?"swap":""),l=this._getValueAxis(e)):(h="xAxis_"+(r.xAxis?e:"")+(a?"swap":""),l=this._getXAxis(e)),o=o[h]?o[h]:o[h]={},t||(a=!a);var u=s.settings;if(u&&!u.customDraw){var d=u.gridLines,c=u.tickMarks,f=u.padding,p=s.rect,m=this._plotRect;if(d&&c){var v,y={},g={stroke:d.color||self._getThemeColor("line"),"stroke-width":d.width,"stroke-dasharray":d.dashStyle||""},_=t?p.y+p.height:p.x,b=d.offsets;if(t&&!l.flip&&(b=(b=b.slice(0)).reverse()),b&&b.length>0)for(var x=NaN,w=0;w<b.length;w++)if(a?((v=this.renderer._ptrnd(p.y+b[w].offset))<p.y-.5&&(v=this.renderer._ptrnd(p.y)),v>p.y+p.height&&(v=p.y+p.height)):(v=this.renderer._ptrnd(p.x+b[w].offset))>p.x+p.width+.5&&(v=this.renderer._ptrnd(p.x+p.width)),!isNaN(v)&&(isNaN(x)||!(Math.abs(v-x)<2))){if(x=v,i.gridLines&&!1!==d.visible&&!0!==o.gridLines&&(a?this.renderer.line(this.renderer._ptrnd(m.x),v,this.renderer._ptrnd(m.x+m.width),v,g):this.renderer.line(v,this.renderer._ptrnd(m.y),v,this.renderer._ptrnd(m.y+m.height),g)),y[v]=!0,i.alternatingBackground&&(d.alternatingBackgroundColor||d.alternatingBackgroundColor2)&&!0!==o.alternatingBackground){var S,k=w%2==0?d.alternatingBackgroundColor2:d.alternatingBackgroundColor;w>0&&k&&(S=a?this.renderer.rect(this.renderer._ptrnd(m.x),_,this.renderer._ptrnd(m.width-1),v-_,g):this.renderer.rect(_,this.renderer._ptrnd(m.y),v-_,this.renderer._ptrnd(m.height),g),this.renderer.attr(S,{"stroke-width":0,fill:k,opacity:d.alternatingBackgroundOpacity||1}))}_=v}if(g={stroke:c.color||self._getThemeColor("line"),"stroke-width":c.width,"stroke-dasharray":c.dashStyle||""},i.tickMarks&&c.visible&&!0!==o.tickMarks)for(var C=c.size,N=c.offsets,A=(x=NaN,0);A<N.length;A++)if(a?((v=this.renderer._ptrnd(p.y+N[A].offset))<p.y-.5&&(v=this.renderer._ptrnd(p.y)),v>p.y+p.height&&(v=p.y+p.height)):(v=this.renderer._ptrnd(p.x+N[A].offset))>p.x+p.width+.5&&(v=this.renderer._ptrnd(p.x+p.width)),!isNaN(v)&&(isNaN(x)||!(Math.abs(v-x)<2))){if(y[v-1]?v--:y[v+1]&&v++,a){if(v>p.y+p.height+.5)break}else if(v>p.x+p.width+.5)break;x=v;var M=s.isMirror?C:-C;if(a){var T=p.x+p.width+("right"===l.position?f.left:-f.right);t||(T=p.x+(s.isMirror?f.left:-f.right+p.width)),this.renderer.line(T,v,T+M,v,g)}else{var D=p.y+(s.isMirror?p.height:0);D+=s.isMirror?-f.bottom:f.top,D=this.renderer._ptrnd(D),this.renderer.line(v,D,v,D-M,g)}}o.tickMarks=o.tickMarks||i.tickMarks,o.gridLines=o.gridLines||i.gridLines,o.alternatingBackground=o.alternatingBackground||i.alternatingBackground}}}}}},{key:"_calcValueAxisItems",value:function(e,t,i){var r=this._stats.seriesGroups[e];if(!r||!r.isValid)return!1;var a=this.seriesGroups[e],n=this._getValueAxis(e),s=!1!==n.valuesOnTicks,o=r.intervals,l=t/o,h=r.min,u=r.mu,d=!0===n.logarithmicScale,c=n.logarithmicScaleBase||10,f=-1!==a.type.indexOf("stacked")&&-1!==a.type.indexOf("100");for(d&&(u=isNaN(n.unitInterval)?1:n.unitInterval),s||(o=Math.max(o-1,1));this._renderData.length<e+1;)this._renderData.push({});this._renderData[e].valueAxis={};var p=this._renderData[e].valueAxis;p.itemWidth=p.intervalWidth=l,p.items=[];for(var m=p.items,v=0;v<=o;v++){var y=0;y=d?f?r.max/Math.pow(c,o-v):h*Math.pow(c,v):s?h+v*u:h+(v+.5)*u,v%i==0?m.push(y):m.push(NaN)}return p.rangeLength=d&&!f?r.intervals:r.intervals*u,!0!==n.flip&&(m=m.reverse()),!0}},{key:"_getDecimalPlaces",value:function(e,t,i){var r=0;isNaN(i)&&(i=10);for(var a=0;a<e.length;a++){var n=void 0===t?e[a]:e[a][t];if(!isNaN(n)){for(var s=n.toString(),o=0;o<s.length;o++)if((s[o]<"0"||s[o]>"9")&&(r=s.length-(o+1))>=0)return Math.min(r,i);for(r>0&&(n*=Math.pow(10,r));Math.round(n)!==n&&r<i;)r++,n*=10}}return r}},{key:"_renderValueAxis",value:function(e,t,i,r){var a=this.seriesGroups[e],n="horizontal"===a.orientation,s=this._getValueAxis(e);s||this.error(this.localize("missingAxis",{index:e,axis:"valueAxis"}));var o={width:0,height:0};if(!this._isGroupVisible(e)||this._isPieOnlySeries()||"spider"===a.type)return o;var l=!1!==s.valuesOnTicks,h=this._stats.seriesGroups[e],u=h.mu,d=!0===s.logarithmicScale,c=s.logarithmicScaleBase||10;if(d&&(u=isNaN(s.unitInterval)?1:s.unitInterval),0===u&&(u=1),isNaN(u))return o;var f=this._getAxisSettings(s),p=f.title,m=f.labels,v=s.labels||{};this._get([s.horizontalTextAlignment,v.horizontalAlignment])||0!==m.angle||(m.halign=n?"center":"right"===s.position?"left":"right");var y=this._get([m.step,m.unitInterval/u]);if(isNaN(y)&&(y=1),y=Math.max(1,Math.round(y)),!this._calcValueAxisItems(e,n?t.width:t.height,y)||!f.visible)return o;n||(p.angle=this.rightToLeft?90:-90,"centercenter"===p.rotationPoint&&("top"===p.valign?p.rotationPoint="rightcenter":"bottom"===p.valign&&(p.rotationPoint="leftcenter")));var g=this._renderData[e].valueAxis,_=this._getFormatSettings(m);-1!==a.type.indexOf("stacked")&&-1!==a.type.indexOf("100")&&!_&&(_={sufix:"%"}),m.formatFunction||_&&null!==_.decimalPlaces&&void 0!==_.decimalPlaces||((_=_||{}).decimalPlaces=this._getDecimalPlaces([h.min,h.max,u],void 0,3));var b=f.gridLines,x=n?t.width:t.height,w=!0===s.flip;s.flip=!w;var S={min:h.min,max:h.max,logAxis:{enabled:!0===d,base:c,minPow:h.minPow,maxPow:h.maxPow}};(b.visible||s.alternatingBackgroundColor||s.alternatingBackgroundColor2)&&(b.offsets=this._getOffsets("gridLines",s,x,S,f,{left:0,right:0},l,u));var k=f.tickMarks;k.visible&&(k.offsets=this._getOffsets("tickMarks",s,x,S,f,{left:0,right:0},l,u));var C=this._getOffsets("labels",s,x,S,f,{left:0,right:0},l,u,!l);s.flip=w;var N,A=[];this._elementRenderInfo&&this._elementRenderInfo.length>e&&(N=this._elementRenderInfo[e].valueAxis);for(var M=0;M<C.length;M++){var T=C[M].value;if(isNaN(C[M].offset))A.push(void 0);else{var D={key:T,text:m.formatFunction?m.formatFunction(T):isNaN(T)?T:this._formatNumber(T,_)};N&&N.itemOffsets[T]&&(D.x=N.itemOffsets[T].x,D.y=N.itemOffsets[T].y),D.targetX=C[M].offset,isNaN(D.targetX)||A.push(D)}}var O=n&&"top"===s.position||!n&&"right"===s.position||!n&&this.rightToLeft&&"left"!==s.position,E={items:A,renderData:g},F=this._getAnimProps(e),P=F.enabled&&A.length<500?F.duration:0;return!1===this.enableAxisTextAnimation&&(P=0),g.settings=f,g.isMirror=O,g.rect=t,this._renderAxis(!n,O,f,t,r,u,d,!0,E,i,P)}},{key:"_objectsArraysToArray",value:function(e,t){var i=[];if(!Array.isArray(e))return i;for(var r=0;r<e.length;r++)i.push(e[r][t]);return i}},{key:"_arraysToObjectsArray",value:function(e,t){var i=[];if(e.length!==t.length)return i;for(var r=0;r<e.length;r++)for(var a=0;a<e[r].length;a++)i.length<=a&&i.push({}),i[a][t[r]]=e[r][a];return i}},{key:"_valuesToOffsets",value:function(e,t,i,r,a,n,s){var o=[];if(!t||!Array.isArray(e))return o;var l,h=i.logAxis.base,u=i.logAxis.enabled?"logarithmic":"linear",d=t.flip,c=0,f=0;a&&!isNaN(a.left)&&(c=a.left),a&&!isNaN(a.right)&&(f=a.right),r=l=r-c-f;for(var p=0;p<e.length;p++){var m=this._smartPlot.scale(e[p],{min:i.min.valueOf(),max:i.max.valueOf(),type:u,base:h},{min:0,max:n?r:l,flip:d},{});isNaN(m)?o.push(NaN):(isNaN(s)||(m+=s),m<=r+c+f+1?o.push(this.renderer._ptrnd(m)):o.push(NaN))}return o}},{key:"_generateIntervalValues",value:function(e,t,i,r,a){var n=[],s=e.min,o=e.max;if(e.logAxis&&e.logAxis.enabled&&(s=e.logAxis.minPow,o=e.logAxis.maxPow),null==s||null==o)return n;if(s===o)return e.logAxis&&e.logAxis.enabled?[Math.pow(e.logAxis.base,s)]:[s];var l=1;i<1&&(s*=l=1e6,o*=l,i*=l);for(var h=s;h<=o;h+=i)n.push(h/l+(a?i/2:0));if(t>i){for(var u=[],d=Math.round(t/i),c=0;c<n.length;c++)c%d==0&&u.push(n[c]);n=u}if(e.logAxis&&e.logAxis.enabled)for(var f=0;f<n.length;f++)n[f]=Math.pow(e.logAxis.base,n[f]);return n}},{key:"_generateDTOffsets",value:function(e,t,i,r,a,n,s,o,l,h,u){s||(s="day");var d=[];if(e>t)return d;if(e===t)return h?d.push({offset:o?i/2:r.left,value:e}):o&&d.push({offset:i/2,value:e}),d;var c=i-r.left-r.right,f=e,p=r.left,m=p,v=n=Math.max(n,1),y=Math.min(1,n);for(n>1&&"millisecond"!==s&&(n=1);this.renderer._ptrnd(m)<=this.renderer._ptrnd(r.left+c+(o?0:r.right));){d.push({offset:m,value:f});var g=new Date(f.valueOf());if("millisecond"===s)g.setMilliseconds(f.getMilliseconds()+n);else if("second"===s)g.setSeconds(f.getSeconds()+n);else if("minute"===s)g.setMinutes(f.getMinutes()+n);else if("hour"===s){var _=g.valueOf();g.setHours(f.getHours()+n),_===g.valueOf()&&g.setHours(f.getHours()+n+1)}else"day"===s?g.setDate(f.getDate()+n):"month"===s?g.setMonth(f.getMonth()+n):"year"===s&&g.setFullYear(f.getFullYear()+n);m=p+((f=g).valueOf()-e.valueOf())*y/(t.valueOf()-e.valueOf())*c}if(u)for(var b=0;b<d.length;b++)d[b].offset=i-d[b].offset;if(v>1&&"millisecond"!==s){for(var x=[],w=0;w<d.length;w+=v)x.push({offset:d[w].offset,value:d[w].value});d=x}if(!o&&!h&&d.length>1){(x=[]).push({offset:0,value:void 0});for(var S=1;S<d.length;S++)x.push({offset:d[S-1].offset+(d[S].offset-d[S-1].offset)/2,value:void 0});var k=x.length;k>1?x.push({offset:x[k-1].offset+(x[k-1].offset-x[k-2].offset)}):x.push({offset:i,value:void 0}),d=x}if(a>n){x=[];for(var C=Math.round(a/v),N=0;N<d.length;N++)N%C==0&&x.push({offset:d[N].offset,value:d[N].value});d=x}return d}},{key:"_hasStackValueReversal",value:function(e,t){var i=this.seriesGroups[e];if(-1===i.type.indexOf("stacked"))return!1;for(var r=-1!==i.type.indexOf("waterfall"),a=this._getDataLen(e),n=!1,s=[],o=0;o<i.series.length;o++)s[o]=this._isSerieVisible(e,o);for(var l=0;l<a;l++){var h=void 0;r||(n=!1);for(var u=0;u<i.series.length;u++)if(s[u]){var d=this._getDataValueAsNumber(l,i.series[u].dataField,e);if(!isNaN(d)){if(i.series[u].summary&&void 0!==this._getDataValue(l,i.series[u].summary,e))continue;var c=n?d<0:d<t;if(n=!0,void 0===h&&(h=c),c!==h)return!0;h=c}}}return!1}},{key:"_getValueAxis",value:function(e){var t=null==e?this.valueAxis:this.seriesGroups[e].valueAxis||this.valueAxis;return t||(t=this.valueAxis={}),t}},{key:"_buildStats",value:function(e){var t={seriesGroups:[]};this._stats=t;for(var i=0;i<this.seriesGroups.length;i++){var r=this.seriesGroups[i];t.seriesGroups[i]={};var a=this._getXAxis(i),n=this._getValueAxis(i),s=this._getXAxisStats(i,a,"horizontal"!==r.orientation?e.width:e.height),o=t.seriesGroups[i];o.isValid=!0;var l="horizontal"===r.orientation?e.width:e.height,h=!0===n.logarithmicScale,u=n.logarithmicScaleBase;isNaN(u)&&(u=10);var d=-1!==r.type.indexOf("stacked"),c=d&&-1!==r.type.indexOf("100"),f=-1!==r.type.indexOf("range"),p=-1!==r.type.indexOf("waterfall");p&&!this._moduleWaterfall&&self.error(self.localize("missingReference",{files:"smartchart.waterfall.js"})),c&&(o.psums=[],o.nsums=[]);var m=NaN,v=NaN,y=NaN,g=NaN,_=n?n.baselineValue:NaN;isNaN(_)&&(_=h&&!c?1:0);var b=!1;0!==_&&d&&(b=this._hasStackValueReversal(i,_))&&(_=0),d&&p&&(b=this._hasStackValueReversal(i,_));var x=this._getDataLen(i),w=0,S=NaN,k=[];if(p)for(var C=0;C<r.series.length;C++)k.push(NaN);for(var N=NaN,A=0;A<x&&o.isValid;A++){if(a.rangeSelector&&a.rangeSelector.visible){var M=a.dataField?this._getDataValue(A,a.dataField,i):A;if(M&&s.isDateTime&&(M=this._castAsDate(M,a.dateFormat)),s.useIndeces&&(M=A),M&&(M.valueOf()<s.min.valueOf()||M.valueOf()>s.max.valueOf()))continue}var T=n.minValue,D=n.maxValue;n.baselineValue&&(T=isNaN(T)?_:Math.min(_,T),D=isNaN(D)?_:Math.max(_,D));for(var O=0,E=0,F=0;r.series&&F<r.series.length;F++)if(this._isSerieVisible(i,F)){var P=NaN,I=NaN,L=NaN;if(-1!==r.type.indexOf("candle")||-1!==r.type.indexOf("ohlc")){var R=["Open","Low","Close","High"];for(var B in R){var H=this._getDataValueAsNumber(A,r.series[F]["dataField"+R[B]],i);isNaN(H)||(L=isNaN(I)?H:Math.min(L,H),I=isNaN(I)?H:Math.max(I,H))}}else if(f){var V=this._getDataValueAsNumber(A,r.series[F].dataFieldFrom,i),G=this._getDataValueAsNumber(A,r.series[F].dataFieldTo,i);I=Math.max(V,G),L=Math.min(V,G)}else{if(P=this._getDataValueAsNumber(A,r.series[F].dataField,i),p){if(this._isSummary(i,A)&&void 0!==this._getDataValue(A,r.series[F].summary,i))continue;d?(isNaN(N)||(P+=N),N=P):(isNaN(k[F])?k[F]=P:P+=k[F],k[F]=P)}if(isNaN(P)||h&&P<=0)continue;L=I=P}(isNaN(D)||I>D)&&(isNaN(n.maxValue)||I<=n.maxValue)&&(D=I),(isNaN(T)||L<T)&&(isNaN(n.minValue)||L>=n.minValue)&&(T=L),isNaN(P)||!d||p||(P>_?O+=P:P<_&&(E+=P))}if(c||(isNaN(n.maxValue)||(O=Math.min(n.maxValue,O)),isNaN(n.minValue)||(E=Math.max(n.minValue,E))),h&&c)for(var z=0;z<r.series.length;z++)if(this._isSerieVisible(i,z))if(P=this._getDataValueAsNumber(A,r.series[z].dataField,i),isNaN(P)||P<=0)S=.01;else{var j=0===O?0:P/O;(isNaN(S)||j<S)&&(S=j)}else S=.01;var U=O-E;w<U&&(w=U),c&&(o.psums[A]=O,o.nsums[A]=E),(D>v||isNaN(v))&&(v=D),(T<m||isNaN(m))&&(m=T),(O>y||isNaN(y))&&(y=O),(E<g||isNaN(g))&&(g=E)}c&&(y=0===y?0:Math.max(y,-g),g=0===g?0:Math.min(g,-y)),m===v&&(!isNaN(n.minValue)&&isNaN(n.maxValue)?(m=n.minValue,v=h?m*u:m+1):isNaN(n.minValue)&&!isNaN(n.maxValue)&&(v=n.maxValue,m=h?v/u:v-1)),m===v&&(0===m?(m=-1,v=1):m<0?v=0:h?1===m&&(m/=u,v*=u):m=0);var $={gmin:m,gmax:v,gsumP:y,gsumN:g,gbase:_,isLogAxis:h,logBase:u,minPercent:S,gMaxRange:w,isStacked:d,isStacked100:c,isWaterfall:p,hasStackValueReversal:b,valueAxis:n,valueAxisSize:l};$.isStacked&&($.gsumN<0&&($.gmin=Math.min($.gmin,$.gbase+$.gsumN)),$.gsumP>0&&($.gmax=Math.max($.gmax,$.gbase+$.gsumP))),o.context=$}this._mergeCommonValueAxisStats();for(var W=0;W<t.seriesGroups.length;W++){var X=t.seriesGroups[W];if(X.isValid){var Y=this._calcOutputGroupStats(X.context);for(var q in Y)X[q]=Y[q];delete X.context}}}},{key:"_mergeCommonValueAxisStats",value:function(){for(var e={},t=0;t<this.seriesGroups.length;t++)if(this._isGroupVisible(t)&&!this.seriesGroups[t].valueAxis){var i=this._stats.seriesGroups[t].context;e.gbase=i.gbase,(isNaN(e.gmin)||i.gmin<e.gmin)&&(e.gmin=i.gmin),(isNaN(e.gmax)||i.gmax>e.gmax)&&(e.gmax=i.gmax),(isNaN(e.gsumP)||i.gsumP>e.gsumP)&&(e.gsumP=i.gsumP),(isNaN(e.gsumN)||i.gsumN<e.gsumN)&&(e.gsumN=i.gsumN),(isNaN(e.logBase)||i.logBase<e.logBase)&&(e.logBase=i.logBase),(isNaN(e.minPercent)||i.minPercent<e.minPercent)&&(e.minPercent=i.minPercent),e.gsumN>0&&(e.gmin=Math.min(e.gmin,e.gbase+e.gsumN)),e.gsumP>0&&(e.gmax=Math.max(e.gmax,e.gbase+e.gsumP))}for(var r=0;r<this.seriesGroups.length;r++)if(!this.seriesGroups[r].valueAxis){var a=this._stats.seriesGroups[r].context;for(var n in e)a[n]=e[n]}}},{key:"_calcOutputGroupStats",value:function(e){var t=e.gmin,i=e.gmax,r=e.gsumP,a=e.gsumN,n=e.gbase,s=e.isLogAxis,o=e.logBase,l=e.minPercent,h=e.gMaxRange,u=e.isStacked,d=e.isStacked100,c=e.isWaterfall,f=e.hasStackValueReversal,p=e.valueAxis,m=e.valueAxisSize,v=e.valueAxis.unitInterval;v||(v=this._calcInterval(t,i,Math.max(m/80,2))),t===i&&(t=n,i*=2);var y=NaN,g=0,_=0;if(s){if(d){y=0;var b=1;for(g=_=this._draw.log(100,o);b>l;)b/=o,g--,y++;t=Math.pow(o,g)}else u&&!c&&(i=Math.max(i,r)),_=this.renderer._rnd(this._draw.log(i,o),1,!0),i=Math.pow(o,_),g=this.renderer._rnd(this._draw.log(t,o),1,!1),t=Math.pow(o,g);v=o}t<a&&(a=t),i>r&&(r=i);var x=t,w=i;if(s||0!=Math.abs(w-x)%v&&(x=this.renderer._rnd(t,v,!1),w=this.renderer._rnd(i,v,!0)),d&&w>100&&(w=100),d&&!s&&(w=w>0?100:0,x=x<0?-100:0,v=p.unitInterval,(isNaN(v)||v<=0||v>=100)&&(v=10),100%v!=0))for(;v>=1&&100%v!=0;v--);return isNaN(w)||isNaN(x)||isNaN(v)?{}:(isNaN(y)&&(y=parseInt(((w-x)/(0===v?1:v)).toFixed())),s&&!d&&(y=_-g,h=Math.pow(o,y)),y<1?{}:{min:x,max:w,logarithmic:s,logBase:o,base:s?x:n,minPow:g,maxPow:_,sumP:r,sumN:a,mu:v,maxRange:h,intervals:y,hasStackValueReversal:f})}},{key:"_getDataLen",value:function(e){var t=this.dataSource;return null!=e&&-1!==e&&this.seriesGroups[e].dataSource&&(t=this.seriesGroups[e].dataSource),t?t.length:0}},{key:"_getDataValue",value:function(e,t,i){var r=this.dataSource;if(null!=i&&-1!==i&&(r=this.seriesGroups[i].dataSource||r),!(!r||e<0||e>r.length-1))return"function"==typeof t?t(e,r):t&&""!==t?r[e][t]:r[e]}},{key:"_getDataValueAsNumber",value:function(e,t,i){var r=this._getDataValue(e,t,i);return this._isDate(r)?r.valueOf():("number"!=typeof r&&(r=parseFloat(r)),"number"!=typeof r&&(r=void 0),r)}},{key:"_isPieGroup",value:function(e){var t=this.seriesGroups[e];return!(!t||!t.type||-1===t.type.indexOf("pie")&&-1===t.type.indexOf("donut"))}},{key:"_renderPieSeries",value:function(e,t){for(var i=this,r=this._getDataLen(e),a=this.seriesGroups[e],n=this._calcGroupOffsets(e,t).offsets,s=function(s){var o=a.series[s];if(o.customDraw)return"continue";var l=i._getSerieSettings(e,s),h=i._getAnimProps(e,s),u=h.enabled&&r<5e3&&!i._isToggleRefresh&&h.duration;i._isTouchDevice&&i.renderer instanceof Smart.Utilities.HTML5Renderer&&(u=0);var d=i._get([o.minAngle,o.startAngle]);(isNaN(d)||d<0||d>360)&&(d=0);var c=i._get([o.maxAngle,o.endAngle]);(isNaN(c)||c<0||c>360)&&(c=360);for(var f={rect:t,minAngle:d,maxAngle:c,groupIndex:e,serieIndex:s,settings:l,items:[]},p=0;p<r;p++){var m=n[s][p];if(m.visible){var v=m.fromAngle,y=m.toAngle,g=i.renderer.pieslice(m.x,m.y,m.innerRadius,m.outerRadius,v,0===u?y:v,m.centerOffset);i._setRenderInfo(e,s,p,{element:g});var _={displayValue:m.displayValue,itemIndex:p,visible:m.visible,x:m.x,y:m.y,innerRadius:m.innerRadius,outerRadius:m.outerRadius,fromAngle:v,toAngle:y,centerOffset:m.centerOffset};f.items.push(_)}}i._animatePieSlices(f,0);var b=i;i._enqueueAnimation("series",void 0,void 0,u,(function(e,t,i){b._animatePieSlices(t,i)}),f)},o=0;o<a.series.length;o++)s(o)}},{key:"_sliceSortFunction",value:function(e,t){return e.fromAngle-t.fromAngle}},{key:"_animatePieSlices",value:function(e,t){var i;this._elementRenderInfo&&this._elementRenderInfo.length>e.groupIndex&&this._elementRenderInfo[e.groupIndex].series&&this._elementRenderInfo[e.groupIndex].series.length>e.serieIndex&&(i=this._elementRenderInfo[e.groupIndex].series[e.serieIndex]);for(var r=this._getLabelsSettings(e.groupIndex,e.serieIndex,NaN),a=r.visible,n=[],s=0;s<e.items.length;s++){var o=e.items[s];if(o.visible){var l=o.fromAngle,h=o.fromAngle+t*(o.toAngle-o.fromAngle);if(i&&i[o.displayValue]){var u=i[o.displayValue].fromAngle,d=i[o.displayValue].toAngle;l=u+(l-u)*t,h=d+(h-d)*t}n.push({index:s,from:l,to:h})}}i&&n.sort(this._sliceSortFunction);for(var c=NaN,f=0;f<n.length;f++){var p=e.items[n[f].index],m=this._getRenderInfo(e.groupIndex,e.serieIndex,p.itemIndex),v=n[f].from;h=n[f].to,i&&(!isNaN(c)&&v>c&&(v=c),c=h,f===n.length-1&&h!==n[0].from&&(h=e.maxAngle+n[0].from));var y=this.renderer.pieSlicePath(p.x,p.y,p.innerRadius,p.outerRadius,v,h,p.centerOffset);this.renderer.attr(m.element,{d:y});var g=this._getColors(e.groupIndex,e.serieIndex,p.itemIndex,"radialGradient",p.outerRadius),_=e.settings;m.colors=g,m.settings=_,this.renderer.attr(m.element,{fill:g.fillColor,stroke:g.lineColor,"stroke-width":_.stroke,"fill-opacity":_.opacity,"stroke-opacity":_.opacity,"stroke-dasharray":"none"}),a&&this._showPieLabel(e.groupIndex,e.serieIndex,p.itemIndex,r,void 0,m.colors.lineColor),1===t&&this._installHandlers(m.element,"pieslice",e.groupIndex,e.serieIndex,p.itemIndex)}}},{key:"_showPieLabel",value:function(e,t,i,r,a){var n=this._renderData[e].offsets[t][i];if(n.elementInfo.labelElement&&this.renderer.removeElement(n.elementInfo.labelElement),r||(r=this._getLabelsSettings(e,t,NaN)),r.visible){var s=n.fromAngle,o=n.toAngle,l=Math.abs(s-o);l>360&&(s=0,o=360);var h,u=l/2+s,d=(u%=360)*Math.PI*2/360;!0===r.autoRotate&&(h=u<90||u>270?360-u:180-u);var c=r.linesEnabled,f=this._showLabel(e,t,i,{x:0,y:0,width:0,height:0},"center","center",!0,!1,!1,h),p=r.radius||n.outerRadius+Math.max(f.width,f.height);this._isPercent(p)&&(p=parseFloat(p)/100*Math.min(this._plotRect.width,this._plotRect.height)/2),p+=n.centerOffset,isNaN(a)&&(a=0),p+=a;var m=this.seriesGroups[e],v=m.series[t],y=this._draw.getNum([v.offsetX,m.offsetX,this._plotRect.width/2]),g=this._draw.getNum([v.offsetY,m.offsetY,this._plotRect.height/2]),_=this._plotRect.x+y,b=this._plotRect.y+g,x=this._adjustTextBoxPosition(_,b,f,p,u,n.outerRadius>p,!1!==r.linesAngles,!0===r.autoRotate),w={},S=x.x<_?0:f.width/2,k=Math.sqrt(Math.pow(x.x-_,2)+Math.pow(x.y-b,2))+S<n.outerRadius?arguments[5]:void 0;if(n.elementInfo.labelElement=this._showLabel(e,t,i,{x:x.x,y:x.y,width:f.width,height:f.height},"left","top",!1,!1,!1,h,w,k),p>n.outerRadius+a+5&&!1!==c){var C={lineColor:n.elementInfo.colors.lineColor,stroke:n.elementInfo.settings.stroke,opacity:n.elementInfo.settings.opacity,dashStyle:n.elementInfo.settings.dashStyle};n.elementInfo.labelArrowPath=this._updateLebelArrowPath(n.elementInfo.labelArrowPath,_,b,p,n.outerRadius+a,d,!1!==r.linesAngles,C,w)}}}},{key:"_updateLebelArrowPath",value:function(e,t,i,r,a,n,s,o,l){var h=this.renderer,u=h._ptrnd(t+(r-0)*Math.cos(n)),d=h._ptrnd(i-(r-0)*Math.sin(n)),c=h._ptrnd(t+(a+2)*Math.cos(n)),f=h._ptrnd(i-(a+2)*Math.sin(n)),p=[];p.push({x:l.x+l.width/2,y:l.y}),p.push({x:l.x+l.width/2,y:l.y+l.height}),p.push({x:l.x,y:l.y+l.height/2}),p.push({x:l.x+l.width,y:l.y+l.height/2}),s||(p.push({x:l.x,y:l.y}),p.push({x:l.x+l.width,y:l.y}),p.push({x:l.x+l.width,y:l.y+l.height}),p.push({x:l.x,y:l.y+l.height})),p=(p=p.sort((function(e,r){return h._ptdist(e.x,e.y,t,i)-h._ptdist(r.x,r.y,t,i)}))).sort((function(e,r){return Math.abs(e.x-t)+Math.abs(e.y-i)-(Math.abs(r.x-t)+Math.abs(r.y-i))}));for(var m=0;m<p.length;m++)p[m].x=h._ptrnd(p[m].x),p[m].y=h._ptrnd(p[m].y);var v="M "+(u=p[0].x)+","+(d=p[0].y)+" L"+c+","+f;return s&&(v="M "+u+","+d+" L"+c+","+d+" L"+c+","+f),e?h.attr(e,{d:v}):e=h.path(v,{}),h.attr(e,{fill:"none",stroke:o.lineColor,"stroke-width":o.stroke,"stroke-opacity":o.opacity,"stroke-dasharray":"none"}),e}},{key:"_adjustTextBoxPosition",value:function(e,t,i,r,a,n,s,o){var l=a*Math.PI*2/360,h=this.renderer._ptrnd(e+r*Math.cos(l)),u=this.renderer._ptrnd(t-r*Math.sin(l));if(o){var d=i.width,c=i.height,f=Math.atan(c/d)%(2*Math.PI),p=l%(2*Math.PI),m=0;p<=f?m=d/2*Math.cos(l):p>=f&&p<Math.PI-f?m=c/2*Math.sin(l):p>=Math.PI-f&&p<Math.PI+f?m=d/2*Math.cos(l):p>=Math.PI+f&&p<2*Math.PI-f?m=c/2*Math.sin(l):p>=2*Math.PI-f&&p<2*Math.PI&&(m=d/2*Math.cos(l)),r+=Math.abs(m)+3;var v=this.renderer._ptrnd(e+r*Math.cos(l)),y=this.renderer._ptrnd(t-r*Math.sin(l));return{x:v-=i.width/2,y:y-=i.height/2}}return n?(h-=i.width/2,u-=i.height/2):s?a>=90&&a<270?(u-=i.height/2,h-=i.width):u-=i.height/2:a>=0&&a<45||a>=315&&a<360?u-=i.height/2:a>=45&&a<135?(u-=i.height,h-=i.width/2):a>=135&&a<225?(u-=i.height/2,h-=i.width):a>=225&&a<315&&(h-=i.width/2),{x:h,y:u}}},{key:"_isColumnType",value:function(e){return-1!==e.indexOf("column")||-1!==e.indexOf("waterfall")}},{key:"_getColumnGroupsCount",value:function(e){var t=0;e=e||"vertical";for(var i=this.seriesGroups,r=0;r<i.length;r++){var a=i[r].orientation||"vertical";this._isColumnType(i[r].type)&&a===e&&t++}return this.columnSeriesOverlap&&(t=1),t}},{key:"_getColumnGroupIndex",value:function(e){for(var t=0,i=this.seriesGroups[e].orientation||"vertical",r=0;r<e;r++){var a=this.seriesGroups[r],n=a.orientation||"vertical";this._isColumnType(a.type)&&n===i&&t++}return t}},{key:"_renderAxisBands",value:function(e,t,i){var r=i?this._getXAxis(e):this._getValueAxis(e),a=this.seriesGroups[e],n=i?void 0:a.bands;if(!n){for(var s=0;s<e;s++)if((i?this._getXAxis(s):this._getValueAxis(s))===r)return;n=r.bands}if(Array.isArray(n)){var o=t,l="horizontal"===a.orientation;l&&(o={x:t.y,y:t.x,width:t.height,height:t.width}),this._calcGroupOffsets(e,o);for(var h=0;h<n.length;h++){var u=n[h],d=u.minValue,c=u.maxValue,f=i?this.getXAxisDataPointOffset(d,e):this.getValueAxisDataPointOffset(d,e),p=i?this.getXAxisDataPointOffset(c,e):this.getValueAxisDataPointOffset(c,e);if(!isNaN(f)&&!isNaN(p)){var m,v=Math.abs(f-p);if(a.polar||a.spider){var y=this._renderData[e],g=y.polarCoords;if(i)if(a.spider){var _=this.getPolarDataPointOffset(d,this._stats.seriesGroups[e].max,e),b=this.getPolarDataPointOffset(c,this._stats.seriesGroups[e].max,e),x="M "+g.x+","+g.y;x+=" L "+_.x+","+_.y,x+=" L "+b.x+","+b.y,m=this.renderer.path(x)}else{var w={},S={x:Math.min(f,p),y:t.y,width:v,height:t.height};this._columnAsPieSlice(w,t,g,S),m=w.element}else{var k=this._toPolarCoord(g,t,t.x,y.baseOffset),C=this._toPolarCoord(g,t,t.x,f),N=this._toPolarCoord(g,t,t.x,p),A=this.renderer._ptdist(k.x,k.y,C.x,C.y),M=this.renderer._ptdist(k.x,k.y,N.x,N.y),T=Math.round(360*-g.startAngle/(2*Math.PI)),D=Math.round(360*-g.endAngle/(2*Math.PI));if(T>D){var O=T;T=D,D=O}if(a.spider){var E=y.xAxis.offsetAngles,F="",P=[M,A],I=E;for(var L in g.isClosedCircle&&(I=E.slice(0)).push(I[0]),P){for(var R=0;R<I.length;R++){var B=0===L?R:E.length-R-1,H=g.x+P[L]*Math.cos(I[B]),V=g.y+P[L]*Math.sin(I[B]);F+=""===F?"M ":" L",F+=this.renderer._ptrnd(H)+","+this.renderer._ptrnd(V)}0===L&&(H=g.x+P[1]*Math.cos(I[B]),V=g.y+P[1]*Math.sin(I[B]),F+=" L"+this.renderer._ptrnd(H)+","+this.renderer._ptrnd(V))}F+=" Z",m=this.renderer.path(F)}else m=this.renderer.pieslice(g.x,g.y,A,M,T,D)}}else{var G={x:Math.min(f,p),y:o.y,width:v,height:o.height};if(i||(G={x:o.x,y:Math.min(f,p),width:o.width,height:v}),l){var z=G.x;G.x=G.y,G.y=z,z=G.width,G.width=G.height,G.height=z}m=0===v||1===v?this.renderer.line(this.renderer._ptrnd(G.x),this.renderer._ptrnd(G.y),this.renderer._ptrnd(G.x+(l?0:G.width)),this.renderer._ptrnd(G.y+(l?G.height:0))):this.renderer.rect(G.x,G.y,G.width,G.height)}var j=u.color||this._getThemeColor("band"),U=u.lineColor||j,$=u.lineWidth;isNaN($)&&($=1);var W=u.opacity;(isNaN(W)||W<0||W>1)&&(W=1),this.renderer.attr(m,{fill:j,"fill-opacity":W,stroke:U,"stroke-opacity":W,"stroke-width":$,"stroke-dasharray":u.dashStyle})}}}}},{key:"_getColumnGroupWidth",value:function(e,t,i){var r=this.seriesGroups[e],a=-1!==r.type.indexOf("stacked"),n=this._getColumnGroupsCount(r.orientation);(isNaN(n)||0===n)&&(n=1);var s=t.rangeLength>=1?t.itemWidth:.9*i,o=r.columnsMinWidth;isNaN(o)&&(o=1),isNaN(r.columnsMaxWidth)||(o=Math.min(r.columnsMaxWidth,o)),o>s&&t.length>0&&(s=Math.max(s,.9*i/t.length));var l=o;if(!a){var h=r.seriesGapPercent;(isNaN(h)||h<0)&&(h=10);var u=o;u*=1+(h/=100),l+=r.series.length*u}return{requiredWidth:l,availableWidth:s,targetWidth:Math.max(s/n,l)}}},{key:"_getColumnSerieWidthAndOffset",value:function(e,t){var i=this.seriesGroups[e],r="horizontal"===i.orientation,a=this._plotRect;r&&(a={x:a.y,y:a.x,width:a.height,height:a.width});var n=this._calcGroupOffsets(e,a);if(n&&0!==n.xoffsets.length){var s=this._getColumnGroupsCount(i.orientation);"candlestick"!==i.type&&"ohlc"!==i.type||(s=1);var o=this._getColumnGroupIndex(e),l=this._getColumnGroupWidth(e,n.xoffsets,r?a.height:a.width),h=0,u=l.targetWidth;(!0===this.columnSeriesOverlap||Math.round(u)>Math.round(l.availableWidth/s))&&(s=1,o=0),h-=u*s/2,h+=u*o;var d=i.columnsGapPercent;d<=0&&(d=0),(isNaN(d)||d>=100)&&(d=25);var c=u*(d/=100);c+l.requiredWidth>l.targetWidth&&(c=Math.max(0,l.targetWidth-l.requiredWidth)),Math.round(u)>Math.round(l.availableWidth)&&(c=0),u-=c,h+=c/2;var f=i.seriesGapPercent;(isNaN(f)||f<0)&&(f=10);var p=-1!==i.type.indexOf("stacked"),m=u;p||(m/=i.series.length);var v=this._get([i.seriesGap,u*f/100/(i.series.length-1)]);(!0===i.polar||!0===i.spider||p||i.series.length<=1)&&(v=0);var y=v*(i.series.length-1);i.series.length>1&&y>u-1*i.series.length&&(v=(y=u-1*i.series.length)/Math.max(1,i.series.length-1));var g=m-y/i.series.length,_=0,b=i.columnsMaxWidth;isNaN(b)||g>b&&(_=g-b,g=b);var x=0;return x=p?_/2:(u-g*i.series.length-y)/2+g*t+Math.max(0,t)*v,{width:g,offset:h+x}}}},{key:"_renderColumnSeries",value:function(e,t){var i=this.seriesGroups[e];if(i.series&&0!==i.series.length){var r="horizontal"===i.orientation,a=t;r&&(a={x:t.y,y:t.x,width:t.height,height:t.width});var n=this._calcGroupOffsets(e,a);if(n&&0!==n.xoffsets.length){var s;!0!==i.polar&&!0!==i.spider||(s=this._getPolarAxisCoords(e,a));var o={groupIndex:e,rect:t,vertical:!r,seriesCtx:[],renderData:n,polarAxisCoords:s};o.columnGroupWidth=this._getColumnGroupWidth(e,n.xoffsets,r?a.height:a.width);for(var l,h=this._getGroupGradientType(e),u=0;u<i.series.length;u++){var d=i.series[u];if(!d.customDraw){var c=this._getAnimProps(e,u);l=c.enabled&&!this._isToggleRefresh&&n.xoffsets.length<100?c.duration:0;var f=this._getColumnSerieWidthAndOffset(e,u),p=this._isSerieVisible(e,u),m=this._getSerieSettings(e,u),v=this._getColors(e,u,NaN,this._getGroupGradientType(e),4),y=[];if("function"==typeof d.colorFunction&&!s)for(var g=n.xoffsets.first;g<=n.xoffsets.last;g++)y.push(this._getColors(e,u,g,h,4));var _={seriesIndex:u,serieColors:v,itemsColors:y,settings:m,columnWidth:f.width,xAdjust:f.offset,isVisible:p};o.seriesCtx.push(_)}}this._animColumns(o,0===l?1:0);var b=this;this._enqueueAnimation("series",void 0,void 0,l,(function(e,t,i){b._animColumns(t,i)}),o)}}}},{key:"_getPercent",value:function(e,t,i,r){return isNaN(e)&&(e=t),!isNaN(i)&&!isNaN(e)&&e<i&&(e=i),!isNaN(r)&&!isNaN(e)&&e>r&&(e=r),isNaN(e)?NaN:e}},{key:"_getColumnVOffsets",value:function(e,t,i,r,a,n){var s=this.seriesGroups[t],o=this._getPercent(s.columnsTopWidthPercent,100,0,100),l=this._getPercent(s.columnsBottomWidthPercent,100,0,100);0===o&&0===l&&(l=100);for(var h=this._getPercent(s.columnsNeckHeightPercent,NaN,0,100)/100,u=this._getPercent(s.columnsNeckWidthPercent,100,0,100)/100,d=[],c=NaN,f=0;f<i.length;f++){var p,m=(D=i[f]).seriesIndex,v=e.offsets[m][r].from,y=e.offsets[m][r].to,g=e.xoffsets.data[r],_=D.isVisible;_||(y=v);var b=this._elementRenderInfo;if(_&&b&&b.length>t&&b[t].series.length>m){var x=e.xoffsets.xvalues[r];!(p=b[t].series[m][x])||isNaN(p.from)||isNaN(p.to)||(v=p.from+(v-p.from)*n,y=p.to+(y-p.to)*n,g=p.xoffset+(g-p.xoffset)*n)}p||(y=v+(y-v)*(a?1:n)),isNaN(v)&&(v=isNaN(c)?e.baseOffset:c),c=!isNaN(y)&&a?y:v,isNaN(y)&&(y=v);var w={from:v,to:y,xOffset:g};100===o&&100===l||(w.funnel=!0,w.toWidthPercent=o,w.fromWidthPercent=l),d.push(w)}if(a&&d.length>1&&!(this._elementRenderInfo&&this._elementRenderInfo.length>t)){for(var S=0,k=0,C=-1/0,N=1/0,A=1/0,M=-1/0,T=0;T<d.length;T++){var D;(D=i[T]).isVisible&&(d[T].to>=d[T].from?(k+=d[T].to-d[T].from,A=Math.min(A,d[T].from),M=Math.max(M,d[T].to)):(S+=d[T].from-d[T].to,C=Math.max(C,d[T].from),N=Math.min(N,d[T].to)))}var O=S,E=k;S*=n,k*=n;for(var F=0,P=0,I=0;I<d.length;I++)if(d[I].to>=d[I].from){var L=d[I].to-d[I].from;L+P>k&&(L=Math.max(0,k-P),d[I].to=d[I].from+L),100===o&&100===l||(d[I].funnel=!0,!isNaN(h)&&E*h>=P?d[I].fromWidthPercent=100*u:d[I].fromWidthPercent=Math.abs(d[I].from-A)/E*(o-l)+l,!isNaN(h)&&E*h>=0+(P+L)?d[I].toWidthPercent=100*u:d[I].toWidthPercent=Math.abs(d[I].to-A)/E*(o-l)+l),P+=L}else{var R=d[I].from-d[I].to;R+F>S&&(R=Math.max(0,S-F),d[I].to=d[I].from-R),100===o&&100===l||(d[I].funnel=!0,!isNaN(h)&&O*h>=F?d[I].fromWidthPercent=100*u:d[I].fromWidthPercent=Math.abs(d[I].from-C)/O*(o-l)+l,!isNaN(h)&&O*h>=0+(F+R)?d[I].toWidthPercent=100*u:d[I].toWidthPercent=Math.abs(d[I].to-C)/O*(o-l)+l),F+=R}}return d}},{key:"_columnAsPieSlice",value:function(e,t,i,r){var a=this._toPolarCoord(i,t,r.x,r.y),n=this._toPolarCoord(i,t,r.x,r.y+r.height),s=this.renderer._ptdist(i.x,i.y,n.x,n.y),o=this.renderer._ptdist(i.x,i.y,a.x,a.y),l=t.width,h=180*Math.abs(i.startAngle-i.endAngle)/Math.PI,u=-(r.x-t.x)*h/l,d=-(r.x+r.width-t.x)*h/l,c=i.startAngle;if(u-=c=360*c/(2*Math.PI),d-=c,e)if(void 0!==e.element&&null!==e.element){var f=this.renderer.pieSlicePath(i.x,i.y,s,o,d,u,0);f+=" Z",this.renderer.attr(e.element,{d:f})}else e.element=this.renderer.pieslice(i.x,i.y,s,o,d,u,0);return{fromAngle:d,toAngle:u,innerRadius:s,outerRadius:o}}},{key:"_setRenderInfo",value:function(e,t,i,r){this._renderData[e].offsets[t][i].elementInfo=r}},{key:"_getRenderInfo",value:function(e,t,i){return this._renderData[e].offsets[t][i].elementInfo||{}}},{key:"_animColumns",value:function(e,t){for(var i=e.groupIndex,r=this.seriesGroups[i],a=e.renderData,n=-1!==r.type.indexOf("waterfall"),s=this._getXAxis(i),o=-1!==r.type.indexOf("stacked"),l=e.polarAxisCoords,h=-1,u=0;u<r.series.length;u++)if(this._isSerieVisible(i,u)){h=u;break}for(var d=NaN,c=NaN,f=0;f<e.seriesCtx.length;f++){var p=e.seriesCtx[f];(isNaN(d)||d>p.xAdjust)&&(d=p.xAdjust),(isNaN(c)||c<p.xAdjust+p.columnWidth)&&(c=p.xAdjust+p.columnWidth)}var m=Math.abs(c-d),v=this._get([r.columnsGapPercent,25])/100;(isNaN(v)<0||v>=1)&&(v=.25);for(var y=v*m,g=e.renderData.xoffsets,_=-1,b={},x=!0===r.skipOverlappingPoints,w=g.first;w<=g.last;w++){var S=g.data[w];if(!(isNaN(S)||-1!==_&&Math.abs(S-_)<m-1+y&&x)){_=S;var k=this._getColumnVOffsets(a,i,e.seriesCtx,w,o,t),C=!1;if(n)for(var N=0;N<r.series.length;N++)r.series[N].summary&&g.xvalues[w][r.series[N].summary]&&(C=!0);for(var A=0;A<e.seriesCtx.length;A++){var M=(p=e.seriesCtx[A]).seriesIndex,T=r.series[M],D=k[A].from,O=k[A].to,E=k[A].xOffset,F=(e.vertical?e.rect.x:e.rect.y)+p.xAdjust,P=p.settings,I=0!==p.itemsColors.length?p.itemsColors[w-a.xoffsets.first]:p.serieColors,L=this._isSerieVisible(i,M);if(L){var R={x:S=this.renderer._ptrnd(F+E),width:p.columnWidth};k[A].funnel&&(R.fromWidthPercent=k[A].fromWidthPercent,R.toWidthPercent=k[A].toWidthPercent);var B=!0;e.vertical?(R.y=D,R.height=O-D,R.height<0&&(R.y+=R.height,R.height=-R.height,B=!1)):(R.x=D<O?D:O,R.width=Math.abs(D-O),B=D-O<0,R.y=S,R.height=p.columnWidth);var H=D-O;if(!isNaN(H)){H=Math.abs(H);var V=void 0,G=this._getRenderInfo(i,M,w),z=G.element,j=G.labelElement,U=null==z;if(j&&(this.renderer.removeElement(j),j=void 0),l){var $={element:z};V=this._columnAsPieSlice($,e.rect,l,R),z=$.element,I=this._getColors(i,M,void 0,"radialGradient",V.outerRadius)}else if(k[A].funnel){var W=this._getTrapezoidPath(Object.assign({},R),e.vertical,B);U?z=this.renderer.path(W,{}):this.renderer.attr(z,{d:W})}else U?z=this.renderer.rect(R.x,R.y,e.vertical?R.width:0,e.vertical?0:R.height):!0===e.vertical?this.renderer.attr(z,{x:R.x,y:R.y,height:H}):this.renderer.attr(z,{x:R.x,y:R.y,width:H});if(H<1&&(1!==t||l)?this.renderer.attr(z,{display:"none"}):this.renderer.attr(z,{display:"block"}),U&&this.renderer.attr(z,{fill:I.fillColor,"fill-opacity":P.opacity,"stroke-opacity":P.opacity,stroke:I.lineColor,"stroke-width":P.stroke,"stroke-dasharray":P.dashStyle}),j&&this.renderer.removeElement(j),!L||0===H&&t<1)G={element:z,labelElement:j},this._setRenderInfo(i,M,w,G);else{if(n&&!1!==this._get([T.showWaterfallLines,r.showWaterfallLines])){if(!o||o&&A===h){var X=o?-1:A;if(1===t&&!isNaN(a.offsets[A][w].from)&&!isNaN(a.offsets[A][w].to)){var Y=b[X];if(null!=Y){var q={x:Y.x,y:this.renderer._ptrnd(Y.y)},J={x:S,y:q.y},Z=r.columnsTopWidthPercent/100;isNaN(Z)?Z=1:(Z>1||Z<0)&&(Z=1);var Q=r.columnsBottomWidthPercent/100;isNaN(Q)?Q=1:(Q>1||Q<0)&&(Q=1);var K=e.vertical?R.width:R.height;if(q.x=q.x-K/2+K/2*Z,C){var ee=K*Z/2;J.x=J.x+K/2-(s.flip?-ee:ee)}else{var te=K*Q/2;J.x=J.x+K/2-(s.flip?-te:te)}e.vertical||(this._swapXY([q]),this._swapXY([J])),this.renderer.line(q.x,q.y,J.x,J.y,{stroke:Y.color,"stroke-width":P.stroke,"stroke-opacity":P.opacity,"fill-opacity":P.opacity,"stroke-dasharray":P.dashStyle})}}}1===t&&0!==H&&(b[o?-1:A]={y:O,x:e.vertical?R.x+R.width:R.y+R.height,color:I.lineColor})}if(l){K=this._showLabel(i,M,w,R,void 0,void 0,!0);var ie=V.outerRadius+10,re=this._adjustTextBoxPosition(l.x,l.y,K,ie,(V.fromAngle+V.toAngle)/2,!0,!1,!1);j=this._showLabel(i,M,w,{x:re.x,y:re.y},void 0,void 0,!1,!1,!1)}else j=this._showLabel(i,M,w,R,void 0,void 0,!1,!1,B);G={element:z,labelElement:j},this._setRenderInfo(i,M,w,G),1===t&&this._installHandlers(z,"column",i,M,w)}}}}}}}},{key:"_getTrapezoidPath",value:function(e,t,i){var r="",a=e.fromWidthPercent/100,n=e.toWidthPercent/100;if(!t){var s=e.width;e.width=e.height,e.height=s,s=e.x,e.x=e.y,e.y=s}var o=e.x+e.width/2,l=[{x:o-e.width*(i?n:a)/2,y:e.y+e.height},{x:o-e.width*(i?a:n)/2,y:e.y},{x:o+e.width*(i?a:n)/2,y:e.y},{x:o+e.width*(i?n:a)/2,y:e.y+e.height}];t||this._swapXY(l),r+="M "+this.renderer._ptrnd(l[0].x)+","+this.renderer._ptrnd(l[0].y);for(var h=1;h<l.length;h++)r+=" L "+this.renderer._ptrnd(l[h].x)+","+this.renderer._ptrnd(l[h].y);return r+=" Z"}},{key:"_swapXY",value:function(e){for(var t=0;t<e.length;t++){var i=e[t].x;e[t].x=e[t].y,e[t].y=i}}},{key:"_renderCandleStickSeries",value:function(e,t,i){var r=this,a=r.seriesGroups[e];if(a.series&&0!==a.series.length){var n="horizontal"===a.orientation,s=t;n&&(s={x:t.y,y:t.x,width:t.height,height:t.width});var o=r._calcGroupOffsets(e,s);if(o&&0!==o.xoffsets.length){var l;(a.polar||a.spider)&&(l=r._getPolarAxisCoords(e,s));for(var h=r._getGroupGradientType(e),u=[],d=0;d<a.series.length;d++)u[d]=r._getColumnSerieWidthAndOffset(e,d);for(var c=0;c<a.series.length;c++)if(this._isSerieVisible(e,c)){var f=r._getSerieSettings(e,c),p=a.series[c];if(!p.customDraw){var m="function"==typeof p.colorFunction?void 0:r._getColors(e,c,NaN,h),v={rect:t,inverse:n,groupIndex:e,seriesIndex:c,symbolType:p.symbolType,symbolSize:p.symbolSize,"fill-opacity":f.opacity,"stroke-opacity":f.opacity,"stroke-width":f.stroke,"stroke-dasharray":f.dashStyle,gradientType:h,colors:m,renderData:o,polarAxisCoords:l,columnsInfo:u,isOHLC:i,items:[],self:r},y=r._getAnimProps(e,c),g=y.enabled&&!r._isToggleRefresh&&o.xoffsets.length<5e3?y.duration:0;r._animCandleStick(v,0),r._enqueueAnimation("series",void 0,void 0,g,(function(e,t,i){r._animCandleStick(t,i)}),v)}}}}}},{key:"_animCandleStick",value:function(e,t){var i=["Open","Low","Close","High"],r=e.columnsInfo[e.seriesIndex].width,a=e.self.seriesGroups[e.groupIndex],n=e.renderData.xoffsets,s=-1,o=Math.abs(n.data[n.last]-n.data[n.first]);o*=t;for(var l=NaN,h=NaN,u=0;u<e.columnsInfo.length;u++){var d=e.columnsInfo[u];(isNaN(l)||l>d.offset)&&(l=d.offset),(isNaN(h)||h<d.offset+d.width)&&(h=d.offset+d.width)}for(var c=Math.abs(h-l),f=!1!==a.skipOverlappingPoints,p=n.first;p<=n.last;p++){var m=n.data[p];if(!(isNaN(m)||-1!==s&&Math.abs(m-s)<c&&f)){if(Math.abs(n.data[p]-n.data[n.first])>o)break;s=m;var v=e.items[p]=e.items[p]||{};for(var y in i){var g=e.self._getDataValueAsNumber(p,a.series[e.seriesIndex]["dataField"+i[y]],e.groupIndex);if(isNaN(g))break;var _=e.renderData.offsets[e.seriesIndex][p][i[y]];if(isNaN(_))break;v[i[y]]=_}if(m+=e.inverse?e.rect.y:e.rect.x,e.polarAxisCoords){var b=this._toPolarCoord(e.polarAxisCoords,this._plotRect,m,_);m=b.x,_=b.y}for(var x in m=this.renderer._ptrnd(m),i)v[x]=this.renderer._ptrnd(v[x]);var w=e.colors;if(w||(w=e.self._getColors(e.groupIndex,e.seriesIndex,p,e.gradientType)),e.isOHLC){var S="M"+m+","+v.Low+" L"+m+","+v.High+" M"+(m-r/2)+","+v.Open+" L"+m+","+v.Open+" M"+(m+r/2)+","+v.Close+" L"+m+","+v.Close;e.inverse&&(S="M"+v.Low+","+m+" L"+v.High+","+m+" M"+v.Open+","+(m-r/2)+" L"+v.Open+","+m+" M"+v.Close+","+m+" L"+v.Close+","+(m+r/2)),(k=v.lineElement)||(k=this.renderer.path(S,{}),this.renderer.attr(k,{fill:w.fillColor,"fill-opacity":e["fill-opacity"],"stroke-opacity":e["fill-opacity"],stroke:w.lineColor,"stroke-width":e["stroke-width"],"stroke-dasharray":e["stroke-dasharray"]}),v.lineElement=k),1===t&&this._installHandlers(k,"column",e.groupIndex,e.seriesIndex,p)}else{var k;(k=v.lineElement)||(k=e.inverse?this.renderer.line(v.Low,m,v.High,m):this.renderer.line(m,v.Low,m,v.High),this.renderer.attr(k,{fill:w.fillColor,"fill-opacity":e["fill-opacity"],"stroke-opacity":e["fill-opacity"],stroke:w.lineColor,"stroke-width":e["stroke-width"],"stroke-dasharray":e["stroke-dasharray"]}),v.lineElement=k);var C=v.stickElement;if(m-=r/2,!C){var N=w.fillColor;v.Close<=v.Open&&w.fillColorAlt&&(N=w.fillColorAlt),C=e.inverse?this.renderer.rect(Math.min(v.Open,v.Close),m,Math.abs(v.Close-v.Open),r):this.renderer.rect(m,Math.min(v.Open,v.Close),r,Math.abs(v.Close-v.Open)),this.renderer.attr(C,{fill:N,"fill-opacity":e["fill-opacity"],"stroke-opacity":e["fill-opacity"],stroke:w.lineColor,"stroke-width":e["stroke-width"],"stroke-dasharray":e["stroke-dasharray"]}),v.stickElement=C}1===t&&this._installHandlers(C,"column",e.groupIndex,e.seriesIndex,p)}}}}},{key:"_renderScatterSeries",value:function(e,t,i){var r=this.seriesGroups[e];if(r.series&&0!==r.series.length){var a=-1!==r.type.indexOf("bubble"),n="horizontal"===r.orientation,s=t;n&&(s={x:t.y,y:t.x,width:t.height,height:t.width});var o=this._calcGroupOffsets(e,s);if(o&&0!==o.xoffsets.length){var l,h=s.width;(r.polar||r.spider)&&(h=2*(l=this._getPolarAxisCoords(e,s)).r);var u=this._getGroupGradientType(e);i||(i="to");for(var d=0;d<r.series.length;d++){var c=this._getSerieSettings(e,d),f=r.series[d];if(!f.customDraw){var p=f.dataField,m="function"==typeof f.colorFunction,v=this._getColors(e,d,NaN,u),y=NaN,g=NaN;if(a)for(var _=o.xoffsets.first;_<=o.xoffsets.last;_++)"number"!=typeof(M=this._getDataValueAsNumber(_,f.radiusDataField||f.sizeDataField,e))&&this.error(this.localize("invalidRadiusDataField",{index:_})),isNaN(M)||((isNaN(y)||M<y)&&(y=M),(isNaN(g)||M>g)&&(g=M));var b=f.minRadius||f.minSymbolSize;isNaN(b)&&(b=h/50);var x=f.maxRadius||f.maxSymbolSize;isNaN(x)&&(x=h/25),b>x&&(x=b);var w=f.radius;w=isNaN(w)&&!isNaN(f.symbolSize)?"circle"===f.symbolType?f.symbolSize/2:f.symbolSize:5;for(var S=this._getAnimProps(e,d),k=S.enabled&&!this._isToggleRefresh&&o.xoffsets.length<5e3?S.duration:0,C={groupIndex:e,seriesIndex:d,symbolType:f.symbolType,symbolSize:f.symbolSize,"fill-opacity":c.opacity,"stroke-opacity":c.opacity,"stroke-width":c.stroke,"stroke-width-symbol":c.strokeSymbol,"stroke-dasharray":c.dashStyle,items:[],polarAxisCoords:l},N=void 0,A=o.xoffsets.first;A<=o.xoffsets.last;A++){var M;if("number"==typeof(M=this._getDataValueAsNumber(A,p,e))){var T=o.xoffsets.data[A],D=o.xoffsets.xvalues[A],O=o.offsets[d][A][i];if(!(O<s.y||O>s.y+s.height||isNaN(T)||isNaN(O))){if(n){var E=T;T=O,O=E+t.y}else T+=t.x;if(!(!m&&N&&this.enableSampling&&this.renderer._ptdist(N.x,N.y,T,O)<1)){N={x:T,y:O};var F=w;if(a){var P=this._getDataValueAsNumber(A,f.radiusDataField||f.sizeDataField,e);if("number"!=typeof P)continue;F=b+(x-b)*(P-y)/Math.max(1,g-y),isNaN(F)&&(F=b)}o.offsets[d][A].radius=F;var I=NaN,L=NaN,R=0,B=this._elementRenderInfo;if(null!=D&&B&&B.length>e&&B[e].series.length>d){var H=B[e].series[d][D];H&&!isNaN(H.to)&&(I=H.to,L=H.xoffset,R=w,n?(E=L,L=I,I=E+t.y):L+=t.x,a&&(R=b+(x-b)*(H.valueRadius-y)/Math.max(1,g-y),isNaN(R)&&(R=b)))}m&&(v=this._getColors(e,d,A,u)),C.items.push({from:R,to:F,itemIndex:A,fill:v.fillColor,stroke:v.lineColor,x:T,y:O,xFrom:L,yFrom:I})}}}}this._animR(C,0);var V=this;this._enqueueAnimation("series",void 0,void 0,k,(function(e,t,i){V._animR(t,i)}),C)}}}}}},{key:"_animR",value:function(e,t){for(var i=e.items,r=e.symbolType||"circle",a=e.symbolSize,n=0;n<i.length;n++){var s=i[n],o=s.x,l=s.y,h=Math.round((s.to-s.from)*t+s.from);if(isNaN(s.yFrom)||(l=s.yFrom+(l-s.yFrom)*t),isNaN(s.xFrom)||(o=s.xFrom+(o-s.xFrom)*t),e.polarAxisCoords){var u=this._toPolarCoord(e.polarAxisCoords,this._plotRect,o,l);o=u.x,l=u.y}o=this.renderer._ptrnd(o),l=this.renderer._ptrnd(l),h=this.renderer._ptrnd(h);var d=this._getRenderInfo(e.groupIndex,e.seriesIndex,i[n].itemIndex),c=d.element,f=d.labelElement;"circle"===r?(c||(c=this.renderer.circle(o,l,h),this.renderer.attr(c,{fill:s.fill,"fill-opacity":e["fill-opacity"],"stroke-opacity":e["fill-opacity"],stroke:s.stroke,"stroke-width":e["stroke-width"],"stroke-dasharray":e["stroke-dasharray"]})),this.renderer.attr(c,{r:h,cy:l,cx:o})):(c&&this.renderer.removeElement(c),c=this._drawSymbol(r,o,l,s.fill,e["fill-opacity"],s.stroke,e["stroke-opacity"]||e["fill-opacity"],e["stroke-width-symbol"],e["stroke-dasharray"],a||h)),f&&this.renderer.removeElement(f),f=this._showLabel(e.groupIndex,e.seriesIndex,s.itemIndex,{x:o-h,y:l-h,width:2*h,height:2*h}),t>=1&&this._installHandlers(c,"circle",e.groupIndex,e.seriesIndex,s.itemIndex),this._setRenderInfo(e.groupIndex,e.seriesIndex,i[n].itemIndex,{element:c,labelElement:f})}}},{key:"_showMultiSeriesToolTip",value:function(e){for(var t="<div style='text-align:left'>",i="",r=0;r<this.seriesGroups.length;r++)if(!this._isPieGroup(r)){var a=this._getXAxis(r),n=this._getValueAxis(r),s=this.seriesGroups[r],o=this._getAxisSettings(a),l=this._getFormatSettings(o,"toolTipFormatSettings"),h=o.toolTipFormatFunction,u=this._getDataValue(e,a.dataField,r);void 0!==a.dataField&&null!==a.dataField&&""!==a.dataField||(u=e),"date"===a.type&&(u=this._castAsDate(u,(l?l.dateFormat:void 0)||a.dateFormat)),h||l||"date"!==a.type||(h=this._getDefaultDTFormatFn(a.baseUnit||"day"));var d=a.displayText||a.dataField||"";""!==d&&(d+=": ");var c=d+this._formatValue(u,l,h,r,void 0,e);i!==c&&(""!==i&&(t+="<br />"),t+=c+"<br /><br />",i=c);for(var f=0;f<s.series.length;f++){var p=s.series[f];if(!1!==s.showToolTips&&!1!==p.showToolTips&&this._isSerieVisible(r,f)){var m=this._get([this._getFormatSettings(p,"toolTipFormatSettings"),this._getFormatSettings(s,"toolTipFormatSettings"),this._getFormatSettings(n,"toolTipFormatSettings"),this._getFormatSettings(this,"toolTipFormatSettings")]),v=this._get([p.toolTipFormatFunction,s.toolTipFormatFunction,n.toolTipFormatFunction,this.toolTipFormatFunction]),y=this._getFormattedValue(r,f,e,m,v);t+='<span style="color:'+this._getColors(r,f,e).lineColor+';">'+y+"</span><br />\n"}}}var g=this._get([this.toolTipClass,"smart-chart-tooltip-text"]),_=this._get([this.toolTipBackground,this._getThemeColor("background")]),b=this._get([this.toolTipLineColor,this._getThemeColor("line")]),x=this._get([this.toolTipOpacity,1]);t+="</div>";var w=this.getItemCoord(this._ttEl.gidx,this._ttEl.sidx,this._ttEl.iidx);w.x+=window.pageXOffset,w.y+=window.pageYOffset,this._createTooltip(w,this.seriesGroups[this._ttEl.gidx],t,{css:g,fill:_,stroke:b,fillOpacity:x,symbolSize:3})}},{key:"_showToolTip",value:function(e,t,i,r,a){var n=this._getXAxis(i),s=this._getValueAxis(i);if(!this._ttEl||i!==this._ttEl.gidx||r!==this._ttEl.sidx||a!==this._ttEl.iidx){var o=this.seriesGroups[i],l=o.series[r],h=this.enableCrosshairs;this._pointMarker?(e=parseInt(this._pointMarker.x+5),t=parseInt(this._pointMarker.y-5)):h=!1;var u=h&&!1===this.showToolTips;if(e=this.renderer._ptrnd(e),t=this.renderer._ptrnd(t),!1!==o.showToolTips&&!1!==l.showToolTips){this._ttEl||(this._ttEl={}),this._ttEl.sidx=r,this._ttEl.gidx=i,this._ttEl.iidx=a;for(var d=0,c=0;c<this.seriesGroups.length;c++)for(var f=0;f<this.seriesGroups[c].series.length;f++)d++;if(h){var p=this.renderer._ptrnd(this._pointMarker.x),m=this.renderer._ptrnd(this._pointMarker.y),v=this.crosshairsColor||this._getThemeColor("line");if(o.polar||o.spider){var y=this._getPolarAxisCoords(i,this._plotRect);if(this.renderer._ptdist(p,m,y.x,y.y)>y.r)return;var g=Math.atan2(m-y.y,p-y.x),_=Math.cos(g)*y.r+y.x,b=Math.sin(g)*y.r+y.y;this._ttEl.vLine?this.renderer.attr(this._ttEl.vLine,{x1:y.x,y1:y.y,x2:_,y2:b}):this._ttEl.vLine=this.renderer.line(y.x,y.y,_,b,{stroke:v,"stroke-width":this.crosshairsLineWidth||1,"stroke-dasharray":this.crosshairsDashStyle||""})}else this._ttEl.vLine&&this._ttEl.hLine?(this.renderer.attr(this._ttEl.vLine,{x1:p,x2:p}),this.renderer.attr(this._ttEl.hLine,{y1:m,y2:m})):(this._ttEl.vLine=this.renderer.line(p,this._plotRect.y,p,this._plotRect.y+this._plotRect.height,{stroke:v,"stroke-width":this.crosshairsLineWidth||1,"stroke-dasharray":this.crosshairsDashStyle||""}),this._ttEl.hLine=this.renderer.line(this._plotRect.x,m,this._plotRect.x+this._plotRect.width,m,{stroke:v,"stroke-width":this.crosshairsLineWidth||1,"stroke-dasharray":this.crosshairsDashStyle||""}))}if(this.showToolTipsOnAllSeries&&!this._isPieGroup(i)&&d>1)this._showMultiSeriesToolTip(a);else{var x=this._get([this._getFormatSettings(l,"toolTipFormatSettings"),this._getFormatSettings(o,"toolTipFormatSettings"),this._getFormatSettings(s,"toolTipFormatSettings"),this._getFormatSettings(this,"toolTipFormatSettings")]),w=this._get([l.toolTipFormatFunction,o.toolTipFormatFunction,s.toolTipFormatFunction,this.toolTipFormatFunction]),S=this._getColors(i,r,a),k=this._getDataValue(a,n.dataField,i);void 0!==n.dataField&&null!==n.dataField&&""!==n.dataField||(k=a),"date"===n.type&&(k=this._castAsDate(k,(x?x.dateFormat:void 0)||n.dateFormat));var C="";if("function"==typeof w){var N={},A=0;for(var M in l)0===M.indexOf("dataField")&&(N[M.substring(9,M.length).toLowerCase()]=this._getDataValue(a,l[M],i),A++);0===A?N=this._getDataValue(a,void 0,i):1===A&&(N=N[""]),C=w(N,a,l,o,k,n)}else{C=this._getFormattedValue(i,r,a,x,w);var T=this._getAxisSettings(n),D=this._getFormatSettings(T,"toolTipFormatSettings"),O=T.toolTipFormatFunction;O||D||"date"!==n.type||(O=this._getDefaultDTFormatFn(n.baseUnit||"day"));var E=this._formatValue(k,D,O,i,r,a);if(this._isPieGroup(i))k=this._getDataValue(a,l.displayText||l.dataField,i),C=(E=this._formatValue(k,D,O,i,r,a))+": "+C;else{var F=n.displayText||n.dataField||"";C=F.length>0?F+": "+E+"<br>"+C:E+"<br>"+C}}if(!u&&!1!==this.showToolTips){var P=this._get([l.toolTipClass,o.toolTipClass,this.toolTipClass,"smart-chart-tooltip-text"]),I=this._get([l.toolTipBackground,o.toolTipBackground,this.toolTipBackground,this._getThemeColor("background")]),L=this._get([l.toolTipLineColor,o.toolTipLineColor,this.toolTipLineColor,S.lineColor,this._getThemeColor("line")]),R=this._get([l.toolTipOpacity,o.toolTipOpacity,this.toolTipOpacity,1]),B=this.getItemCoord(i,r,a);B.y=Math.min(Math.max(B.y,this._plotRect.y),this._plotRect.y+this._plotRect.y+this._plotRect.height);var H=0;this._pointMarker&&this._pointMarker.element&&(H=l.symbolSizeSelected,isNaN(H)&&(H=l.symbolSize),(isNaN(H)||H>50||H<0)&&(H=o.symbolSize),(isNaN(H)||H>50||H<0)&&(H=8)),this._createTooltip(B,o,C,{css:P,fill:I,stroke:L,fillOpacity:R,symbolSize:H})}}}}}},{key:"_fitTooltip",value:function(e,t,i,r,a){var n={},s=2+a/2;if(t.x-i.width-7-s>e.x&&t.y+t.height/2-i.height/2>e.y&&t.y+t.height/2+i.height/2<e.y+e.height&&(n.left={arrowLocation:"right",x:t.x-i.width-7-s,y:t.y+t.height/2-i.height/2,width:i.width+7,height:i.height}),t.x+t.width+i.width+7+s<e.x+e.width&&t.y+t.height/2-i.height/2>e.y&&t.y+t.height/2+i.height/2<e.y+e.height&&(n.right={arrowLocation:"left",x:t.x+t.width+s,y:t.y+t.height/2-i.height/2,width:i.width+7,height:i.height}),t.y-i.height-s-7>e.y&&t.x+t.width/2-i.width/2>e.x&&t.x+t.width/2+i.width/2<e.x+e.width&&(n.top={arrowLocation:"bottom",x:t.x+t.width/2-i.width/2,y:t.y-i.height-s-7,width:i.width,height:i.height+7}),t.y+t.height+i.height+7+s<e.y+e.height&&t.x+t.width/2-i.width/2>e.x&&t.x+t.width/2+i.width/2<e.x+e.width&&(n.bottom={arrowLocation:"top",x:t.x+t.width/2-i.width/2,y:t.y+t.height+s,width:i.width,height:i.height+7}),t.width>t.height||(-1!==r.type.indexOf("stackedcolumn")||-1!==r.type.indexOf("stackedwaterfall"))&&"horizontal"!==r.orientation){if(n.left)return n.left;if(n.right)return n.right}else{if(n.top)return n.top;if(n.bottom)return n.bottom}for(var o in n)if(n[o])return n[o];return{arrowLocation:""}}},{key:"_createTooltip",value:function(e,t,i,r){var a=t.type,n=this._ttEl.box;if(!n){(n=this._ttEl.box=document.createElement("div")).className="smart-chart-tooltip",n.setAttribute("animation",this.animation),n.setAttribute("theme",this.theme);var s=document.createElement("div"),o=document.createElement("div"),l=document.createElement("div");s.id="arrowOuterDiv",s.className="smart-chart-tooltip-arrow-outer",o.id="arrowInnerDiv",o.className="smart-chart-tooltip-arrow-inner",l.id="contentDiv",l.className="smart-chart-tooltip-content",n.appendChild(l),n.appendChild(s),n.appendChild(o),document.body.appendChild(n)}if(i&&0!==i.length){n.classList.add("smart-visibility-hidden");var h=n.firstElementChild,u=n.children[1],d=n.children[2];d.style.opacity=u.style.opacity=r.fillOpacity,h.style.backgroundColor=r.fill,h.style.borderColor=r.stroke,h.style.opacity=r.fillOpacity;var c='<span class="'+r.css+'">'+i+"</span>";h.innerHTML=c;var f=this._measureHtml(c),p=this._plotRect;if(!(f.width>p.width||f.height>p.height)){var m={width:f.width,height:f.height},v="",y=this._isColumnType(a),g=Math.max(e.x,p.x),_=Math.max(e.y,p.y);if(-1!==a.indexOf("pie")||-1!==a.indexOf("donut")){var b=(e.fromAngle+e.toAngle)/2;b*=Math.PI/180;var x=!isNaN(e.innerRadius)&&e.innerRadius>0?(e.innerRadius+e.outerRadius)/2:.75*e.outerRadius;g=e.x=e.center.x+Math.cos(b)*x,_=e.y=e.center.y-Math.sin(b)*x,e.width=e.height=1}else y&&(t.polar||t.spider)&&(e.width=e.height=1);var w=this._fitTooltip(this._plotRect,e,m,t,r.symbolSize);""!==w.arrowLocation&&(v=w.arrowLocation,g=w.x,_=w.y,m.width=w.width,m.height=w.height),"top"===v||"bottom"===v?(m.height+=7,g-=3.5,"bottom"===v&&(_-=7)):"left"!==v&&"right"!==v||(m.width+=7,_-=3.5,"right"===v&&(g-=7)),g+m.width>p.x+p.width&&(v="",g=p.x+p.width-m.width),_+m.height>p.y+p.height&&(v="",_=p.y+p.height-m.height);var S={x:0,y:0},k={x:0,y:0};switch(h.style.width=f.width+"px",h.style.height=f.height+"px",u.style["margin-top"]=u.style["margin-left"]=0,d.style["margin-top"]=d.style["margin-left"]=0,h.style["margin-top"]=h.style["margin-left"]=0,v){case"left":S={x:0,y:(f.height-7)/2},k={x:7,y:0},h.style["margin-left"]="7px",u.style["margin-left"]="0px",u.style["margin-top"]=S.y+"px",u.style["border-left"]="",u.style["border-right"]="7px solid "+r.stroke,u.style["border-top"]="7px solid transparent",u.style["border-bottom"]="7px solid transparent",d.style["margin-left"]="1px",d.style["margin-top"]=S.y+"px",d.style["border-left"]="",d.style["border-right"]="7px solid "+r.fill,d.style["border-top"]="7px solid transparent",d.style["border-bottom"]="7px solid transparent";break;case"right":S={x:m.width-7,y:(f.height-7)/2},k={x:0,y:0},u.style["margin-left"]=S.x+"px",u.style["margin-top"]=S.y+"px",u.style["border-left"]="7px solid "+r.stroke,u.style["border-right"]="",u.style["border-top"]="7px solid transparent",u.style["border-bottom"]="7px solid transparent",d.style["margin-left"]=S.x-1+"px",d.style["margin-top"]=S.y+"px",d.style["border-left"]="7px solid "+r.fill,d.style["border-right"]="",d.style["border-top"]="7px solid transparent",d.style["border-bottom"]="7px solid transparent";break;case"top":S={x:m.width/2-3.5,y:0},k={x:0,y:7},h.style["margin-top"]=k.y+"px",u.style["margin-left"]=S.x+"px",u.style["border-top"]="",u.style["border-bottom"]="7px solid "+r.stroke,u.style["border-left"]="7px solid transparent",u.style["border-right"]="7px solid transparent",d.style["margin-left"]=S.x+"px",d.style["margin-top"]="1px",d.style["border-top"]="",d.style["border-bottom"]="7px solid "+r.fill,d.style["border-left"]="7px solid transparent",d.style["border-right"]="7px solid transparent";break;case"bottom":S={x:m.width/2-3.5,y:m.height-7},k={x:0,y:0},u.style["margin-left"]=S.x+"px",u.style["margin-top"]=S.y+"px",u.style["border-top"]="7px solid "+r.stroke,u.style["border-bottom"]="",u.style["border-left"]="7px solid transparent",u.style["border-right"]="7px solid transparent",d.style["margin-left"]=S.x+"px",d.style["margin-top"]=S.y-1+"px",d.style["border-top"]="7px solid "+r.fill,d.style["border-bottom"]="",d.style["border-left"]="7px solid transparent",d.style["border-right"]="7px solid transparent"}""===v?(u.classList.add("smart-hidden"),d.classList.add("smart-hidden")):(u.classList.remove("smart-hidden"),d.classList.remove("smart-hidden")),n.style.width=m.width+"px",n.style.height=m.height+"px";var C=this.getBoundingClientRect();n.style.left=g+C.left+window.pageXOffset+"px",n.style.top=_+C.top+window.pageYOffset+"px",n.classList.remove("smart-visibility-hidden")}}else n.classList.add("smart-visibility-hidden")}},{key:"_measureHtml",value:function(e){var t=this._measureDiv;t||(this._measureDiv=t=document.createElement("div"),t.className="smart-chart-tooltip",t.style.position="absolute",t.style.visibility="hidden",t.style.left=0,t.style.top=0,(this.shadowRoot||this).appendChild(t)),t.innerHTML=e;var i={width:t.offsetWidth+2,height:t.offsetHeight+2};return Smart.Utilities.Core.Browser.Firefox&&(i.height+=3),i}},{key:"_hideToolTip",value:function(){this._ttEl&&(this._ttEl.box&&this._ttEl.box.classList.add("smart-visibility-hidden"),this._hideCrosshairs(),this._ttEl.gidx=void 0)}},{key:"_hideCrosshairs",value:function(){this._ttEl&&(this._ttEl.vLine&&(this.renderer.removeElement(this._ttEl.vLine),this._ttEl.vLine=void 0),this._ttEl.hLine&&(this.renderer.removeElement(this._ttEl.hLine),this._ttEl.hLine=void 0))}},{key:"_get",value:function(e){return this._draw.getByPriority(e)}},{key:"_getAxisSettings",value:function(e){if(!e)return{};var t=e.gridLines||{},i={visible:this._get([t.visible,!0]),color:this._get([t.color,this._getThemeColor("line")]),unitInterval:t.unitInterval,step:t.step,dashStyle:t.dashStyle,width:this._get([t.lineWidth,1]),offsets:[],alternatingBackgroundColor:e.alternatingBackgroundColor,alternatingBackgroundColor2:e.alternatingBackgroundColor2,alternatingBackgroundOpacity:e.alternatingBackgroundOpacity},r=e.tickMarks||{},a={visible:this._get([r.visible,e.showTickMarks,!0]),color:this._get([r.color,e.tickMarksColor,this._getThemeColor("line")]),unitInterval:this._get([r.unitInterval,r.interval,e.tickMarksInterval]),step:this._get([r.step,e.tickMarksStep]),dashStyle:this._get([r.dashStyle,e.tickMarksDashStyle]),width:this._get([r.lineWidth,1]),size:this._get([r.size,4]),offsets:[]},n=e.title||{},s={visible:this._get([n.visible,!0]),text:this._get([e.description,n.text]),style:this._get([e.descriptionClass,n.class,"smart-chart-axis-description"]),halign:this._get([e.horizontalDescriptionAlignment,n.horizontalAlignment,"center"]),valign:this._get([e.verticalDescriptionAlignment,n.verticalAlignment,"center"]),angle:0,rotationPoint:this._get([n.rotationPoint,"centercenter"]),offset:this._get([n.offset,{x:0,y:0}])},o=e.line||{},l={visible:this._get([o.visible,!0]),color:this._get([o.color,i.color,this._getThemeColor("line")]),dashStyle:this._get([o.dashStyle,i.dashStyle,""]),width:this._get([o.lineWidth,1]),angle:this._get([o.angle,NaN])},h=e.padding||{};h={left:h.left||0,right:h.right||0,top:h.top||0,bottom:h.bottom||0};var u=this._getAxisLabelsSettings(e);return{visible:this._get([e.visible,!0]),customDraw:this._get([e.customDraw,!1]),gridLines:i,tickMarks:a,line:l,title:s,labels:u,padding:h,toolTipFormatFunction:this._get([e.toolTipFormatFunction,e.formatFunction,u.formatFunction]),toolTipFormatSettings:this._get([this._getFormatSettings(e,"toolTipFormatSettings"),this._getFormatSettings(e),this._getFormatSettings(u)])}}},{key:"_getAxisLabelsSettings",value:function(e){var t=e.labels||{};return{visible:this._get([e.showLabels,t.visible,!0]),unitInterval:this._get([t.unitInterval,t.interval,e.labelsInterval]),step:this._get([t.step,e.labelsStep]),angle:this._get([e.textRotationAngle,t.angle,0]),style:this._get([e.class,t.class,"smart-chart-axis-text"]),halign:this._get([e.horizontalTextAlignment,t.horizontalAlignment,"center"]),valign:this._get([e.verticalTextAlignment,t.verticalAlignment,"center"]),textRotationPoint:this._get([e.textRotationPoint,t.rotationPoint,"auto"]),textOffset:this._get([e.textOffset,t.offset,{x:0,y:0}]),autoRotate:this._get([e.labelsAutoRotate,t.autoRotate,!1]),formatSettings:this._get([this._getFormatSettings(e),this._getFormatSettings(t),void 0]),formatFunction:this._get([e.formatFunction,t.formatFunction,void 0])}}},{key:"_getLabelsSettings",value:function(e,t,i,a){for(var n=this.seriesGroups[e],s=n.series[t],o=isNaN(i)?void 0:this._getDataValue(i,s.dataField,e),l=a||["Visible","Offset","Angle","HorizontalAlignment","VerticalAlignment","Class","BackgroundColor","BorderColor","BorderOpacity","Padding","Opacity","BackgroundOpacity","LinesAngles","LinesEnabled","AutoRotate","Radius"],h={},u=0;u<l.length;u++){var d=l[u],c="labels"+d,f="label"+d,p=d.substring(0,1).toLowerCase()+d.substring(1),m=void 0;n.labels&&"object"===r(n.labels)&&(m=n.labels[p]),s.labels&&"object"===r(s.labels)&&void 0!==s.labels[p]&&null!==s.labels[p]&&(m=s.labels[p]),m=this._get([s[c],s[f],m,n[c],n[f]]),h[p]="function"==typeof m?m(o,i,s,n):m}h.class=h.class||"smart-chart-label-text",h.visible=this._get([h.visible,s.showLabels,n.showLabels,void 0!==s.labels&&null!==s.labels||void 0,void 0!==n.labels&&null!==n.labels||void 0]);var v=h.padding||1;return h.padding={left:this._get([v.left,isNaN(v)?1:v]),right:this._get([v.right,isNaN(v)?1:v]),top:this._get([v.top,isNaN(v)?1:v]),bottom:this._get([v.bottom,isNaN(v)?1:v])},h}},{key:"_showLabel",value:function(e,t,i,r,a,n,s,o,l,h,u){var d,c={width:0,height:0};if(!isNaN(i)){var f=this._getLabelsSettings(e,t,i);if(!f.visible)return s?c:void 0;if(r.width<0||r.height<0)return s?c:void 0;var p=f.angle;isNaN(h)||(p=h);var m=f.offset||{},v={x:m.x,y:m.y};isNaN(v.x)&&(v.x=0),isNaN(v.y)&&(v.y=0),a=a||f.horizontalAlignment||"center",n=n||f.verticalAlignment||"center";var y=this._getFormattedValue(e,t,i,void 0,void 0,!0),g=r.width,_=r.height;if(!0===o&&"center"!==a&&(a="right"===a?"left":"right"),!0===l&&"center"!==n&&"middle"!==n&&(n="top"===n?"bottom":"top",v.y*=-1),c=this.renderer.measureText(y,p,{class:f.class}),s)return c;var b=0,x=0;g>0&&(""===a||"center"===a?b+=(g-c.width)/2:"right"===a&&(b+=g-c.width)),_>0&&(""===n||"center"===n?x+=(_-c.height)/2:"bottom"===n&&(x+=_-c.height)),b+=r.x+v.x,x+=r.y+v.y;var w=this._plotRect;b<=w.x&&(b=w.x+2),x<=w.y&&(x=w.y+2);var S,k={width:Math.max(c.width,1),height:Math.max(c.height,1)};x+k.height>=w.y+w.height&&(x=w.y+w.height-(d?(k.height+d.height)/2:k.height)-2),b+k.width>=w.x+w.width&&(b=w.x+w.width-k.width-2);var C=f.backgroundColor,N=f.borderColor,A=f.padding;(C||N)&&(S=this.renderer.beginGroup(),this.renderer.rect(b-A.left,x-A.top,c.width+A.left+A.right,c.height+A.bottom+A.bottom,{fill:C||"transparent","fill-opacity":f.backgroundOpacity||1,stroke:N||"transparent","stroke-opacity":f.borderOpacity,"stroke-width":1}));var M=this.renderer.text(y,b,x,c.width,c.height,p,{class:f.class,opacity:f.opacity||1},!1,"center","center",void 0,arguments[11]);return u&&(u.x=b-A.left,u.y=x-A.top,u.width=c.width+A.left+A.right,u.height=c.height+A.bottom+A.bottom),S&&this.renderer.endGroup(),S||M}}},{key:"_getAnimProps",value:function(e,t){var i=this.seriesGroups[e],r=isNaN(t)?void 0:i.series[t],a=this.hasAnimation;i.animation&&(a="none"!==i.animation),r&&r.animation&&(a="none"!==r.animation);var n=this.animationDuration;isNaN(n)&&(n=1e3);var s=i.animationDuration;if(isNaN(s)||(n=s),r){var o=r.animationDuration;isNaN(o)||(n=o)}return n>5e3&&(n=1e3),{enabled:a,duration:n}}},{key:"_isColorTransition",value:function(e,t,i,r){if(r-1<i.xoffsets.first)return!1;var a=this._getColors(e,t,r,this._getGroupGradientType(e)),n=this._getColors(e,t,r-1,this._getGroupGradientType(e));return a.fillColor!==n.fillColor}},{key:"_renderLineSeries",value:function(e,t){var i=this.seriesGroups[e];if(i.series&&0!==i.series.length){var r=-1!==i.type.indexOf("area"),a=-1!==i.type.indexOf("stacked"),n=a&&-1!==i.type.indexOf("100"),s=-1!==i.type.indexOf("spline"),o=-1!==i.type.indexOf("step"),l=-1!==i.type.indexOf("range"),h=!0===i.polar||!0===i.spider;if(h&&(o=!1),!o||!s){var u="horizontal"===i.orientation,d=!0===this._getXAxis(e).flip,c=t;u&&(c={x:t.y,y:t.x,width:t.height,height:t.width});var f=this._calcGroupOffsets(e,c);if(f&&0!==f.xoffsets.length){this._linesRenderInfo||(this._linesRenderInfo={}),this._linesRenderInfo[e]={};for(var p=i.series.length-1;p>=0;p--){var m=this._getSerieSettings(e,p),v={groupIndex:e,rect:c,serieIndex:p,swapXY:u,isArea:r,isSpline:s,isRange:l,isPolar:h,settings:m,segments:[],pointsLength:0};if(this._isSerieVisible(e,p)){var y=i.series[p];if(!y.customDraw){var g,_="function"==typeof y.colorFunction,b=f.xoffsets.first,x=b,w=this._getColors(e,p,NaN,this._getGroupGradientType(e));do{var S=[],k=[],C=[],N=0,A=0,M=NaN,T=NaN,D=NaN;if(!(f.xoffsets.length<1)){var O=this._getAnimProps(e,p),E=O.enabled&&!this._isToggleRefresh&&f.xoffsets.length<1e4&&O.duration,F=b;g=!1;for(var P=void 0,I=b;I<=f.xoffsets.last;I++){b=I;var L=f.xoffsets.data[I],R=f.xoffsets.xvalues[I];if(!(isNaN(L)||(N=L=Math.max(L,1),A=f.offsets[p][I].to,!_&&P&&this.enableSampling&&this.renderer._ptdist(P.x,P.y,N,A)<1))){P={x:N,y:A};var B=f.offsets[p][I].from;if(isNaN(A)||isNaN(B)){if("connect"===y.emptyPointsDisplay)continue;if("zero"!==y.emptyPointsDisplay){g=!0;break}isNaN(A)&&(A=f.baseOffset),isNaN(B)&&(B=f.baseOffset)}if(_&&this._isColorTransition(e,p,f,b)&&S.length>1){b--;break}var H=this._elementRenderInfo;if(H&&H.length>e&&H[e].series.length>p){var V=H[e].series[p][R],G=(D=this.renderer._ptrnd(V?V.to:void 0),this.renderer._ptrnd(c.x+(V?V.xoffset:void 0)));C.push(u?{y:G,x:D,index:I}:{x:G,y:D,index:I})}x=I,m.stroke<2&&(A-c.y<=1&&(A=c.y+1),B-c.y<=1&&(B=c.y+1),c.y+c.height-A<=1&&(A=c.y+c.height-1),c.y+c.height-B<=1&&(B=c.y+c.height-1)),!r&&n&&(A<=c.y&&(A=c.y+1),A>=c.y+c.height&&(A=c.y+c.height-1),B<=c.y&&(B=c.y+1),B>=c.y+c.height&&(B=c.y+c.height-1)),N=(L=Math.max(L,1))+c.x,!0===i.skipOverlappingPoints&&!isNaN(M)&&Math.abs(M-N)<=1||(!o||isNaN(M)||isNaN(T)||T!==A&&S.push(u?{y:N,x:this.renderer._ptrnd(T)}:{x:N,y:this.renderer._ptrnd(T)}),S.push(u?{y:N,x:this.renderer._ptrnd(A),index:I}:{x:N,y:this.renderer._ptrnd(A),index:I}),k.push(u?{y:N,x:this.renderer._ptrnd(B),index:I}:{x:N,y:this.renderer._ptrnd(B),index:I}),M=N,T=A,isNaN(D)&&(D=A))}}if(0!==S.length){var z=S[S.length-1].index;_&&(w=this._getColors(e,p,z,this._getGroupGradientType(e)));var j=c.x+f.xoffsets.data[F],U=c.x+f.xoffsets.data[x];if(r&&!0===i.alignEndPointsWithIntervals&&(j>c.x&&(j=c.x),U<c.x+c.width&&(U=c.x+c.width),d)){var $=j;j=U,U=$}U=this.renderer._ptrnd(U),j=this.renderer._ptrnd(j);var W=f.baseOffset;D=this.renderer._ptrnd(D);var X=this.renderer._ptrnd(A)||W;l&&(S=S.concat(k.reverse())),v.pointsLength+=S.length;var Y={lastItemIndex:z,colorSettings:w,pointsArray:S,pointsStart:C,left:j,right:U,pyStart:D,pyEnd:X,yBase:W,labelElements:[],symbolElements:[]};v.segments.push(Y)}else b++}}while(b<f.xoffsets.first+f.xoffsets.length-1||g);this._linesRenderInfo[e][p]=v}}else this._linesRenderInfo[e][p]=v}var q=this._linesRenderInfo[e],J=[];for(var Z in q)J.push(q[Z]);J=J.sort((function(e,t){return e.serieIndex-t.serieIndex})),r&&a&&J.reverse();for(var Q=0;Q<J.length;Q++){v=J[Q],this._animateLine(v,0===E?1:0);var K=this;this._enqueueAnimation("series",void 0,void 0,E,(function(e,t,i){K._animateLine(t,i)}),v)}}}}}},{key:"_animateLine",value:function(e,t){var i=e.settings,r=e.groupIndex,a=e.serieIndex,n=this.seriesGroups[r],s=n.series[a],o=this._getSymbol(r,a),l=this._getLabelsSettings(r,a,NaN,["Visible"]).visible,h=!0;e.isPolar&&(isNaN(n.endAngle)||360===Math.round(Math.abs((isNaN(n.startAngle)?0:n.startAngle)-n.endAngle))||(h=!1)),!1===s.endPointsConnect&&(h=!1);for(var u=0,d=0;d<e.segments.length;d++){var c=e.segments[d],f=this._calculateLine(r,e.pointsLength,u,c.pointsArray,c.pointsStart,c.yBase,t,e.isArea,e.swapXY);if(u+=c.pointsArray.length,""!==f){var p=f.split(" "),m=f;m=""!==m?this._buildLineCmd(f,e.isRange,c.left,c.right,c.pyStart,c.pyEnd,c.yBase,e.isArea,e.isPolar,h,e.isSpline,e.swapXY):"M 0 0";var v=c.colorSettings;if(c.pathElement?this.renderer.attr(c.pathElement,{d:m}):(c.pathElement=this.renderer.path(m,{"stroke-width":i.stroke,stroke:v.lineColor,"stroke-opacity":i.opacity,"fill-opacity":i.opacity,"stroke-dasharray":i.dashStyle,fill:e.isArea?v.fillColor:"none"}),this._installHandlers(c.pathElement,"path",r,a,c.lastItemIndex)),c.labelElements){for(var y=0;y<c.labelElements.length;y++)this.renderer.removeElement(c.labelElements[y]);c.labelElements=[]}if(c.symbolElements){for(var g=0;g<c.symbolElements.length;g++)this.renderer.removeElement(c.symbolElements[g]);c.symbolElements=[]}if(c.pointsArray.length===p.length&&("none"!==o||l))for(var _=s.symbolSize,b=this._plotRect,x=0;x<p.length;x++){var w=p[x].split(",");if(!((w={x:parseFloat(w[0]),y:parseFloat(w[1])}).x<b.x||w.x>b.x+b.width||w.y<b.y||w.y>b.y+b.height)){if("none"!==o){var S=this._getColors(r,a,c.pointsArray[x].index,this._getGroupGradientType(r)),k=this._drawSymbol(o,w.x,w.y,S.fillColorSymbol,i.opacity,S.lineColorSymbol,i.opacity,i.strokeSymbol,void 0,_);c.symbolElements.push(k)}if(l&&(w=this._adjustLineLabelPosition(r,a,c.pointsArray[x].index,w))){var C=this._showLabel(r,a,c.pointsArray[x].index,{x:w.x,y:w.y,width:0,height:0});c.labelElements.push(C)}}}if(1===t&&"none"!==o)for(var N=0;N<c.symbolElements.length;N++)isNaN(c.pointsArray[N].index)||this._installHandlers(c.symbolElements[N],"symbol",r,a,c.pointsArray[N].index)}}}},{key:"_adjustLineLabelPosition",value:function(e,t,i,r){var a=this._showLabel(e,t,i,{width:0,height:0},"","",!0);if(a){var n={x:r.x-a.width/2,y:0};return n.y=r.y-1.5*a.height,n}}},{key:"_calculateLine",value:function(e,t,i,r,a,n,s,o,l){var h,u=this.seriesGroups[e];!0!==u.polar&&!0!==u.spider||(h=this._getPolarAxisCoords(e,this._plotRect));var d="",c=r.length;o||0!==a.length||(c=t*s-i);for(var f=0;f<c+1&&f<r.length;f++){f>0&&(d+=" ");var p=r[f].y,m=r[f].x,v=o?n:p,y=m;if(a&&a.length>f&&(v=a[f].y,y=a[f].x,(isNaN(v)||isNaN(y))&&(v=p,y=m)),c<=r.length&&f>0&&f===c&&(y=r[f-1].x,v=r[f-1].y),l?(m=this.renderer._ptrnd((m-v)*(o?s:1)+v),p=this.renderer._ptrnd(p)):(m=this.renderer._ptrnd((m-y)*s+y),p=this.renderer._ptrnd((p-v)*s+v)),h){var g=this._toPolarCoord(h,this._plotRect,m,p);m=g.x,p=g.y}d+=m+","+p}return d}},{key:"_buildLineCmd",value:function(e,t,i,r,a,n,s,o,l,h,u,d){var c=e,f=d?s+","+i:i+","+s;!o||l||t||(c=f+" "+e+" "+(d?s+","+r:r+","+s)),u&&(c=this._getBezierPoints(c));var p=c.split(" ");if(0===p.length)return"";if(1===p.length){var m=p[0].split(",");return"M "+p[0]+" L"+(parseFloat(m[0])+1)+","+(parseFloat(m[1])+1)}var v=p[0].replace("M","");return o&&!l?c=t?"M "+v+" L "+v+(u?"":" L "+v+" ")+c:"M "+f+" L "+v+" "+c:u||(c="M "+v+" L "+v+" "+c),(l&&h||t)&&(c+=" Z"),c}},{key:"_getSerieSettings",value:function(e,t){var i=this.seriesGroups[e],r=-1!==i.type.indexOf("area"),a=-1!==i.type.indexOf("line"),n=i.series[t],s=n.dashStyle||i.dashStyle||"",o=n.opacity||i.opacity;(isNaN(o)||o<0||o>1)&&(o=1);var l=n.lineWidth;isNaN(l)&&"auto"!==l&&(l=i.lineWidth),("auto"===l||isNaN(l)||l<0||l>15)&&(l=r?2:a?3:1);var h=n.lineWidthSymbol;return isNaN(h)&&(h=1),{stroke:l,strokeSymbol:h,opacity:o,dashStyle:s}}},{key:"_getColors",value:function(e,t,i,r,a){var n=this.seriesGroups[e],s=n.series[t],o=this._get([s.useGradientColors,n.useGradientColors,!1]),l=this._getSeriesColors(e,t,i),h=[[0,1.4],[100,1]],u=[[0,1],[25,1.1],[50,1.4],[100,1]],d=NaN;if(isNaN(a)||(d=2===a?h:u),o){var c={};for(var f in l)c[f]=l[f];if(l=c,"verticalLinearGradient"===r||"horizontalLinearGradient"===r){var p="verticalLinearGradient"===r?d||h:d||u,m=["fillColor","fillColorSelected","fillColorAlt","fillColorAltSelected"];for(var v in m){var y=l[m[v]];y&&(l[m[v]]=this.renderer._toLinearGradient(y,"verticalLinearGradient"===r,p))}}else if("radialGradient"===r){var g,_=h;("pie"===n.type||"donut"===n.type||n.polar)&&null!=i&&this._renderData[e]&&this._renderData[e].offsets[t]&&(g=this._renderData[e].offsets[t][i],_=[[0,1.3],[90,1.2],[100,1]]),l.fillColor=this.renderer._toRadialGradient(l.fillColor,_,g),l.fillColorSelected=this.renderer._toRadialGradient(l.fillColorSelected,_,g)}}return l}},{key:"_installHandlers",value:function(e,t,i,r,a){if(!this.enableEvents)return!1;var n=this,s=this.seriesGroups[i],o=this.seriesGroups[i].series[r],l=-1!==s.type.indexOf("line")||-1!==s.type.indexOf("area");l||!1===s.enableSelection||!1===o.enableSelection||this.renderer.addHandler(e,"mousemove",(function(e){var t=n._selected;t&&t.isLineType&&"click"===t.linesUnselectMode&&(t.group!==i||t.series!==r)||n._ttEl&&n._ttEl.gidx===i&&n._ttEl.sidx===r&&n._ttEl.iidx===a||n._startTooltipTimer(i,r,a)})),!1!==s.enableSelection&&!1!==o.enableSelection&&this.renderer.addHandler(e,"mouseover",(function(){var s=n._selected;s&&s.isLineType&&"click"===s.linesUnselectMode&&(s.group!==i||s.series!==r)||n._select(e,t,i,r,a,a)})),this.renderer.addHandler(e,"click",(function(e){clearTimeout(n._hostClickTimer),n._lastClickTs=(new Date).valueOf(),l&&"symbol"!==t&&"pointMarker"!==t||(n._isColumnType(s.type)&&n._unselect(),isNaN(a)||(e.stopImmediatePropagation(),n._raiseItemEvent("click",s,o,a)))}))}},{key:"_getHorizontalOffset",value:function(e,t,i,r){var a=this._plotRect;if(0===this._getDataLen(e))return{index:void 0,value:i};var n=this._calcGroupOffsets(e,this._plotRect);if(0===n.xoffsets.length)return{index:void 0,value:void 0};var s,o,l,h,u,d=i,c=r,f=this.seriesGroups[e];(f.polar||f.spider)&&(s=this._getPolarAxisCoords(e,a));for(var p=n.xoffsets.first;p<=n.xoffsets.last;p++){var m=n.xoffsets.data[p],v=n.offsets[t][p].to,y=0;if(s){var g=this._toPolarCoord(s,a,m+a.x,v);m=g.x,v=g.y,y=this.renderer._ptdist(d,c,m,v)}else if("horizontal"===f.orientation){var _=v;v=m+=a.y,m=_,y=this.renderer._ptdist(d,c,m,v)}else m+=a.x,y=Math.abs(d-m);(isNaN(o)||o>y)&&(o=y,l=p,h=m,u=v)}return{index:l,value:n.xoffsets.data[l],polarAxisCoords:s,x:h,y:u}}},{key:"onmousemove",value:function(e,t){if((this._mouseX!==e||this._mouseY!==t)&&(this._mouseX=e,this._mouseY=t,this._selected)){var i=this._selected.group,r=this._selected.series,a=this.seriesGroups[i],n=a.series[r],s=this._plotRect;if(this.renderer&&((s=this.renderer.getRect()).x+=5,s.y+=5,s.width-=10,s.height-=10),e<s.x+window.scrollX||e>s.x+s.width+window.scrollX||t<s.y+window.scrollY||t>s.y+s.height+window.scrollY)return this._hideToolTip(),void this._unselect();var o="horizontal"===a.orientation;if(s=this._plotRect,-1!==a.type.indexOf("line")||-1!==a.type.indexOf("area")){var l=this._getHorizontalOffset(i,this._selected.series,e,t),h=l.index;if(null==h)return;if(this._selected.item!==h){for(var u=this._linesRenderInfo[i][r].segments,d=0;h>u[d].lastItemIndex;)if(++d>=u.length)return;var c=u[d].pathElement,f=u[d].lastItemIndex;this._unselect(!1),this._select(c,"path",i,r,h,f)}var p=this._getSymbol(this._selected.group,this._selected.series);"none"===p&&(p="circle");var m=this._calcGroupOffsets(i,s),v=m.offsets[this._selected.series][h].to,y=v;-1!==a.type.indexOf("range")&&(y=m.offsets[this._selected.series][h].from);var g=o?e:t;if(t=!isNaN(y)&&Math.abs(g-y)<Math.abs(g-v)?y:v,isNaN(t))return;if(e=l.value,o){var _=e;e=t,t=_+s.y}else e+=s.x;if(l.polarAxisCoords&&(e=l.x,t=l.y),t=this.renderer._ptrnd(t),e=this.renderer._ptrnd(e),this._pointMarker&&this._pointMarker.element&&(this.renderer.removeElement(this._pointMarker.element),this._pointMarker.element=void 0),isNaN(e)||isNaN(t))return;var b=this._getSeriesColors(i,r,h),x=this._getSerieSettings(i,r),w=n.symbolSizeSelected;isNaN(w)&&(w=n.symbolSize),(isNaN(w)||w>50||w<0)&&(w=a.symbolSize),(isNaN(w)||w>50||w<0)&&(w=8),(this.showToolTips||this.enableCrosshairs)&&(this._pointMarker={type:p,x:e,y:t,gidx:i,sidx:r,iidx:h},this._pointMarker.element=this._drawSymbol(p,e,t,b.fillColorSymbolSelected,x.opacity,b.lineColorSymbolSelected,x.opacity,x.strokeSymbol,x.dashStyle,w),this._installHandlers(this._pointMarker.element,"pointMarker",i,r,h)),this._startTooltipTimer(i,this._selected.series,h)}}}},{key:"_drawSymbol",value:function(e,t,i,r,a,n,s,o,l,h){var u,d,c=h||6,f=c/2;switch(e){case"none":return;case"circle":u=this.renderer.circle(t,i,c/2);break;case"square":f=(c-=1)/2,u=this.renderer.rect(t-f,i-f,c,c);break;case"diamond":d="M "+(t-f)+","+i+" L"+t+","+(i-f)+" L"+(t+f)+","+i+" L"+t+","+(i+f)+" Z",u=this.renderer.path(d);break;case"triangle_up":case"triangle":d="M "+(t-f)+","+(i+f)+" L "+(t+f)+","+(i+f)+" L "+t+","+(i-f)+" Z",u=this.renderer.path(d);break;case"triangle_down":d="M "+(t-f)+","+(i-f)+" L "+t+","+(i+f)+" L "+(t+f)+","+(i-f)+" Z",u=this.renderer.path(d);break;case"triangle_left":d="M "+(t-f)+","+i+" L "+(t+f)+","+(i+f)+" L "+(t+f)+","+(i-f)+" Z",u=this.renderer.path(d);break;case"triangle_right":d="M "+(t-f)+","+(i-f)+" L "+(t-f)+","+(i+f)+" L "+(t+f)+","+i+" Z",u=this.renderer.path(d);break;default:u=this.renderer.circle(t,i,c)}return this.renderer.attr(u,{fill:r,"fill-opacity":a,stroke:n,"stroke-width":o,"stroke-opacity":s,"stroke-dasharray":l||""}),"circle"!==e&&(this.renderer.attr(u,{r:c/2}),"square"!==e&&this.renderer.attr(u,{x:t,y:i})),u}},{key:"_getSymbol",value:function(e,t){var i,r=["circle","square","diamond","triangle_up","triangle_down","triangle_left","triangle_right"],a=this.seriesGroups[e],n=a.series[t];return void 0!==n.symbolType&&null!==n.symbolType&&(i=n.symbolType),null==i&&(i=a.symbolType),"default"===i?r[t%r.length]:null!=i?i:"none"}},{key:"_startTooltipTimer",value:function(e,t,i,r,a,n,s){this._cancelTooltipTimer();var o=this,l=this.toolTipShowDelay;(isNaN(l)||l>1e4||l<0)&&(l=500),(this._ttEl||!0===this.enableCrosshairs&&!1===this.showToolTips)&&(l=0),isNaN(n)||(l=n),clearTimeout(this._tttimerHide),isNaN(r)&&(r=o._mouseX),isNaN(a)&&(a=o._mouseY-3),0===l&&o._showToolTip(r,a,e,t,i),this._tttimer=setTimeout((function(){0!==l&&o._showToolTip(r,a,e,t,i);var n=o.toolTipHideDelay;isNaN(s)||(n=s),isNaN(n)&&(n=4e3),o._tttimerHide=setTimeout((function(){o._hideToolTip(),o._unselect()}),n)}),l)}},{key:"_cancelTooltipTimer",value:function(){clearTimeout(this._tttimer)}},{key:"_getGroupGradientType",value:function(e){var t=this.seriesGroups[e];return-1!==t.type.indexOf("area")?"horizontal"===t.orientation?"horizontalLinearGradient":"verticalLinearGradient":this._isColumnType(t.type)||-1!==t.type.indexOf("candle")?t.polar?"radialGradient":"horizontal"===t.orientation?"verticalLinearGradient":"horizontalLinearGradient":-1!==t.type.indexOf("scatter")||-1!==t.type.indexOf("bubble")||this._isPieGroup(e)?"radialGradient":void 0}},{key:"_select",value:function(e,t,i,r,a,n){if(this._selected){if(this._selected.item===a&&this._selected.series===r&&this._selected.group===i)return;this._unselect()}var s=this.seriesGroups[i],o=s.series[r];if(!1!==s.enableSelection&&!1!==o.enableSelection){var l=-1!==s.type.indexOf("line")&&-1===s.type.indexOf("area");this._selected={element:e,type:t,group:i,series:r,item:a,iidxBase:n,isLineType:l,linesUnselectMode:o.linesUnselectMode||s.linesUnselectMode};var h=this._getColors(i,r,n||a,this._getGroupGradientType(i)),u=h.fillColorSelected;l&&(u="none");var d=this._getSerieSettings(i,r),c="symbol"===t?h.lineColorSymbolSelected:h.lineColorSelected;u="symbol"===t?h.fillColorSymbolSelected:u;var f="symbol"===t?1:d.stroke;this.renderer.getAttr(e,"fill")===h.fillColorAlt&&(u=h.fillColorAltSelected),this.renderer.attr(e,{stroke:c,fill:u,"stroke-width":f}),-1===s.type.indexOf("pie")&&-1===s.type.indexOf("donut")||this._applyPieSelect(),this._raiseItemEvent("mouseover",s,o,a)}}},{key:"_applyPieSelect",value:function(){var e=this;e._createAnimationGroup("animPieSlice");var t=this._selected;if(t){var i=this.getItemCoord(t.group,t.series,t.item);if(i){var r={element:this._getRenderInfo(t.group,t.series,t.item),coord:i};this._enqueueAnimation("animPieSlice",void 0,void 0,300,(function(i,r,a){var n=r.coord,s=n.selectedRadiusChange*a,o=e.renderer.pieSlicePath(n.center.x,n.center.y,0===n.innerRadius?0:n.innerRadius+s,n.outerRadius+s,n.fromAngle,n.toAngle,n.centerOffset);e.renderer.attr(r.element.element,{d:o}),e._showPieLabel(t.group,t.series,t.item,void 0,s,r.element.colors.lineColor)}),r),e._startAnimation("animPieSlice")}}}},{key:"_applyPieUnselect",value:function(){this._stopAnimations();var e=this._selected;if(e){var t=this.getItemCoord(e.group,e.series,e.item);if(t&&t.center){var i=this.renderer.pieSlicePath(t.center.x,t.center.y,t.innerRadius,t.outerRadius,t.fromAngle,t.toAngle,t.centerOffset);this.renderer.attr(e.element,{d:i}),this._showPieLabel(e.group,e.series,e.item,void 0,0,this._getRenderInfo(e.group,e.series,e.item).colors.lineColor)}}}},{key:"_unselect",value:function(){if(this._selected){var e=this._selected.group,t=this._selected.series,i=this._selected.item,r=this._selected.iidxBase,a=this._selected.type,n=this.seriesGroups[e],s=n.series[t],o=-1!==n.type.indexOf("line")&&-1===n.type.indexOf("area"),l=this._getColors(e,t,r||i,this._getGroupGradientType(e)),h=l.fillColor;o&&(h="none");var u=this._getSerieSettings(e,t),d="symbol"===a?l.lineColorSymbol:l.lineColor;h="symbol"===a?l.fillColorSymbol:h,this.renderer.getAttr(this._selected.element,"fill")===l.fillColorAltSelected&&(h=l.fillColorAlt);var c="symbol"===a?1:u.stroke;this.renderer.attr(this._selected.element,{stroke:d,fill:h,"stroke-width":c}),-1===n.type.indexOf("pie")&&-1===n.type.indexOf("donut")||this._applyPieUnselect(),this._selected=void 0,isNaN(i)||this._raiseItemEvent("mouseout",n,s,i)}this._pointMarker&&(this._pointMarker.element&&(this.renderer.removeElement(this._pointMarker.element),this._pointMarker.element=void 0),this._pointMarker=void 0,this._hideCrosshairs())}},{key:"_raiseItemEvent",value:function(e,t,i,r){for(var a=i[e]||t[e],n=0;n<this.seriesGroups.length&&this.seriesGroups[n]!==t;n++);if(n!==this.seriesGroups.length){var s={event:e,seriesGroup:t,serie:i,elementIndex:r,elementValue:this._getDataValue(r,i.dataField,n)};a&&"function"==typeof a&&a(s),this.$.fireEvent(e,s)}}},{key:"_calcInterval",value:function(e,t,i){var r=Math.abs(t-e)/i,a=.1,n=[1,2,3,4,5,10,15,20,25,50,100];r<1&&(n=[.5,.25,.125,.1],a=10);var s=0;do{s=0,r>=1?a*=10:a/=10;for(var o=1;o<n.length&&Math.abs(n[s]*a-r)>Math.abs(n[o]*a-r);o++)s=o}while(s===n.length-1);return n[s]*a}},{key:"_renderDataClone",value:function(){if(this._renderData&&!this._isToggleRefresh){var e=this._elementRenderInfo=[];if(!this._isSelectorRefresh)for(var t=0;t<this._renderData.length;t++){for(;e.length<=t;)e.push({});var i=e[t],r=this._renderData[t];if(r.offsets){if(r.valueAxis)for(var a in i.valueAxis={itemOffsets:{}},r.valueAxis.itemOffsets)i.valueAxis.itemOffsets[a]=r.valueAxis.itemOffsets[a];if(r.xAxis)for(var n in i.xAxis={itemOffsets:{}},r.xAxis.itemOffsets)i.xAxis.itemOffsets[n]=r.xAxis.itemOffsets[n];i.series=[];for(var s=i.series,o=this._isPieGroup(t),l=0;l<r.offsets.length;l++){s.push({});for(var h=0;h<r.offsets[l].length;h++)if(o){var u=r.offsets[l][h];s[l][u.displayValue]={value:u.value,x:u.x,y:u.y,fromAngle:u.fromAngle,toAngle:u.toAngle}}else s[l][r.xoffsets.xvalues[h]]={value:r.offsets[l][h].value,valueRadius:r.offsets[l][h].valueRadius,xoffset:r.xoffsets.data[h],from:r.offsets[l][h].from,to:r.offsets[l][h].to}}}}}}},{key:"getPolarDataPointOffset",value:function(e,t,i){var r=this._renderData[i];if(!r)return{x:NaN,y:NaN};var a=this.getValueAxisDataPointOffset(t,i),n=this.getXAxisDataPointOffset(e,i),s=this._toPolarCoord(r.polarCoords,r.xAxis.rect,n,a);return{x:s.x,y:s.y}}},{key:"_getDataPointOffsetDiff",value:function(e,t,i,r,a,n,s){var o=this._getDataPointOffset(e,i,r,a,n,s),l=this._getDataPointOffset(t,i,r,a,n,s);return Math.abs(o-l)}},{key:"_getXAxisRenderData",value:function(e){if(!(e>=this._renderData.length)){var t=this.seriesGroups[e],i=this._renderData[e].xAxis;if(i){if(void 0===t.xAxis||null===t.xAxis)for(var r=0;r<=e;r++)if(void 0===this.seriesGroups[r].xAxis||null===this.seriesGroups[r].xAxis){i=this._renderData[r].xAxis;break}return i}}}},{key:"getXAxisDataPointOffset",value:function(e,t){var i=this.seriesGroups[t];if(isNaN(e))return NaN;var r=this._getXAxisRenderData(t);if(!r)return NaN;var a=r.data.axisStats,n=a.min.valueOf(),s=a.max.valueOf(),o=s-n;if(0===o&&(o=1),e.valueOf()>s||e.valueOf()<n)return NaN;var l=this._getXAxis(t),h="horizontal"===i.orientation?"height":"width",u="horizontal"===i.orientation?"y":"x",d=(e.valueOf()-n)/o,c=r.rect[h]-r.data.padding.left-r.data.padding.right;return(i.polar||i.spider)&&this._renderData[t].polarCoords.isClosedCircle&&(c=r.data.axisSize),this._plotRect[u]+r.data.padding.left+c*(l.flip?1-d:d)}},{key:"getValueAxisDataPointOffset",value:function(e,t){var i=this._getValueAxis(t);if(!i)return NaN;var r=this._renderData[t];if(!r)return NaN;var a=!0===i.flip,n=r.logBase,s=r.scale,o=r.gbase,l=r.baseOffset;return this._getDataPointOffset(e,o,n,s,l,a)}},{key:"_getDataPointOffset",value:function(e,t,i,r,a,n){var s;return isNaN(e)&&(e=t),s=isNaN(i)?(e-t)*r:(this._draw.log(e,i)-this._draw.log(t,i))*r,s=n?a+s:a-s}},{key:"_calcGroupOffsets",value:function(e,t){for(var i=this.seriesGroups[e];this._renderData.length<e+1;)this._renderData.push({});if(null!==this._renderData[e]&&void 0!==this._renderData[e].offsets)return this._renderData[e];if(this._isPieGroup(e))return this._calcPieSeriesGroupOffsets(e,t);var r=this._getValueAxis(e);if(!r||!i.series||0===i.series.length)return this._renderData[e];var a=!0===r.flip,n=!0===r.logarithmicScale,s=r.logarithmicScaleBase||10,o=[],l=-1!==i.type.indexOf("stacked"),h=l&&-1!==i.type.indexOf("100"),u=-1!==i.type.indexOf("range"),d=this._isColumnType(i.type),c=-1!==i.type.indexOf("waterfall"),f=this._getDataLen(e),p=i.baselineValue||r.baselineValue||0;h&&(p=0);var m=this._stats.seriesGroups[e];if(m&&m.isValid){var v=m.hasStackValueReversal;if(v&&(p=0),c&&l){if(v)return;p=m.base}p>m.max&&(p=m.max),p<m.min&&(p=m.min);var y=h||n?m.maxRange:m.max-m.min,g=m.min,_=m.max,b=t.height/(n?m.intervals:y),x=0;x=h?g*_<0?-((y/=2)+p)*b:-p*b:-(p-g)*b,a?x=t.y-x:x+=t.y+t.height;var w,S=[],k=[],C=[];n&&(w=this._draw.log(_,s)-this._draw.log(p,s),l&&(w=m.intervals,p=h?0:g),a||(x=t.y+w/m.intervals*t.height)),x=this.renderer._ptrnd(x);var N=g*_<0?t.height/2:t.height,A=[],M=[],T=l&&(d||n),D=[];o=new Array(i.series.length);for(var O=0;O<i.series.length;O++)o[O]=new Array(f);for(var E=0;E<f;E++){!c&&l&&(M=[]);for(var F=0;F<i.series.length;F++){!l&&n&&(A=[]);var P=i.series[F],I=P.dataField,L=P.dataFieldFrom,R=P.dataFieldTo,B=P.radiusDataField||P.sizeDataField;o[F][E]={};var H=this._isSerieVisible(e,F);if(-1===i.type.indexOf("candle")&&-1===i.type.indexOf("ohlc")){if(l)for(;M.length<=E;)M.push(0);var V=NaN;u&&(V=this._getDataValueAsNumber(E,L,e),isNaN(V)&&(V=p));var G=NaN;G=u?this._getDataValueAsNumber(E,R,e):this._getDataValueAsNumber(E,I,e);var z=this._getDataValueAsNumber(E,B,e);if(l&&(M[E]+=H?G:0),H||(G=NaN),isNaN(G)||n&&G<=0)o[F][E]={from:void 0,to:void 0};else{var j=void 0;l&&(T?j=G>=p?S:k:G=M[E]);var U=b*(G-p);if(u&&(U=b*(G-V)),l&&T&&(D[E]?U=b*G:(D[E]=!0,U=b*(G-p))),n){for(;A.length<=E;)A.push({p:{value:0,height:0},n:{value:0,height:0}});var $=u||u?V:p,W=G>$?A[E].p:A[E].n;W.value+=G,h?(G=W.value/(m.psums[E]+m.nsums[E])*100,U=(this._draw.log(G,s)-m.minPow)*b):(U=this._draw.log(W.value,s)-this._draw.log($,s),U*=b),U-=W.height,W.height+=U}var X=x;if(u){var Y=0;Y=n?(this._draw.log(V,s)-this._draw.log(p,s))*b:(V-p)*b,X+=a?Y:-Y}if(l){if(h&&!n){var q=m.psums[E]-m.nsums[E];G>p?(U=m.psums[E]/q*N,0!==m.psums[E]&&(U*=G/m.psums[E])):(U=m.nsums[E]/q*N,0!==m.nsums[E]&&(U*=G/m.nsums[E]))}T&&(isNaN(j[E])&&(j[E]=X),X=j[E])}isNaN(C[E])&&(C[E]=0);var J=C[E],Z=U=Math.abs(U);if(U>=1){var Q=this.renderer._ptrnd(U)-1;U=Math.abs(U-Q)>.5?Math.round(U):Q}if(J+=U-Z,l||(J=0),Math.abs(J)>.5&&(J>0?(U-=1,J-=1):(U+=1,J+=1)),C[E]=J,F===i.series.length-1&&h){for(var K=0,ee=0;ee<F;ee++)K+=Math.abs(o[ee][E].to-o[ee][E].from);if((K+=U)<N)if(U>.5)U=this.renderer._ptrnd(U+N-K);else for(var te=F-1;te>=0;){if(Math.abs(o[te][E].to-o[te][E].from)>1){o[te][E].from>o[te][E].to&&(o[te][E].from+=N-K);break}te--}}a&&(U*=-1);var ie=G<p;u&&(ie=V>G);var re=isNaN(V)?G:{from:V,to:G};ie?(T&&(j[E]+=U),o[F][E]={from:X,to:X+U,value:re,valueRadius:z}):(T&&(j[E]-=U),o[F][E]={from:X,to:X-U,value:re,valueRadius:z})}}else{var ae=["Open","Close","High","Low"];for(var ne in ae){var se="dataField"+ae[ne];P[se]&&(o[F][E][ae[ne]]=this._getDataPointOffset(this._getDataValueAsNumber(E,P[se],e),p,n?s:NaN,b,x,a))}}}}var oe=this._renderData[e];return oe.baseOffset=x,oe.gbase=p,oe.logBase=n?s:NaN,oe.scale=b,oe.offsets=c?this._applyWaterfall(o,f,e,x,p,n?s:NaN,b,a,l):o,oe.xoffsets=this._calculateXOffsets(e,t.width),this._renderData[e]}}},{key:"_isPercent",value:function(e){return"string"==typeof e&&e.length>0&&e.indexOf("%")===e.length-1}},{key:"_calcPieSeriesGroupOffsets",value:function(e,t){for(var i=this._getDataLen(e),r=this.seriesGroups[e],a=this._renderData[e]={},n=a.offsets=[],s=0;s<r.series.length;s++){var o=r.series[s],l=this._get([o.minAngle,o.startAngle]);(isNaN(l)||l<0||l>360)&&(l=0);var h=this._get([o.maxAngle,o.endAngle]);(isNaN(h)||h<0||h>360)&&(h=360);var u=h-l,d=o.initialAngle||0;d<l&&(d=l),d>h&&(d=h);var c=o.centerOffset||0,f=this._draw.getNum([o.offsetX,r.offsetX,t.width/2]),p=this._draw.getNum([o.offsetY,r.offsetY,t.height/2]),m=Math.min(t.width,t.height)/2,v=d,y=o.radius;this._isPercent(y)&&(y=parseFloat(y)/100*m),isNaN(y)&&(y=.4*m);var g=o.innerRadius;this._isPercent(g)&&(g=parseFloat(g)/100*m),(isNaN(g)||g>=y)&&(g=0);var _=o.selectedRadiusChange;this._isPercent(_)&&(_=parseFloat(_)/100*(y-g)),isNaN(_)&&(_=.1*(y-g)),n.push([]);for(var b=0,x=0,w=0;w<i;w++){var S=this._getDataValueAsNumber(w,o.dataField,e);isNaN(S)||(this._isSerieVisible(e,s,w)||!0===o.hiddenPointsDisplay)&&(S>0?b+=S:x+=S)}var k=b-x;0===k&&(k=1);for(var C=0;C<i;C++)if(S=this._getDataValueAsNumber(C,o.dataField,e),isNaN(S))n[s].push({});else{var N=o.displayText||o.displayField,A=this._getDataValue(C,N,e);null==A&&(A=C);var M=0,T=this._isSerieVisible(e,s,C);(T||!0===o.hiddenPointsDisplay)&&(M=Math.abs(S)/k*u);var D=t.x+f,O=t.y+p,E=c;"function"==typeof c&&(E=c({seriesIndex:s,seriesGroupIndex:e,itemIndex:C})),isNaN(E)&&(E=0);var F={key:e+"_"+s+"_"+C,value:S,displayValue:A,x:D,y:O,fromAngle:v,toAngle:v+M,centerOffset:E,innerRadius:g,outerRadius:y,selectedRadiusChange:_,visible:T};n[s].push(F),v+=M}}return a}},{key:"_isPointSeriesOnly",value:function(){for(var e=0;e<this.seriesGroups.length;e++){var t=this.seriesGroups[e];if(-1===t.type.indexOf("line")&&-1===t.type.indexOf("area")&&-1===t.type.indexOf("scatter")&&-1===t.type.indexOf("bubble"))return!1}return!0}},{key:"_hasColumnSeries",value:function(){for(var e=["column","ohlc","candlestick","waterfall"],t=0;t<this.seriesGroups.length;t++){var i=this.seriesGroups[t];for(var r in e)if(-1!==i.type.indexOf(e[r]))return!0}return!1}},{key:"_alignValuesWithTicks",value:function(e){var t=this._isPointSeriesOnly(),i=this.seriesGroups[e],r=this._getXAxis(e),a=void 0===r.valuesOnTicks||null===r.valuesOnTicks?t:!1!==r.valuesOnTicks;return r.logarithmicScale&&(a=!0),null==e?a:void 0===i.valuesOnTicks||null===i.valuesOnTicks?a:i.valuesOnTicks}},{key:"_getYearsDiff",value:function(e,t){return t.getFullYear()-e.getFullYear()}},{key:"_getMonthsDiff",value:function(e,t){return 12*(t.getFullYear()-e.getFullYear())+t.getMonth()-e.getMonth()}},{key:"_getDateDiff",value:function(e,t,i,r){var a=0;switch("year"!==i&&"month"!==i&&(a=t.valueOf()-e.valueOf()),i){case"year":a=this._getYearsDiff(e,t);break;case"month":a=this._getMonthsDiff(e,t);break;case"day":a/=864e5;break;case"hour":a/=36e5;break;case"minute":a/=6e4;break;case"second":a/=1e3}return"year"!==i&&"month"!==i&&!1!==r&&(a=this.renderer._rnd(a,1,!0)),a}},{key:"_getBestDTUnit",value:function(e,t,i,r,a){var n="day",s=t.valueOf()-e.valueOf();n=s<1e3?"second":s<36e5?"minute":s<864e5?"hour":s<2592e6?"day":s<31104e6?"month":"year";for(var o=[{key:"year",cnt:s/31536e6},{key:"month",cnt:s/2592e6},{key:"day",cnt:s/864e5},{key:"hour",cnt:s/36e5},{key:"minute",cnt:s/6e4},{key:"second",cnt:s/1e3},{key:"millisecond",cnt:s}],l=-1,h=0;h<o.length;h++)if(o[h].key===n){l=h;break}for(var u=-1,d=-1;l<o.length&&!(o[l].cnt/100>r);l++){var c=this._estAxisInterval(e,t,i,r,o[l].key,a),f=this._getDTIntCnt(e,t,c,o[l].key);(-1===u||u<f)&&(u=f,d=l)}return n=o[d].key}},{key:"_getXAxisStats",value:function(e,t,i){var r=this._getDataLen(e),a="date"===t.type||"time"===t.type;if(a&&!this._autoDateFormats){this._autoDateFormats||(this._autoDateFormats=[]);var n=this._testXAxisDateFormat();n&&this._autoDateFormats.push(n)}var s=a?this._castAsDate(t.minValue,t.dateFormat):this._castAsNumber(t.minValue),o=a?this._castAsDate(t.maxValue,t.dateFormat):this._castAsNumber(t.maxValue);if(this._selectorRange&&this._selectorRange[e]){var l=this._selectorRange[e].min;isNaN(l)||(s=a?this._castAsDate(l,t.dateFormat):this._castAsNumber(l));var h=this._selectorRange[e].max;isNaN(h)||(o=a?this._castAsDate(h,t.dateFormat):this._castAsNumber(h))}for(var u,d,c=s,f=o,p=void 0===t.type||null===t.type||"auto"===t.type,m=p||"basic"===t.type,v=0,y=0,g=0;g<r&&t.dataField;g++){var _=this._getDataValue(g,t.dataField,e);_=a?this._castAsDate(_,t.dateFormat):this._castAsNumber(_),isNaN(_)||(a?v++:y++,(isNaN(u)||_<u)&&(u=_),(isNaN(d)||_>=d)&&(d=_))}p&&(!a&&y===r||a&&v===r)&&(m=!1),m&&(u=0,d=Math.max(0,r-1)),isNaN(c)&&(c=u),isNaN(f)&&(f=d),a?(this._isDate(c)||(c=this._isDate(f)?f:new Date),this._isDate(f)||(f=this._isDate(c)?c:new Date)):(isNaN(c)&&(c=0),isNaN(f)&&(f=m?Math.max(0,r-1):c)),null==u&&(u=c),null==d&&(d=f);var b,x,w=t.rangeSelector&&t.rangeSelector.visible;if(w){var S=w.minValue||c;S&&a&&(S=this._castAsDate(S,w.dateFormat||t.dateFormat));var k=w.maxValue||f;k&&a&&(k=this._castAsDate(k,w.dateFormat||t.rangeSelector)),c<S&&(c=S),f<S&&(f=k),c>k&&(c=S),f>k&&(f=k)}a&&((b=t.baseUnit)||(b=this._getBestDTUnit(c,f,e,i)),x="hour"===b||"minute"===b||"second"===b||"millisecond"===b);var C=!0===t.logarithmicScale,N=t.logarithmicScaleBase;(isNaN(N)||N<=1)&&(N=10);var A=t.unitInterval;C?A=1:(isNaN(A)||A<=0)&&(A=this._estAxisInterval(c,f,e,i,b));var M,T,D={min:c,max:f},O=this.seriesGroups[e];return C?(c||(c=1,f&&c>f&&(c=f)),f||(f=c),D={min:c,max:f},M=this.renderer._rnd(this._draw.log(c,N),1,!1),T=this.renderer._rnd(this._draw.log(f,N),1,!0),f=Math.pow(N,T),c=Math.pow(N,M)):a||!O.polar&&!O.spider||(c=this.renderer._rnd(c,A,!1),f=this.renderer._rnd(f,A,!0)),{min:c,max:f,logAxis:{enabled:C,base:N,minPow:M,maxPow:T},dsRange:{min:u,max:d},filterRange:D,useIndeces:m,isDateTime:a,isTimeUnit:x,dateTimeUnit:b,interval:A}}},{key:"_getDefaultDTFormatFn",value:function(e){var t=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];return"year"===e||"month"===e||"day"===e?function(e){return e.getDate()+"-"+t[e.getMonth()]+"-"+e.getFullYear()}:function(e){return e.getDate()+"-"+t[e.getMonth()]+"-"+e.getFullYear()+"<br>"+e.getHours()+":"+e.getMinutes()+":"+e.getSeconds()}}},{key:"_getDTIntCnt",value:function(e,t,i,r){var a=0,n=new Date(e),s=new Date(t);if(s=s.valueOf(),i<=0)return 1;for(;n.valueOf()<s;)"millisecond"===r?n=new Date(n.valueOf()+i):"second"===r?n=new Date(n.valueOf()+1e3*i):"minute"===r?n=new Date(n.valueOf()+6e4*i):"hour"===r?n=new Date(n.valueOf()+6e4*i*24):"day"===r?n.setDate(n.getDate()+i):"month"===r?n.setMonth(n.getMonth()+i):"year"===r&&n.setFullYear(n.getFullYear()+i),a++;return a}},{key:"_estAxisInterval",value:function(e,t,i,r,a,n){if(isNaN(e)||isNaN(t))return NaN;var s,o=[1,2,5,10,15,20,50,100,200,500],l=0,h=r/(!isNaN(n)&&n>0?n:50);if(this._renderData&&this._renderData.length>i&&this._renderData[i].xAxis&&!isNaN(this._renderData[i].xAxis.avgWidth)){var u=Math.max(1,this._renderData[i].xAxis.avgWidth);0!==u&&isNaN(n)&&(h=.9*r/u)}if(h<=1)return Math.abs(t-e);for(;s=l>=o.length?Math.pow(10,3+l-o.length):o[l],!((this._isDate(e)&&this._isDate(t)?this._getDTIntCnt(e,t,s,a):(t-e)/s)<=h);)l++;var d=this.seriesGroups[i];return(d.spider||d.polar)&&2*s>t-e&&(s=t-e),s}},{key:"_getPaddingSize",value:function(e,t,i,r,a,n,s){var o=e.min,l=e.max;e.logAxis.enabled&&(o=e.logAxis.minPow,l=e.logAxis.maxPow);var h=e.interval,u=e.dateTimeUnit;if(a){var d=r/Math.max(1,l-o+h)*h;return n?{left:0,right:d}:i?{left:0,right:0}:{left:d/2,right:d/2}}if(i&&!s)return{left:0,right:0};if(this._isDate(o)&&this._isDate(l)){var c,f=this._getDTIntCnt(o,l,Math.min(h,l-o),u);return{left:(c=r/Math.max(2,f))/2,right:c/2}}if(1===(f=Math.max(1,l-o))){var p=r/4;return{left:p,right:p}}return{left:(c=r/(f+1))/2,right:c/2}}},{key:"_calculateXOffsets",value:function(e,t){var i=this.seriesGroups[e],r=this._getXAxis(e),a=[],n=[],s=this._getDataLen(e),o=this._getXAxisStats(e,r,t),l=o.min,h=o.max,u=o.isDateTime,d=o.isTimeUnit,c=this._hasColumnSeries(),f=i.polar||i.spider,p=this._get([i.startAngle,i.minAngle,0]),m=this._get([i.endAngle,i.maxAngle,360]),v=f&&!(Math.abs(Math.abs(m-p)-360)>1e-4),y=this._alignValuesWithTicks(e),g=this._getPaddingSize(o,r,y,t,f,v,c),_=h-l,b=o.filterRange;0===_&&(_=1);var x=t-g.left-g.right;f&&y&&!v&&(g.left=g.right=0);for(var w=-1,S=-1,k=0;k<s;k++){var C=void 0===r.dataField?k:this._getDataValue(k,r.dataField,e);if(o.useIndeces){if(k<b.min||k>b.max){a.push(NaN),n.push(void 0);continue}if(A=g.left+(k-l)/_*x,!0===o.logAxis.enabled){var N=o.logAxis.base;A=this._smartPlot.scale(C,{min:l.valueOf(),max:h.valueOf(),type:"logarithmic",base:N},{min:0,max:x,flip:!1})}a.push(this.renderer._ptrnd(A)),n.push(C),-1===w&&(w=k),(-1===S||S<k)&&(S=k)}else if(C=u?this._castAsDate(C,r.dateFormat):this._castAsNumber(C),isNaN(C)||C<b.min||C>b.max)a.push(NaN),n.push(void 0);else{var A=0;!0===o.logAxis.enabled?(N=o.logAxis.base,A=this._smartPlot.scale(C,{min:l.valueOf(),max:h.valueOf(),type:"logarithmic",base:N},{min:0,max:x,flip:!1})):A=!u||u&&d?(C-l)*x/_:(C.valueOf()-l.valueOf())/(h.valueOf()-l.valueOf())*x,A=this.renderer._ptrnd(g.left+A),a.push(A),n.push(C),-1===w&&(w=k),(-1===S||S<k)&&(S=k)}}if(!0===r.flip)for(var M=0;M<a.length;M++)isNaN(a[M])||(a[M]=t-a[M]);(d||u)&&(_=this._getDateDiff(l,h,r.baseUnit),_=this.renderer._rnd(_,1,!1));var T=Math.max(1,_),D=x/T;return w===S&&1===T&&(a[w]=g.left+x/2),{axisStats:o,data:a,xvalues:n,first:w,last:S,length:-1===S?0:S-w+1,itemWidth:D,intervalWidth:D*o.interval,rangeLength:_,useIndeces:o.useIndeces,padding:g,axisSize:x}}},{key:"_getXAxis",value:function(e){return null==e||this.seriesGroups.length<=e?this.xAxis:this.seriesGroups[e].xAxis||this.xAxis}},{key:"_isGreyScale",value:function(e,t){var i=this.seriesGroups[e],r=i.series[t];return!0===r.greyScale||!1!==r.greyScale&&(!0===i.greyScale||!1!==i.greyScale&&!0===this.greyScale)}},{key:"_getSeriesColors",value:function(e,t,i){var r=this._getSeriesColorsInternal(e,t,i);if(this._isGreyScale(e,t))for(var a in r)r[a]=this._draw.toGreyScale(r[a]);return r}},{key:"_getColorFromScheme",value:function(e,t,i){var r="#000000",a=this.seriesGroups[e],n=a.series[t];if(this._isPieGroup(e)){var s=this._getDataLen(e);r=this._getItemColorFromScheme(n.colorScheme||a.colorScheme||this.colorScheme,t*s+i,e,t)}else{for(var o=0,l=0;l<=e;l++)for(var h=0;h<this.seriesGroups[l].series.length&&(l!==e||parseInt(h)!==t);h++)o++;var u=this.colorScheme;if(a.colorScheme&&(u=a.colorScheme),null!=u&&""!==u||(u=this.colorSchemes[0].name),!u)return r;for(var d=0;d<this.colorSchemes.length;d++){var c=this.colorSchemes[d];if(c.name===u){for(;o>c.colors.length;)o-=c.colors.length,++d>=this.colorSchemes.length&&(d=0),c=this.colorSchemes[d];r=c.colors[o%c.colors.length]}}}return r}},{key:"_createColorsCache",value:function(){this._colorsCache={get:function(e){if(this._store[e])return this._store[e]},set:function(e,t){this._size<1e4&&(this._store[e]=t,this._size++)},clear:function(){this._store={},this._size=0},_size:0,_store:{}}}},{key:"_getSeriesColorsInternal",value:function(e,t,i){var a=this.seriesGroups[e],n=a.series[t];"function"===!r(n.colorFunction)&&"pie"!==a.type&&"donut"!==a.type&&(i=NaN);var s=e+"_"+t+"_"+(isNaN(i)?"NaN":i);if(this._colorsCache.get(s))return this._colorsCache.get(s);var o,l={lineColor:"#222222",lineColorSelected:"#151515",lineColorSymbol:"#222222",lineColorSymbolSelected:"#151515",fillColor:"#222222",fillColorSelected:"#333333",fillColorSymbol:"#222222",fillColorSymbolSelected:"#333333",fillColorAlt:"#222222",fillColorAltSelected:"#333333"};if("function"==typeof n.colorFunction){var h=isNaN(i)?NaN:this._getDataValue(i,n.dataField,e);if(-1===a.type.indexOf("range")||isNaN(i)||(h={from:this._getDataValue(i,n.dataFieldFrom,e),to:this._getDataValue(i,n.dataFieldTo,e)}),"object"===r(o=n.colorFunction(h,i,n,a)))for(var u in o)l[u]=o[u];else l.fillColor=o}else{for(var d in l)n[d]&&(l[d]=n[d]);n.fillColor||n.color?n.fillColor=n.fillColor||n.color:l.fillColor=this._getColorFromScheme(e,t,i)}var c={fillColor:{baseColor:"fillColor",adjust:1},fillColorSelected:{baseColor:"fillColor",adjust:1.1},fillColorSymbol:{baseColor:"fillColor",adjust:1},fillColorSymbolSelected:{baseColor:"fillColorSymbol",adjust:2},fillColorAlt:{baseColor:"fillColor",adjust:4},fillColorAltSelected:{baseColor:"fillColor",adjust:3},lineColor:{baseColor:"fillColor",adjust:.95},lineColorSelected:{baseColor:"lineColor",adjust:.95},lineColorSymbol:{baseColor:"lineColor",adjust:1},lineColorSymbolSelected:{baseColor:"lineColorSelected",adjust:1}};for(var f in l)"object"===r(o)&&o[f]||n[f]&&(l[f]=n[f]);for(var p in l)"object"===r(o)&&o[p]||n[p]||(l[p]=this.renderer.adjustColor(l[c[p].baseColor],c[p].adjust));return this._colorsCache.set(s,l),l}},{key:"_getItemColorFromScheme",value:function(e,t,i,r){var a;for(void 0!==e&&""!==e||(e=this.colorSchemes[0].name),a=0;a<this.colorSchemes.length&&e!==this.colorSchemes[a].name;a++);for(var n=0;n<=t;){a===this.colorSchemes.length&&(a=0);var s=this.colorSchemes[a].colors.length;if(!(n+s<=t)){var o=this.colorSchemes[a].colors[t-n];return this._isGreyScale(i,r)&&0===o.indexOf("#")&&(o=this._draw.toGreyScale(o)),o}n+=s,a++}}},{key:"getColorScheme",value:function(e){for(var t=0;t<this.colorSchemes.length;t++)if(this.colorSchemes[t].name===e)return this.colorSchemes[t].colors}},{key:"addColorScheme",value:function(e,t){for(var i=0;i<this.colorSchemes.length;i++)if(this.colorSchemes[i].name===e)return void(this.colorSchemes[i].colors=t);this.colorSchemes.push({name:e,colors:t})}},{key:"removeColorScheme",value:function(e){for(var t=0;t<this.colorSchemes.length;t++)if(this.colorSchemes[t].name===e){this.colorSchemes.splice(t,1);break}}},{key:"_formatValue",value:function(e,t,i,r,a,n){if(null==e)return"";if(this._isObject(e)&&!this._isDate(e)&&!i)return"";if(i){if("function"!=typeof i)return e.toString();try{return i(e,n,a,r)}catch(e){return e.message}}return this._isNumber(e)?this._formatNumber(e,t):this._isDate(e)?this._formatDate(e,t):t?(t.prefix||"")+e.toString()+(t.sufix||""):e.toString()}},{key:"_getFormattedValue",value:function(e,t,i,r,a,n){var s=this.seriesGroups[e],o=s.series[t],l="",h=r,u=a;o.labels&&(h=h||this._getFormatSettings(o.labels),u=u||o.labels.formatFunction),h||u||(h=this._getFormatSettings(o),u=o.formatFunction,h||u||(h=this._getFormatSettings(s),u=s.formatFunction));var d={},c=0;for(var f in o)0===f.indexOf("dataField")&&(d[f.substring(9).toLowerCase()]=this._getDataValue(i,o[f],e),c++);if(0===c&&(d=this._getDataValue(i,void 0,e)),-1!==s.type.indexOf("waterfall")&&this._isSummary(e,i)&&(d=this._renderData[e].offsets[t][i].value,c=0),u&&"function"==typeof u)try{return u(1===c?d[""]:d,i,o,s)}catch(e){return e.message}if(1===c&&this._isPieGroup(e))return this._formatValue(d[""],h,u,e,t,i);if(c>0){var p=0;for(var m in d){p>0&&""!==l&&(l+="<br>");var v="dataField"+(m.length>0?m.substring(0,1).toUpperCase()+m.substring(1):""),y=o["displayText"+(m.length>0?m.substring(0,1).toUpperCase()+m.substring(1):"")]||o[v],g=d[m];void 0!==g&&(g=this._formatValue(g,h,u,e,t,i),l+=!0===n?g:y+": "+g,p++)}}else null!=d&&(l=this._formatValue(d,h,u,e,t,i));return l||""}},{key:"_isNumberAsString",value:function(e){if("string"!=typeof e)return!1;e=e.trim();for(var t=0;t<e.length;t++){var i=e.charAt(t);if(!(i>="0"&&i<="9"||","===i||"."===i||"-"===i&&0===t||"("===i&&0===t||")"===i&&t===e.length-1))return!1}return!0}},{key:"_castAsDate",value:function(e,t){if(e instanceof Date&&!isNaN(e))return e;if("string"==typeof e){var i=new Date(e);if(this._isDate(i))return-1===e.indexOf(":")&&i.setHours(0,0,0,0),i;try{if(t&&(i=Smart.Utilities.DateTime.parseDateString(e,void 0,t).toDate(),this._isDate(i)))return i;if(this._autoDateFormats)for(var r=0;r<this._autoDateFormats.length;r++)if(i=Smart.Utilities.DateTime.parseDateString(e,void 0,this._autoDateFormats[r]).toDate(),this._isDate(i))return i;var a=this._detectDateFormat(e);if(a&&(i=Smart.Utilities.DateTime.parseDateString(e,void 0,a).toDate(),this._isDate(i)))return this._autoDateFormats.push(a),i}catch(e){}}}},{key:"_castAsNumber",value:function(e){if(e instanceof Date&&!isNaN(e))return e.valueOf();if("string"==typeof e)if(this._isNumber(e))e=parseFloat(e);else if(!/[a-zA-Z]/.test(e)){var t=new Date(e);null!=t&&(e=t.valueOf())}return isNaN(e)?void 0:e}},{key:"_isNumber",value:function(e){return"string"==typeof e&&this._isNumberAsString(e)&&(e=parseFloat(e)),"number"==typeof e&&isFinite(e)}},{key:"_isDate",value:function(e){return e instanceof Date&&!isNaN(e.getDate())}},{key:"_isBoolean",value:function(e){return"boolean"==typeof e}},{key:"_isObject",value:function(e){return e&&("object"===r(e)||"function"==typeof e)||!1}},{key:"_formatDate",value:function(e,t){var i=e.toString();return t&&(t.dateFormat&&(i=new Smart.Utilities.DateTime(e).toString(t.dateFormat)),i=(t.prefix||"")+i+(t.sufix||"")),i}},{key:"_formatNumber",value:function(e,t){if(!this._isNumber(e))return e;t=t||{};var i=this.localization.decimalSeparator,r=this.localization.thousandsSeparator;t.decimalSeparator&&(i=t.decimalSeparator),t.thousandsSeparator&&(r=t.thousandsSeparator);var a=t.prefix||"",n=t.sufix||"",s=t.decimalPlaces;isNaN(s)&&(s=this._getDecimalPlaces([e],void 0,3));var o=t.negativeWithBrackets||!1,l=e<0;l&&o&&(e*=-1);var h,u=e.toString(),d=Math.pow(10,s);if(u=(Math.round(e*d)/d).toString(),isNaN(u)&&(u=""),h=u.lastIndexOf("."),s>0)for(h<0?h=(u+=i).length-1:"."!==i&&(u=u.replace(".",i));u.length-1-h<s;)u+="0";h=(h=u.lastIndexOf(i))>-1?h:u.length;for(var c=u.substring(h),f=0,p=h;p>0;p--,f++)f%3==0&&p!==h&&(!l||p>1||l&&o)&&(c=r+c),c=u.charAt(p-1)+c;return u=c,l&&o&&(u="("+u+")"),a+u+n}},{key:"_calculateControlPoints",value:function(e,t){var i=e[t],r=e[t+1],a=e[t+2],n=e[t+3],s=e[t+4],o=e[t+5],l=Math.sqrt(Math.pow(a-i,2)+Math.pow(n-r,2)),h=l+Math.sqrt(Math.pow(s-a,2)+Math.pow(o-n,2));0===h&&(h=1);var u=.4*l/h,d=.4-u;return[a+u*(i-s),n+u*(r-o),a-d*(i-s),n-d*(r-o)]}},{key:"_getBezierPoints",value:function(e){for(var t="",i=[],r=[],a=e.split(" "),n=0;n<a.length;n++){var s=a[n].split(",");i.push(parseFloat(s[0])),i.push(parseFloat(s[1])),!isNaN(i[i.length-1])&&isNaN(i[i.length-2])}var o=i.length;if(o<=1)return"";if(2===o)return t="M"+this.renderer._ptrnd(i[0])+","+this.renderer._ptrnd(i[1])+" L"+this.renderer._ptrnd(i[0]+1)+","+this.renderer._ptrnd(i[1]+1)+" ";for(var l=0;l<o-4;l+=2)r=r.concat(this._calculateControlPoints(i,l));for(var h=2;h<o-5;h+=2)t+=" C"+this.renderer._ptrnd(r[2*h-2])+","+this.renderer._ptrnd(r[2*h-1])+" "+this.renderer._ptrnd(r[2*h])+","+this.renderer._ptrnd(r[2*h+1])+" "+this.renderer._ptrnd(i[h+2])+","+this.renderer._ptrnd(i[h+3])+" ";return t=o<=4||Math.abs(i[0]-i[2])<3||Math.abs(i[1]-i[3])<3?"M"+this.renderer._ptrnd(i[0])+","+this.renderer._ptrnd(i[1])+" L"+this.renderer._ptrnd(i[2])+","+this.renderer._ptrnd(i[3])+" "+t:"M"+this.renderer._ptrnd(i[0])+","+this.renderer._ptrnd(i[1])+" Q"+this.renderer._ptrnd(r[0])+","+this.renderer._ptrnd(r[1])+" "+this.renderer._ptrnd(i[2])+","+this.renderer._ptrnd(i[3])+" "+t,o>=4&&(Math.abs(i[o-2]-i[o-4])<3||Math.abs(i[o-1]-i[o-3])<3)?t+=" L"+this.renderer._ptrnd(i[o-2])+","+this.renderer._ptrnd(i[o-1])+" ":o>=5&&(t+=" Q"+this.renderer._ptrnd(r[2*o-10])+","+this.renderer._ptrnd(r[2*o-9])+" "+this.renderer._ptrnd(i[o-2])+","+this.renderer._ptrnd(i[o-1])+" "),t}},{key:"_createAnimationGroup",value:function(e){this._animGroups||(this._animGroups={}),this._animGroups[e]={animations:[],startTick:NaN}}},{key:"_startAnimation",value:function(e){var t=(new Date).getTime();this._animGroups[e].startTick=t,this._runAnimation(),this._enableAnimTimer()}},{key:"_enqueueAnimation",value:function(e,t,i,r,a,n,s){r<0&&(r=0),void 0===s&&(s="easeInOutSine"),this._animGroups[e].animations.push({key:t,properties:i,duration:r,fn:a,context:n,easing:s})}},{key:"_stopAnimations",value:function(){clearTimeout(this._animtimer),this._animtimer=void 0,this._animGroups=void 0}},{key:"_enableAnimTimer",value:function(){if(!this._animtimer){var e=this;this._animtimer=setTimeout((function(){e._runAnimation()}),this._animTickInt)}}},{key:"_runAnimation",value:function(){if(this._animGroups){var e=(new Date).getTime(),t={};for(var i in this._animGroups){for(var r=this._animGroups[i].animations,a=this._animGroups[i].startTick,n=0,s=0;s<r.length;s++){var o=r[s],l=e-a;o.duration>n&&(n=o.duration);var h=o.duration>0?l/o.duration:1,u=h;if(o.easing&&0!==o.duration&&!1!==o.duration&&(u=Smart.Utilities.Animation.Easings[o.easing](l,0,1,o.duration)),h>1&&(h=1,u=1),o.fn)o.fn(o.key,o.context,u);else{for(var d={},c=0;c<o.properties.length;c++){var f=o.properties[c],p=0;p=1===h?f.to:u*(f.to-f.from)+f.from,d[f.key]=p}this.renderer.attr(o.key,d)}}a+n>e&&(t[i]={startTick:a,animations:r})}this._animGroups=t,this.renderer instanceof Smart.Utilities.HTML5Renderer&&this.renderer.refresh()}this._animtimer=null,Object.values(this._animGroups).length>0&&this._enableAnimTimer()}},{key:"_fixCoords",value:function(e,t){if("horizontal"!==this.seriesGroups[t].orientation)return e;var i=e.x;return e.x=e.y,e.y=i+this._plotRect.y-this._plotRect.x,i=e.width,e.width=e.height,e.height=i,e}},{key:"getItemCoord",value:function(e,t,i){if(this._isPieGroup(e)&&(!this._isSerieVisible(e,t,i)||!this._renderData||this._renderData.length<=e))return{x:NaN,y:NaN};if(!this._isSerieVisible(e,t)||!this._renderData||this._renderData.length<=e)return{x:NaN,y:NaN};var r=this.seriesGroups[e],a=r.series[t],n=this._getItemCoord(e,t,i);if(this._isPieGroup(e)){if(isNaN(n.x)||isNaN(n.y)||isNaN(n.fromAngle)||isNaN(n.toAngle))return{x:NaN,y:NaN};var s=this._plotRect,o=n.fromAngle*(Math.PI/180),l=n.toAngle*(Math.PI/180),h=s.x+n.center.x+Math.cos(o)*n.outerRadius,u=s.x+n.center.x+Math.cos(l)*n.outerRadius,d=s.y+n.center.y-Math.sin(o)*n.outerRadius,c=s.y+n.center.y-Math.sin(l)*n.outerRadius,f=Math.min(h,u),p=Math.abs(u-h);return n={x:f,y:Math.min(d,c),width:p,height:Math.abs(c-d),center:n.center,centerOffset:n.centerOffset,innerRadius:n.innerRadius,outerRadius:n.outerRadius,selectedRadiusChange:n.selectedRadiusChange,fromAngle:n.fromAngle,toAngle:n.toAngle}}if(-1!==r.type.indexOf("column")||-1!==r.type.indexOf("waterfall")){var m=this._getColumnSerieWidthAndOffset(e,t);n.height=Math.abs(n.y.to-n.y.from),n.y=Math.min(n.y.to,n.y.from),n.x+=m.offset,n.width=m.width}else if(-1!==r.type.indexOf("ohlc")||-1!==r.type.indexOf("candlestick")){m=this._getColumnSerieWidthAndOffset(e,t);var v=n.y,y=Math.min(v.Open,v.Close,v.Low,v.High),g=Math.max(v.Open,v.Close,v.Low,v.High);n.height=Math.abs(g-y),n.y=y,n.x+=m.offset,n.width=m.width}else if(-1!==r.type.indexOf("line")||-1!==r.type.indexOf("area"))n.width=n.height=0,n.y=n.y.to;else if(-1!==r.type.indexOf("bubble")||-1!==r.type.indexOf("scatter")){n.center={x:n.x,y:n.y.to};var _=n.y.radius;"circle"!==a.symbolType&&void 0!==a.symbolType&&null!==a.symbolType&&(_/=2),n.y=n.y.to,n.radius=_,n.width=2*_,n.height=2*_}if(n=this._fixCoords(n,e),r.polar||r.spider){var b=this._toPolarCoord(this._renderData[e].polarCoords,this._plotRect,n.x,n.y);n.x=b.x,n.y=b.y,n.center&&(n.center=this._toPolarCoord(this._renderData[e].polarCoords,this._plotRect,n.center.x,n.center.y))}return-1===r.type.indexOf("bubble")&&-1===r.type.indexOf("scatter")||(n.x-=_,n.y-=_),n}},{key:"_getItemCoord",value:function(e,t,i){var r,a,n=this.seriesGroups[e];if(!n||!this._renderData)return{x:NaN,y:NaN};if(!n.series[t])return{x:NaN,y:NaN};var s=this._plotRect;if(this._isPieGroup(e)){var o=this._renderData[e].offsets[t][i];if(!o)return{x:NaN,y:NaN};var l=(o.fromAngle+o.toAngle)/2*(Math.PI/180);return{x:r=s.x+o.x+Math.cos(l)*o.outerRadius,y:a=s.y+o.y-Math.sin(l)*o.outerRadius,center:{x:o.x,y:o.y},centerOffset:o.centerOffset,innerRadius:o.innerRadius,outerRadius:o.outerRadius,selectedRadiusChange:o.selectedRadiusChange,fromAngle:o.fromAngle,toAngle:o.toAngle}}if(r=s.x+this._renderData[e].xoffsets.data[i],a=this._renderData[e].offsets[t][i],isNaN(r)||!a)return{x:NaN,y:NaN};var h={};for(var u in a)h[u]=a[u];return{x:r,y:h}}},{key:"getXAxisValue",value:function(e,t){var i=this.seriesGroups[t];if(i){var r=this._getXAxis(t),a=this._plotRect,n=0,s=NaN,o=this._renderData[0].xoffsets.axisStats,l=0,h=0;if(i.polar||i.spider){if(isNaN(e.x)||isNaN(e.y))return NaN;var u=this._getPolarAxisCoords(t,a);if(this.renderer._ptdist(e.x,e.y,u.x,u.y)>u.r)return NaN;var d=Math.atan2(u.y-e.y,e.x-u.x);(d=Math.PI/2-d)<0&&(d=2*Math.PI+d),s=d*u.r;var c=u.startAngle+Math.PI/2,f=u.endAngle+Math.PI/2;l=c*u.r,h=f*u.r,n=(f-c)*u.r;var p=this._getPaddingSize(o,r,r.valuesOnTicks,n,!0,u.isClosedCircle,this._hasColumnSeries());u.isClosedCircle?(n-=p.left+p.right,h-=p.left+p.right):r.valuesOnTicks||(l+=p.left,h-=p.right)}else{if("horizontal"!==i.orientation){if(e<a.x||e>a.x+a.width)return NaN;s=e-a.x,n=a.width}else{if(e<a.y||e>a.y+a.height)return NaN;s=e-a.y,n=a.height}this._renderData[t]&&this._renderData[t].xoffsets&&(n-=(p=this._renderData[t].xoffsets.padding).left+p.right,s-=p.left),h=n}return this._smartPlot.scale(s,{min:l,max:h},{min:o.min.valueOf(),max:o.max.valueOf(),type:o.logAxis.enabled?"logarithmic":"linear",base:o.logAxis.base,flip:r.flip})}}},{key:"getValueAxisValue",value:function(e,t){var i=this.seriesGroups[t];if(i){var r=this._getValueAxis(t),a=this._plotRect,n=0,s=NaN;if(i.polar||i.spider){if(isNaN(e.x)||isNaN(e.y))return NaN;var o=this._getPolarAxisCoords(t,a);s=this.renderer._ptdist(e.x,e.y,o.x,o.y),s=(n=o.r)-s}else if("horizontal"===i.orientation){if(e<a.x||e>a.x+a.width)return NaN;s=e-a.x,n=a.width}else{if(e<a.y||e>a.y+a.height)return NaN;s=e-a.y,n=a.height}var l=this._stats.seriesGroups[t];return this._smartPlot.scale(s,{min:0,max:n},{min:l.min.valueOf(),max:l.max.valueOf(),type:l.logarithmic?"logarithmic":"linear",base:l.logBase,flip:!r.flip})}}},{key:"_detectDateFormat",value:function(e,t){var i={en_US_d:"M/d/yyyy",en_US_D:"dddd, MMMM dd, yyyy",en_US_t:"h:mm tt",en_US_T:"h:mm:ss tt",en_US_f:"dddd, MMMM dd, yyyy h:mm tt",en_US_F:"dddd, MMMM dd, yyyy h:mm:ss tt",en_US_M:"MMMM dd",en_US_Y:"yyyy MMMM",en_US_S:"yyyy'-'MM'-'dd'T'HH':'mm':'ss",en_CA_d:"dd/MM/yyyy",en_CA_D:"MMMM-dd-yy",en_CA_f:"MMMM-dd-yy h:mm tt",en_CA_F:"MMMM-dd-yy h:mm:ss tt",ISO:"yyyy-MM-dd hh:mm:ss",ISO2:"yyyy-MM-dd HH:mm:ss",d1:"dd.MM.yyyy",d2:"dd-MM-yyyy",zone1:"yyyy-MM-ddTHH:mm:ss-HH:mm",zone2:"yyyy-MM-ddTHH:mm:ss+HH:mm",custom:"yyyy-MM-ddTHH:mm:ss.fff",custom2:"yyyy-MM-dd HH:mm:ss.fff",de_DE_d:"dd.MM.yyyy",de_DE_D:"dddd, d. MMMM yyyy",de_DE_t:"HH:mm",de_DE_T:"HH:mm:ss",de_DE_f:"dddd, d. MMMM yyyy HH:mm",de_DE_F:"dddd, d. MMMM yyyy HH:mm:ss",de_DE_M:"dd MMMM",de_DE_Y:"MMMM yyyy",fr_FR_d:"dd/MM/yyyy",fr_FR_D:"dddd d MMMM yyyy",fr_FR_t:"HH:mm",fr_FR_T:"HH:mm:ss",fr_FR_f:"dddd d MMMM yyyy HH:mm",fr_FR_F:"dddd d MMMM yyyy HH:mm:ss",fr_FR_M:"d MMMM",fr_FR_Y:"MMMM yyyy",it_IT_d:"dd/MM/yyyy",it_IT_D:"dddd d MMMM yyyy",it_IT_t:"HH:mm",it_IT_T:"HH:mm:ss",it_IT_f:"dddd d MMMM yyyy HH:mm",it_IT_F:"dddd d MMMM yyyy HH:mm:ss",it_IT_M:"dd MMMM",it_IT_Y:"MMMM yyyy",ru_RU_d:"dd.MM.yyyy",ru_RU_D:"d MMMM yyyy '?.'",ru_RU_t:"H:mm",ru_RU_T:"H:mm:ss",ru_RU_f:"d MMMM yyyy '?.' H:mm",ru_RU_F:"d MMMM yyyy '?.' H:mm:ss",ru_RU_Y:"MMMM yyyy",cs_CZ_d:"d.M.yyyy",cs_CZ_D:"d. MMMM yyyy",cs_CZ_t:"H:mm",cs_CZ_T:"H:mm:ss",cs_CZ_f:"d. MMMM yyyy H:mm",cs_CZ_F:"d. MMMM yyyy H:mm:ss",cs_CZ_M:"dd MMMM",cs_CZ_Y:"MMMM yyyy",he_IL_d:"dd MMMM yyyy",he_IL_D:"dddd dd MMMM yyyy",he_IL_t:"HH:mm",he_IL_T:"HH:mm:ss",he_IL_f:"dddd dd MMMM yyyy HH:mm",he_IL_F:"dddd dd MMMM yyyy HH:mm:ss",he_IL_M:"dd MMMM",he_IL_Y:"MMMM yyyy",hr_HR_d:"d.M.yyyy.",hr_HR_D:"d. MMMM yyyy.",hr_HR_t:"H:mm",hr_HR_T:"H:mm:ss",hr_HR_f:"d. MMMM yyyy. H:mm",hr_HR_F:"d. MMMM yyyy. H:mm:ss",hr_HR_M:"d. MMMM",hu_HU_d:"yyyy.MM.dd.",hu_HU_D:"yyyy. MMMM d.",hu_HU_t:"H:mm",hu_HU_T:"H:mm:ss",hu_HU_f:"yyyy. MMMM d. H:mm",hu_HU_F:"yyyy. MMMM d. H:mm:ss",hu_HU_M:"MMMM d.",hu_HU_Y:"yyyy. MMMM",jp_JP_d:"gg y/M/d",jp_JP_D:"gg y'?'M'?'d'?'",jp_JP_t:"H:mm",jp_JP_T:"H:mm:ss",jp_JP_f:"gg y'?'M'?'d'?' H:mm",jp_JP_F:"gg y'?'M'?'d'?' H:mm:ss",jp_JP_M:"M'?'d'?'",jp_JP_Y:"gg y'?'M'?'",lt_LT_d:"yyyy.MM.dd",lt_LT_D:"yyyy 'm.' MMMM d 'd.'",lt_LT_t:"HH:mm",lt_LT_T:"HH:mm:ss",lt_LT_f:"yyyy 'm.' MMMM d 'd.' HH:mm",lt_LT_F:"yyyy 'm.' MMMM d 'd.' HH:mm:ss",lt_LT_M:"MMMM d 'd.'",lt_LT_Y:"yyyy 'm.' MMMM",sa_IN_d:"dd-MM-yyyy",sa_IN_D:"dd MMMM yyyy dddd",sa_IN_t:"HH:mm",sa_IN_T:"HH:mm:ss",sa_IN_f:"dd MMMM yyyy dddd HH:mm",sa_IN_F:"dd MMMM yyyy dddd HH:mm:ss",sa_IN_M:"dd MMMM",basic_y:"yyyy",basic_ym:"yyyy-MM",basic_d:"yyyy-MM-dd",basic_dhm:"yyyy-MM-dd hh:mm",basic_bhms:"yyyy-MM-dd hh:mm:ss",basic2_ym:"MM-yyyy",basic2_d:"MM-dd-yyyy",basic2_dhm:"MM-dd-yyyy hh:mm",basic2_dhms:"MM-dd-yyyy hh:mm:ss",basic3_ym:"yyyy/MM",basic3_d:"yyyy/MM/dd",basic3_dhm:"yyyy/MM/dd hh:mm",basic3_bhms:"yyyy/MM/dd hh:mm:ss",basic4_ym:"MM/yyyy",basic4_d:"MM/dd/yyyy",basic4_dhm:"MM/dd/yyyy hh:mm",basic4_dhms:"MM/dd/yyyy hh:mm:ss"};t&&(i=Object.assign({},i,t));var r=[];for(var a in Array.isArray(e)?r=e:r.push(e),i)i[a]={format:i[a],count:0};for(var n=0;n<r.length;n++){var s=r[n];if(null!=s)for(var o in i)try{(s instanceof Date||Smart.Utilities.DateTime.parseDateString(s,void 0,i[o].format))&&i[o].count++}catch(e){}}var l={key:void 0,count:0};for(var h in i)i[h].count>l.count&&(l.key=h,l.count=i[h].count);return l.key?i[l.key].format:""}},{key:"_testXAxisDateFormat",value:function(e){var t=this._getXAxis(e),i=this._getDataLen(e),r={};if(this.localization.patterns)for(var a in this.localization.patterns)r["local_"+a]=this.localization.patterns[a];for(var n=[],s=0;s<i&&s<10;s++){var o=this._getDataValue(s,t.dataField,e);null!=o&&n.push(o)}return this._detectDateFormat(n,r)}},{key:"_getThemeColor",value:function(e){if("light"===this.theme)switch(e){case"background":return"#FFFFFF";case"line":return"#BCBCBC";case"band":return"#AAAAAA"}switch(e){case"background":return"#2E2E2E";case"line":return"#707070";case"band":return"#565656"}}},{key:"_legendLayout",get:function(){var e=this.legendLayout;return null!==e.height||null!==e.left||null!==e.top||null!==e.width||"vertical"===e.flow}}])&&a(i.prototype,h),u&&a(i,u),t}())},56:function(e,t,i){"use strict";Smart.Chart&&(Smart.Chart.prototype._moduleRangeSelector=!0,Smart.Chart.prototype._renderXAxisRangeSelector=function(e,t){var i=this.seriesGroups[e],r=this._getXAxis(e),a=r?r.rangeSelector:void 0;if(!this._isSelectorRefresh){var n=(a&&a.renderTo?a.renderTo:this).getElementsByClassName("smart-chart-range-selector")[0];n&&n.parentElement.removeChild(n)}if(!r||!1===r.visible||"spider"===i.type)return!1;if(!this._isGroupVisible(e))return!1;if(!a)return!1;var s="horizontal"===i.orientation;a.renderTo&&(s=!1),this.rightToLeft&&(r.flip=!0);var o=s?this.offsetHeight:this.offsetWidth;o-=4;var l=this._getXAxisStats(e,r,o),h=r.position;if(a.renderTo&&a.position&&(h=a.position),!this._isSelectorRefresh){var u=a.renderTo,d=document.createElement("div");if(d.className="smart-chart-range-selector smart-unselectable",d.style.position="absolute",d.style.backgroundColor="transparent",d.style.onselectstart=function(){return!1},u)u.appendChild(d),d.style.width=u.offsetWidth+"px",d.style.height=u.offsetHeight+"px",t.width=u.offsetWidth,t.height=u.offsetHeight;else{this.renderer.getContainer().appendChild(d);var c=this._selectorGetSize(r);s?(d.style.left=1+t.x+("right"!==h?-c:t.width)+"px",d.style.top="0",d.style.height=o+"px",d.style.width=c+"px",t.height=c):(d.style.left="1px",d.style.top=t.y+("top"!==h?t.height:-c)+"px",d.style.height=c+"px",d.style.width=o+"px")}this._refreshSelector(e,r,l,d,t,s)}return this._isSelectorRefresh=!1,!0},Smart.Chart.prototype._refreshSelector=function(e,t,i,r,a,n){var s=this,o={},l=t.rangeSelector;for(var h in l)o[h]=l[h];delete o.padding;var u=o.minValue,d=o.maxValue;isNaN(u)&&(u=Math.min(i.min.valueOf(),i.dsRange.min.valueOf())),isNaN(d)&&(d=Math.max(i.max.valueOf(),i.dsRange.max.valueOf())),this._isDate(i.min)&&(u=new Date(u)),this._isDate(i.max)&&(d=new Date(d));var c=t.position;l.renderTo&&l.position&&(c=l.position),o.dataField=t.dataField,delete o.rangeSelector,o.type=t.type,o.baseUnit=null!==l.baseUnit?l.baseUnit:t.baseUnit,o.minValue=u,o.maxValue=d,o.flip=t.flip,o.position=c;var f=2,p=2,m=2,v=2;l.renderTo||(f=n?0:a.x,p=n?0:this._rect.width-a.x-a.width,m=n?a.y:5,v=n?this._paddedRect.height-this._plotRect.height:5);var y=l.padding;y=null!=y||l.renderTo?{left:y&&y.left?y.left:f,top:y&&y.top?y.top:m,right:y&&y.right?y.right:p,bottom:y&&y.bottom?y.bottom:v}:{left:f,top:m,right:p,bottom:v};for(var g=l.dataField,_=0;null==g&&_<this.seriesGroups.length;_++)for(var b=0;null==g&&b<this.seriesGroups[_].series.length;b++)g=this.seriesGroups[_].series[b].dataField;var x={parentChart:this,padding:y,_isRangeSelectorInstance:!0,theme:this.theme,caption:l.caption,description:l.description,titlePadding:l.titlePadding,colorScheme:l.colorScheme||this.colorScheme,backgroundColor:l.backgroundColor||this.backgroundColor||s._getThemeColor("background"),backgroundImage:l.backgroundImage,showBorderLine:null!==l.showBorderLine?l.showBorderLine:!!l.renderTo,borderLineWidth:l.borderLineWidth||this.borderLineWidth,borderLineColor:l.borderLineColor||this.borderLineColor||s._getThemeColor("line"),rightToLeft:null!==l.rightToLeft?l.rightToLeft:this.rightToLeft,greyScale:null!==l.greyScale?l.greyScale:this.greyScale,renderEngine:this.renderEngine,showLegend:!1,animation:"none",enableEvents:!1,showToolTips:!1,dataSource:this.dataSource,xAxis:o,seriesGroups:[{orientation:n?"horizontal":"vertical",valueAxis:{visible:!1},type:l.serieType,skipOverlappingPoints:l.skipOverlappingPoints,columnSeriesOverlap:l.columnSeriesOverlap,columnsGapPercent:l.columnsGapPercent,seriesGapPercent:l.seriesGapPercent,series:[{dataField:g,opacity:.8,lineWidth:1}]}]};l.seriesGroups&&(x.seriesGroups=l.seriesGroups),l.valueAxis.visible&&(x.valueAxis=l.valueAxis),x.showBorderLine||(x.borderLineWidth=1,x.borderLineColor=s._get([this.backgroundColor,this.background,s._getThemeColor("background")]),x.showBorderLine=!0),s._supressBindingRefresh=!0,r.innerHTML="";var w=document.createElement("smart-chart");for(var S in x)w[S]=x[S];r.appendChild(w),s._rangeSelectorInstances[e]=w,s._supressBindingRefresh=!1;var k=function(){if(w._plotRect){var t=w._paddedRect;if(t.height=w._plotRect.height,n||"top"!==c){if(n){var i=w._renderData[0].xAxis.rect.width;t.width-=i,"right"!==c&&(t.x+=i)}}else t.y+=w._renderData[0].xAxis.rect.height;s._createSliderElements(e,r,t,l),s._rangeSelectorEventData={groupIndex:e,renderTo:r,swapXY:n}}};w.isRendered?k():w.whenRendered((function(){k()}))},Smart.Chart.prototype._createSliderElements=function(e,t,i,r){var a=t.getElementsByClassName("slider")[0];a&&a.parentElement.removeChild(a);var n=r.selectedRangeColor||"blue",s=this._get([r.selectedRangeOpacity,.1]),o=this._get([r.unselectedRangeOpacity,.5]),l=r.unselectedRangeColor||"white",h=r.rangeLineColor||"grey",u=document.createElement("div");for(u.className="slider",u.style.position="absolute",u.style.background=n,u.style.opacity=s,u.style.left=i.x+"px",u.style.top=i.y+"px",u.style.width=i.width+"px",u.style.height=i.height+"px",t.appendChild(u);this._sliders.length<e+1;)this._sliders.push({});function d(e,t){var i=document.createElement("div");return i.className="slider",i.style.position="absolute",i.style.background=e,i.style.opacity=t,i}function c(){var e=document.createElement("div");return e.className="slider",e.style.position="absolute",e.style.background="#FFFFFF",e.style.borderStyle="solid",e.style.borderWidth="1px",e.style.borderRadius="3px",e.style.borderColor=h,e}var f=u.getBoundingClientRect(),p=t.getBoundingClientRect();this._sliders[e]={element:u,host:t.firstElementChild,_sliderInitialAbsoluteRect:{x:f.left,y:f.top,width:i.width,height:i.height},_hostInitialAbsolutePos:{x:p.left,y:p.top},getRect:function(){var e=t.getBoundingClientRect();return{x:e.left-this._hostInitialAbsolutePos.x+this._sliderInitialAbsoluteRect.x,y:e.top-this._hostInitialAbsolutePos.y+this._sliderInitialAbsoluteRect.y,width:this._sliderInitialAbsoluteRect.width,height:this._sliderInitialAbsoluteRect.height}},rect:i,left:d(l,o),right:d(l,o),leftTop:d(h,o),rightTop:d(h,o),leftBorder:d(h,o),leftBar:c(),rightBorder:d(h,o),rightBar:c()};var m=this._sliders[e];t.appendChild(m.left),t.appendChild(m.right),t.appendChild(m.leftTop),t.appendChild(m.rightTop),t.appendChild(m.leftBorder),t.appendChild(m.rightBorder),t.appendChild(m.leftBar),t.appendChild(m.rightBar);var v=this._renderData[e].xAxis.data.axisStats,y=v.min.valueOf(),g=v.max.valueOf(),_=this._valueToOffset(e,y),b=this._valueToOffset(e,g);if(_>b){var x=b;b=_,_=x}"horizontal"!==this.seriesGroups[e].orientation?(u.style.left=Math.round(i.x+_)+"px",u.style.top=i.y+"px",u.style.width=Math.round(b-_)+"px",u.style.height=i.height+"px"):(u.style.left=i.x+"px",u.style.top=Math.round(i.y+_)+"px",u.style.width=i.width+"px",u.style.height=Math.round(b-_)+"px"),this._setSliderPositions(e,_,b)},Smart.Chart.prototype._setSliderPositions=function(e,t,i){var r=this.seriesGroups[e],a=this._getXAxis(e),n=a.rangeSelector,s="horizontal"===r.orientation;a.rangeSelector.renderTo&&(s=!1);var o=a.position;n.renderTo&&n.position&&(o=n.position);var l=this._sliders[e],h=s?"top":"left",u=s?"left":"top",d=s?"height":"width",c=s?"width":"height",f=s?"y":"x",p=s?"x":"y",m=l.rect;l.startOffset=t,l.endOffset=i,l.left.style[h]=m[f]+"px",l.left.style[u]=m[p]+"px",l.left.style[d]=t+"px",l.left.style[c]=m[c]+"px",l.right.style[h]=m[f]+i+"px",l.right.style[u]=m[p]+"px",l.right.style[d]=m[d]-i+1+"px",l.right.style[c]=m[c]+"px",l.leftTop.style[h]=m[f]+"px",l.leftTop.style[u]=m[p]+(s&&"right"===o||!s&&"top"!==o?0:m[c])+"px",l.leftTop.style[d]=t+"px",l.leftTop.style[c]="1px",l.rightTop.style[h]=m[f]+i+"px",l.rightTop.style[u]=m[p]+(s&&"right"===o||!s&&"top"!==o?0:m[c])+"px",l.rightTop.style[d]=m[d]-i+1+"px",l.rightTop.style[c]="1px",l.leftBorder.style[h]=m[f]+t+"px",l.leftBorder.style[u]=m[p]+"px",l.leftBorder.style[d]="1px",l.leftBorder.style[c]=m[c]+"px";var v=m[c]/4;v>20&&(v=20),v<3&&(v=3),l.leftBar.style[h]=m[f]+t-3+"px",l.leftBar.style[u]=m[p]+m[c]/2-v/2+"px",l.leftBar.style[d]="5px",l.leftBar.style[c]=v+"px",l.rightBorder.style[h]=m[f]+i+"px",l.rightBorder.style[u]=m[p]+"px",l.rightBorder.style[d]="1px",l.rightBorder.style[c]=m[c]+"px",l.rightBar.style[h]=m[f]+i-3+"px",l.rightBar.style[u]=m[p]+m[c]/2-v/2+"px",l.rightBar.style[d]="5px",l.rightBar.style[c]=v+"px"},Smart.Chart.prototype._resizeState={},Smart.Chart.prototype._onSliderMouseDown=function(e){e.stopImmediatePropagation(),e.stopPropagation(),this._sliders[this._rangeSelectorEventData.groupIndex]&&(void 0!==this._resizeState.state&&null!==this._resizeState.state||this._testAndSetReadyResize(e),"ready"===this._resizeState.state&&(this._draggingRangeSelector=!0,this._resizeState.state="resizing"))},Smart.Chart.prototype._valueToOffset=function(e,t){var i=this.seriesGroups[e],r=this._sliders[e],a=r.host._renderData[0].xAxis.data.axisStats,n=a.min.valueOf(),s=a.max.valueOf()-n;0===s&&(s=1);var o=this._getXAxis(e),l="horizontal"===i.orientation?"height":"width",h=(t.valueOf()-n)/s;return r.getRect()[l]*(o.flip?1-h:h)},Smart.Chart.prototype._offsetToValue=function(e,t){var i=this._sliders[e],r=this.seriesGroups[e],a=this._getXAxis(e),n="horizontal"===r.orientation?"height":"width",s=i.getRect()[n];0===s&&(s=1);var o=i.host._renderData[0].xAxis.data.axisStats,l=o.min.valueOf(),h=o.max.valueOf(),u=t/s*(h-l)+l;return!0===a.flip&&(u=h-t/s*(h-l)),this._isDate(o.min)||this._isDate(o.max)?u=new Date(u):((void 0===a.dataField||null===a.dataField||o.useIndeces)&&(u=Math.round(u)),u<o.min&&(u=o.min),u>o.max&&(u=o.max)),u},Smart.Chart.prototype._onSliderMouseUp=function(e){var t=this._rangeSelectorEventData.groupIndex,i=this._rangeSelectorEventData.swapXY,r=this._sliders[t];if(delete this._draggingRangeSelector,r&&"resizing"===this._resizeState.state){e.stopImmediatePropagation(),e.stopPropagation(),this._resizeState={},this.style.cursor="default";var a=i?"top":"left",n=i?"y":"x",s=r.element.getBoundingClientRect()[a],o=s+(i?r.element.offsetHeight:r.element.offsetWidth),l=r.getRect(),h=this._offsetToValue(t,s-l[n]),u=this._offsetToValue(t,o-l[n]);!r.host._renderData[0].xAxis.data.axisStats.isTimeUnit&&u.valueOf()-h.valueOf()>864e5&&(h.setHours(0,0,0,0),u.setDate(u.getDate()+1),u.setHours(0,0,0,0));var d=this._getXAxis(t);if(d.flip){var c=h;h=u,u=c}for(var f=0;f<this.seriesGroups.length;f++)this._getXAxis(f)===d&&(this._selectorRange[f]={min:h,max:u});this._isSelectorRefresh=!0;var p=this.animation;this.$.fireEvent("rangeSelectionChanging",{instance:this,minValue:h,maxValue:u}),this.animation="none",this.update(),this.animation=p,this.$.fireEvent("rangeSelectionChanged",{instance:this,minValue:h,maxValue:u})}},Smart.Chart.prototype._onSliderMouseMove=function(e){var t=this._rangeSelectorEventData.groupIndex,i=this._sliders[t],r=this._rangeSelectorEventData.swapXY;if(i){var a=i.getRect(),n=i.element,s={left:e.clientX,top:e.clientY},o=n.getBoundingClientRect(),l=r?"top":"left",h=parseFloat(getComputedStyle(n)[l]),u=r?"height":"width",d=r?"y":"x";if("resizing"===this._resizeState.state){if(e.stopImmediatePropagation(),e.stopPropagation(),"left"===this._resizeState.side){var c=Math.round(s[l]-o[l]),f=a[d];if(o[l]+c>=f&&o[l]+c<=f+a[u]){var p=parseInt(h),m=Math.max(2,(r?n.offsetHeight:n.offsetWidth)-c);n.style[u]=m+"px",n.style[l]=p+c+"px"}}else if("right"===this._resizeState.side){var v=r?n.offsetHeight:n.offsetWidth,y=Math.round(s[l]-o[l]-v),g=a[d];if(o[l]+v+y>=g&&o[l]+y+v<=g+a[u]){var _=Math.max(2,v+y);n.style[u]=_+"px"}}else if("move"===this._resizeState.side){var b=r?n.offsetHeight:n.offsetWidth,x=parseInt(h),w=Math.round(s[l]-this._resizeState.startPos);o[l]+w>=a[d]&&o[l]+w+b<=a[d]+a[u]&&(this._resizeState.startPos=s[l],n.style[l]=x+w+"px")}var S=parseInt(h)-i.rect[d],k=S+(r?n.offsetHeight:n.offsetWidth);this._setSliderPositions(t,S,k)}else this._testAndSetReadyResize(e)}},Smart.Chart.prototype._testAndSetReadyResize=function(e){var t=this._rangeSelectorEventData,i=t.renderTo,r=t.groupIndex,a=this._sliders[r],n=t.swapXY,s=a.getRect(),o=a.element,l={left:e.clientX,top:e.clientY},h=o.getBoundingClientRect(),u=n?"left":"top",d=n?"top":"left",c=n?"width":"height",f=this._isTouchDevice?30:5;l[u]>=h[u]&&l[u]<=h[u]+s[c]?Math.abs(l[d]-h[d])<=f?(i.style.cursor=n?"row-resize":"col-resize",this._resizeState={state:"ready",side:"left"}):Math.abs(l[d]-h[d]-(n?o.offsetHeight:o.offsetWidth))<=f?(i.style.cursor=n?"row-resize":"col-resize",this._resizeState={state:"ready",side:"right"}):l[d]+f>h[d]&&l[d]-f<h[d]+(n?o.offsetHeight:o.offsetWidth)?(i.style.cursor="pointer",this._resizeState={state:"ready",side:"move",startPos:l[d]}):(i.style.cursor="default",this._resizeState={}):(i.style.cursor="default",this._resizeState={})},Smart.Chart.prototype._selectorGetSize=function(e){return e.rangeSelector.renderTo?0:e.rangeSelector.size||this._paddedRect.height/3})},57:function(e,t,i){"use strict";Smart.Chart&&(Smart.Chart.prototype._moduleApi=!0,Smart.Chart.prototype.getItemsCount=function(e,t){var i=this.seriesGroups[e];if(!this._isSerieVisible(e,t))return 0;var r=this._renderData;return!i||!r||r.length<=e?0:i.series[t]?r[e].offsets[t].length:0},Smart.Chart.prototype.getXAxisRect=function(e){var t=this._renderData;if(t&&!(t.length<=e)&&t[e].xAxis)return t[e].xAxis.rect},Smart.Chart.prototype.getXAxisLabels=function(e){var t=[],i=this._renderData;if(!i||i.length<=e)return t;if(!(i=i[e].xAxis))return t;var r=this.seriesGroups[e];if(r.polar||r.spider){for(var a=0;a<i.polarLabels.length;a++){var n=i.polarLabels[a];t.push({offset:{x:n.x,y:n.y},value:n.value})}return t}for(var s=this._getXAxis(e),o=this.getXAxisRect(e),l="top"===s.position||"right"===s.position,h="horizontal"===r.orientation,u=0;u<i.data.length;u++)h?t.push({offset:{x:o.x+(l?0:o.width),y:o.y+i.data.data[u]},value:i.data.xvalues[u]}):t.push({offset:{x:o.x+i.data.data[u],y:o.y+(l?o.height:0)},value:i.data.xvalues[u]});return t},Smart.Chart.prototype.getValueAxisRect=function(e){var t=this._renderData;if(t&&!(t.length<=e)&&t[e].valueAxis)return t[e].valueAxis.rect},Smart.Chart.prototype.getValueAxisLabels=function(e){var t=[],i=this._renderData;if(!i||i.length<=e)return t;if(!(i=i[e].valueAxis))return t;var r=this._getValueAxis(e),a="top"===r.position||"right"===r.position,n=this.seriesGroups[e],s="horizontal"===n.orientation;if(n.polar||n.spider){for(var o=0;o<i.polarLabels.length;o++){var l=i.polarLabels[o];t.push({offset:{x:l.x,y:l.y},value:l.value})}return t}for(var h=0;h<i.items.length;h++)s?t.push({offset:{x:i.itemOffsets[i.items[h]].x+i.itemWidth/2,y:i.rect.y+(a?i.rect.height:0)},value:i.items[h]}):t.push({offset:{x:i.rect.x+i.rect.width,y:i.itemOffsets[i.items[h]].y+i.itemWidth/2},value:i.items[h]});return t},Smart.Chart.prototype.getPlotAreaRect=function(){return this._plotRect},Smart.Chart.prototype.getRect=function(){return this._rect},Smart.Chart.prototype.showToolTip=function(e,t,i,r,a){var n=this.getItemCoord(e,t,i);isNaN(n.x)||isNaN(n.y)||this._startTooltipTimer(e,t,i,n.x,n.y,r,a)},Smart.Chart.prototype.hideToolTip=function(e){isNaN(e)&&(e=0);var t=this;t._cancelTooltipTimer(),setTimeout((function(){t._hideToolTip(0)}),e)})},58:function(e,t,i){"use strict";Smart.Chart&&(Smart.Chart.prototype._moduleWaterfall=!0,Smart.Chart.prototype._isSummary=function(e,t){for(var i=this.seriesGroups[e],r=0;r<i.series.length;r++)if(void 0!==i.series[r].summary&&void 0!==this._getDataValue(t,i.series[r].summary,e))return!0;return!1},Smart.Chart.prototype._applyWaterfall=function(e,t,i,r,a,n,s,o,l){var h=this.seriesGroups[i];if(0===e.length)return e;for(var u,d=r,c={},f=[],p=[],m=0;m<h.series.length;m++)p.push(this._isSerieVisible(i,m));for(var v={},y=0;y<t;y++)for(var g=r,_=0,b=this._isSummary(i,y),x=0;x<e.length;x++)if(p[x]){var w=0;if(b){w=g===r?a:0,e[x][y].value=c[x],e[x][y].summary=!0,u=e[x][y].value<w,o&&(u=!u);var S=0;S=isNaN(n)?this._getDataPointOffsetDiff(e[x][y].value,w,w,NaN,s,r,o):this._getDataPointOffsetDiff(e[x][y].value+_,0===_?a:_,w||a,n,s,r,o),e[x][y].to=g+(u?S:-S),e[x][y].from=g,l&&(_+=e[x][y].value,g=e[x][y].to)}else{var k=l?-1:x;if(!isNaN(e[x][y].value)){void 0===v[k]&&(w=a,v[k]=!0),u=e[x][y].value<w,o&&(u=!u);var C=NaN;C=l?d:0===y?r:e[x][f[x]].to;var N=0;N=isNaN(n)?this._getDataPointOffsetDiff(e[x][y].value,w,w,NaN,s,r,o):this._getDataPointOffsetDiff(e[x][y].value+(isNaN(c[k])?0:c[k]),isNaN(c[k])?a:c[k],w||a,n,s,C,o),e[x][y].to=d=C+(u?N:-N),e[x][y].from=C,isNaN(c[k])?c[k]=e[x][y].value:c[k]+=e[x][y].value,-1===k&&(isNaN(c[x])?c[x]=e[x][y].value:c[x]+=e[x][y].value),l||(f[x]=y)}}}return e})},59:function(e,t,i){"use strict";Smart.Chart&&(Smart.Chart.prototype._moduleAnnotations=!0,Smart.Chart.prototype._renderAnnotation=function(e,t){var i=this,r=this.seriesGroups[e],a=this.renderer;if(!isNaN(e)){var n=this._get([this.getXAxisDataPointOffset(t.xValue,e),t.x]),s=this._get([this.getValueAxisDataPointOffset(t.yValue,e),t.y]),o=this._get([this.getXAxisDataPointOffset(t.xValue2,e),t.x2]),l=this._get([this.getValueAxisDataPointOffset(t.yValue2,e),t.y2]);if(r.polar||r.spider){var h=this.getPolarDataPointOffset(t.xValue,t.yValue,e);!h||isNaN(h.x)||isNaN(h.y)?(n=t.x,s=t.y):(n=h.x,s=h.y)}if(isNaN(s)||isNaN(n))return!1;if("horizontal"===r.orientation){var u=n;n=s,s=u,u=o,o=l,l=u}t.offset&&(isNaN(t.offset.x)||(n+=t.offset.x,o+=t.offset.x),isNaN(t.offset.y)||(s+=t.offset.y,l+=t.offset.y));var d,c,f=this._get([t.width,o-n]),p=this._get([t.height,l-s]);switch(t.type){case"rect":d=a.rect(n,s,f,p);break;case"circle":d=a.rect(n,s,t.radius);break;case"line":d=a.rect(n,s,o,l);break;case"path":d=a.path(t.path)}if(d&&a.attr(d,{fill:t.fillColor,stroke:t.lineColor,opacity:this._get([t.fillOpacity,t.opacity]),"stroke-opacity":this._get([t.lineOpacity,t.opacity]),"stroke-width":t.lineWidth,"stroke-dasharray":t.dashStyle||"none"}),t.text){var m=t.text,v=0,y=0;m.offset&&(isNaN(m.offset.x)||(v+=m.offset.x),isNaN(m.offset.y)||(y+=m.offset.y)),c=a.text(m.value,n+v,s+y,NaN,NaN,m.angle,{},!0===m.clip,m.horizontalAlignment||"center",m.verticalAlignment||"center",m.rotationPoint||"centermiddle"),a.attr(c,{fill:m.fillColor,stroke:m.lineColor,class:"smart-chart-annotation-text "+(m.class||"")})}for(var g=["click","mouseenter","mouseleave"],_=this,b=function(e){var r=g[e];d&&i.renderer.addHandler(d,r,(function(){_._raiseAnnotationEvent(t,r)})),c&&i.renderer.addHandler(c,r,(function(){_._raiseAnnotationEvent(t,r)}))},x=0;x<g.length;x++)b(x)}},Smart.Chart.prototype._raiseAnnotationEvent=function(e,t){this.$.fireEvent("annotation"+t.charAt(0).toUpperCase()+t.slice(1),{annotation:e})})},9:function(e,t,i){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?n(e):t}function n(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function s(e,t,i){return(s="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,i){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=o(e)););return e}(e,t);if(r){var a=Object.getOwnPropertyDescriptor(r,t);return a.get?a.get.call(i):a.value}})(e,t,i||e)}function o(e){return(o=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(e,t,i){return t&&d(e.prototype,t),i&&d(e,i),e}Smart.Utilities.Assign("Draw",function(){function e(t,i){u(this,e);this.host=t,this.renderEngine=i||"",this.refresh();var r=["clear","removeElement","attr","getAttr","line","circle","rect","path","pieslice","pieSlicePath","text","measureText"];for(var a in r)this._addFn(Smart.Utilities.Draw.prototype,r[a])}return c(e,[{key:"_addFn",value:function(e,t){e[t]||(e[t]=function(){return this.renderer[t].apply(this.renderer,arguments)})}},{key:"_initRenderer",value:function(e){return this.createRenderer(this,e)}},{key:"_internalRefresh",value:function(){if(this.renderer||(this.host.innerHTML="",this._initRenderer(this.host)),"none"!==window.getComputedStyle(this.host).display){var e=this.renderer;if(e){var t=e.getRect();this._render({x:1,y:1,width:t.width,height:t.height})}}}},{key:"_render",value:function(e){this._plotRect=e}},{key:"refresh",value:function(){this._internalRefresh()}},{key:"getSize",value:function(){var e=this._plotRect;return{width:e.width,height:e.height}}},{key:"toGreyScale",value:function(e){if(-1===e.indexOf("#"))return e;var t=this.cssToRgb(e);t[0]=t[1]=t[2]=Math.round(.3*t[0]+.59*t[1]+.11*t[2]);var i=this.rgbToHex(t[0],t[1],t[2]);return"#"+i[0]+i[1]+i[2]}},{key:"decToHex",value:function(e){return e.toString(16)}},{key:"hexToDec",value:function(e){return parseInt(e,16)}},{key:"rgbToHex",value:function(e,t,i){return[this.decToHex(e),this.decToHex(t),this.decToHex(i)]}},{key:"hexToRgb",value:function(e,t,i){return[this.hexToDec(e),this.hexToDec(t),this.hexToDec(i)]}},{key:"cssToRgb",value:function(e){return e.indexOf("rgb")<=-1?this.hexToRgb(e.substring(1,3),e.substring(3,5),e.substring(5,7)):e.substring(4,e.length-1).split(",")}},{key:"hslToRgb",value:function(e){var t,i,r,a=parseFloat(e[0]),n=parseFloat(e[1]),s=parseFloat(e[2]);if(0===n)t=i=r=s;else{var o=s<.5?s*(1+n):s+n-s*n,l=2*s-o;t=this.hueToRgb(l,o,a+1/3),i=this.hueToRgb(l,o,a),r=this.hueToRgb(l,o,a-1/3)}return[255*t,255*i,255*r]}},{key:"hueToRgb",value:function(e,t,i){return i<0&&(i+=1),i>1&&(i-=1),i<1/6?e+6*(t-e)*i:i<.5?t:i<2/3?e+(t-e)*(2/3-i)*6:e}},{key:"rgbToHsl",value:function(e){var t,i,r=parseFloat(e[0])/255,a=parseFloat(e[1])/255,n=parseFloat(e[2])/255,s=Math.max(r,a,n),o=Math.min(r,a,n),l=(s+o)/2;if(s===o)t=i=0;else{var h=s-o;switch(i=l>.5?h/(2-s-o):h/(s+o),s){case r:t=(a-n)/h+(a<n?6:0);break;case a:t=(n-r)/h+2;break;case n:t=(r-a)/h+4}t/=6}return[t,i,l]}},{key:"swap",value:function(e,t){var i=e;e=t,t=i}},{key:"getNum",value:function(e){if(e.constructor!==Array){if(isNaN(e))return 0}else for(var t=0;t<e.length;t++)if(!isNaN(e[t]))return e[t];return 0}},{key:"_ptRotate",value:function(e,t,i,r,a){var n=Math.sqrt(Math.pow(Math.abs(e-i),2)+Math.pow(Math.abs(t-r),2)),s=Math.asin((e-i)/n)+a;return{x:e=i+Math.cos(s)*n,y:t=r+Math.sin(s)*n}}},{key:"log",value:function(e,t){return Math.log(e)/(t?Math.log(t):1)}},{key:"_mod",value:function(e,t){var i=Math.abs(e>t?t:e),r=1;if(0!==i)for(;i*r<100;)r*=10;return(e*=r)%(t*=r)/r}},{key:"createRenderer",value:function(e,t){var i=e,r=i.renderer=null;return document.createElementNS&&"HTML5"!==i.renderEngine&&(r=new Smart.Utilities.SvgRenderer(this)),null!==r||"HTML5"!==i.renderEngine&&void 0!==i.renderEngine||(r=new Smart.Utilities.HTML5Renderer(this)),r.init(t),i.renderer=r,r}},{key:"getByPriority",value:function(e){for(var t=void 0,i=0;i<e.length;i++){var r=e[i];if(null!=r&&""!==r){t=r;break}}return t}},{key:"get",value:function(e,t,i){return void 0!==i?e[t][i]:e[t]}},{key:"min",value:function(e,t){for(var i=NaN,r=0;r<e.length;r++){var a=this.get(e,r,t);(isNaN(i)||a<i)&&(i=a)}return i}},{key:"max",value:function(e,t){for(var i=NaN,r=0;r<e.length;r++){var a=this.get(e,r,t);(isNaN(i)||a>i)&&(i=a)}return i}},{key:"sum",value:function(e,t){for(var i=0,r=0;r<e.length;r++){var a=this.get(e,r,t);isNaN(a)||(i+=a)}return i}},{key:"count",value:function(e,t){for(var i=0,r=0;r<e.length;r++){var a=this.get(e,r,t);isNaN(a)||i++}return i}},{key:"avg",value:function(e,t){return this.sum(e,t)/Math.max(1,this.count(e,t))}},{key:"filter",value:function(e,t){if(!t)return e;for(var i=[],r=0;r<e.length;r++)t(e[r])&&i.push(e[r]);return i}},{key:"scale",value:function(e,t,i,r){if(isNaN(e))return NaN;if((e<Math.min(t.min,t.max)||e>Math.max(t.min,t.max))&&(!r||!0!==r.ignore_range))return NaN;var a=NaN,n=1;if(void 0===t.type||"logarithmic"!==t.type){var s=Math.abs(t.max-t.min);s||(s=1),n=Math.abs(e-Math.min(t.min,t.max))/s}else if("logarithmic"===t.type){var o=t.base;isNaN(o)&&(o=10);var l=Math.min(t.min,t.max);l<=0&&(l=1);var h=Math.max(t.min,t.max);h<=0&&(h=1);var u=this.log(h,o);h=Math.pow(o,u);var d=this.log(l,o);l=Math.pow(o,d);var c=this.log(e,o);n=Math.abs(c-d)/(u-d)}if("logarithmic"===i.type){var f=i.base;isNaN(f)&&(f=10);var p=this.log(i.max,f),m=this.log(i.min,f);i.flip&&(n=1-n);var v=Math.min(m,p)+n*Math.abs(p-m);a=Math.pow(f,v)}else a=Math.min(i.min,i.max)+n*Math.abs(i.max-i.min),i.flip&&(a=Math.max(i.min,i.max)-a+i.min);return a}},{key:"axis",value:function(e,t,i){if(i<=1)return[t,e];(isNaN(i)||i<2)&&(i=2);for(var r=0;Math.round(e)!==e&&Math.round(t)!==t&&r<10;)e*=10,t*=10,r++;for(var a=(t-e)/i;r<10&&Math.round(a)!==a;)e*=10,t*=10,a*=10,r++;for(var n,s=[1,2,5],o=0;;){var l=o%s.length,h=Math.floor(o/s.length),u=Math.pow(10,h)*s[l];if(l=(o+1)%s.length,h=Math.floor((o+1)/s.length),n=Math.pow(10,h)*s[l],a>=u&&a<n)break;o++}for(var d=n,c=[],f=this.renderer._rnd(e,d,!1),p=r<=0?1:Math.pow(10,r);f<t+d;)c.push(f/p),f+=d;return c}},{key:"_widgetToImage",value:function(e,t,i,r,a){var n=e;if(!n)return!1;void 0!==i&&""!==i||(i="image."+t);var s=n.renderEngine,o=n.animation;if(n.animation="none",n.renderEngine="HTML5",n.renderEngine!==s)try{n.refresh()}catch(e){return n.renderEngine=s,n.refresh(),n.animation=o,!1}var l=n.renderer.getContainer().firstElementChild,h=!0;"function"==typeof r&&(h=r(e,l));var u=!0;return h&&(u=this.exportImage(e,l,t,i,a)),n.renderEngine!==s&&(n.renderEngine=s,n.refresh(),n.animation=o),u}},{key:"_saveAsImage",value:function(e,t){return this._widgetToImage(this,e,t)}},{key:"saveAsPNG",value:function(e){return this._saveAsImage("png",e)}},{key:"saveAsJPEG",value:function(e){return this._saveAsImage("jpeg",e)}},{key:"exportImage",value:function(e,t,i,r,a){if(!t)return!1;var n="pdf"===i.toLowerCase();n&&(i="jpeg"),void 0!==r&&""!==r||(r="image."+i);var s=!0;if("print"!==i){try{if(t)if(n){a=a||"portrait";var o={content:{image:t.toDataURL("image/"+i),width:Math.min(t.width/1.35,"portrait"===a?515:762)},pageOrientation:a};try{pdfMake.createPdf(o).download(r)}catch(t){e.error(e.localize("missingReference",{files:"pdfmake.min.js"}))}}else{Smart.Utilities.DataExporter||e.error(e.localize("missingReference",{files:"smart.export.js"}));var l=new Smart.Utilities.DataExporter;t.toBlob((function(e){l.downloadFile(e,i,r)}))}}catch(e){s=!1}return s}var h=window.open("","","width=800,height=500"),u=h.document.open(),d='<!DOCTYPE html><html><head><meta charset="utf-8" /><title>jQWidgets Chart</title></head><body><img src="'+t.toDataURL()+'" /></html>';try{u.write(d),u.close(),setTimeout((function(){h.print(),h.close()}),100)}catch(e){}}}]),e}()),Smart.Utilities.Assign("Renderer",function(){function e(t){u(this,e);this.draw=t,this._gradients={},this._toRadiansCoefficient=2*Math.PI/360}return c(e,[{key:"pieSlicePath",value:function(e,t,i,r,a,n,s){r||(r=1);var o=Math.abs(a-n),l=o>180?1:0;o>=360&&(n=a+359.99);var h=a*this._toRadiansCoefficient,u=n*this._toRadiansCoefficient,d=e,c=e,f=t,p=t,m=!isNaN(i)&&i>0;m&&(s=0);var v=Math.cos(h),y=Math.sin(h),g=Math.cos(u),_=Math.sin(u);if(s+i>0){if(s>0){var b=(o/2+a)*this._toRadiansCoefficient;e+=s*Math.cos(b),t-=s*Math.sin(b)}m&&(d=e+i*v,f=t-i*y,c=e+i*g,p=t-i*_)}var x=e+r*v,w=e+r*g,S=t-r*y,k=t-r*_,C="",N=Math.abs(Math.abs(n-a)-360)>.02;return m?(C="M "+c+","+p,C+=" a"+i+","+i,C+=" 0 "+l+",1 "+(d-c)+","+(f-p),C+=N?" L"+x+","+S:" M"+x+","+S,C+=" a"+r+","+r,C+=" 0 "+l+",0 "+(w-x)+","+(k-S),N&&(C+=" Z")):(C="M "+w+","+k,C+=" a"+r+","+r,C+=" 0 "+l+",1 "+(x-w)+","+(S-k),N&&(C+=" L"+e+","+t,C+=" Z")),C}},{key:"measureText",value:function(e,t,i,r){var a=this._getTextParts(e,t,i),n=a.width,s=a.height;!1===r&&(s/=.6);var o={};if(isNaN(t)&&(t=0),0===t)o={width:this._rup(n),height:this._rup(s)};else{var l=t*Math.PI*2/360,h=Math.abs(Math.sin(l)),u=Math.abs(Math.cos(l)),d=Math.abs(n*h+s*u),c=Math.abs(n*u+s*h);o={width:this._rup(c),height:this._rup(d)}}return r&&(o.textPartsInfo=a),o}},{key:"alignTextInRect",value:function(e,t,i,r,a,n,s,o,l,h){var u=l*Math.PI*2/360,d=Math.sin(u),c=Math.cos(u),f=a*d,p=a*c;"center"===s||""===s||"undefined"===s?e+=i/2:"right"===s&&(e+=i),"center"===o||"middle"===o||""===o||"undefined"===o?t+=r/2:"bottom"===o?t+=r-n/2:"top"===o&&(t+=n/2);var m="middle";-1!==(h=h||"").indexOf("top")?m="top":-1!==h.indexOf("bottom")&&(m="bottom");var v="center";return-1!==h.indexOf("left")?v="left":-1!==h.indexOf("right")&&(v="right"),"center"===v?(e-=p/2,t-=f/2):"right"===v&&(e-=p,t-=f),"top"===m?(e-=n*d,t+=n*c):"middle"===m&&(e-=n*d/2,t+=n*c/2),{x:e=this._rup(e),y:t=this._rup(t)}}},{key:"adjustColor",value:function(e,t){if("string"!=typeof e)return"#000000";if(-1===e.indexOf("#"))return e;var i=this.draw,r=i.cssToRgb(e),a=i.rgbToHsl(r);a[2]=Math.min(1,a[2]*t),a[1]=Math.min(1,a[1]*t*1.1),r=i.hslToRgb(a),e="#";for(var n=0;n<3;n++){var s=Math.round(r[n]);1===(s=i.decToHex(s)).toString().length&&(e+="0"),e+=s}return e.toUpperCase()}},{key:"_rup",value:function(e){var t=Math.round(e);return e>t&&t++,t}},{key:"_ptdist",value:function(e,t,i,r){return Math.sqrt((i-e)*(i-e)+(r-t)*(r-t))}},{key:"_rnd",value:function(e,t,i,r){if(isNaN(e))return e;void 0===r&&(r=!0);var a=e-(!0===r?e%t:this._mod(e,t));return e===a?a:(i?e>a&&(a+=t):a>e&&(a-=t),1===t?Math.round(a):a)}},{key:"_ptrnd",value:function(e){if(!document.createElementNS)return Math.round(e)===e?e:this._rnd(e,1,!1,!0);var t=this._rnd(e,.5,!1,!0);return.5!==Math.abs(t-Math.round(t))?t>e?t-.5:t+.5:t}},{key:"_getContrastColor",value:function(e){if(void 0!==e){var t=this.draw.hexToRgb(e.slice(1,3),e.slice(3,5),e.slice(5,7));return(.299*t[0]+.61*t[1]+.114*t[2])/255>.6?"#000000":"#FFFFFF"}}}]),e}()),Smart.Utilities.Assign("SvgRenderer",function(e){function t(e){var i;u(this,t);var r=n(i=a(this,o(t).call(this,e)));return r._svgns="http://www.w3.org/2000/svg",r._openGroups=[],r._clipId=0,i}return l(t,Smart.Utilities.Renderer),c(t,[{key:"init",value:function(e){var t=document.createElement("div");t.className="drawContainer",t.onselectstart=function(){return!1},e.appendChild(t),this.host=e,this.container=t;try{var i=document.createElementNS(this._svgns,"svg");i.setAttribute("version","1.1"),i.setAttribute("width","100%"),i.setAttribute("height","100%"),i.setAttribute("overflow","hidden"),t.appendChild(i),this.canvas=i}catch(e){return!1}return this._id=(new Date).getTime(),this.clear(),!0}},{key:"getType",value:function(){return"SVG"}},{key:"refresh",value:function(){}},{key:"getRect",value:function(){return{x:0,y:0,width:Math.max(this._rup(this.host.offsetWidth)-1,0),height:Math.max(this._rup(this.host.offsetHeight)-1,0)}}},{key:"getContainer",value:function(){return this.container}},{key:"clear",value:function(){for(;this.canvas.childNodes.length>0;)this.removeElement(this.canvas.firstElementChild);this._defaultParent=void 0,this._defs=document.createElementNS(this._svgns,"defs"),this._gradients={},this.canvas.appendChild(this._defs)}},{key:"removeElement",value:function(e){if(void 0!==e)try{for(;e.firstChild;)this.removeElement(e.firstChild);e.parentNode?e.parentNode.removeChild(e):this.canvas.removeChild(e)}catch(e){}}},{key:"beginGroup",value:function(){var e=this._activeParent(),t=document.createElementNS(this._svgns,"g");return e.appendChild(t),this._openGroups.push(t),t}},{key:"endGroup",value:function(){0!==this._openGroups.length&&this._openGroups.pop()}},{key:"_activeParent",value:function(){return 0===this._openGroups.length?this.canvas:this._openGroups[this._openGroups.length-1]}},{key:"createClipRect",value:function(e){var t=document.createElementNS(this._svgns,"clipPath"),i=document.createElementNS(this._svgns,"rect");return this.attr(i,{x:e.x,y:e.y,width:e.width,height:e.height,fill:"none"}),this._clipId=this._clipId||0,t.id="cl"+this._id+"_"+(++this._clipId).toString(),t.appendChild(i),this._defs.appendChild(t),t}},{key:"getWindowHref",value:function(){var e=window.location.href;return e?e=(e=e.replace(/([\('\)])/g,"\\$1")).replace(/#.*$/,""):e}},{key:"setClip",value:function(e,t){var i="url("+this.getWindowHref()+"#"+t.id+")";return this.attr(e,{"clip-path":i})}},{key:"addHandler",value:function(e,t,i){e.addEventListener(t,i)}},{key:"removeHandler",value:function(){}},{key:"on",value:function(e,t,i){this.addHandler(e,t,i)}},{key:"off",value:function(e,t,i){this.removeHandler(e,t,i)}},{key:"shape",value:function(e,t){var i=document.createElementNS(this._svgns,e);if(i){for(var r in t)i.setAttribute(r,t[r]);return this._activeParent().appendChild(i),i}}},{key:"_getTextParts",value:function(e,t,i){var r={width:0,height:0,parts:[]};if(void 0===e)return r;var a=e.toString().split("<br>"),n=this._activeParent(),s=document.createElementNS(this._svgns,"text");this.attr(s,i);for(var o=0;o<a.length;o++){var l=a[o],h=s.ownerDocument.createTextNode(l);s.appendChild(h),n.appendChild(s);var u=void 0;try{u=s.getBBox()}catch(e){}var d=this._rup(u.width),c=this._rup(.6*u.height);s.removeChild(h),r.width=Math.max(r.width,d),r.height+=c+(o>0?4:0),r.parts.push({width:d,height:c,text:l})}return n.removeChild(s),r}},{key:"_measureText",value:function(e,i,r,a){return s(o(t.prototype),"measureText",this).call(this,e,i,r,a)}},{key:"measureText",value:function(e,t,i){return this._measureText(e,t,i,!1)}},{key:"text",value:function(e,t,i,r,a,n,s,o,l,h,u){var d,c=this._measureText(e,n,s,!0,this),f=c.textPartsInfo,p=f.parts,m=this._getContrastColor(arguments[11]);if(l||(l="center"),h||(h="center"),(p.length>1||o)&&(d=this.beginGroup()),o){var v=this.createClipRect({x:this._rup(t)-1,y:this._rup(i)-1,width:this._rup(r)+2,height:this._rup(a)+2});this.setClip(d,v)}var y=this._activeParent(),g=0,_=0;g=f.width,_=f.height,(isNaN(r)||r<=0)&&(r=g),(isNaN(a)||a<=0)&&(a=_);var b=r||0,x=a||0,w=0;if(!n||0===n){var S;i+=_,"center"===h||"middle"===h?i+=(x-_)/2:"bottom"===h&&(i+=x-_),r||(r=g),a||(a=_),y=this._activeParent();for(var k=p.length-1;k>=0;k--){S=document.createElementNS(this._svgns,"text"),this.attr(S,s),this.attr(S,{cursor:"default"});var C=S.ownerDocument.createTextNode(p[k].text);S.appendChild(C);var N=t,A=p[k].width,M=p[k].height;"center"===l?N+=(b-A)/2:"right"===l&&(N+=b-A),this.attr(S,{x:this._rup(N),y:this._rup(i+w),width:this._rup(A),height:this._rup(M)}),void 0!==m&&(S.style.fill=m),y.appendChild(S),w-=p[k].height+4}return d?(this.endGroup(),d):S}var T=this.alignTextInRect(t,i,r,a,g,_,l,h,n,u);t=T.x,i=T.y;var D=this.shape("g",{transform:"translate("+t+","+i+")"}),O=this.shape("g",{transform:"rotate("+n+")"});D.appendChild(O),w=0;for(var E=p.length-1;E>=0;E--){var F=document.createElementNS(this._svgns,"text");this.attr(F,s),this.attr(F,{cursor:"default"});var P=F.ownerDocument.createTextNode(p[E].text);F.appendChild(P);var I=0,L=p[E].width,R=p[E].height;"center"===l?I+=(f.width-L)/2:"right"===l&&(I+=f.width-L),this.attr(F,{x:this._rup(I),y:this._rup(w),width:this._rup(L),height:this._rup(R)}),O.appendChild(F),w-=R+4}return y.appendChild(D),d&&this.endGroup(),D}},{key:"line",value:function(e,t,i,r,a){var n=this.shape("line",{x1:e,y1:t,x2:i,y2:r});return this.attr(n,a),n}},{key:"path",value:function(e,t){var i=this.shape("path");return i.setAttribute("d",e),t&&this.attr(i,t),i}},{key:"rect",value:function(e,t,i,r,a){e=this._ptrnd(e),t=this._ptrnd(t),i=Math.max(1,this._rnd(i,1,!1)),r=Math.max(1,this._rnd(r,1,!1));var n=this.shape("rect",{x:e,y:t,width:i,height:r});return a&&this.attr(n,a),n}},{key:"circle",value:function(e,t,i,r){var a=this.shape("circle",{cx:e,cy:t,r:i});return r&&this.attr(a,r),a}},{key:"pieslice",value:function(e,t,i,r,a,n,s,o){var l=this.pieSlicePath(e,t,i,r,a,n,s),h=this.shape("path");return h.setAttribute("d",l),o&&this.attr(h,o),h}},{key:"attr",value:function(e,t){if(e&&t)for(var i in t)"textContent"===i?e.textContent=t[i]:e.setAttribute(i,t[i])}},{key:"removeAttr",value:function(e,t){if(e&&t)for(var i in t)"textContent"===i?e.textContent="":e.removeAttribute(t[i])}},{key:"getAttr",value:function(e,t){return e.getAttribute(t)}},{key:"_toLinearGradient",value:function(e,t,i){var r="grd"+this._id+e.replace("#","")+(t?"v":"h"),a="url("+this.getWindowHref()+"#"+r+")";if(this._gradients[a])return a;var n=document.createElementNS(this._svgns,"linearGradient");this.attr(n,{x1:"0%",y1:"0%",x2:t?"0%":"100%",y2:t?"100%":"0%",id:r});for(var s=0;s<i.length;s++){var o=i[s],l=document.createElementNS(this._svgns,"stop"),h="stop-color:"+this.adjustColor(e,o[1]);this.attr(l,{offset:o[0]+"%",style:h}),n.appendChild(l)}return this._defs.appendChild(n),this._gradients[a]=!0,a}},{key:"_toRadialGradient",value:function(e,t,i){var r="grd"+this._id+e.replace("#","")+"r"+(void 0!==i?i.key:""),a="url("+this.getWindowHref()+"#"+r+")";if(this._gradients[a])return a;var n=document.createElementNS(this._svgns,"radialGradient");void 0===i?this.attr(n,{cx:"50%",cy:"50%",r:"100%",fx:"50%",fy:"50%",id:r}):this.attr(n,{cx:i.x,cy:i.y,r:i.outerRadius,id:r,gradientUnits:"userSpaceOnUse"});for(var s=0;s<t.length;s++){var o=t[s],l=document.createElementNS(this._svgns,"stop"),h="stop-color:"+this.adjustColor(e,o[1]);this.attr(l,{offset:o[0]+"%",style:h}),n.appendChild(l)}return this._defs.appendChild(n),this._gradients[a]=!0,a}}]),t}()),Smart.Utilities.Assign("HTML5Renderer",function(e){function t(e){var i;u(this,t);var r=n(i=a(this,o(t).call(this,e)));return r._renderers=new Smart.Utilities.HTML5RenderHelpers(r),i}return l(t,Smart.Utilities.Renderer),c(t,[{key:"init",value:function(e){try{this.host=e;var t=document.createElement("div"),i=document.createElement("canvas");t.className="chartContainer",t.style.position="relative",t.onselectstart=function(){return!1},i.id="__smartCanvasWrap",i.style.width="100%",i.style.height="100%",t.appendChild(i),e.appendChild(t),this.canvas=i,i.width=e.offsetWidth,i.height=e.offsetHeight,this.ctx=i.getContext("2d"),this._elements={},this._maxId=0,this._gradientId=0,this._gradients={},this._currentPoint={x:0,y:0},this._lastCmd="",this._pos=0}catch(e){return!1}return!0}},{key:"getType",value:function(){return"HTML5"}},{key:"getContainer",value:function(){return this.host.getElementsByClassName("chartContainer")[0]}},{key:"getRect",value:function(){return{x:0,y:0,width:this.canvas.width-1,height:this.canvas.height-1}}},{key:"beginGroup",value:function(){}},{key:"endGroup",value:function(){}},{key:"setClip",value:function(){}},{key:"createClipRect",value:function(){}},{key:"addHandler",value:function(){}},{key:"removeHandler",value:function(){}},{key:"on",value:function(e,t,i){this.addHandler(e,t,i)}},{key:"off",value:function(e,t,i){this.removeHandler(e,t,i)}},{key:"clear",value:function(){this._elements={},this._maxId=0,this._renderers._gradients={},this._gradientId=0}},{key:"removeElement",value:function(e){void 0!==e&&this._elements[e.id]&&delete this._elements[e.id]}},{key:"shape",value:function(e,t){var i={type:e,id:this._maxId++};for(var r in t)i[r]=t[r];return this._elements[i.id]=i,i}},{key:"attr",value:function(e,t){for(var i in t)e[i]=t[i]}},{key:"removeAttr",value:function(e,t){for(var i in t)delete e[t[i]]}},{key:"rect",value:function(e,t,i,r,a){if(isNaN(e))throw'Invalid value for "x"';if(isNaN(t))throw'Invalid value for "y"';if(isNaN(i))throw'Invalid value for "width"';if(isNaN(r))throw'Invalid value for "height"';var n=this.shape("rect",{x:e,y:t,width:i,height:r});return a&&this.attr(n,a),n}},{key:"path",value:function(e,t){var i=this.shape("path",t);return this.attr(i,{d:e}),i}},{key:"line",value:function(e,t,i,r,a){return this.path("M "+e+","+t+" L "+i+","+r,a)}},{key:"circle",value:function(e,t,i,r){var a=this.shape("circle",{x:e,y:t,r:i});return r&&this.attr(a,r),a}},{key:"pieslice",value:function(e,t,i,r,a,n,s,o){var l=this.path(this.pieSlicePath(e,t,i,r,a,n,s),o);return this.attr(l,{x:e,y:t,innerRadius:i,outerRadius:r,angleFrom:a,angleTo:n}),l}},{key:"_getCSSStyle",value:function(e){var t=document.createElement("div");t.className=e,t.style.position="absolute",t.style.visibility="hidden",this.host.appendChild(t);var i=window.getComputedStyle(t);return i={color:i.color,fontFamily:i.fontFamily,fontSize:i.fontSize,fontWeight:i.fontWeight},this.host.removeChild(t),i}},{key:"_getTextParts",value:function(e,t,i){var r="Arial",a="10pt",n="";if(i&&i.class){var s=this._getCSSStyle(i.class);s.fontSize&&(a=s.fontSize),s.fontFamily&&(r=s.fontFamily),s.fontWeight&&(n=s.fontWeight)}this.ctx.font=n+" "+a+" "+r;for(var o={width:0,height:0,parts:[]},l=e.toString().split("<br>"),h=0;h<l.length;h++){var u=l[h],d=this.ctx.measureText(u).width,c=document.createElement("span");c.className="smartchart",c.font=this.ctx.font,c.textContent=u,this.host.appendChild(c);var f=.6*c.offsetHeight;this.host.removeChild(c),o.width=Math.max(o.width,this._rup(d)),o.height+=f+(h>0?4:0),o.parts.push({width:d,height:f,text:u})}return o}},{key:"_measureText",value:function(e,i,r,a){return s(o(t.prototype),"measureText",this).call(this,e,i,r,a)}},{key:"measureText",value:function(e,t,i){return this._measureText(e,t,i,!1)}},{key:"text",value:function(e,t,i,r,a,n,s,o,l,h,u){var d=this.shape("text",{text:e,x:t,y:i,width:r,height:a,angle:n,clip:o,halign:l,valign:h,rotateAround:u});if(s&&this.attr(d,s),d.fontFamily="Arial",d.fontSize="10pt",d.fontWeight="",d.color=this._getContrastColor(arguments[11]),s&&s.class){var c=this._getCSSStyle(s.class);d.fontFamily=c.fontFamily||d.fontFamily,d.fontSize=c.fontSize||d.fontSize,d.fontWeight=c.fontWeight||d.fontWeight,d.color=d.color||c.color}d.color=d.color||"#000000";var f=this._measureText(e,0,s,!0);return this.attr(d,{textPartsInfo:f.textPartsInfo,textWidth:f.width,textHeight:f.height}),(r<=0||isNaN(r))&&this.attr(d,{width:f.width}),(a<=0||isNaN(a))&&this.attr(d,{height:f.height}),d}},{key:"_toLinearGradient",value:function(e,t,i){if(this._renderers._gradients[e])return e;for(var r=[],a=0;a<i.length;a++)r.push({percent:i[a][0]/100,color:this.adjustColor(e,i[a][1])});var n="gr"+this._gradientId++;return this.createGradient(n,t?"vertical":"horizontal",r),n}},{key:"_toRadialGradient",value:function(e,t){if(this._renderers._gradients[e])return e;for(var i=[],r=0;r<t.length;r++)i.push({percent:t[r][0]/100,color:this.adjustColor(e,t[r][1])});var a="gr"+this._gradientId++;return this.createGradient(a,"radial",i),a}},{key:"createGradient",value:function(e,t,i){this._renderers.createGradient(this,e,t,i)}},{key:"refresh",value:function(){for(var e in this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this._elements){var t=this._elements[e];this._renderers.setFillStyle(this,t),this._renderers.setStroke(this,t),this._renderers[this._elements[e].type](this.ctx,t)}}}]),t}()),Smart.Utilities.Assign("HTML5RenderHelpers",function(){function e(t){u(this,e),this.HTML5Renderer=t,this._cmds="mlcazq"}return c(e,[{key:"ptrnd",value:function(e){if(.5===Math.abs(Math.round(e)-e))return e;var t=Math.round(e);return t<e&&(t-=1),t+.5}},{key:"createGradient",value:function(e,t,i,r){e._gradients[t]={orientation:i,colorStops:r}}},{key:"setStroke",value:function(e,t){var i=e.ctx,r=t["stroke-width"];i.strokeStyle=t.stroke||"transparent",i.lineWidth=0===r?.01:void 0!==r?r:1,void 0!==t["fill-opacity"]?i.globalAlpha=t["fill-opacity"]:void 0!==t.opacity?i.globalAlpha=t.opacity:i.globalAlpha=1,i.setLineDash&&(t["stroke-dasharray"]?i.setLineDash(t["stroke-dasharray"].split(",")):i.setLineDash([]))}},{key:"setFillStyle",value:function(e,t){var i=e.ctx;if(i.fillStyle="transparent",void 0!==t["fill-opacity"]?i.globalAlpha=t["fill-opacity"]:void 0!==t.opacity?i.globalAlpha=t.opacity:i.globalAlpha=1,t.fill&&-1===t.fill.indexOf("#")&&e._gradients[t.fill]){var r,a="horizontal"!==e._gradients[t.fill].orientation,n="radial"===e._gradients[t.fill].orientation,s=this.ptrnd(t.x),o=this.ptrnd(t.y),l=this.ptrnd(t.x+(a?0:t.width)),h=this.ptrnd(t.y+(a?t.height:0));if(("circle"===t.type||"path"===t.type||"rect"===t.type)&&n){var u=this.ptrnd(t.x),d=this.ptrnd(t.y),c=t.innerRadius||0,f=t.outerRadius||t.r||0;"rect"===t.type&&(u+=t.width/2,d+=t.height/2),r=i.createRadialGradient(u,d,c,u,d,f)}n||((isNaN(s)||isNaN(l)||isNaN(o)||isNaN(h))&&(s=0,o=0,l=a?0:i.canvas.width,h=a?i.canvas.height:0),r=i.createLinearGradient(s,o,l,h));for(var p=e._gradients[t.fill].colorStops,m=0;m<p.length;m++)r.addColorStop(p[m].percent,p[m].color);i.fillStyle=r}else t.fill&&(i.fillStyle=t.fill)}},{key:"rect",value:function(e,t){0!==t.width&&0!==t.height&&(e.fillRect(this.ptrnd(t.x),this.ptrnd(t.y),t.width,t.height),e.strokeRect(this.ptrnd(t.x),this.ptrnd(t.y),t.width,t.height))}},{key:"circle",value:function(e,t){0!==t.r&&(e.beginPath(),e.arc(this.ptrnd(t.x),this.ptrnd(t.y),t.r,0,2*Math.PI,!1),e.closePath(),e.fill(),e.stroke())}},{key:"_parsePoint",value:function(e){return{x:this._parseNumber(e),y:this._parseNumber(e)}}},{key:"_parseNumber",value:function(e){var t,i=!1;for(t=this._pos;t<e.length;t++)if(e[t]>="0"&&e[t]<="9"||"."===e[t]||"e"===e[t]||"-"===e[t]&&!i||"-"===e[t]&&t>=1&&"e"===e[t-1])i=!0;else{if(i||" "!==e[t]&&","!==e[t])break;this._pos++}var r=parseFloat(e.substring(this._pos,t));if(!isNaN(r))return this._pos=t,r}},{key:"_isRelativeCmd",value:function(e){return-1!==this._cmds.indexOf(e)}},{key:"_parseCmd",value:function(e){for(var t=this._pos;t<e.length;t++){if(-1!==this._cmds.toLowerCase().indexOf(e[t].toLowerCase()))return this._pos=t+1,this._lastCmd=e[t],this._lastCmd;if(" "!==e[t]){if(e[t]>="0"&&e[t]<="9"){if(this._pos=t,""===this._lastCmd)break;return this._lastCmd}}else this._pos++}}},{key:"_toAbsolutePoint",value:function(e){return{x:this._currentPoint.x+e.x,y:this._currentPoint.y+e.y}}},{key:"path",value:function(e,t){var i=this,r=t.d;this._pos=0,this._lastCmd="";var a=void 0;for(this._currentPoint={x:0,y:0},e.beginPath();this._pos<r.length;){var n=this._parseCmd(r);if(void 0===n)break;if("M"!==n&&"m"!==n)if("L"!==n&&"l"!==n){if("A"===n||"a"===n)if("continue"===function(){var t=i._parseNumber(r),a=i._parseNumber(r),s=i._parseNumber(r)*(Math.PI/180),o=i._parseNumber(r),l=i._parseNumber(r),h=i._parsePoint(r);if(i._isRelativeCmd(n)&&(h=i._toAbsolutePoint(h)),0===t||0===a)return"continue";var u=i._currentPoint,d={x:Math.cos(s)*(u.x-h.x)/2+Math.sin(s)*(u.y-h.y)/2,y:-Math.sin(s)*(u.x-h.x)/2+Math.cos(s)*(u.y-h.y)/2},c=Math.pow(d.x,2)/Math.pow(t,2)+Math.pow(d.y,2)/Math.pow(a,2);c>1&&(t*=Math.sqrt(c),a*=Math.sqrt(c));var f=(o===l?-1:1)*Math.sqrt((Math.pow(t,2)*Math.pow(a,2)-Math.pow(t,2)*Math.pow(d.y,2)-Math.pow(a,2)*Math.pow(d.x,2))/(Math.pow(t,2)*Math.pow(d.y,2)+Math.pow(a,2)*Math.pow(d.x,2)));isNaN(f)&&(f=0);var p=f*t*d.y/a,m=f*-a*d.x/t,v={x:(u.x+h.x)/2+Math.cos(s)*p-Math.sin(s)*m,y:(u.y+h.y)/2+Math.sin(s)*p+Math.cos(s)*m},y=function(e){return Math.sqrt(Math.pow(e[0],2)+Math.pow(e[1],2))},g=function(e,t){return(e[0]*t[0]+e[1]*t[1])/(y(e)*y(t))},_=function(e,t){return(e[0]*t[1]<e[1]*t[0]?-1:1)*Math.acos(g(e,t))},b=_([1,0],[(d.x-p)/t,(d.y-m)/a]),x=[(d.x-p)/t,(d.y-m)/a],w=[(-d.x-p)/t,(-d.y-m)/a],S=_(x,w);g(x,w)<=-1&&(S=Math.PI),g(x,w)>=1&&(S=0),0===l&&S>0&&(S-=2*Math.PI),1===l&&S<0&&(S+=2*Math.PI);var k=t>a?t:a,C=t>a?1:t/a,N=t>a?a/t:1;return e.translate(v.x,v.y),e.rotate(s),e.scale(C,N),e.arc(0,0,k,b,b+S,1-l),e.scale(1/C,1/N),e.rotate(-s),e.translate(-v.x,-v.y),"continue"}())continue;if("Z"!==n&&"z"!==n||void 0===a)if("C"!==n&&"c"!==n)if("Q"!==n&&"q"!==n);else{var s=this._parsePoint(r),o=this._parsePoint(r);e.quadraticCurveTo(s.x,s.y,o.x,o.y),this._currentPoint=o}else{var l=this._parsePoint(r),h=this._parsePoint(r),u=this._parsePoint(r);e.bezierCurveTo(l.x,l.y,h.x,h.y,u.x,u.y),this._currentPoint=u}else e.lineTo(a.x,a.y),this._currentPoint=a}else{var d=this._parsePoint(r);if(void 0===d)break;e.lineTo(d.x,d.y),this._currentPoint=d}else{var c=this._parsePoint(r);if(void 0===c)break;e.moveTo(c.x,c.y),this._currentPoint=c,void 0===a&&(a=c)}}e.fill(),e.stroke(),e.closePath()}},{key:"text",value:function(e,t){var i=this.ptrnd(t.x),r=this.ptrnd(t.y),a=this.ptrnd(t.width),n=this.ptrnd(t.height),s=t.halign,o=t.valign,l=t.angle,h=t.rotateAround,u=t.textPartsInfo,d=u.parts,c=t.clip;void 0===c&&(c=!0),e.save(),s||(s="center"),o||(o="center"),c&&(e.rect(i,r,a,n),e.clip());var f=t.textWidth,p=t.textHeight,m=a||0,v=n||0;if(e.fillStyle=t.color,e.font=t.fontWeight+" "+t.fontSize+" "+t.fontFamily,l&&0!==l){var y=this.HTML5Renderer.alignTextInRect(i,r,a,n,f,p,s,o,l,h);i=y.x,r=y.y;var g=l*Math.PI*2/360;e.translate(i,r),e.rotate(g);for(var _=0,b=u.width,x=d.length-1;x>=0;x--){var w=0;"center"===s?w+=(b-d[x].width)/2:"right"===s&&(w+=b-d[x].width),e.fillText(d[x].text,w,_),_-=d[x].height+4}e.restore()}else{r+=p,"center"===o||"middle"===o?r+=(v-p)/2:"bottom"===o&&(r+=v-p),a||(a=f),n||(n=p);for(var S=0,k=d.length-1;k>=0;k--){var C=d[k],N=i,A=d[k].width;"center"===s?N+=(m-A)/2:"right"===s&&(N+=m-A),e.fillText(C.text,N,r+S),S-=C.height+(k>0?4:0)}e.restore()}}}]),e}()),Smart.Utilities.Assign("Plot",function(){function e(t){u(this,e),this.renderer=t}return c(e,[{key:"get",value:function(e,t,i){return void 0!==i?e[t][i]:e[t]}},{key:"min",value:function(e,t){for(var i=NaN,r=0;r<e.length;r++){var a=this.get(e,r,t);(isNaN(i)||a<i)&&(i=a)}return i}},{key:"max",value:function(e,t){for(var i=NaN,r=0;r<e.length;r++){var a=this.get(e,r,t);(isNaN(i)||a>i)&&(i=a)}return i}},{key:"sum",value:function(e,t){for(var i=0,r=0;r<e.length;r++){var a=this.get(e,r,t);isNaN(a)||(i+=a)}return i}},{key:"count",value:function(e,t){for(var i=0,r=0;r<e.length;r++){var a=this.get(e,r,t);isNaN(a)||i++}return i}},{key:"avg",value:function(e,t){return this.sum(e,t)/Math.max(1,this.count(e,t))}},{key:"filter",value:function(e,t){if(!t)return e;for(var i=[],r=0;r<e.length;r++)t(e[r])&&i.push(e[r]);return i}},{key:"scale",value:function(e,t,i,r){if(isNaN(e))return NaN;if((e<Math.min(t.min,t.max)||e>Math.max(t.min,t.max))&&(!r||!0!==r.ignore_range))return NaN;var a=NaN,n=1;if(void 0===t.type||"logarithmic"!==t.type){var s=Math.abs(t.max-t.min);s||(s=1),n=Math.abs(e-Math.min(t.min,t.max))/s}else if("logarithmic"===t.type){var o=t.base;isNaN(o)&&(o=10);var l=Math.min(t.min,t.max);l<=0&&(l=1);var h=Math.max(t.min,t.max);h<=0&&(h=1);var u=Math.log(h)/Math.log(o);h=Math.pow(o,u);var d=Math.log(l)/Math.log(o);l=Math.pow(o,d);var c=Math.log(e)/Math.log(o);n=Math.abs(c-d)/(u-d)}if("logarithmic"===i.type){var f=i.base;isNaN(f)&&(f=10);var p=Math.log(i.max)/Math.log(f),m=Math.log(i.min)/Math.log(f);i.flip&&(n=1-n);var v=Math.min(m,p)+n*Math.abs(p-m);a=Math.pow(f,v)}else a=Math.min(i.min,i.max)+n*Math.abs(i.max-i.min),i.flip&&(a=Math.max(i.min,i.max)-a+i.min);return a}},{key:"axis",value:function(e,t,i){if(i<=1)return[t,e];(isNaN(i)||i<2)&&(i=2);for(var r=0;Math.round(e)!==e&&Math.round(t)!==t&&r<10;)e*=10,t*=10,r++;for(var a=(t-e)/i;r<10&&Math.round(a)!==a;)e*=10,t*=10,a*=10,r++;for(var n,s=[1,2,5],o=0;;){var l=o%s.length,h=Math.floor(o/s.length),u=Math.pow(10,h)*s[l];if(l=(o+1)%s.length,h=Math.floor((o+1)/s.length),n=Math.pow(10,h)*s[l],a>=u&&a<n)break;o++}for(var d=n,c=[],f=this.renderer._rnd(e,d,!1),p=r<=0?1:Math.pow(10,r);f<t+d;)c.push(f/p),f+=d;return c}}]),e}())}});
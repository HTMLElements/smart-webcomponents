
/* Smart HTML Elements v7.4.0 (2020-Apr) 
Copyright (c) 2011-2020 jQWidgets. 
License: https://htmlelements.com/license/ */ //

!function(e){var t={};function a(l){if(t[l])return t[l].exports;var r=t[l]={i:l,l:!1,exports:{}};return e[l].call(r.exports,r,r.exports,a),r.l=!0,r.exports}a.m=e,a.c=t,a.d=function(e,t,l){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:l})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var l=Object.create(null);if(a.r(l),Object.defineProperty(l,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)a.d(l,r,function(t){return e[t]}.bind(null,r));return l},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="",a(a.s=18)}({18:function(e,t){Smart("smart-color-panel",class extends Smart.BaseElement{static get properties(){return{applyValueMode:{value:"instantly",allowedValues:["instantly","useButtons"],type:"string"},columnCount:{value:8,type:"number?"},displayMode:{value:"default",allowedValues:["default","grid","palette","radial","hexagonal","spectrumGrid","materialGrid"],type:"string"},disableUndo:{value:!1,type:"boolean"},editAlphaChannel:{value:!1,type:"boolean"},enableCustomColors:{value:!1,type:"boolean"},gridThemeColors:{value:null,type:"array?",reflectToAttribute:!1},gridShadeColors:{value:null,type:"array?",reflectToAttribute:!1},gridStandardColors:{value:null,type:"array?",reflectToAttribute:!1},hideAlphaEditor:{value:!1,type:"boolean"},hideContentToFit:{value:["RGB","HEX","alpha","previewContainer"],type:"array"},hideHEXEditor:{value:!1,type:"boolean"},hidePreviewContainer:{value:!1,type:"boolean"},hideRGBEditor:{value:!1,type:"boolean"},inverted:{value:!1,type:"boolean"},messages:{value:{en:{redPrefix:"R:",greenPrefix:"G:",bluePrefix:"B:",hexPrefix:"#:",alphaPrefix:"Alpha:",ok:"OK",cancel:"CANCEL",customColor:"CUSTOM COLOR",standardColors:"Standard colors",themeColors:"Theme colors"}},type:"object",extend:!0},name:{value:"",type:"string"},palette:{value:"default",allowedValues:["default","gray","red","green","blue","custom"],type:"string"},paletteColors:{value:null,type:"array?",reflectToAttribute:!1},paletteCustomColors:{value:null,type:"array?",reflectToAttribute:!1},tooltipDisplayMode:{value:"hex",allowedValues:["none","rgba","rgb","hex"],type:"string"},value:{value:null,type:"string?"},valueFormat:{value:"default",allowedValues:["rgb","rgba","hex","default"],type:"string"},valueMember:{value:"value",type:"string?"}}}static get listeners(){return{"container.click":"_containerClickHandler","container.mouseover":"_handleGridModeCellHover","paletteModeContainer.down":"_paletteDownHandler","container.change":"_handleInputChange","document.move":"_moveThumbHandler","document.up":"_releaseThumbUpHandler","paletteModeContainer.wheel":"_inputWheelHandler",resize:"_hideControlsByPriority","hexModeResizeTrigger.resize":"_resizeHoneycombItems","paletteModeContainer.move":"_paletteModeContainerMoveHandler"}}static get requires(){return{"Smart.Utilities.Draw":"smart.draw.js","Smart.Button":"smart.button.js","Smart.Tooltip":"smart.tooltip.js"}}static get styleUrls(){return["smart.button.css","smart.tooltip.css","smart.colorpanel.css"]}template(){return'<div id="container" role="presentation">\n                    <div id="gridModeContainer" class="grid-mode-container" role="presentation"></div>\n                    <div id="paletteModeContainer" class="palette-mode-container" role="presentation">\n                        <div id="colorPaletteContainer" class="color-palette-container" role="presentation">\n                            <div id="colorPalette" class="color-palette no-touch" aria-label="Color palette">\n                                <div id="colorPaletteThumb" class="color-palette-thumb" role="presentation"></div>\n                            </div>\n                            <div id="hueScale" class="hue-scale no-touch" aria-label="Hue scale" role="slider" aria-valuemin="0" aria-valuemax="360">\n                                <div id="hueScaleThumb" class="hue-scale-thumb" role="presentation"></div>\n                            </div>\n                            <div id="colorPaletteRadial" class="color-palette-radial no-touch" aria-label="Radial color palette">\n                                <span class="white-radial-gradient" role="presentation"></span>\n                                <div id="colorPaletteRadialThumb" class="color-palette-radial-thumb" role="presentation"></div>\n                            </div>\n                            <div id="colorPaletteHexagonal" class="color-palette-hexagonal" aria-label="Hexagonal color palette"></div>\n                            <div id="brightnessScale" class="brightness-scale no-touch" aria-label="Brightness scale" role="slider" aria-valuemin="0" aria-valuemax="1">\n                                <div id="brightnessScaleThumb" class="brightness-scale-thumb" role="presentation"></div>\n                            </div>\n                            <span id="hexModeResizeTrigger" class="color-sample hex-mode-resize-trigger"></span>\n                            <div id="colorControlsContainer" class="color-controls-container" role="presentation"></div>\n                        </div>\n                        <div id="alphaChannelContainer" class="alpha-channel-container"></div>\n                    </div>\n                    <div id="buttonsContainer" class="buttons-container"></div>\n                    <input id="hiddenInput" type="hidden" name="[[name]]">\n                </div>'}propertyChangedHandler(e,t,a){const l=this;switch(e){case"applyValueMode":"instantly"!==a||l.value||(l._HSV={h:0,s:0,v:1},l._selectedItem&&l._selectedItem.classList.contains("selected")&&(l._selectedItem.classList.remove("selected"),l._selectedItem.removeAttribute("aria-current"),l._selectedItem.style.stroke=null)),"palette"!==l.displayMode&&"radial"!==l.displayMode&&"hexagonal"!==l.displayMode||l._handleCancelButtonClick(),"useButtons"===a&&l._createApplyValueButtons();break;case"paletteColors":l._customPalette=l._mapDataSourceToPalette(),r(l.displayMode);break;case"inverted":{if(-1===["hexagonal","radial","spectrumGrid"].indexOf(l.displayMode))return;const e=l.value,t=l.$.hueScaleThumb.offsetHeight,o=l._validateInRange(t/2,0,l.$.hueScale.offsetHeight-t)/l.$.brightnessScale.offsetHeight;if(isNaN(o))return void l._generateGridStructures();a?(l._HSV.v=l._HSV.s,l._HSV.s=1-o):(l._HSV.s=l._HSV.v,l._HSV.v=1-o),l.value=l._HSVtoRGBA(l._HSV),l.$.colorPaletteRadial.style.setProperty("--smart-color-panel-brightness",l.$.brightnessScaleThumb.s||0),r(l.displayMode),l.value!==e&&l.$.fireEvent("change",{oldValue:e,value:l.value});break}case"palette":r(l.displayMode),l._updatePreviewContainerValues(l.value);break;case"displayMode":case"gridThemeColors":case"gridShadeColors":case"gridStandardColors":if("displayMode"===e){const e=l.value;if(l.$.container.className.indexOf("custom-color-selection")>-1&&l._handleCancelButtonClick(),null!==l.value&&"palette"!==a&&"hexagonal"!==a&&"radial"!==a){!l.editAlphaChannel&&l.$.alphaChannelThumb&&(l.$.alphaChannelThumb.style[l.rightToLeft?"left":"right"]="",l.$.alphaChannelThumb.style[l.rightToLeft?"right":"left"]=0,l.$.alphaChannelThumb.a=l._RGBA.a=1,l.$.alphaChannelScale.setAttribute("aria-valuenow",1)),l.value=l._getValue(l.valueFormat),r(),l.$.fireEvent("change",{oldValue:e,value:l.value});break}if(null===l.value&&("palette"===a||"hexagonal"===a||"radial"===a)){l._RGBA={r:255,g:255,b:255,a:1},l._HSV={h:0,s:0,v:1},l.value=l._getValue(l.valueFormat),r(),l.$.fireEvent("change",{oldValue:e,value:l.value});break}if(l.value=l._getValue(l.valueFormat),Smart.Utilities.Core.Browser.Firefox&&"radial"===t){const e=l.$.colorPaletteRadial.querySelector("canvas");e&&e.remove()}}r(l.displayMode);break;case"locale":case"messages":l._localizeLabels();break;case"paletteCustomColors":l._userPalette=a||[],(l.displayMode.toLowerCase().indexOf("grid")>-1||"default"===l.displayMode)&&l._generatePaletteUserColorGrid(!0);break;case"editAlphaChannel":{if(!a&&(l._RGBA.a=1),a&&l._createAlphaChannel(),!l.value)return;const e=l.value;l.value=l._getValue(l.valueFormat),l.value!==e&&l.$.fireEvent("change",{oldValue:e,value:l.value});break}case"value":if(a="string"==typeof a?a.trim():a,!l._isValidColor(a))return void l._reset();l._applyValue(a),l.value=l._getValue(l.valueFormat),"hexagonal"===l.displayMode&&l._generateHoneycomb(l.columnCount,l.inverted?{s:l._HSV.s}:{v:l._HSV.v}),t!==l.value&&l.$.fireEvent("change",{oldValue:t,value:l.value});break;case"columnCount":{const e=l.$.container.style;null===a||isNaN(a)?e.removeProperty("--smart-color-panel-grid-mode-column-count"):e.setProperty("--smart-color-panel-grid-mode-column-count",a),l._generatePaletteUserColorGrid(),"spectrumGrid"===l.displayMode?l._generateSpectrumGrid(parseInt(a)):"hexagonal"===l.displayMode&&l._generateHoneycomb(a,l._HSV)}break;case"valueFormat":{if(!l.value)return;const e=l.value;l.value=l._getValue(a),l.$.fireEvent("change",{oldValue:e,value:l.value});break}case"tooltipDisplayMode":if(!l.$.tooltip)return;"none"===a?(l.$.tooltip.close(),l.$.tooltip.disabled=!0):l.$.tooltip.disabled=!1;break;default:if(super.propertyChangedHandler(e,t,a),"disabled"===e){const t=l.getElementsByClassName("color-input");for(let a=0;a<t.length;a++)t[a][e]}"disabled"!==e&&"theme"!==e&&"animation"!==e||(l.$.buttonOk&&(l.$.buttonOk[e]=a),l.$.buttonCancel&&(l.$.buttonCancel[e]=a),l.$.buttonCustom&&(l.$.buttonCustom[e]=a),l.$.tooltip&&(l.$.tooltip[e]=a))}function r(){l._generateGridStructures(),l._applyValue(l.value)}}ready(){super.ready()}render(){const e=this;e.setAttribute("role","dialog"),e._initializeBaseVars(),null===e.columnCount||isNaN(e.columnCount)?e.$.container.style.removeProperty("--smart-color-panel-grid-mode-column-count"):e.$.container.style.setProperty("--smart-color-panel-grid-mode-column-count",e.columnCount),"useButtons"===e.applyValueMode&&e._createApplyValueButtons(),e.editAlphaChannel&&e._createAlphaChannel(),e._generateGridStructures(),e._localizeLabels(),e.value||"hexagonal"!==e.displayMode&&"radial"!==e.displayMode&&"palette"!==e.displayMode||(e.value=e._getValue(e.valueFormat)),e._applyValue(e.value),e._hideControlsByPriority(),e.enableShadowDOM&&e.appendChild(e.$.hiddenInput),super.render()}_createApplyValueButtons(e){const t=this;function a(e){let a=document.createElement("smart-button");return a.classList.add(e),a.classList.add("primary"),a.rightToLeft=t.rightToLeft,a.disabled=t.disabled,a.theme=t.theme,a.animation=t.animation,t.$.buttonsContainer.appendChild(a),a}(e||"useButtons"===t.applyValueMode)&&(t.$.buttonsContainer.innerHTML.trim()||(t.$.buttonOk=a("button-ok"),t.$.buttonCancel=a("button-cancel"),t.$.buttonOk.content=t.localize("ok"),t.$.buttonCancel.content=t.localize("cancel")))}_createAlphaChannel(){!this.editAlphaChannel||this.editAlphaChannel&&this.$.alphaChannelContainer.innerHTML.trim()||(this.$.alphaChannelContainer.innerHTML=`\n                            <div class="alpha-channel-scale no-touch" aria-label="Alpha channel scale" role="slider">\n                                <div class="alpha-channel-thumb" aria-hidden="true"></div>\n                            </div>\n                            <label for="${this.id}aChannelInput" class="a-channel"></label>\n                            <input type="number" step="0.01" id="${this.id}aChannelInput" class="color-input a-channel" value="1" min="0" max="1">`,this.$.alphaChannelScale=this.$.alphaChannelContainer.querySelector(".alpha-channel-scale"),this.$.alphaChannelThumb=this.$.alphaChannelContainer.querySelector(".alpha-channel-thumb"),this.$.alphaChannelScale.setAttribute("role","slider"),this.$.alphaChannelScale.setAttribute("aria-valuemin",0),this.$.alphaChannelScale.setAttribute("aria-valuemin",1),this.$.alphaChannelContainer.querySelector("input").disabled=this.disabled,this._localizeLabels(),this._applyAlphaValue(this._RGBA.a,"alphaScale"))}_createGridModeComponents(){const e=this.id;if(["radial","palette","hexagonal"].indexOf(this.displayMode)>-1)return!1;if(this.$.gridModeContainer.innerHTML.trim())return;const t=this.$.gridModeContainer;t.innerHTML=`\n                        <div id="${e}defaultSamplesContainer" class="default-samples-container"></div>\n                        <div id="${e}gridSamplesContainer" class="grid-samples-container"></div>\n                        <div id="${e}materialGridSamplesContainer" class="material-grid-samples-container" role="menu"></div>\n                        <div id="${e}spectrumGridSamplesContainer" class="spectrum-grid-samples-container"></div>\n                        <smart-button id="${e}buttonCustom" class="button-custom-color primary"></smart-button>\n                        <div id="${e}userSamplesContainer" class="user-samples-container" aria-label="User colors"></div>\n                        <smart-tooltip id="${e}tooltip" arrow position="auto"></smart-tooltip>`,this.$.defaultSamplesContainer=t.querySelector(".default-samples-container"),this.$.gridSamplesContainer=t.querySelector(".grid-samples-container"),this.$.materialGridSamplesContainer=t.querySelector(".material-grid-samples-container"),this.$.materialGridSamplesContainer.$=Smart.Utilities.Extend(this.$.materialGridSamplesContainer),this.$.spectrumGridSamplesContainer=t.querySelector(".spectrum-grid-samples-container"),this.$.userSamplesContainer=t.querySelector(".user-samples-container"),this.$.buttonCustom=t.querySelector("smart-button"),this.$.tooltip=t.querySelector("smart-tooltip"),this.$.buttonCustom.disabled=this.disabled,this.$.buttonCustom.rightToLeft=this.rightToLeft,this.$.buttonCustom.animation=this.animation,this.$.buttonCustom.theme=this.theme,this.$.buttonCustom.content=this.localize("customColor"),this.$.tooltip.disabled=this.disabled||"none"===this.tooltipDisplayMode,this.$.tooltip.rightToLeft=this.rightToLeft,this.$.tooltip.animation=this.animation,this.$.tooltip.theme=this.theme}_createColorControls(e){const t=this,a=t.id;if(!e&&["radial","palette","hexagonal"].indexOf(t.displayMode)<0)return!1;const l=t.$.colorControlsContainer;if(l.innerHTML.trim())return;l.innerHTML=`<div id="${a}previewContainer" class="preview-container gradient-background" aria-label="Preview">`+'<span class="preview-container-top" aria-label="Current color"></span><span class="preview-container-bottom" aria-label="New color"></span></div>'+`<label for="${a}rChannelInput" id="${a}rChannelLabel" class="r-channel"></label>`+`<input type="number" min="0" max="255" id="${a}rChannelInput" class="color-input r-channel" value="255">`+`<label for="${a}gChannelInput" id="${a}gChannelLabel" class="g-channel"></label>`+`<input type="number" min="0" max="255" id="${a}gChannelInput" class="color-input g-channel" value="255">`+`<label for="${a}bChannelInput" id="${a}bChannelLabel" class="b-channel"></label>`+`<input type="number" min="0" max="255" id="${a}bChannelInput" class="color-input b-channel" value="255">`+`<label for="${a}hexInput" id="${a}hexLabel" class="hex"></label>`+`<input type="text" id="${a}hexInput" class="color-input hex" value="FFFFFF" maxlength="6">`;const r=l.getElementsByClassName("color-input");for(let e=0;e<r.length;e++)r[e].disabled=t.disabled;t._localizeLabels()}_containerClickHandler(e){const t=this;if(t.disabled||t.readonly||!e.target)return;if(e.target.classList.contains("color-sample"))return void t._handleSampleClick(e);const a=e.target.closest("smart-button");if(a!==t.$.buttonCancel)return a===t.$.buttonCustom?(t.$container.addClass("custom-color-selection"),t._createApplyValueButtons(!0),t._createColorControls(!0),t._applyValueInPaletteMode(),t._customColorSelection=!0,1===t._RGBA.a&&t.$.alphaChannelThumb&&(t.$.alphaChannelThumb.style[t.rightToLeft?"left":"right"]="",t.$.alphaChannelThumb.style[t.rightToLeft?"right":"left"]=0,t.$.alphaChannelThumb.a=t._RGBA.a,t.$.alphaChannelScale.setAttribute("aria-valuenow",t._RGBA.a)),void t.$.fireEvent("customColorSelection",{value:!0})):void(a!==t.$.buttonOk?e.target!==(t.shadowRoot||t).querySelector(".preview-container-top")||"useButtons"!==t.applyValueMode||t.disableUndo||t._applyValue(t.value):t._handleOkButtonClick(!0));t._handleCancelButtonClick(!0)}_reset(e=this.value){const t=this;t._RGBA={r:255,g:255,b:255,a:1},t._HSV={h:0,s:0,v:1},t.$.hueScaleThumb.h=0,t.$.colorPaletteThumb.s=0,t.$.colorPaletteThumb.v=1,t.$.colorPaletteRadialThumb.h=0,t.$.colorPaletteRadialThumb.s=0,t.$.brightnessScaleThumb.v=1,t.$.brightnessScaleThumb.s=0,"hexagonal"!==t.displayMode&&"radial"!==t.displayMode&&"palette"!==t.displayMode?(t.value=null,t._selectedItem&&t._selectedItem.classList.contains("selected")&&(t._selectedItem.classList.remove("selected"),t._selectedItem.removeAttribute("aria-current"),t._selectedItem.style.stroke=null)):t.value=t._getValue(t.valueFormat),t._applyValue(t.value),t.$.fireEvent("change",{oldValue:e,value:t.value})}_handleColorPaletteDown(e){const t=this,a=t._getXYcoordinates(e);if(!a)return;const l="palette"===t.displayMode||"grid"===t.displayMode?t.$.colorPaletteThumb:t.$.colorPaletteRadialThumb;if(t._activeComponent=a.container,"palette"===t.displayMode||t.$.container.className.indexOf("custom-color-selection")>-1){if(l.s=t._HSV.s=a.x/a.container.offsetWidth,l.v=t._HSV.v=1-a.y/a.container.offsetHeight,"grid"===t.displayMode)return t._moveThumbHandler(e,!0),void t._applyValueInPaletteMode(e)}else if("radial"===t.displayMode){const e=t.$.colorPaletteRadial.offsetWidth,r=a.x-e/2,o=a.y-e/2;l.h=t._HSV.h=t._calcHueAngle(r,o)<0?360+t._calcHueAngle(r,o):t._calcHueAngle(r,o);const n=t.$.brightnessScaleThumb,s=t.$.brightnessScale,i=t._validateInRange(2*t._calcSatDistance(r,o)/e,0,1),d=s.offsetHeight-n.offsetHeight,c=t._validateInRange(n.offsetTop,0,d)/d;t.inverted?(l.v=t._HSV.v=i,l.s=t._HSV.s=1-c):(l.s=t._HSV.s=i,l.v=t._HSV.v=1-c)}t._applyValue(t._HSVtoRGBA(t._HSV),e),t._instantUpdate()}_handleScalesDown(e){const t=this,a=t._getXYcoordinates(e);a&&(t._activeComponent=a.container,a.container===t.$.hueScale?t._updateHueScale(a):a.container===t.$.brightnessScale?(t._updateBrightnessScale(a),"hexagonal"===t.displayMode&&t._generateHoneycomb(t.columnCount,t._HSV)):t.$.alphaChannelScale&&(t.$.alphaChannelThumb.a=t._RGBA.a=parseFloat(((a.container.offsetWidth-a.x)/a.container.offsetWidth).toFixed(2)),t.rightToLeft&&(t.$.alphaChannelThumb.a=t._RGBA.a=(1-t._RGBA.a).toFixed(2)),t._applyAlphaValue(t._RGBA.a,"alphaScale")),t._applyValue(t._HSVtoRGBA(t._HSV),e),t._instantUpdate())}_updateBrightnessScale(e){const t=this,a=e.y-t.$.brightnessScaleThumb.offsetHeight/2,l=t.$.brightnessScale.offsetHeight-t.$.brightnessScaleThumb.offsetHeight,r=Math.min(Math.max(parseFloat(a),0),parseFloat(l))/l;t.inverted?t.$.brightnessScaleThumb.s=t._HSV.s=1-r:t.$.brightnessScaleThumb.v=t._HSV.v=1-r,t.$.brightnessScale.setAttribute("aria-valuenow",t._HSV.v),t.$.brightnessScaleThumb.style.top=l*r+"px",t.$.colorPaletteRadial.style.setProperty("--smart-color-panel-brightness",r)}_updateHueScale(e){const t=e.y-this.$.hueScaleThumb.offsetHeight/2,a=this.$.hueScale.offsetHeight,l=a-this.$.hueScaleThumb.offsetHeight;this.$.hueScaleThumb.h=this._HSV.h=360*(a-e.y)/a,this.$.hueScale.setAttribute("aria-valuenow",this.$.hueScaleThumb.h),this.$.hueScaleThumb.style.top=l*Math.min(Math.max(parseFloat(t),0),parseFloat(l))/l+"px"}_paletteModeContainerMoveHandler(e){Smart.Utilities.Core.isMobile||e.stopPropagation(),"touchmove"===e.originalEvent.type&&this._dragDetails&&e.originalEvent.preventDefault()}_moveThumbHandler(e,t){const a=this,l=e.pageX-window.pageXOffset,r=e.pageY-window.pageYOffset;if(a.disabled||a.readonly||!a._activeComponent||!a._dragDetails||a._dragDetails.x===l&&a._dragDetails.y===r&&!t)return;const o=a._getXYcoordinates(e);if(!o)return;const n=a._activeComponent.offsetWidth,s=a._activeComponent.offsetHeight;switch(a._activeComponent){case a.$.colorPalette:a.$.colorPaletteThumb.style.left=100*o.x/n+"%",a.$.colorPaletteThumb.style.top=100*o.y/s+"%",a.$.colorPaletteThumb.s=a._HSV.s=o.x/n,a.$.colorPaletteThumb.v=a._HSV.v=1-o.y/s;break;case a.$.colorPaletteRadial:{const e=n,t=o.x-e/2,l=o.y-e/2;a.$.colorPaletteRadialThumb.h=a._HSV.h=a._calcHueAngle(t,l)<0?360+a._calcHueAngle(t,l):a._calcHueAngle(t,l),a.inverted?a.$.colorPaletteRadialThumb.v=a._HSV.v=a._validateInRange(2*a._calcSatDistance(t,l)/e,0,1):a.$.colorPaletteRadialThumb.s=a._HSV.s=a._validateInRange(2*a._calcSatDistance(t,l)/e,0,1);const r=(a.shadowRoot||a).querySelector(".preview-container-bottom");r&&(r.style.backgroundColor=a._HSVtoRGBA());break}case a.$.hueScale:a._updateHueScale(o);break;case a.$.brightnessScale:a._updateBrightnessScale(o),"hexagonal"===a.displayMode&&a._generateHoneycomb(a.columnCount,a.inverted?{s:a._HSV.s}:{v:a._HSV.v});break;case a.$.alphaChannelScale:a.$.alphaChannelThumb.a=a._RGBA.a=parseFloat(((n-o.x)/n).toFixed(2)),a.rightToLeft&&(a.$.alphaChannelThumb.a=a._RGBA.a=(1-a._RGBA.a).toFixed(2))}a._applyValue(a._HSVtoRGBA(a._HSV),e),a._instantUpdate()}_releaseThumbUpHandler(){const e=!!this._activeComponent;this._activeComponent=null,this.disabled||this.readonly||!e||this._dragDetails&&this._dragDetails.isPalettePressed||this._instantUpdate()}_handleCancelButtonClick(e){const t=this,a=t.value;switch("palette"!==t.displayMode&&"radial"!==t.displayMode&&"hexagonal"!==t.displayMode?(t.value=a,t._HSV=t._getValue("hsv",t.value)||{h:1,s:0,v:1},t._RGBA=t._getValue("HSVtoRGBAarray",t.value)):(t._HSV=t._getValue("hsv",t.value)||{h:1,s:0,v:1},t._RGBA=t._getValue("HSVtoRGBAarray",t.value),t.value=t._getValue(t.valueFormat)),t._applyValue(t.value),t.displayMode){case"radial":t._generateRadialCanvas();break;case"hexagonal":t._generateHoneycomb(t.columnCount,t._HSV)}if(null===t.value&&t._selectedItem&&t._selectedItem.classList.contains("selected")&&(t._selectedItem.classList.remove("selected"),t._selectedItem.removeAttribute("aria-current")),a!==t.value&&t.$.fireEvent("change",{oldValue:a,value:t.value}),t.$.container.className.indexOf("custom-color-selection")>-1&&t._applyValueInPaletteMode(),e&&t.$.fireEvent("cancelButtonClick"),!1===t._customColorSelection){t._updatePreviewContainerValues(t.value);let e=("hexagonal"===t.displayMode?t.$.colorPaletteHexagonal:t.$.gridModeContainer).getElementsByClassName("selected");for(let a=0;a<e.length;a++)!e[a]||t.value&&t._equalValues(e[a].colorCode,t.value)||(e[a].style.stroke=null,e[a].classList.remove("selected"),e[a].removeAttribute("aria-current"))}else t.$container.removeClass("custom-color-selection"),t.$.fireEvent("customColorSelection",{value:!1});if(t._customColorSelection=!1,t._customTempColor=void 0,"palette"===t.displayMode||"radial"===t.displayMode){const e=(t.shadowRoot||t).querySelector(".preview-container-top");e&&(e.style.backgroundColor=t.value)}}_handleOkButtonClick(e){const t=this,a=t.value;if(!1!==t._customColorSelection&&void 0!==t._customColorSelection){const l=t._getValue(t.valueFormat);return"useButtons"!==t.applyValueMode&&(t.value=l),t._userPalette.unshift(l),t._generatePaletteUserColorGrid(),t._customColorSelection=!1,a!==t.value&&t.$.fireEvent("change",{oldValue:a,value:t.value}),e&&t.$.fireEvent("okButtonClick",{}),void t.$container.removeClass("custom-color-selection")}if(t._customTempColor&&(t._userPalette.unshift(t._customTempColor),t._generatePaletteUserColorGrid(),t._generateNewPalette=!1,t._customTempColor=""),"palette"===t.displayMode||"radial"===t.displayMode||"hexagonal"===t.displayMode||t._selectedItem&&t._selectedItem.classList.contains("selected")?t.value=t._getValue(t.valueFormat):t.value=null,null===t.value)if("palette"===t.displayMode)t._applyValue(t._HSVtoRGBA(t._HSV),event);else{let e=t.$.gridModeContainer.getElementsByClassName("selected");for(let t=0;t<e.length;t++)e[t]&&(e[t].classList.remove("selected"),e[t].removeAttribute("aria-current"))}a!==t.value&&t.$.fireEvent("change",{oldValue:a,value:t.value}),e&&t.$.fireEvent("okButtonClick",{}),t._customColorSelection=!1,"useButtons"!==t.applyValueMode||t._equalValues(t.value,t._HSVtoRGBA())||t._updatePreviewContainerValues(t._getValue("rgba"),!0)}_handleInputChange(e){const t=this,a=t.value,l=e.target;if(t.disabled||t.readonly)return;e.preventDefault(),e.stopPropagation();const r=["r-channel","g-channel","b-channel"].find(e=>l.className.indexOf(e)>-1),o=l.classList.contains("a-channel");if(r||o)l.value=r?Math.min(255,Math.max(0,l.value)):Math.min(1,Math.max(0,parseFloat(l.value)||0)),t._RGBA=t._getRGBAFromInputs(),t._HSV=t._getValue("hsv","rgba("+t._RGBA.r+", "+t._RGBA.g+", "+t._RGBA.b+", "+t._RGBA.a+")");else if(l.classList.contains("hex")){const e=t.value?t._getValue("hex"):null,a="#"+l.value;t._isHEX(a)?(t._RGBA.a=1,t._applyValue(t.editAlphaChannel?t._toRGBA(a):t._toHEX(a))):l.value=e?e.substring(1):"ffffff"}t._applyValue(t.editAlphaChannel?t._getValue("rgba"):t._getValue("hex")),"useButtons"===t.applyValueMode||t.$.container.className.indexOf("custom-color-selection")>-1||(t.value=t._getValue(t.valueFormat),t.$.fireEvent("change",{oldValue:a,value:t.value}))}_applyValue(e,t){const a=this;if(!e||null===e||"rgba(NaN, NaN, NaN, 1)"===e)return a._RGBA={r:255,g:255,b:255,a:1},void(a.$.hiddenInput.value=a.value);a._HSVRGBArefresh(e.trim()),"palette"===a.displayMode||a.$.container.className.indexOf("custom-color-selection")>-1?a._applyValueInPaletteMode(t):"radial"===a.displayMode?a._applyValueInRadialMode(t):"hexagonal"===a.displayMode?a._applyValueInHexagonalMode(t):a._applyValueInAnyGridMode(e.trim()),a._applyAlphaValue(a._RGBA.a),a.$.hiddenInput.value=a.value}_applyAlphaValue(e,t){const a=this;if(e=parseFloat(e),a.$.alphaChannelScale){if("alphaScale"!==t){const t=a.$.alphaChannelThumb.offsetWidth,l=a.$.alphaChannelScale.offsetWidth,r=(1-e)*l>t?(1-e)*t:0;a.$.alphaChannelThumb.style[a.rightToLeft?"left":"right"]="",a.$.alphaChannelThumb.style[a.rightToLeft?"right":"left"]=(1-e)*l-r+"px"}if("alphaInput"!==t){a.$.alphaChannelContainer.querySelector("input.a-channel").value=e}a.$.alphaChannelScale.setAttribute("aria-valuenow",e)}a._RGBA.a=e,a._updatePreviewContainerValues(a._getValue("rgba"))}_applyValueInPaletteMode(e){const t=this,a=t._getValue("hex"),l=t.$.hueScale.offsetHeight,r=t.$.hueScaleThumb.offsetHeight,o=t._HSV.h?l*((360-t._HSV.h)/360):0,n=(t.shadowRoot||t).querySelector("input.hex");if(t._setRGBAToInputs(),n&&(n.value=a.substring(1)),t.$.alphaChannelContainer.style.setProperty("--smart-color-panel-alpha-channel-color",t._rgbArrayToHEX([t._RGBA.r,t._RGBA.g,t._RGBA.b,1])),!t._activeComponent){if(t.$.alphaChannelThumb){const e=t.$.alphaChannelThumb.offsetWidth,a=t.$.alphaChannelScale.offsetWidth,l=(1-t._RGBA.a)*a>e?(1-t._RGBA.a)*e:0;t.$.alphaChannelThumb.style[t.rightToLeft?"left":"right"]="",t.$.alphaChannelThumb.style[t.rightToLeft?"right":"left"]=(1-t._RGBA.a)*a-l+"px",t.$.alphaChannelScale.setAttribute("aria-valuenow",t._RGBA.a)}t.$.hueScaleThumb.style.top=Math.max(0,Math.min(l-r,o-r/2))+"px",t._setPalettePointerXYPosition()}t._activeComponent===t.$.hueScale&&(t.$.colorPalette.style.backgroundColor=t._rgbaToRGB(t._HSVtoRGBA({h:t.$.hueScaleThumb.h,s:1,v:1}))),t._activeComponent&&t._activeComponent!==t.$.colorPalette||t._setPalettePointerXYPosition(e),t.event?t._HSV.h=t.$.hueScaleThumb.h:(t.$.hueScaleThumb.h=t._HSV.h,t.$.colorPalette.style.backgroundColor=t._rgbaToRGB(t._HSVtoRGBA({h:t._HSV.h,s:1,v:1}))),t._updatePreviewContainerValues(t._getValue("rgba")),t.$.hueScale.setAttribute("aria-valuenow",t.$.hueScaleThumb.h)}_applyValueInRadialMode(e){const t=this,a=t._getValue("hex"),l=(t.shadowRoot||t).querySelector("input.hex");if(t._setRGBAToInputs(),l&&(l.value=a.substring(1)),t.$.alphaChannelContainer.style.setProperty("--smart-color-panel-alpha-channel-color",t._rgbArrayToHEX([t._RGBA.r,t._RGBA.g,t._RGBA.b,1])),!t._activeComponent){const e=t.$.brightnessScale.offsetHeight-t.$.brightnessScaleThumb.offsetHeight;if(t.$.alphaChannelThumb){const e=t.$.alphaChannelThumb.offsetWidth,a=t.$.alphaChannelScale.offsetWidth,l=(1-t._RGBA.a)*a>e?(1-t._RGBA.a)*e:0;t.$.alphaChannelThumb.style[t.rightToLeft?"left":"right"]="",t.$.alphaChannelThumb.style[t.rightToLeft?"right":"left"]=(1-t._RGBA.a)*a-l+"px",t.$.alphaChannelScale.setAttribute("aria-valuenow",t._RGBA.a)}const a=t.inverted?t._HSV.v:1-t._HSV.v;t.$.brightnessScale.setAttribute("aria-valuenow",t._HSV.v),t.$.brightnessScaleThumb.style.top=e*a+"px",t.$.colorPaletteRadial.style.setProperty("--smart-color-panel-brightness",a)}if(t._activeComponent&&t._activeComponent!==t.$.colorPaletteRadial||t._setPalettePointerXYPosition(e),t._updatePreviewContainerValues(t._getValue("rgba")),t.inverted){const e=null===t.value?"black":t._HSVtoRGBA({h:t._HSV.h,s:1,v:t._HSV.v});t.$.brightnessScale.style.backgroundImage="linear-gradient("+e+", white)"}else{const e=null===t.value?"white":t._HSVtoRGBA({h:t._HSV.h,s:t._HSV.s,v:1});t.$.brightnessScale.style.backgroundImage="linear-gradient("+e+", black)"}}_applyValueInHexagonalMode(){const e=this,t=e._getValue("hex"),a=(e.shadowRoot||e).querySelector("input.hex");if(e._setRGBAToInputs(),a&&(a.value=t?t.substring(1):null),e.$.alphaChannelContainer.style.setProperty("--smart-color-panel-alpha-channel-color",e._rgbArrayToHEX([e._RGBA.r,e._RGBA.g,e._RGBA.b,1])),!e._activeComponent&&!e._targetItem){const t=e.$.brightnessScale.offsetHeight-e.$.brightnessScaleThumb.offsetHeight;if(e.$.alphaChannelThumb){const t=e.$.alphaChannelThumb.offsetWidth,a=e.$.alphaChannelScale.offsetWidth,l=(1-e._RGBA.a)*a>t?(1-e._RGBA.a)*t:0;e.$.alphaChannelThumb.style[e.rightToLeft?"left":"right"]="",e.$.alphaChannelThumb.style[e.rightToLeft?"right":"left"]=(1-e._RGBA.a)*a-l+"px",e.$.alphaChannelScale.setAttribute("aria-valuenow",e._RGBA.a)}const a=e.inverted?e._HSV.v:1-e._HSV.v;e.$.brightnessScale.setAttribute("aria-valuenow",e._HSV.v),e.$.brightnessScaleThumb.style.top=t*a+"px"}const l=e._getValue("rgba");if(e._updatePreviewContainerValues(l||e._getValue("hex")),e.inverted){const t=e._HSVtoRGBA({h:e._HSV.h,s:1,v:e._HSV.v},1);e.$.brightnessScale.style.backgroundImage="linear-gradient("+t+", white)"}else{const t=e._HSVtoRGBA({h:e._HSV.h,s:e._HSV.s,v:1},1);e.$.brightnessScale.style.backgroundImage="linear-gradient("+t+", black)"}e._applyValueInAnyGridMode(t,e.$.colorPaletteHexagonal)}_radialThumbPoint(e,t,a,l){return{x:Math.round(Math.cos(a*Math.PI/180)*l*e+e),y:Math.round(Math.sin(a*Math.PI/180)*l*e+t)}}_updatePreviewContainerValues(e,t){const a=(this.shadowRoot||this).querySelector(".preview-container");a&&(("instantly"===this.applyValueMode||t)&&(a.firstElementChild.style.backgroundColor=e),a.lastElementChild.style.backgroundColor=e)}_applyValueInAnyGridMode(e,t){const a=this;if(!e&&null!==e)return;if(!t)switch(a.displayMode){case"default":t=a.$.defaultSamplesContainer;break;case"grid":t=a.$.gridSamplesContainer;break;case"materialGrid":t=a.$.materialGridSamplesContainer;break;case"spectrumGrid":t=a.$.spectrumGridSamplesContainer;break;default:t=a.$.gridModeContainer}if(!t)return;const l=Array.from(t.getElementsByClassName("color-sample"));let r=a._targetItem;if(null==r)for(let t=0;t<l.length;t++){const o=l[t];if(a._equalValues(o.colorCode,e)){r=l[t];break}}a.$.container.className.indexOf("custom-color-selection")>-1&&a._HSV.h&&a._applyValueInPaletteMode(),a._changeSampleSelection(r)}_generatePaletteGrid(){const e=this;if(!e.$.gridSamplesContainer)return;const t=e["_"+e.palette+"Palette"];let a=document.createDocumentFragment();for(let l=0;l<t.length;l++){const r=document.createElement("span"),o=t[l];r.setAttribute("role","menuitem"),r.setAttribute("aria-label",o),r.className="color-sample",r.colorCode=o,r.style.backgroundColor=o,"rgba(255, 255, 255, 0)"===e._toRGBA(o)||"#FFFFFF00"===e._toHEX(e._toRGBA(o))||"transparent"===o?r.setAttribute("transparent",""):r.removeAttribute("transparent"),a.appendChild(r)}e.$.gridSamplesContainer.setAttribute("role","menu"),e.$.gridSamplesContainer.innerHTML="",e.$.gridSamplesContainer.appendChild(a)}_generatePaletteUserColorGrid(e){const t=this;if(!t.$.userSamplesContainer)return;if(!t._userPalette||!t._userPalette.length)return void(t.$.userSamplesContainer.innerHTML="");let a,l=t._userPalette.filter(e=>""!==e).slice(0,t.columnCount||1),r=document.createDocumentFragment();l=[...new Set(l)];for(let e=0;e<l.length;e++)if(l[e]){const o=t._createColorSample(l[e],"user-color");r.appendChild(o),a||(a=o)}t.$.userSamplesContainer.innerHTML="",t.$.userSamplesContainer.appendChild(r),t.$.userSamplesContainer.setAttribute("role","menu"),!e&&a&&a.colorCode&&t._changeSampleSelection(a),t.paletteCustomColors=t._userPalette.slice(0)}_initializeBaseVars(){void 0===this._RGBA&&(this._RGBA={r:255,g:255,b:255,a:1},this._HSV={h:0,s:0,v:1},this.$.hueScaleThumb.h=0,this.$.colorPaletteThumb.s=0,this.$.colorPaletteThumb.v=1,this.$.colorPaletteRadialThumb.h=0,this.$.colorPaletteRadialThumb.s=0,this._defaultPalette=["rgba(255, 255, 255, 0)","rgb(0, 0, 0)","rgb(153, 51, 0)","rgb(51, 51, 0)","rgb(0, 51, 0)","rgb(0, 51, 102)","rgb(0, 0, 128)","rgb(51, 51, 153)","rgb(51, 51, 51)","rgb(128, 0, 0)","rgb(255, 102, 0)","rgb(128, 128, 0)","rgb(0, 128, 0)","rgb(0, 128, 128)","rgb(0, 0, 255)","rgb(102, 102, 153)","rgb(128, 128, 128)","rgb(255, 0, 0)","rgb(255, 153, 0)","rgb(153, 204, 0)","rgb(51, 153, 102)","rgb(51, 204, 204)","rgb(51, 102, 255)","rgb(128, 0, 128)","rgb(153, 153, 153)","rgb(255, 0, 255)","rgb(255, 204, 0)","rgb(255, 255, 0)","rgb(0, 255, 0)","rgb(0, 255, 255)","rgb(0, 204, 255)","rgb(153, 51, 102)","rgb(192, 192, 192)","rgb(255, 153, 204)","rgb(255, 204, 153)","rgb(255, 255, 153)","rgb(204, 255, 204)","rgb(204, 255, 255)","rgb(153, 204, 255)","rgb(204, 153, 255)","rgb(255, 255, 255)"],this._grayPalette=this._generateShades(40,"gray"),this._redPalette=this._generateShades(40,"red"),this._greenPalette=this._generateShades(40,"green"),this._bluePalette=this._generateShades(40,"blue"),this._customPalette=this._mapDataSourceToPalette(),this._userPalette=this.paletteCustomColors||[],this._colorPalette={},this._cssColorNamesHEX={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4","indianred ":"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgrey:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370d8",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#d87093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},this._defaultModeThemeColors=null===this.gridThemeColors?["#FFFFFF","#000000","#E6E6E6","#495469","#5671C2","#D48439","#A5A5A5","#EEC328","#7399D3","#85AA4C"]:this.gridThemeColors,this._defaultModeStandardColors=null===this.gridStandardColors?["#A52A0D","#DB3A15","#EEC328","#FEFE33","#A6CD57","#62AC54","#65ADEE","#3F6FBE","#10205F","#64379E"]:this.gridStandardColors,this._defaultModeShadesColors=null===this.gridShadeColors?["#F2F2F2","#808080","#D0CECE","#D6DCE4","#DDEBF7","#FCE4D6","#EBEBEB","#FFF2CC","#DDE5F7","#E2EFDA","#D8D8D8","#595959","#AEAAAA","#ACB9CA","#BDD7EE","#F6CAAD","#DBDBDB","#FFE699","#B4C6E7","#C6E0B4","#BFBFBF","#404040","#757171","#8497B0","#9BC2E6","#F4B084","#C0C0C0","#FFD966","#8EA9DB","#A9D08E","#A6A6A6","#262626","#312F2F","#333F4F","#2F75B5","#C65911","#7B7B7B","#BF8F00","#305496","#548235","#808080","#0D0D0D","#161616","#222B35","#1F4E78","#833C0C","#525252","#806000","#203764","#375623"]:this.gridShadeColors,this._materialColors={Red:{50:"rgb(255, 235, 238)",100:"rgb(255, 205, 210)",200:"rgb(239, 154, 154)",300:"rgb(229, 115, 115)",400:"rgb(239, 83, 80)",500:"rgb(244, 67, 54)",600:"rgb(229, 57, 53)",700:"rgb(211, 47, 47)",800:"rgb(198, 40, 40)",900:"rgb(183, 28, 28)","A 100":"rgb(255, 138, 128)","A 200":"rgb(255, 82, 82)","A 400":"rgb(255, 23, 68)","A 700":"rgb(213, 0, 0)"},Pink:{50:"rgb(252, 228, 236)",100:"rgb(248, 187, 208)",200:"rgb(244, 143, 177)",300:"rgb(240, 98, 146)",400:"rgb(236, 64, 122)",500:"rgb(233, 30, 99)",600:"rgb(216, 27, 96)",700:"rgb(194, 24, 91)",800:"rgb(173, 20, 87)",900:"rgb(136, 14, 79)","A 100":"rgb(255, 128, 171)","A 200":"rgb(255, 64, 129)","A 400":"rgb(245, 0, 87)","A 700":"rgb(197, 17, 98)"},Purple:{50:"rgb(243, 229, 245)",100:"rgb(225, 190, 231)",200:"rgb(206, 147, 216)",300:"rgb(186, 104, 200)",400:"rgb(171, 71, 188)",500:"rgb(156, 39, 176)",600:"rgb(142, 36, 170)",700:"rgb(123, 31, 162)",800:"rgb(106, 27, 154)",900:"rgb(74, 20, 140)","A 100":"rgb(234, 128, 252)","A 200":"rgb(224, 64, 251)","A 400":"rgb(213, 0, 249)","A 700":"rgb(170, 0, 255)"},"Deep Purple":{50:"rgb(237, 231, 246)",100:"rgb(209, 196, 233)",200:"rgb(179, 157, 219)",300:"rgb(149, 117, 205)",400:"rgb(126, 87, 194)",500:"rgb(103, 58, 183)",600:"rgb(94, 53, 177)",700:"rgb(81, 45, 168)",800:"rgb(69, 39, 160)",900:"rgb(49, 27, 146)","A 100":"rgb(179, 136, 255)","A 200":"rgb(124, 77, 255)","A 400":"rgb(101, 31, 255)","A 700":"rgb(98, 0, 234)"},Indigo:{50:"rgb(232, 234, 246)",100:"rgb(197, 202, 233)",200:"rgb(159, 168, 218)",300:"rgb(121, 134, 203)",400:"rgb(92, 107, 192)",500:"rgb(63, 81, 181)",600:"rgb(57, 73, 171)",700:"rgb(48, 63, 159)",800:"rgb(40, 53, 147)",900:"rgb(26, 35, 126)","A 100":"rgb(140, 158, 255)","A 200":"rgb(83, 109, 254)","A 400":"rgb(61, 90, 254)","A 700":"rgb(48, 79, 254)"},Blue:{50:"rgb(227, 242, 253)",100:"rgb(187, 222, 251)",200:"rgb(144, 202, 249)",300:"rgb(100, 181, 246)",400:"rgb(66, 165, 245)",500:"rgb(33, 150, 243)",600:"rgb(30, 136, 229)",700:"rgb(25, 118, 210)",800:"rgb(21, 101, 192)",900:"rgb(13, 71, 161)","A 100":"rgb(130, 177, 255)","A 200":"rgb(68, 138, 255)","A 400":"rgb(41, 121, 255)","A 700":"rgb(41, 98, 255)"},"Light Blue":{50:"rgb(225, 245, 254)",100:"rgb(179, 229, 252)",200:"rgb(129, 212, 250)",300:"rgb(79, 195, 247)",400:"rgb(41, 182, 246)",500:"rgb(3, 169, 244)",600:"rgb(3, 155, 229)",700:"rgb(2, 136, 209)",800:"rgb(2, 119, 189)",900:"rgb(1, 87, 155)","A 100":"rgb(128, 216, 255)","A 200":"rgb(64, 196, 255)","A 400":"rgb(0, 176, 255)","A 700":"rgb(0, 145, 234)"},Cyan:{50:"rgb(224, 247, 250)",100:"rgb(178, 235, 242)",200:"rgb(128, 222, 234)",300:"rgb(77, 208, 225)",400:"rgb(38, 198, 218)",500:"rgb(0, 188, 212)",600:"rgb(0, 172, 193)",700:"rgb(0, 151, 167)",800:"rgb(0, 131, 143)",900:"rgb(0, 96, 100)","A 100":"rgb(132, 255, 255)","A 200":"rgb(24, 255, 255)","A 400":"rgb(0, 229, 255)","A 700":"rgb(0, 184, 212)"},Teal:{50:"rgb(224, 242, 241)",100:"rgb(178, 223, 219)",200:"rgb(128, 203, 196)",300:"rgb(77, 182, 172)",400:"rgb(38, 166, 154)",500:"rgb(0, 150, 136)",600:"rgb(0, 137, 123)",700:"rgb(0, 121, 107)",800:"rgb(0, 105, 92)",900:"rgb(0, 77, 64)","A 100":"rgb(167, 255, 235)","A 200":"rgb(100, 255, 218)","A 400":"rgb(29, 233, 182)","A 700":"rgb(0, 191, 165)"},Green:{50:"rgb(232, 245, 233)",100:"rgb(200, 230, 201)",200:"rgb(165, 214, 167)",300:"rgb(129, 199, 132)",400:"rgb(102, 187, 106)",500:"rgb(76, 175, 80)",600:"rgb(67, 160, 71)",700:"rgb(56, 142, 60)",800:"rgb(46, 125, 50)",900:"rgb(27, 94, 32)","A 100":"rgb(185, 246, 202)","A 200":"rgb(105, 240, 174)","A 400":"rgb(0, 230, 118)","A 700":"rgb(0, 200, 83)"},"Light Green":{50:"rgb(241, 248, 233)",100:"rgb(220, 237, 200)",200:"rgb(197, 225, 165)",300:"rgb(174, 213, 129)",400:"rgb(156, 204, 101)",500:"rgb(139, 195, 74)",600:"rgb(124, 179, 66)",700:"rgb(104, 159, 56)",800:"rgb(85,139,47)",900:"rgb(51,105,30)","A 100":"rgb(204,255,144)","A 200":"rgb(178,255,89)","A 400":"rgb(118,255,3)","A 700":"rgb(100, 221, 23)"},Lime:{50:"rgb(249, 251, 231)",100:"rgb(255, 249, 196)",200:"rgb(255, 245, 157)",300:"rgb(255, 241, 118)",400:"rgb(255, 238, 88)",500:"rgb(255, 235, 59)",600:"rgb(253, 216, 53)",700:"rgb(251, 192, 45)",800:"rgb(249, 168, 37)",900:"rgb(245, 127, 23)","A 100":"rgb(244, 255, 129)","A 200":"rgb(238, 255, 65)","A 400":"rgb(198, 255, 0)","A 700":"rgb(174, 234, 0)"},Yellow:{50:"rgb(255, 253, 231)",100:"rgb(255, 249, 196)",200:"rgb(255, 245, 157)",300:"rgb(255, 241, 118)",400:"rgb(255, 238, 88)",500:"rgb(255, 235, 59)",600:"rgb(253, 216, 53)",700:"rgb(251, 192, 45)",800:"rgb(249, 168, 37)",900:"rgb(245, 127, 23)","A 100":"rgb(255, 255, 141)","A 200":"rgb(255, 255, 0)","A 400":"rgb(255, 234, 0)","A 700":"rgb(255, 214, 0)"},Amber:{50:"rgb(255, 248, 225)",100:"rgb(255, 236, 179)",200:"rgb(255, 224, 130)",300:"rgb(255, 213, 79)",400:"rgb(255, 202, 40)",500:"rgb(255, 193, 7)",600:"rgb(255, 179, 0)",700:"rgb(255, 160, 0)",800:"rgb(255, 143, 0)",900:"rgb(255, 111, 0)","A 100":"rgb(255, 229, 127)","A 200":"rgb(255, 215, 64)","A 400":"rgb(255, 196, 0)","A 700":"rgb(255, 171, 0)"},Orange:{50:"rgb(255, 243, 224)",100:"rgb(255, 224, 178)",200:"rgb(255, 204, 128)",300:"rgb(255, 183, 77)",400:"rgb(255, 167, 38)",500:"rgb(255, 152, 0)",600:"rgb(251, 140, 0)",700:"rgb(245, 124, 0)",800:"rgb(239, 108, 0)",900:"rgb(230, 81, 0)","A 100":"rgb(255, 209, 128)","A 200":"rgb(255, 171, 64)","A 400":"rgb(255, 145, 0)","A 700":"rgb(255, 109, 0)"},"Deep Orange":{50:"rgb(251, 233, 231)",100:"rgb(255, 204, 188)",200:"rgb(255, 171, 145)",300:"rgb(255, 138, 101)",400:"rgb(255, 112, 67)",500:"rgb(255, 87, 34)",600:"rgb(244, 81, 30)",700:"rgb(230, 74, 25)",800:"rgb(216, 67, 21)",900:"rgb(191, 54, 12)","A 100":"rgb(255, 158, 128)","A 200":"rgb(255, 110, 64)","A 400":"rgb(255, 61, 0)","A 700":"rgb(221, 44, 0)"},Brown:{50:"rgb(239, 235, 233)",100:"rgb(215, 204, 200)",200:"rgb(188, 170, 164)",300:"rgb(161, 136, 127)",400:"rgb(141, 110, 99)",500:"rgb(121, 85, 72)",600:"rgb(109, 76, 65)",700:"rgb(93, 64, 55)",800:"rgb(78, 52, 46)",900:"rgb(62, 39, 35)","A 100":"","A 200":"","A 400":"","A 700":""},Grey:{50:"rgb(250, 250, 250)",100:"rgb(245, 245, 245)",200:"rgb(238, 238, 238)",300:"rgb(224, 224, 224)",400:"rgb(189, 189, 189)",500:"rgb(158, 158, 158)",600:"rgb(117, 117, 117)",700:"rgb(97, 97, 97)",800:"rgb(66, 66, 66)",900:"rgb(33, 33, 33)","A 100":"","A 200":"","A 400":"","A 700":""},"Blue Grey":{50:"rgb(236, 239, 241)",100:"rgb(207, 216, 220)",200:"rgb(176, 190, 197)",300:"rgb(144, 164, 174)",400:"rgb(120, 144, 156)",500:"rgb(96, 125, 139)",600:"rgb(84, 110, 122)",700:"rgb(69, 90, 100)",800:"rgb(55, 71, 79)",900:"rgb(38, 50, 56)","A 100":"","A 200":"","A 400":"","A 700":""}})}_mapDataSourceToPalette(){const e=this;let t=[];if(!e.paletteColors||!Array.isArray(e.paletteColors)||0===e.paletteColors.length)return[];for(let a=0;a<e.paletteColors.length;a++){let l=e.paletteColors[a];"object"==typeof l&&l[e.valueMember]&&"string"==typeof l[e.valueMember]&&(l=l[e.valueMember]),l+="",e._isValidColor(l)&&t.push(l)}return t}_handleSampleClick(e){const t=this,a=e.target,l=t.value;let r=a.colorCode;"hexagonal"===t.displayMode?(r=t._HSVtoRGBA({h:a.h,s:a.s,v:a.v},t._RGBA.a),t._hexagonItems.indexOf(a)>-1&&(t._HSV.h=a.h,t.inverted,t._HSV.s=a.s,t._HSV.v=a.v,t._targetItem=a,t._applyValue(t._HSVtoRGBA(t._HSV),e),delete t._targetItem)):t._changeSampleSelection(a),t._HSVRGBArefresh(a.classList.contains("selected")?r:null),"instantly"===t.applyValueMode&&(t.$.hiddenInput.value=t.value=t._getValue(t.valueFormat,a.classList.contains("selected")?r:null),t.value!==l&&t.$.fireEvent("change",{oldValue:l,value:t.value}))}_changeSampleSelection(e){if(this._selectedItem&&"radial"!==this.displayMode&&"hexagonal"!==this.displayMode&&(!e||this._selectedItem===e&&e.classList.contains("selected")))return;if(!e)return;const t=this._getContrastColor(this._rgbaToHEX(this._toRGBA(e.colorCode))),a=e.closest("svg");return Array.from((this.shadowRoot||this).querySelectorAll(".selected")).forEach(e=>{e.classList.remove("selected"),e.removeAttribute("aria-current"),e.style.stroke=null}),e.classList.add("selected"),e.setAttribute("aria-current",!0),this._selectedItem=e,a&&(e.style.stroke=t,a.appendChild(e)),!0}_getContrastColor(e){if(void 0===e)return;let t=(a=e.slice(1,3),l=e.slice(3,5),r=e.slice(5,7),[parseInt(a,16),parseInt(l,16),parseInt(r,16)]);var a,l,r;return(.299*t[0]+.61*t[1]+.114*t[2])/255>.6?"#000000":"#FFFFFF"}_getXYcoordinates(e){if(!e)return;const t=this._activeComponent||(e.originalEvent||e).target;if(!t.closest)return;const a=t.closest(".color-palette")||t.closest(".color-palette-radial")||t.closest(".hue-scale")||t.closest(".brightness-scale")||t.closest(".alpha-channel-scale");if(!a||this.disabled||this.readonly)return;const l=a.getBoundingClientRect();let r=e.pageX-window.pageXOffset-l.left,o=e.pageY-window.pageYOffset-l.top;return r<0?r=0:r>a.offsetWidth&&(r=a.offsetWidth),o<0?o=0:o>a.offsetHeight&&(o=a.offsetHeight),{x:r,y:o,container:a}}_inputWheelHandler(e){const t=this,a=t.value,l=e.target;if(!(e.target instanceof HTMLInputElement)||e.target.classList.contains("hex"))return;let r;e.preventDefault(),l.classList.contains("a-channel")?(r=parseFloat(l.value)||0,r=e.deltaY<0?r+.01:r-.01,l.value=t._toFixed(t._validateInRange(r,0,1)),t._RGBA=t._getRGBAFromInputs(),t._applyAlphaValue(t._RGBA.a,"alphaInput")):(r=parseInt(l.value)||0,r=e.deltaY<0?r+1:r-1,l.value=t._validateInRange(r,0,255),t._RGBA=t._getRGBAFromInputs(),t._HSV=t._getValue("hsv","rgba("+t._RGBA.r+", "+t._RGBA.g+", "+t._RGBA.b+", "+t._RGBA.a+")")),t._updatePreviewContainerValues(t._getValue(t.valueFormat)),t._setPalettePointerXYPosition(),"useButtons"===t.applyValueMode&&("palette"===t.displayMode?t._applyValueInPaletteMode():"radial"===t.displayMode?t._applyValueInRadialMode():"hexagonal"===t.displayMode&&t._generateHoneycomb(t.columnCount,t._HSV)),t.$.container.className.indexOf("custom-color-selection")>-1?t._applyValue(t._HSVtoRGBA(t._HSV)):"useButtons"!==t.applyValueMode&&(t.value=t._getValue(t.valueFormat),t._applyValue(t.value,e),t.$.fireEvent("change",{oldValue:a,value:t.value}))}_paletteDownHandler(e){const t=this;if(!Smart.Utilities.Core.isMobile&&0!==e.button||t.disabled||t.readonly)return;t._dragDetails={x:e.pageX-window.pageXOffset,y:e.pageY-window.pageYOffset};const a=(e.originalEvent||e).target;if(a&&a.closest){if(t._dragDetails.target=a.closest(".color-palette")||a.closest(".color-palette-radial"),a.closest(".color-palette")||a.closest(".color-palette-radial"))return t._handleColorPaletteDown(e.originalEvent),void(t._dragDetails.isPalettePressed=!0);(a.closest(".hue-scale")||a.closest(".alpha-channel-scale")||a.closest(".brightness-scale"))&&t._handleScalesDown(e.originalEvent)}}_setPalettePointerXYPosition(e){const t=this;let a;if("palette"===t.displayMode||t.$.container.className.indexOf("custom-color-selection")>-1)a=t._getXYcoordinates(e),t.$.colorPaletteThumb.style.left=e&&a&&a.x?100*a.x/a.container.offsetWidth+"%":100*t._HSV.s+"%",t.$.colorPaletteThumb.style.top=e&&a&&a.y?100*a.y/a.container.offsetHeight+"%":100*(1-t._HSV.v)+"%";else if("radial"===t.displayMode){if(e){if(a=t._getXYcoordinates(e),!a)return;const l=a.container.offsetWidth?a.container.offsetWidth:t.$.colorPaletteRadial.offsetWidth,r=a.container.offsetHeight?a.container.offsetHeight:t.$.colorPaletteRadial.offsetHeight,o=Math.round(Math.cos(t._HSV.h*Math.PI/180)*l/2+l/2),n=Math.round(Math.sin(t._HSV.h*Math.PI/180)*l/2+r/2);return Math.abs(l/2-a.x)<5?(t.$.colorPaletteRadialThumb.style.left=100*a.x/t.$.colorPaletteRadial.offsetWidth+"%",void(t.$.colorPaletteRadialThumb.style.top=100*a.y/t.$.colorPaletteRadial.offsetHeight+"%")):(t.$.colorPaletteRadialThumb.style.left=100*(a.x<l/2?Math.max(o,a.x):Math.min(o,a.x))/l+"%",void(t.$.colorPaletteRadialThumb.style.top=100*(a.y<r/2?Math.max(n,a.y):Math.min(n,a.y))/r+"%"))}{const e=t._radialThumbPoint(t.$.colorPaletteRadial.offsetWidth/2,t.$.colorPaletteRadial.offsetHeight/2,t._HSV.h,t._HSV.s);t.$.colorPaletteRadialThumb.style.left=100*e.x/t.$.colorPaletteRadial.offsetWidth+"%",t.$.colorPaletteRadialThumb.style.top=100*e.y/t.$.colorPaletteRadial.offsetHeight+"%"}}}_handleGridModeCellHover(e){const t=this,a=e.target.closest(".color-sample");if(t.disabled||!a||"none"===t.tooltipDisplayMode||!t.$.tooltip)return;if(t.$.tooltip.arrow="hexagonal"!==t.displayMode,!t._isValidColor(a.colorCode))return void(t.$.tooltip.disabled=!0);t.$.tooltip.disabled=!1,t.$.tooltip.selector=a;const l=a.h&&a.s&&a.v?t._HSVtoRGBA({h:a.h,s:a.s,v:a.v},t._RGBA.a):t._toRGBA(a.colorCode);switch(t.tooltipDisplayMode){case"rgba":t.$.tooltip.value=l||"";break;case"rgb":t.$.tooltip.value=t._rgbaToRGB(l)||"";break;case"hex":t.$.tooltip.value=t._rgbaToHEX(l)||""}}_localizeLabels(){const e=this,t=(e.shadowRoot||e).querySelector("label.r-channel"),a=(e.shadowRoot||e).querySelector("label.g-channel"),l=(e.shadowRoot||e).querySelector("label.b-channel"),r=(e.shadowRoot||e).querySelector("label.a-channel"),o=(e.shadowRoot||e).querySelector("label.hex");if(t&&(t.innerHTML=e.localize("redPrefix")),a&&(a.innerHTML=e.localize("greenPrefix")),l&&(l.innerHTML=e.localize("bluePrefix")),r&&(r.innerHTML=e.localize("alphaPrefix")),o&&(o.innerHTML=e.localize("hexPrefix")),e.$.buttonCustom&&(e.$.buttonCustom.content=e.localize("customColor")),e.$.buttonOk&&(e.$.buttonOk.content=e.localize("ok")),e.$.buttonCancel&&(e.$.buttonCancel.content=e.localize("cancel")),e.$.defaultSamplesContainer){const t=e.$.defaultSamplesContainer.querySelector(".theme-colors-label"),a=e.$.defaultSamplesContainer.querySelector(".standard-colors-label");t&&(t.innerHTML=e.localize("themeColors")),a&&(a.innerHTML=e.localize("standardColors"))}}_generateHoneycomb(e,t){const a=this,l=parseInt(getComputedStyle(a).getPropertyValue("--smart-color-panel-grid-mode-item-size"))/4,r=Math.sqrt(5*Math.pow(l,2)),o=e%2==0?parseInt(e)+1:parseInt(e),n=t&&void 0!==t.s?t.s:1,s=t&&void 0!==t.v?t.v:1,i=a._calculateHexagonCoords(o,r,1),d=i[Math.floor(i.length/2)],c=a._getHoneycomb30degDimmensions(i.length,r,1);a._draw||(a._draw=new Smart.Utilities.Draw(a.$.colorPaletteHexagonal)),a._draw.clear(),a.$.colorPaletteHexagonal.firstElementChild.setAttribute("role","presentation"),a.$.colorPaletteHexagonal.firstElementChild.firstElementChild.setAttribute("role","menu"),a._hexagonItems=[],a.$.materialGridSamplesContainer&&a.$.materialGridSamplesContainer.$.addClass("smart-hidden");for(let e=0;e<i.length;e++){const t=i[e].x-d.x,l=i[e].y-d.y,o=a._validateInRange(a._calcSatDistance(t,l)/d.x,0,1);let c,u,h=a._calcHueAngle(t,l)<0?360+a._calcHueAngle(t,l):a._calcHueAngle(t,l);switch(a.inverted?(c=n,u=o):(c=o,u=s),a.palette){case"red":h=0;break;case"green":h=120;break;case"blue":h=240;break;case"gray":c=0,u=a.inverted?o:1-o}const g={offsetX:i[e].x,offsetY:i[e].y,style:{fill:a._HSVtoRGBA({h:h,s:c,v:u},1),class:"color-sample"}};let p=a._hexagon(r,g);p.colorCode=a._HSVtoRGBA({h:h,s:c,v:u}),p.h=h,p.s=c,p.v=u,p.setAttribute("role","menuitem"),p.setAttribute("aria-label",p.colorCode),a._hexagonItems.push(p)}a._draw.host.style.width=c.width+"px",a._draw.host.style.height=c.height+"px",a.$.container.style.setProperty("--smart-color-panel-palette-width",c.width+"px"),a.$.container.style.setProperty("--smart-color-panel-palette-height",c.height+"px"),a._applyValueInHexagonalMode(),a._hideControlsByPriority()}_hexagon(e,t){const a=this._shortStepHexagon(e),l=2*a,r=l+(t.offsetX||0),o=t.offsetY||0,n=r+l,s=o+a,i=s+e,d=n-l,c=i+a,u=d-l,h=c-a,g="M "+r+","+o+" L "+n+","+s+" L "+n+","+i+" L "+d+","+c+" L "+u+","+h+" L "+u+","+(h-e)+" Z";return this._draw.path(g,t.style||{class:"color-sample"})}_shortStepHexagon(e){return Math.sqrt(Math.pow(e,2)/5)}_getHoneycomb30degDimmensions(e,t,a){const l=.5*(1+Math.sqrt(1-(1-e)/3*4)),r=this._shortStepHexagon(t);return{width:(2*l-1)*(4*r)+2*l*2*a,height:(2*l-1)*t+2*l*r+2*l*a}}_generateShades(e,t){const a=this,l=t||"gray";let r,o=[];const n=255/((e=Math.max(parseInt(e),2))-1);for(let t=0;t<e;t++){let e=Math.max(parseInt(255-t*n),0);switch(a.inverted&&(e=255-e),l){case"red":r="rgb("+e+", 0, 0)";break;case"green":r="rgb(0, "+e+", 0)";break;case"blue":r="rgb(0, 0, "+e+")";break;default:r="rgb("+e+", "+e+", "+e+")"}o.push(r)}return o}_generateColorSpectrum(e){const t=this;let a=[];const l=360/((e=Math.max(parseInt(e),2))-1),r=2/e;let o=0,n=1,s=1;for(let i=0;i<e;i++){t.inverted?0===i?n=1:i<e/2?n=Math.max(n-r,r/2):i<e-1?(s=Math.max(s-r,r/2),n=Math.min(n+r,1)):(s=Math.max(s-r,r/2),n=Math.min(n+r/4,1)):0===i?s=1:i<e/2?s=Math.max(s-r,r/2):i<e-1?(n=Math.max(n-r,r/2),s=Math.min(s+r,1)):(n=Math.max(n-r,r/2),s=Math.min(s+r/4,1));for(let r=0;r<e;r++)o=parseInt(l*r),o=360===o?360-l/2:o,a.push(t._HSVtoRGBA({h:o,s:n,v:s},1))}return a}_generateSpectrumGrid(e){const t=this;if(!t.$.spectrumGridSamplesContainer)return;const a=Math.pow(e,2),l=document.createDocumentFragment(),r={},o=t._generateShades(e,"gray"),n=t._customPalette;let s;["grayShadesBox","spectrumBox","customColorsBox"].forEach(e=>{const t=document.createElement("div");let a=Smart.Utilities.Core.toDash(e).split("-").join(" ");r[e]=t,t.className=Smart.Utilities.Core.toDash(e),t.setAttribute("role","menu"),t.setAttribute("aria-label",a.slice(0,1).toUpperCase()+a.slice(1)),l.appendChild(t)}),s="default"===t.palette?t._generateColorSpectrum(e):["gray","red","green","blue"].indexOf(t.palette)>-1?t._generateShades(a,t.palette):t._generateColorSpectrum(e);for(let a=0;a<e;a++){const e=t._createColorSample(o[a],"gray-shade");r.grayShadesBox.appendChild(e)}for(let e=0;e<a;e++){const a=t._createColorSample(s[e],"spectrum");r.spectrumBox.appendChild(a)}for(let a=0;a<e;a++){const e=n[a];if(!e)break;const l=t._createColorSample(e,"custom-color");r.customColorsBox.appendChild(l)}t.$.spectrumGridSamplesContainer.innerHTML="",t.$.spectrumGridSamplesContainer.appendChild(l)}_generateDefaultGrid(){const e=this;if(!e.$.defaultSamplesContainer)return;const t={},a=null===e.gridThemeColors?e._defaultModeThemeColors:e.gridThemeColors,l=null===e.gridShadeColors?e._defaultModeShadesColors:e.gridShadeColors,r=null===e.gridStandardColors?e._defaultModeStandardColors:e.gridStandardColors,o=document.createDocumentFragment();["themeColorsLabel","themeColorsBox","themeShadesBox","standardColorsLabel","standardColorsBox"].forEach(a=>{const l=document.createElement("div");t[a]=l,l.className=Smart.Utilities.Core.toDash(a),-1!==a.indexOf("Box")?l.setAttribute("role","menu"):-1!==a.indexOf("Label")&&(l.id=e.id+a),o.appendChild(l)}),t.themeColorsLabel.innerHTML=e.localize("themeColors"),t.standardColorsLabel.innerHTML=e.localize("standardColors"),t.themeColorsBox.setAttribute("aria-labelledby",e.id+"themeColorsLabel"),t.themeShadesBox.setAttribute("aria-labelledby",e.id+"themeColorsLabel"),t.standardColorsBox.setAttribute("aria-labelledby",e.id+"standardColorsLabel");for(let a=0;a<e._defaultModeShadesColors.length;a++)t.themeShadesBox.appendChild(e._createColorSample(l[a],"shades-color"));for(let l=0;l<10;l++)t.themeColorsBox.appendChild(e._createColorSample(a[l],"theme-color")),t.standardColorsBox.appendChild(e._createColorSample(r[l],"standard-color"));e.$.defaultSamplesContainer.innerHTML="",e.$.defaultSamplesContainer.appendChild(o)}_mixColors(e,t,a){const l=e=>parseInt(e,16);let r,o="#";a=void 0!==a?a:.5,e=e.replace(/#/g,""),t=t.replace(/#/g,"");for(let n=0;n<=5;n+=2){const s=l(e.substr(n,2)),i=l(t.substr(n,2));for(r=Math.round(i+(s-i)*a).toString(16);r.length<2;)r="0"+r;o+=r}return o}_generateMaterialGrid(){const e=this;if(!e.$.materialGridSamplesContainer)return;const t=document.createDocumentFragment();e.$.materialGridSamplesContainer.$.removeClass("smart-hidden"),t.appendChild(e._createColorSample("rgb(255, 255, 255, 0)","material-color label-column")),Object.entries(e._materialColors.Red).forEach(a=>{const l=e._createColorSample("rgb(255, 255, 255, 0)","material-color header");l.textContent=a[0],t.appendChild(l)}),Object.entries(e._materialColors).forEach(a=>{const l=e._createColorSample("rgb(255, 255, 255, 0)","material-color label-column");l.textContent=a[0],t.appendChild(l),Object.entries(a[1]).forEach(a=>{t.appendChild(e._createColorSample(a[1],"material-color"))})}),e.$.materialGridSamplesContainer.innerHTML="",e.$.materialGridSamplesContainer.appendChild(t)}_createColorSample(e,t){const a=document.createElement("div"),l=e?"":" empty";return e&&-1===t.indexOf("label-column")&&-1===t.indexOf("header")&&(a.setAttribute("role","menuitem"),a.setAttribute("aria-label",e)),a.className="color-sample "+t+l,t.indexOf("header")>-1||t.indexOf("label-column")>-1||(a.colorCode=e,a.style.backgroundColor=e),a}_calculateHexagonCoords(e,t,a){const l=e,r=function(e){return((e=e%2==0?e+1:e)+1)/2}(e),o=this._shortStepHexagon(t),n=4*o+2*a,s=2*o+a,i=t+o+a,d=s*(l-1)/2;let c=[];for(let t=0;t<l;t++){const a=t<r?r+t:e-1-(t-r),l=t<r?d-t*s:d-(e-t-1)*s,o=t*i;for(let e=0;e<a;e++){const t=l+e*n;c.push({x:t,y:o})}}return c}_generateGridStructures(){const e=this,t=e.displayMode;if(!e._initializeOnOpening){if(void 0===e._createGridModeComponents()){switch(t){case"spectrumGrid":e._generateSpectrumGrid(e.columnCount);break;case"materialGrid":e._generateMaterialGrid();break;case"default":e._generateDefaultGrid();break;case"grid":e._generatePaletteGrid()}return e._generatePaletteUserColorGrid(),void a()}switch(e._createColorControls(),t){case"radial":e._generateRadialCanvas();break;case"hexagonal":e._generateHoneycomb(e.columnCount,e._HSV)}a()}function a(){switch(t){case"default":case"grid":e.$.colorPaletteRadial.setAttribute("aria-hidden",!0),e.$.brightnessScale.setAttribute("aria-hidden",!0);break;case"hexagonal":e.$.colorPaletteRadial.setAttribute("aria-hidden",!0),e.$.brightnessScale.removeAttribute("aria-hidden");break;case"materialGrid":e.$.colorPaletteRadial.removeAttribute("aria-hidden"),e.$.brightnessScale.removeAttribute("aria-hidden");break;case"palette":e.$.colorPaletteRadial.removeAttribute("aria-hidden"),e.$.brightnessScale.setAttribute("aria-hidden",!0)}}}_generateRadialCanvas(){const e=this;if("radial"!==e.displayMode||"radial"===e.displayMode&&!Smart.Utilities.Core.Browser.Firefox)return;const t=e.$.colorPaletteRadial.offsetWidth,a=t/2;let l=e.$.colorPaletteRadial.querySelector("canvas");l||(l=document.createElement("canvas"),l.setAttribute("role","presentation"));let r=l.getContext("2d"),o=r.createImageData(t,t),n=o.data;l.width=l.height=t;for(let t=-a;t<a;t++)for(let l=-a;l<a;l++){let[r,o]=e._xy2polar(t,l);if(r>a)continue;let s=(t+a+(l+a)*(2*a))*4,i=e._rad2deg(o),d=1,c=1;const[u,h,g]=e._hsv2rgb(i,d,c);n[s]=u,n[s+1]=h,n[s+2]=g,n[s+3]=255}r.putImageData(o,0,0),e.$.colorPaletteRadial.appendChild(l)}_xy2polar(e,t){return[Math.sqrt(e*e+t*t),Math.atan2(t,e)]}_rad2deg(e){return(e+Math.PI)/(2*Math.PI)*360}_hsv2rgb(e,t,a){let l,r,o,n=a*t,s=e/60,i=n*(1-Math.abs(s%2-1));s>=0&&s<=1?[l,r,o]=[n,i,0]:s>=1&&s<=2?[l,r,o]=[i,n,0]:s>=2&&s<=3?[l,r,o]=[0,n,i]:s>=3&&s<=4?[l,r,o]=[0,i,n]:s>=4&&s<=5?[l,r,o]=[i,0,n]:s>=5&&s<=6&&([l,r,o]=[n,0,i]);let d=a-n,[c,u,h]=[l+d,r+d,o+d];return[255*c,255*u,255*h]}_hideControlsByPriority(){const e=this,t=(e.shadowRoot||e).querySelector(".color-controls-container");if(!t.innerHTML.trim())return;function a(t){const a=e.getElementsByClassName(t);for(let e=0;e<a.length;e++)a[e].classList.add("smart-hidden")}const l=e.hideContentToFit.slice().reverse(),r=["hex","r-channel","g-channel","b-channel","a-channel","preview-container"];let o=l.length;for(r.forEach(t=>{const a=e.getElementsByClassName(t);for(let e=0;e<a.length;e++)a[e].classList.remove("smart-hidden")});t.scrollHeight>t.offsetHeight&&o>0;)switch(o--,l[o]){case"HEX":a(r[0]);break;case"RGB":r.slice(1,4).forEach(e=>a(e));break;case"previewContainer":a(r[5]);break;case"alpha":a(r[4])}e._generateRadialCanvas()}_resizeHoneycombItems(){"hexagonal"===this.displayMode&&this._generateHoneycomb(this.columnCount,this._HSV)}_getValue(e,t){const a=this,l=a._RGBA;let r,o=null;switch(e){case"hex":o=a._rgbArrayToHEX([l.r,l.g,l.b,l.a]);break;case"rgb":o="rgb("+l.r+", "+l.g+", "+l.b+")";break;case"rgba":o=null!==l.r&&null!==l.g&&null!==l.b?"rgba("+l.r+", "+l.g+", "+l.b+", "+l.a+")":null;break;case"HSVtoRGBAarray":{let e="hexagonal"===a.displayMode||"radial"===a.displayMode||"palette"===a.displayMode?a._RGBA.a:1;t&&(a._isRGBA(t)&&/rgba\((\d*.\d+|\d+),(\d*.\d+|\d+),(\d*.\d+|\d+)\,(\d*.\d+|\d+)\)/gi.test(t.replace(/\s/g,""))?e=/rgba\((\d*.\d+|\d+),(\d*.\d+|\d+),(\d*.\d+|\d+)\,(\d*.\d+|\d+)\)/gi.exec(t.replace(/\s/g,""))[4]:a._isHEX(t)&&/(^#[0-9A-F]{8}$)/gi.test(t.replace(/\s/g,""))&&(e=parseInt(/(^#[0-9A-F]{2})([0-9A-F]{2})([0-9A-F]{2})([0-9A-F]{2}$)/gi.exec(t.replace(/\s/g,""))[4],16)/255),e=Math.min(1,Math.max(0,parseFloat(e))),isNaN(e)&&(e=a._RGBA.a)),o=a._HSVtoRGBA(a._HSV,e),r=/rgba\((\d*.\d+|\d+),(\d*.\d+|\d+),(\d*.\d+|\d+)\,(\d*.\d+|\d+)\)/gi.exec(o.replace(/\s/g,"")),o={r:parseInt(r[1]),g:parseInt(r[2]),b:parseInt(r[3]),a:parseFloat(r[4])};break}case"hsv":t&&a._isValidColor(t)&&(o=a._colorToHSV(t));break;default:"radial"===a.displayMode||"hexagonal"===a.displayMode||"palette"===a.displayMode?(o="rgba("+l.r+", "+l.g+", "+l.b+", "+l.a+")",a.editAlphaChannel||(o=a._rgbaToRGB(o))):o=null!==t?a._rgbArrayToHEX([l.r,l.g,l.b,l.a]):null}return o||null}_instantUpdate(){const e=this.value;"instantly"!==this.applyValueMode||this.$.container.className.indexOf("custom-color-selection")>-1||(this.value=this._getValue(this.valueFormat),this.$.fireEvent("change",{oldValue:e,value:this.value}))}_equalValues(e,t){return e===t||!(!e||!t)&&this._toRGBA(e,!0)===this._toRGBA(t,!0)}_toHEX(e){const t=this;return t._isHEX(e)?e:(t._isRGB(e)&&(e=e.toLowerCase().replace("rgb","rgba"),e=t.editAlphaChannel?e.replace(")",", "+(t._RGBA.a||1)+")"):e.replace(")",", 1)")),t._isRGBA(e)?t._rgbaToHEX(e):void 0)}_toRGBA(e,t){const a=this;let l=a.value;if(a._isRGBA(e)){if(t){return"rgba("+e.match(/(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})/gi)+", 1)"}return e}if(a._isValidColorName(e))l=r(a._cssColorNamesHEX[e.trim().toLowerCase()]);else if(a._isHEX(e))l=r(e);else{if(!a._isRGB(e))return!1;l=e.toLowerCase(),l=l.replace("rgb","rgba"),l=a.editAlphaChannel?l.replace(")",", "+(a._RGBA.a||1)+")"):l.replace(")",", 1)")}return l;function r(e){const a=/^#(.)(.)(.)$/gi.exec(e),l=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})?$/i.exec(e),r=a?parseInt(a[1]+a[1],16):parseInt(l[1],16),o=a?parseInt(a[2]+a[2],16):parseInt(l[2],16),n=a?parseInt(a[3]+a[3],16):parseInt(l[3],16),s=a?parseInt(a[4]+a[4],16):parseInt(l[4],16);return t?"rgba("+r+", "+o+", "+n+", 1)":"rgba("+r+", "+o+", "+n+", "+(isNaN(s)?"1":s/255)+")"}}_rgbaToRGB(e){const t=/rgba\((\d*.\d+|\d+),(\d*.\d+|\d+),(\d*.\d+|\d+)\,(\d*.\d+|\d+)\)/gi.exec(e.replace(/\s/g,""));return"rgb("+t[1].trim()+", "+t[2].trim()+", "+t[3].trim()+")"}_rgbaToHEX(e){const t=/rgba\((\d*.\d+|\d+),(\d*.\d+|\d+),(\d*.\d+|\d+)\,(\d*.\d+|\d+)\)/gi.exec(e.replace(/\s/g,""));return this._rgbArrayToHEX([t[1],t[2],t[3],t[4]])}_rgbArrayToHEX(e){let t="#";if(Array.isArray(e)&&null===e[0])return null;for(let a=0;a<3;a++){let l=parseInt(e[a]).toString(16).toUpperCase();l=1===l.length?0+l:l,t+=l}let a=parseFloat(e[3]);return isNaN(a)||(a=parseInt(255*a).toString(16).toUpperCase(),"FF"!==a&&(t=t.slice(0,7)+(1===a.length?0+a:a))),t}_colorToHSV(e){const t=this;if(!t._isValidColor(e))return;e=t._toRGBA(e).replace(/\s/g,"");const a=/rgba\((\d*.\d+|\d+),(\d*.\d+|\d+),(\d*.\d+|\d+)\,(\d*.\d+|\d+)\)/gi.exec(e),l=Math.min(255,Math.max(0,parseFloat(a[1])))/255,r=Math.min(255,Math.max(0,parseFloat(a[2])))/255,o=Math.min(255,Math.max(0,parseFloat(a[3])))/255;let n={h:0,s:0,v:0},s=0,i=0;if(l>=r&&l>=o?(i=l,s=r>o?o:r):r>=o&&r>=l?(i=r,s=l>o?o:l):(i=o,s=r>l?l:r),n.v=i,n.s=i?(i-s)/i:0,n.s){const e=i-s;n.h=l===i?(r-o)/e:r===i?2+(o-l)/e:4+(l-r)/e,n.h=60*n.h,n.h<0&&(n.h+=360)}else n.h=t._HSV.h?t._HSV.h:0;return n.s=parseFloat(n.s),n.v=parseFloat(n.v),n}_HSVtoRGBA(e,t){const a=(e=e||{h:0,s:0,v:0})&&e.h>=0?e.h:this._HSV.h,l=e&&e.s>=0?e.s:this._HSV.s,r=e&&e.v>=0?e.v:this._HSV.v;let o,n,s,i=r*l,d=a/60,c=i*(1-Math.abs(d%2-1));d>=0&&d<=1?[o,n,s]=[i,c,0]:d>=1&&d<=2?[o,n,s]=[c,i,0]:d>=2&&d<=3?[o,n,s]=[0,i,c]:d>=3&&d<=4?[o,n,s]=[0,c,i]:d>=4&&d<=5?[o,n,s]=[c,0,i]:d>=5&&d<=6&&([o,n,s]=[i,0,c]);const u=r-i;return"rgba("+Math.round(255*(o+u))+", "+Math.round(255*(n+u))+", "+Math.round(255*(s+u))+", "+(void 0!==t?t:this._RGBA.a||0)+")"}_HSVRGBArefresh(e){this._HSV=this._getValue("hsv",e)||{h:1,s:0,v:1},this._RGBA=this._getValue("HSVtoRGBAarray",e)}_toFixed(e,t){return parseFloat(parseFloat(e).toFixed(t||2))}_validateInRange(e,t,a){return Math.min(Math.max(parseFloat(e),parseFloat(t)),parseFloat(a))}_isHEX(e){return/(^#[0-9A-F]{3}$)|(^#[0-9A-F]{6}$)|(^#[0-9A-F]{8}$)/i.test(e)}_isRGB(e){return/rgb\((\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\)/i.test(e)}_isRGBA(e){return/rgba\((\d*.\d+|\d+)\s*,\s*(\d*.\d+|\d+)\s*,\s*(\d*.\d+|\d+)\s*,\s*(\d*.\d+|\d+)\)/i.test(e)}_isValidColorName(e){return!(!e||void 0===this._cssColorNamesHEX[e.trim().toLowerCase()])}_isValidColor(e){return this._isHEX(e)||this._isRGB(e)||this._isRGBA(e)||this._isValidColorName(e)}_getRGBAFromInputs(){let e=(this.shadowRoot||this).querySelector("input.r-channel"),t=(this.shadowRoot||this).querySelector("input.g-channel"),a=(this.shadowRoot||this).querySelector("input.b-channel"),l=(this.shadowRoot||this).querySelector("input.a-channel");return e=e?e.value:this._RGBA.r,t=t?t.value:this._RGBA.g,a=a?a.value:this._RGBA.b,l=l?l.value:this._RGBA.a,{r:parseInt(e),g:parseInt(t),b:parseInt(a),a:l}}_setRGBAToInputs(){const e=this;Object.entries(e._RGBA).forEach(t=>{const a=(e.shadowRoot||e).querySelector("input."+t[0]+"-channel");a&&(a.value=e._RGBA[t[0]])})}_calcHueAngle(e,t){return 180*Math.atan2(t,e)/Math.PI}_calcSatDistance(e,t){return Math.sqrt(Math.pow(e,2)+Math.pow(t,2))}})}});
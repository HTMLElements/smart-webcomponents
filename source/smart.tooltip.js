
/* Smart UI v9.4.1 (2021-07-03) 
Copyright (c) 2011-2021 jQWidgets. 
License: https://htmlelements.com/license/ */ //

Smart("smart-tooltip",class extends Smart.ContentElement{static get properties(){return{arrow:{value:!1,type:"boolean"},arrowDirection:{allowedValues:["bottom","top","left","right"],value:"bottom",type:"string"},align:{allowedValues:["left","center","right"],value:"center",type:"string"},delay:{value:0,type:"number"},messages:{extend:!0,value:{en:{invalidSelector:'{{elementType}}: "{{property}}" must be a String, an HTMLElement or null.',htmlTemplateNotSuported:"{{elementType}}: Browser doesn't support HTMLTemplate elements.",invalidTemplate:'{{elementType}}: "{{property}}" property accepts a string that must match the id of an HTMLTemplate element from the DOM.',invalidNode:'{{elementType}}: Invalid parameter "{{node}}" when calling {{method}}.'}},type:"object"},iframeRect:{value:null,type:"object?"},offset:{value:[],type:"array"},openMode:{allowedValues:["click","focus","hover","manual"],value:"hover",type:"string"},position:{allowedValues:["bottom","top","left","right","absolute","auto"],value:"top",type:"string"},selector:{value:null,type:"any?"},tooltipTemplate:{value:null,type:"any"},value:{value:"",type:"string",reflectToAttribute:!1},visible:{value:!1,type:"boolean"}}}static get styleUrls(){return["smart.tooltip.css"]}template(){return'<div id="container" role="presentation">\n                    <div id="content" class="smart-tooltip-content" inner-h-t-m-l="[[innerHTML]]" role="presentation">\n                        <content></content>\n                    </div>\n                </div>'}propertyChangedHandler(e,t,o){super.propertyChangedHandler(e,t,o);const n=this;let l;switch(e){case"align":n._applyPosition(o);break;case"openMode":n.close(),n._handleEventListeners(t),n._handleResize();break;case"selector":n._oldOwnerElement=n._ownerElement,n._handleSelector(o,t),n._handleEventListeners();break;case"tooltipTemplate":n._handleTemplate(t);break;case"value":n.tooltipTemplate?n._handleTemplate():n.$.content.innerHTML=n.value;break;case"visible":l=o?"open":"close",n.$.fireEvent(l,{owner:n._ownerElement},n.isInShadowDOM?{composed:!0,bubbles:!0,cancelable:!0}:void 0);break;case"position":return void n._applyPosition(t)}n._applyPosition()}ready(){const e=this;super.ready(),e.getAttribute("role")||e.setAttribute("role","tooltip"),e._isParentPositionStatic="static"===window.getComputedStyle(e.parentElement||document.querySelector("body")).position,e._handleSelector(e.selector),e.visible&&e._applyPosition(),e._handleEventListeners(),e._handleResize(),e.value=e.$.content.innerHTML=e.value?e.value:e.innerHTML,e._handleTemplate()}appendChild(e){const t=this;if(!t.isCompleted){const e=Array.prototype.slice.call(arguments,2);return HTMLElement.prototype.appendChild.apply(t,e.concat(Array.prototype.slice.call(arguments)))}e?(t.$.content.appendChild(e),t._applyPosition()):t.error(t.localize("invalidNode",{elementType:t.nodeName.toLowerCase(),method:"appendChild",node:"node"}))}close(){const e=this;if(e._isOpening&&clearTimeout(e._isOpening),!e.visible)return;const t=e.isInShadowDOM?{composed:!0,bubbles:!0,cancelable:!0}:void 0;e.$.fireEvent("closing",{owner:e._ownerElement},t).defaultPrevented||(e.$.fireEvent("close",{owner:e._ownerElement},t),e.visible=!1)}clear(){const e=this.$.content;if(e)for(;e.childNodes.length;)e.removeChild(e.firstChild)}insertBefore(e,t){const o=this;if(!o.isCompleted){const e=Array.prototype.slice.call(arguments,2);return HTMLElement.prototype.insertBefore.apply(o,e.concat(Array.prototype.slice.call(arguments)))}e&&t?(o.$.content.insertBefore(e,t),o._applyPosition()):o.error(o.localize("invalidNode",{elementType:o.nodeName.toLowerCase(),method:"insertBefore",node:"newNode/referenceNode"}))}open(){const e=this;e.disabled||e.readonly||e.visible||(e._isOpening=setTimeout((function(){const t=e.isInShadowDOM?{composed:!0,bubbles:!0,cancelable:!0}:void 0;if(e.$.fireEvent("opening",{owner:e._ownerElement},t).defaultPrevented)return void clearTimeout(e._isOpening);e._applyPosition(),e.$.fireEvent("open",{owner:e._ownerElement},t);const o=e.context;e.context=e,e.visible=!0,e.context=o}),e.delay))}removeChild(e){const t=this;if(!t.isCompleted){const e=Array.prototype.slice.call(arguments,2);return HTMLElement.prototype.insertBefore.apply(t,e.concat(Array.prototype.slice.call(arguments)))}e?(t.$.content.removeChild(e),t._applyPosition()):t.error(t.localize("invalidNode",{elementType:t.nodeName.toLowerCase(),method:"removeChild",node:"node"}))}reposition(){const e=this;e.isRendered&&e._applyPosition()}toggle(){const e=this;e.visible?e.close():e.open()}_getDomElementPosition(e){let t=[],o=e.parentElement;for(;o&&"BODY"!==o.nodeName;)t.push(o),o=!this.enableShadowDOM||o.parentElement?o.parentElement:o.getRootNode().host;return t}_getElementAndOwnerRelation(e){const t=this._getDomElementPosition(e||this),o=t.length;let n=null;for(let e=0;e<o;e++)if("static"!==window.getComputedStyle(t[e]).getPropertyValue("position")){n=t[e];break}return n}_applyPosition(e){const t=this;if(!t._ownerElement)return;if(!t.parentElement)return;t._isParentPositionStatic="static"===window.getComputedStyle(t.parentElement).position;const o=t._ownerElement.getBoundingClientRect(),n=t.parentElement?t.parentElement.getBoundingClientRect():{top:0,left:0};let l,i;t.parentElement&&"BODY"===t.parentElement.nodeName.toUpperCase()?(l=o.top+window.scrollY,i=o.left+window.scrollX):(l=o.top-n.top,i=o.left-n.left);const r=t.position,s=t.iframeRect;let a,p={top:o.top,left:o.left,right:o.right,width:o.width,height:o.height,nonStaticParent:t._getElementAndOwnerRelation()};switch(s&&(p.top+=s.top,p.left+=s.left,p.right+=s.right),r){case"auto":case"bottom":case"top":case"left":case"right":{t.style.left="";const e=t["_position"+r.charAt(0).toUpperCase()+r.slice(1)](i,l,p);l=e.top,i=e.left,a=e.translate;break}case"absolute":e?(t.style.top=t.style.left="",l=i=0):(l=parseFloat(t.style.top),i=parseFloat(t.style.left))}const d=t.getAttribute("arrow-direction");a?t.$.container.style.setProperty("--smart-tooltip-arrow-translate",a+"px"):t.$.container.style.removeProperty("--smart-tooltip-arrow-translate"),void 0===l||isNaN(l)||(l+=("auto"===r&&"top"===d?-1:1)*parseInt(t.offset[1])||0,t.style.top=l+"px"),void 0===i||isNaN(i)||(i+=("auto"===r&&"left"===d?-1:1)*parseInt(t.offset[0])||0,t.style.left=i+"px")}_positionAuto(e,t,o){const n=this;let l,i,r=n.parentElement;for(;r;){if("hidden"===getComputedStyle(r).getPropertyValue("overflow")){l=r;break}r=r.parentElement}if(l)i=l.getBoundingClientRect();else{const e=document.scrollingElement;let t,o;document.scrollingElement?(t=e.offsetWidth,o=e.offsetHeight):(t=window.innerWidth,o=window.innerHeight),l=document.body,i={width:t,height:o,left:0,top:0,right:t,bottom:o}}const s=parseFloat(window.getComputedStyle(n).getPropertyValue("--smart-tooltip-arrow-width"))||0;let a=n._positionTop(e,t,o),p=o.nonStaticParent,d=n.offsetWidth/2-s,c=0,f=0,m=a.left,h=i.right-(m+f+n.offsetWidth),u=Math.min(0,h);if(m<=0&&h>0&&(m=Math.min(e,m+h)),u<=0&&(u=Math.sign(u)*(Math.abs(u)+i.right-(e+o.width))),p){const e=p.getBoundingClientRect();c=e.top,f=e.left}return a.top+c>=i.top?(m<=0&&(m=e),t=a.top,{left:e=Math.max(i.left-f,m+u),top:t,translate:Math.max(-d,Math.min(d,a.left-e))}):(a=n._positionBottom(e,t,o),a.top+n.offsetHeight+c<=i.bottom?(m=a.left,m<=0&&(m=e),t=a.top,{left:e=Math.max(i.left-f,m+u),top:t,translate:Math.max(-d,Math.min(d,a.left-e))}):(a=n._positionLeft(e,t,o),t=a.top,d=n.offsetHeight/2-s,t=Math.max(i.top-c,a.top+Math.min(0,i.bottom-(a.top+c+n.offsetHeight))),a.left+f>=i.left?e=a.left:(a=n._positionRight(e,t,o),e=a.left+n.offsetWidth+f<=i.right?a.left:i.right-n.offsetWidth),{left:e,top:t,translate:Math.max(-d,Math.min(d,a.top-t))}))}_getRelativeParentOffset(e){const t=this,o=t._ownerElement;let n=t._getElementAndOwnerRelation(o),l=0,i=0;if(!e)return{left:i,top:l};for(;e!==n;)l+=n.offsetTop,i+=n.offsetLeft,n=t._getElementAndOwnerRelation(n);return{left:i,top:l}}_positionTop(e,t,o){const n=this,l=n._getRelativeParentOffset(o.nonStaticParent);if(n.set("arrowDirection","bottom"),null===o.nonStaticParent)return t=o.top+window.scrollY-n.offsetHeight,{left:(e=n._getAlignmentOffset(o.left,n.offsetWidth,o.width)+window.scrollX)+l.left,top:t+l.top};if(n._isParentPositionStatic){if(t=n._ownerElement.offsetTop-n.offsetHeight,e=n._getAlignmentOffset(n._ownerElement.offsetLeft,n.offsetWidth,o.width),n._ownerElement instanceof SVGElement){const o=n._ownerElement.getBoundingClientRect(),l=n._ownerElement.parentNode.getBoundingClientRect();t=o.top-l.top-n.offsetHeight/2,e=n._getAlignmentOffset(o.left,n.offsetWidth,l.left)}return{left:e+l.left,top:t+l.top}}if(n._ownerElement instanceof SVGElement&&n._ownerElement.parentElement){const o=n._ownerElement.getBoundingClientRect(),i=n._ownerElement.parentNode.getBoundingClientRect();return t=o.top-i.top-n.offsetHeight,{left:(e=n._getAlignmentOffset(o.left-i.left,n.offsetWidth,o.width))+l.left,top:t+l.top}}return t-=n.offsetHeight,{left:(e=n._getAlignmentOffset(e,n.offsetWidth,o.width))+l.left,top:t+l.top}}_positionBottom(e,t,o){const n=this,l=n._getRelativeParentOffset(o.nonStaticParent);return n.set("arrowDirection","top"),null===o.nonStaticParent?(t=o.top+window.scrollY+o.height,{left:(e=n._getAlignmentOffset(o.left,n.offsetWidth,o.width)+window.scrollX)+l.left,top:t+l.top}):n._isParentPositionStatic?(t=n._ownerElement.offsetTop+o.height,{left:(e=n._getAlignmentOffset(n._ownerElement.offsetLeft,n.offsetWidth,o.width))+l.left,top:t+l.top}):(t+=o.height,{left:(e=n._getAlignmentOffset(e,n.offsetWidth,o.width))+l.left,top:t+l.top})}_getAlignmentOffset(e,t,o){switch(this.align){case"left":return e;case"right":return e-t+o;default:return e-t/2+o/2}}_positionLeft(e,t,o){const n=this,l=n._getRelativeParentOffset(o.nonStaticParent);return n.set("arrowDirection","right"),null===o.nonStaticParent?(t=o.top+window.scrollY+o.height/2-n.$.content.offsetHeight/2,{left:(e=o.left+window.scrollX-n.offsetWidth)+l.left,top:t+l.top}):n._isParentPositionStatic?(t=n._ownerElement.offsetTop+o.height/2-n.$.content.offsetHeight/2,{left:(e=n._ownerElement.offsetLeft-n.offsetWidth)+l.left,top:t+l.top}):(t=t+o.height/2-n.$.content.offsetHeight/2,{left:(e-=n.offsetWidth)+l.left,top:t+l.top})}_positionRight(e,t,o){const n=this,l=n._getRelativeParentOffset(o.nonStaticParent);return n.set("arrowDirection","left"),null===o.nonStaticParent?(t=o.top+window.scrollY+o.height/2-n.$.content.offsetHeight/2,{left:(e=o.left+window.scrollX+o.width)+l.left,top:t+l.top}):n._isParentPositionStatic?(t=n._ownerElement.offsetTop+o.height/2-n.$.content.offsetHeight/2,{left:(e=n._ownerElement.offsetLeft+o.width)+l.left,top:t+l.top}):(t=t+o.height/2-n.$.content.offsetHeight/2,{left:(e+=o.width)+l.left,top:t+l.top})}_eventsHandler(e){const t=this;t.disabled||t.readonly||("click"!==e.type?"mouseenter"===e.type||"focus"===e.type?this.open():this.close():t.visible?this.close():this.open())}_handleEventListeners(e){const t=this;if(t._oldOwnerElement&&"manual"!==t.openMode){let e=t._oldOwnerElement.getAttribute("aria-describedby");e&&"tooltip"===t.getAttribute("role")&&(e===t.id?t._oldOwnerElement.removeAttribute("aria-describedby"):(e=e.replace(" "+t.id,""),e=e.replace(t.id+" ",""),t._oldOwnerElement.setAttribute("aria-describedby",e))),t._oldOwnerElement.$.unlisten("mouseenter.tooltip"),t._oldOwnerElement.$.unlisten("mouseleave.tooltip"),t._oldOwnerElement.$.unlisten("focus.tooltip"),t._oldOwnerElement.$.unlisten("blur.tooltip"),t._oldOwnerElement.$.unlisten("click.tooltip"),t._oldOwnerElement=null}if(t._ownerElement){if(e)switch(e){case"hover":t._ownerElement.$.unlisten("mouseenter.tooltip"),t._ownerElement.$.unlisten("mouseleave.tooltip");break;case"focus":t._ownerElement.$.unlisten("focus.tooltip"),t._ownerElement.$.unlisten("blur.tooltip");break;case"click":t._ownerElement.$.unlisten("click.tooltip")}if("manual"!==t.openMode)switch(t._ownerElement instanceof Smart.BaseElement||(t._ownerElement.$=Smart.Utilities.Extend(t._ownerElement)),t.openMode){case"hover":t._ownerElement.$.listen("mouseenter.tooltip",t._eventsHandler.bind(t)),t._ownerElement.$.listen("mouseleave.tooltip",t._eventsHandler.bind(t));break;case"focus":t._ownerElement.$.listen("focus.tooltip",t._eventsHandler.bind(t)),t._ownerElement.$.listen("blur.tooltip",t._eventsHandler.bind(t));break;case"click":t._ownerElement.$.listen("click.tooltip",t._eventsHandler.bind(t))}}}_handleResize(){const e=this;function t(){e._applyPosition()}"click"===e.openMode?window.addEventListener("resize",t):window.removeEventListener("resize",t)}_handleSelector(e,t){const o=this;if(t&&t.removeAttribute&&t.removeAttribute("aria-describedby"),"string"==typeof e)o._ownerElement=e.length>0?document.getElementById(e):void 0;else if(e&&e.nodeType===Node.ELEMENT_NODE)o._ownerElement=e;else{if(null===e)return void(o._ownerElement=void 0);o.error(o.localize("invalidSelector",{elementType:o.nodeName.toLowerCase(),property:"selector"}))}if(!o._ownerElement||"tooltip"!==o.getAttribute("role"))return;if(!o.value)return;const n=o._ownerElement?o._ownerElement.getAttribute("aria-describedby"):null;n?n.indexOf(o.id)<0&&o._ownerElement.setAttribute("aria-describedby",n+" "+o.id):o._ownerElement.setAttribute("aria-describedby",o.id)}_handleTemplate(e){const t=this;let o=t.tooltipTemplate;if(e&&(t.$.content.innerHTML=t.value?t.value:""),null===o||!o)return;if("function"==typeof t.tooltipTemplate)return void t.tooltipTemplate(t.$.content,{value:t.value});if(!("content"in document.createElement("template")))return void t.error(t.localize("htmlTemplateNotSuported",{elementType:t.nodeName.toLowerCase()}));if(o=document.getElementById(o),null===o||!("content"in o))return void t.error(t.localize("invalidTemplate",{elementType:t.nodeName.toLowerCase(),property:"template"}));const n=o.content,l=n.childNodes.length,i=/{{\w+}}/g;let r,s=[];for(let e=0;e<l;e++)for(r=i.exec(n.childNodes[e].innerHTML);r;)s.push({childNodeIndex:e,bindingString:r[0]}),r=i.exec(n.childNodes[e].innerHTML);const a=s.length;let p,d,c=document.importNode(o.content,!0);for(let e=0;e<a;e++){p=c.childNodes[s[e].childNodeIndex],d=s.length;for(let o=0;o<d;o++)p.innerHTML=p.innerHTML.replace(s[e].bindingString,t.value)}t.$.content.innerHTML="";for(let e=0;e<c.childNodes.length;e++)c.childNodes[e].outerHTML&&(t.$.content.innerHTML+=c.childNodes[e].outerHTML)}});

/* Smart HTML Elements v5.1.0 (2019-Dec) 
Copyright (c) 2011-2019 jQWidgets. 
License: https://htmlelements.com/license/ */

Smart.Utilities.Assign("Grid.Pager",class{_refreshPaging(a){const b=this;requestAnimationFrame(()=>{b._refreshLayout(),b._refreshSelection(),a||(b._initializeRowElements(),b._refreshLayout()),b.dataSource&&b.dataSource.virtualDataSource?b._virtualDataRequest(a?"pageIndexChange":"pageSizeChange"):b._recycle(!1);const c=b.paging.pageIndex*b.paging.pageSize,d=c+b.paging.pageSize;b.$.fireEvent("page",{data:{first:c,last:d,size:d-c}})})}_refreshPagesCount(){const a=this,b=a.$.headerPager.querySelector("smart-pager"),c=function(){const b=a.getVisibleRows();let c=b.length;if(a.rowHierarchy){c=0;for(let a=0;a<b.length;a++){const d=b[a];0!==d.level||d.parent||c++}a.dataSource.virtualDataSourceLength!==void 0&&(c=a.dataSource.virtualDataSourceLength)}return Math.ceil(c/a.paging.pageSize)}();b&&(b.pagesCount=c);const d=a.$.footerPager.querySelector("smart-pager");b&&(d.pagesCount=c),a.paging.pageIndex>c&&(a.paging.pageIndex=c-1,a._refreshPaging(a.paging.pageIndex))}_renderPagers(){const a=this;a.pager.visible&&requestAnimationFrame(()=>{const b=document.createElement("smart-pager"),c=document.createElement("smart-pager");a.$.headerPager.innerHTML="",a.$.footerPager.innerHTML="",a.$.headerPager.appendChild(b),a.$.footerPager.appendChild(c);const d=function(b){const c=b.messages[a.locale];c||(b.messages[a.locale]={}),Object.assign(b.messages[a.locale],{firstButton:a.localize("pagerFirstButton"),lastButton:a.localize("pagerLastButton"),previousButton:a.localize("pagerPreviousButton"),nextButton:a.localize("pagerNextButton"),navigateToLabel:a.localize("pagerNavigateToLabel"),pageSizeLabel:a.localize("pagerPageSizeLabel"),navigateToInputPlaceholder:a.localize("pagerNavigateToInputPlaceholder"),ellipsis:a.localize("pagerEllipsis"),summaryString:a.localize("pagerSummaryString"),summaryPrefix:a.localize("pagerSummaryPrefix"),summarySuffix:a.localize("pagerSummarySuffix")})},e=function(){const b=a.getVisibleRows();let c=b.length;if(a.rowHierarchy){c=0;for(let a=0;a<b.length;a++){const d=b[a];0!==d.level||d.parent||c++}a.dataSource.virtualDataSourceLength!==void 0&&(c=a.dataSource.virtualDataSourceLength)}return Math.ceil(c/a.paging.pageSize)},f=function(d,f){const g=f+"GridPager";d.setAttribute("smart-id",g),a.$[g]=d,a["$"+g]=Smart.Utilities.Extend(d),d.beginUpdate(),a.addPropertyBinding("[[pager_navigationButtons_position]]","navigationButtonsPosition",d),a.addPropertyBinding("[[pager_navigationButtons_firstLastButtons_visible]]","showFirstLastNavigationButtons",d),a.addPropertyBinding("[[pager_navigationButtons_prevNextButtons_visible]]","showPrevNextNavigationButtons",d),a.addPropertyBinding("[[pager_navigationButtons_labels_visible]]","showNavigationButtonLabels",d),a.addPropertyBinding("[[pager_pageIndexSelectors_visible]]","showPageIndexSelectors",d),a.addPropertyBinding("[[pager_pageIndexSelectors_dataSource]]","pageIndexSelectors",d),a.addPropertyBinding("[[pager_summary_visible]]","showSummary",d),a.addPropertyBinding("[[pager_summary_position]]","summaryPosition",d),a.addPropertyBinding("[[pager_navigationInput_visible]]","showNavigationInput",d),a.addPropertyBinding("[[pager_navigationInput_position]]","navigationInputPosition",d),a.addPropertyBinding("[[pager_pageSizeSelector_visible]]","showPageSizeSelector",d),a.addPropertyBinding("[[pager_pageSizeSelector_dataSource]]","pageSizeSelectorDataSource",d),a.addPropertyBinding("[[pager_pageSizeSelector_position]]","pageSizeSelectorPosition",d),a.addPropertyBinding("[[pager_autoEllipsis]]","autoEllipsis",d),a.addPropertyBinding("[[!paging_enabled]]","disabled",d),a.addPropertyBinding("{{paging_pageIndex}}","pageIndex",d),a.addPropertyBinding("{{paging_pageSize}}","pageSize",d),d.pagesCount=e(),d.$.pageSizeSelector.dropDownAppendTo="body",d.$.pageSizeSelector.selectedIndexes=[0],a["$"+g].listen("change",function(f){d.pagesCount=e(),a.paging.pageIndex>d.pagesCount&&(a.paging.pageIndex=d.pagesCount-1),b.refresh(),c.refresh();const g=f.detail&&f.detail.index!==void 0||f.target.value!==void 0;a._refreshPaging(g)}),d.endUpdate()};f(b,"header"),f(c,"footer"),d(b),d(c)})}});
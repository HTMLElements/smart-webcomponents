
<<<<<<< HEAD
/* Smart HTML Elements v5.1.0 (2019-Dec) 
=======
/* Smart HTML Elements v4.6.0 (2019-Oct) 
>>>>>>> origin/master
Copyright (c) 2011-2019 jQWidgets. 
License: https://htmlelements.com/license/ */

Smart("smart-slider",class extends Smart.Tank{static get properties(){return{enableMouseWheelAction:{value:!1,type:"boolean"},orientation:{value:"horizontal",allowedValues:["horizontal","vertical"],type:"string",defaultReflectToAttribute:!0},rangeSlider:{value:!1,type:"boolean"},showButtons:{value:!1,type:"boolean"},values:{value:["0","100"],type:"array"}}}static get listeners(){return{"track.down":"_trackDownHandler","thumb.down":"_thumbDownHandler","secondThumb.down":"_thumbDownHandler","thumb.mouseleave":"_thumbMoveMouseleaveHandler","secondThumb.mouseleave":"_thumbMoveMouseleaveHandler","thumb.move":"_thumbMoveMouseleaveHandler","secondThumb.move":"_thumbMoveMouseleaveHandler","document.move":"_documentMoveHandler","document.up":"_documentUpHandler","leftButton.click":"_spinButtonClickHandler","rightButton.click":"_spinButtonClickHandler",keydown:"_keydownHandlerSlider",keyup:"_keyupHandlerSlider",resize:"_resizeAndStyleChangedHandler",styleChanged:"_resizeAndStyleChangedHandler","document.selectstart":"_selectStartHandler",wheel:"_wheelHandler"}}static get requires(){return{"Smart.RepeatButton":"smart.button.js"}}static get styleUrls(){return["smart.slider.css","smart.button.css"]}template(){return"<div id=\"container\" class=\"smart-container\" role=\"presentation\">\n                <div id=\"scaleNear\" class=\"smart-scale smart-scale-near\" role=\"presentation\" aria-hidden=\"true\"></div>\n                <div id=\"trackContainer\" class=\"smart-track-container\" role=\"presentation\">\n                    <smart-repeat-button id=\"leftButton\" class=\"smart-spin-button\" animation=\"[[animation]]\" unfocusable>\n                        <div id=\"leftArrow\" class=\"smart-arrow\" role=\"presentation\" aria-hidden=\"true\"></div>\n                    </smart-repeat-button>\n                    <div id=\"track\" class=\"smart-track\" role=\"presentation\">\n                        <div id=\"fill\" class=\"smart-value\" role=\"presentation\"></div>\n                        <div id=\"trackTicksContainer\" class=\"smart-track-ticks-container smart-hidden\" role=\"presentation\"></div>\n                        <div id=\"thumb\" class=\"smart-thumb\" role=\"presentation\">\n                            <span id=\"thumbLabel\" class=\"smart-thumb-label\" role=\"presentation\"></span>\n                            <div id=\"tooltip\" class=\"smart-tooltip\" role=\"tooltip\">\n                                <div id=\"tooltipContent\" class=\"smart-tooltip-content smart-unselectable\" role=\"presentation\"></div>\n                            </div>\n                        </div>\n                        <div id=\"secondThumb\" class=\"smart-thumb\" role=\"presentation\">\n                            <span id=\"secondThumbLabel\" class=\"smart-thumb-label\" role=\"presentation\"></span>\n                            <div id=\"secondTooltip\" class=\"smart-tooltip\" role=\"tooltip\">\n                                <div id=\"secondTooltipContent\" class=\"smart-tooltip-content smart-unselectable\" role=\"presentation\"></div>\n                            </div>\n                        </div>\n                    </div>\n                    <smart-repeat-button id=\"rightButton\" class=\"smart-spin-button\" animation=\"[[animation]]\" unfocusable>\n                        <div id=\"rightArrow\" class=\"smart-arrow\" role=\"presentation\" aria-hidden=\"true\"></div>\n                    </smart-repeat-button>\n                </div>\n                <div id=\"scaleFar\" class=\"smart-scale smart-scale-far\" role=\"presentation\" aria-hidden=\"true\"></div>\n                <input id=\"hiddenInput\" type=\"hidden\" name=\"[[name]]\">\n            </div>"}_createElement(){const e=this,t="numeric"===e.mode;if(e.$.tooltip.id||(e.$.tooltip.id=e.id+"Tooltip",e.$.secondTooltip.id=e.id+"SecondTooltip"),e.setAttribute("aria-describedby",e.$.tooltip.id+" "+e.$.secondTooltip.id),e._renderingSuspended||(t?e._redefineProperty("values"):!t&&e._handleDateScale()),e._setSettingsObject(),e._setDrawVariables(),e._getLayoutType(),e._numericProcessor=new Smart.Utilities.NumericProcessor(e,"scaleType"),e._numberRenderer=new Smart.Utilities.NumberRenderer,!e._isVisible())return void(e._renderingSuspended=!0);e._renderingSuspended=!1,e._setInitialComponentDisplay(),e._measurements={},e._getMeasurements(),e._wordLengthNumber=e._numericProcessor.getWordLength(e.wordLength);const a=e._valuesHandler=e.rangeSlider?new Smart.Utilities.SliderMultipleValueHandler(e):new Smart.Utilities.SliderSingleValueHandler(e);t&&(e._getEventValue=function(t){return e._valuesHandler.getValue(t)}),e._validateInitialPropertyValues(),e._setTicksAndInterval(),a.validate(!0),a.updateTooltipValue(),window.requestAnimationFrame(function(){e.$thumb.addClass("enable-animation"),e.$secondThumb.addClass("enable-animation"),e.$fill.addClass("enable-animation")}),e._setFocusable(),e._makeThumbAccessible(),e.$.hiddenInput.value=e._getEventValue(),e.setAttribute("aria-orientation",e.orientation),e.setAttribute("aria-valuenow",e._getEventValue(!0))}val(e){const t=this,a=t._valuesHandler;return void 0===e?t._getEventValue():void("date"===t.mode&&(t.rangeSlider?(e[0]=Smart.Utilities.DateTime.validateDate(e[0]),e[1]=Smart.Utilities.DateTime.validateDate(e[1]),e[0]=e[0].getTimeStamp(),e[1]=e[1].getTimeStamp()):(e=Smart.Utilities.DateTime.validateDate(e),e=e.getTimeStamp())),a.areDifferent(e)&&a.validate(!1,e,!0))}getOptimalSize(){var e=Math.max;const t=this;if(t._renderingSuspended)return{width:0,height:0};const a=window.getComputedStyle(t),i=window.getComputedStyle(t.$.trackContainer);let o,l,n,r,s,d,m,u,c=0;return o="all"===t.labelsVisibility?t._numericProcessor._longestLabelSize:"endPoints"===t.labelsVisibility?e(t._tickIntervalHandler.labelsSize.minLabelOtherSize,t._tickIntervalHandler.labelsSize.maxLabelOtherSize):0,"horizontal"===t.orientation?(c+=parseFloat(i.marginTop)+parseFloat(i.marginBottom)+t.$.track.offsetHeight,("near"===t.scalePosition||"both"===t.scalePosition)&&(c+=o,n=t.$.scaleNear.getElementsByClassName("smart-label"),r=n[0],s=n[n.length-1],c+=parseFloat(window.getComputedStyle(r).bottom)),("far"===t.scalePosition||"both"===t.scalePosition)&&(c+=o,n=t.$.scaleFar.getElementsByClassName("smart-label"),r=n[0],s=n[n.length-1],c+=parseFloat(window.getComputedStyle(r).top)),c+=parseFloat(a.paddingTop)+parseFloat(a.paddingBottom),l=t.offsetWidth,"none"!==t.scalePosition&&(d=r.getBoundingClientRect(),m=s.getBoundingClientRect(),u=d.left+r.offsetWidth-m.left,0<u&&(l=r.offsetWidth+s.offsetWidth+e(10,t.$.thumb.offsetWidth))),{width:l,height:c}):(c+=parseFloat(i.marginLeft)+parseFloat(i.marginRight)+t.$.track.offsetWidth,("near"===t.scalePosition||"both"===t.scalePosition)&&(c+=o,n=t.$.scaleNear.getElementsByClassName("smart-label"),r=n[0],s=n[n.length-1],c+=parseFloat(window.getComputedStyle(r).right)),("far"===t.scalePosition||"both"===t.scalePosition)&&(c+=o,n=t.$.scaleFar.getElementsByClassName("smart-label"),r=n[0],s=n[n.length-1],c+=parseFloat(window.getComputedStyle(r).left)),c+=parseFloat(a.paddingLeft)+parseFloat(a.paddingRight),l=t.offsetHeight,"none"!==t.scalePosition&&(d=r.getBoundingClientRect(),m=s.getBoundingClientRect(),u=d.top+r.offsetHeight-m.top,0<u&&(l=r.offsetHeight+s.offsetHeight+e(10,t.$.thumb.offsetHeight))),{width:c,height:l})}propertyChangedHandler(e,t,a){function i(){o._setTicksAndInterval(),l.validate(!1,l.getValue(),!0)}const o=this;if(!o._isVisible()||o._renderingSuspended)return void(o._renderingSuspended=!0);if(-1!==["disabled","mode","readonly","showThumbLabel","tooltipPosition","unfocusable","validation"].indexOf(e))return void super.propertyChangedHandler(e,t,a);let l=o._valuesHandler;if("values"!==e&&a!=t||"values"===e&&(a[0]!=t[0]||a[1]!==t[1]))switch(e){case"coerce":if(a){const e=l.getValue();l.validate(!1,e.slice(0),!0),o._valueBeforeCoercion=e}else void 0!==o._valueBeforeCoercion&&l.validate(!1,o._valueBeforeCoercion.slice(0),!0);break;case"customInterval":case"customTicks":super.propertyChangedHandler(e,t,a),o.customInterval&&l.validate(!1,l.getValue(),!0);break;case"dateLabelFormatString":"date"===o.mode&&i();break;case"decimalSeparator":case"scientificNotation":if("date"===o.mode)return;i();break;case"interval":o._numericProcessor.validateInterval(a),l.validate(!1,l.getValue(),!0);break;case"inverted":case"rightToLeft":o._getLayoutType(),o._normalLayout&&(o.$.fill.style[o._settings.margin]="0px"),i();break;case"labelFormatFunction":case"showUnit":case"unit":i();break;case"labelsVisibility":case"ticksVisibility":return;case"logarithmicScale":if("date"===o.mode)return void(o.logarithmicScale=!1);o._validateMinMax("both"),i();break;case"min":case"max":"date"===o.mode&&(delete o._dateInterval,o[e]=Smart.Utilities.DateTime.validateDate(a).getTimeStamp()),o._validateMinMax(e,!1,t),i();break;case"orientation":o.$.container.removeAttribute("style"),o.$.trackContainer.removeAttribute("style"),o.$.fill.removeAttribute("style"),o.$.thumb.removeAttribute("style"),o.$.secondThumb.removeAttribute("style"),o._setSettingsObject(),o._getLayoutType(),o._getMeasurements(),i(),"horizontal"===a?(o.$leftArrow.removeClass("smart-arrow-up"),o.$rightArrow.removeClass("smart-arrow-down"),o.$leftArrow.addClass("smart-arrow-left"),o.$rightArrow.addClass("smart-arrow-right")):(o.$leftArrow.removeClass("smart-arrow-left"),o.$rightArrow.removeClass("smart-arrow-right"),o.$leftArrow.addClass("smart-arrow-up"),o.$rightArrow.addClass("smart-arrow-down")),o.setAttribute("aria-orientation",a);break;case"precisionDigits":case"significantDigits":if("date"===o.mode)return;"precisionDigits"===e&&"integer"===o.scaleType&&o.error(o.localize("noInteger",{elementType:o.nodeName.toLowerCase(),property:e})),"significantDigits"===e&&null!==o.precisionDigits?o.precisionDigits=null:"precisionDigits"==e&&null!==o.significantDigits&&(o.significantDigits=null),i();break;case"rangeSlider":a?(o.values=[o.min,o.value],o._drawValues=[o._drawMin,o._drawValue],"date"===o.mode&&(o._valueDate=[o._minDate.clone(),o._valueDate]),void 0!==o._valueBeforeCoercion&&(o._valueBeforeCoercion=[o.min,o._valueBeforeCoercion]),l=o._valuesHandler=new Smart.Utilities.SliderMultipleValueHandler(o)):(o.value=o.values[1],o._drawValue=o._drawValues[1],"date"===o.mode&&(o._valueDate=o._valueDate[1]),void 0!==o._valueBeforeCoercion&&(o._valueBeforeCoercion=o._valueBeforeCoercion[1]),l=o._valuesHandler=new Smart.Utilities.SliderSingleValueHandler(o),o.$.fill.style.marginTop=0,o.$.fill.style.marginLeft=0),l.validate(!1,l.getValue(),!0);break;case"scalePosition":o._setInitialComponentDisplay(),i();break;case"scaleType":if("date"===o.mode)return void(o.scaleType="integer");o._numericProcessor=new Smart.Utilities.NumericProcessor(o,"scaleType"),o._validateMinMax("both"),o._setTicksAndInterval(),l.validate(!0);break;case"showButtons":a?(o.$leftButton.removeClass("smart-hidden"),o.$rightButton.removeClass("smart-hidden")):(o.$leftButton.addClass("smart-hidden"),o.$rightButton.addClass("smart-hidden")),o._setTicksAndInterval(),l.moveThumbBasedOnValue(l.getDrawValue(),void 0,!0);break;case"showTooltip":super.propertyChangedHandler(e,t,a),a||(o.$tooltip.addClass("smart-hidden"),o.$secondTooltip.addClass("smart-hidden"));break;case"theme":super.propertyChangedHandler(e,t,a),i();break;case"ticksPosition":"scale"===a?(o.$trackTicksContainer.addClass("smart-hidden"),o.$.trackTicksContainer.innerHTML=""):o.$trackTicksContainer.removeClass("smart-hidden"),o._setTicksAndInterval();break;case"value":case"values":if("value"===e&&o.rangeSlider||"values"===e&&!o.rangeSlider)return;if(o[e]=t,"date"===o.mode)if("value"===e){if(a=Smart.Utilities.DateTime.validateDate(a),a=a.getTimeStamp(),o.value=a,0===a.compare(t))return;}else if(a[0]=Smart.Utilities.DateTime.validateDate(a[0]),a[1]=Smart.Utilities.DateTime.validateDate(a[1]),a[0]=a[0].getTimeStamp(),a[1]=a[1].getTimeStamp(),o.values=a,0===a[0].compare(t[0])&&0===a[1].compare(t[1]))return;l.validate(!1,a,!0);break;case"wordLength":if("date"===o.mode)return void(o.wordLength="uint64");o._wordLengthNumber=o._numericProcessor.getWordLength(a),o._validateMinMax("both"),i();}else"string"!=typeof a&&"string"==typeof t&&(o[e]=t)}_addMovedThumbClass(){const e=this;e.rangeSlider&&(e._movedThumb.$.addClass("smart-moved-thumb"),e._movedThumb===e.$.thumb?e.$secondThumb.removeClass("smart-moved-thumb"):e.$thumb.removeClass("smart-moved-thumb"))}_setInitialComponentDisplay(){super._setInitialComponentDisplay();const e=this;e.$secondTooltip.addClass("smart-hidden"),e.showButtons||(e.$leftButton.addClass("smart-hidden"),e.$rightButton.addClass("smart-hidden"))}_getMeasurements(){const e=this,t=e._measurements,a=e.$.track,i=e.$.thumb;return!e._isVisible()||e._renderingSuspended?void(e._renderingSuspended=!0):void("horizontal"===e.orientation?(t.trackWidth=a.offsetHeight,t.thumbSize=i.offsetWidth,t.borderWidth=parseFloat(window.getComputedStyle(e.$.track).borderLeftWidth)):(t.trackWidth=a.offsetWidth,t.thumbSize=i.offsetHeight,t.borderWidth=parseFloat(window.getComputedStyle(e.$.track).borderTopWidth)),t.halfThumbSize=t.thumbSize/2)}_layout(){var e=Math.max;const t=this,a=t._measurements,i=t.$.container.style,o=a.halfThumbSize,l=t._tickIntervalHandler.labelsSize;let n,r,s,d;if("none"===t.scalePosition?(n=0,r=0):(n=l.minLabelSize/2,r=l.maxLabelSize/2),!t.showButtons)s=e(o,n)+"px",d=e(o,r)+"px";else{const a=t.$.leftButton[t._settings.size],i=a+o;s=e(n-i,0)+"px",d=e(r-i,0)+"px"}"horizontal"===t.orientation?(!t.inverted&&!t.rightToLeft||t.rightToLeft&&t.inverted?(i.paddingLeft=s,i.paddingRight=d):(i.paddingLeft=d,i.paddingRight=s),a.trackLength=t.$.track.clientWidth,t.$leftArrow.addClass("smart-arrow-left"),t.$rightArrow.addClass("smart-arrow-right")):(t.inverted?(i.paddingBottom=d,i.paddingTop=s):(i.paddingBottom=s,i.paddingTop=d),a.trackLength=t.$.track.clientHeight,t.$leftArrow.addClass("smart-arrow-up"),t.$rightArrow.addClass("smart-arrow-down"))}_trackDownHandler(e){const t=this,a=t.mechanicalAction;return t.disabled||t.readonly||!t.rangeSlider&&e.target===t.$.thumb?void 0:t._stopTrackDownHandler?void(t._stopTrackDownHandler=!1):void("switchWhileDragging"!==a&&(t._valueAtDragStart=t._valuesHandler.getValue()),t._getTrackStartAndEnd(),t._valuesHandler.setActiveThumbOnTrackClick(e),t._moveThumbBasedOnCoordinates(e,!0,"switchWhenReleased"!==a),t._thumbDragged=!0,t.setAttribute("dragged",""),t.showTooltip&&t._movedTooltip.removeClass("smart-hidden"))}_trackMoveHandler(){}_thumbDownHandler(e){const t=this;t.disabled||t.readonly||(t._getTrackStartAndEnd(),(e[t._settings.page]<t._trackStart||e[t._settings.page]>t._trackEnd)&&(t._stopTrackDownHandler=!0),"switchWhileDragging"!==t.mechanicalAction&&(t._valueAtDragStart=t._valuesHandler.getValue()),window.getSelection().removeAllRanges(),t._thumbDragged=!0,t.setAttribute("dragged",""),t.$track.addClass("smart-dragged"),t._movedThumb=e.target,t._addMovedThumbClass(),t._movedTooltip=t.$tooltip,t.rangeSlider&&(t._movedThumb===t.$.thumb?(t._staticThumb=t.$.secondThumb,t.$secondTooltip.addClass("smart-hidden")):(t._staticThumb=t.$.thumb,t._movedTooltip=t.$secondTooltip,t.$tooltip.addClass("smart-hidden"))),t.showTooltip&&t._movedTooltip.removeClass("smart-hidden"),e.stopPropagation())}_thumbMoveMouseleaveHandler(e){var t=Math.pow;const a=this;if(!(a.disabled||a.readonly)){const a=e.target;if("move"===e.type){const i=a.getBoundingClientRect(),o=window.scrollX||window.pageXOffset,l=window.scrollY||window.pageYOffset,n=(i.left+i.right)/2+o,r=(i.top+i.bottom)/2+l,s=t(i.width/2,2);if(t(e.pageX-n,2)+t(e.pageY-r,2)>s)return;a.setAttribute("hover","")}else a.removeAttribute("hover")}}_documentMoveHandler(e){const t=this;t._thumbDragged&&(t.$thumb.removeClass("enable-animation"),t.$secondThumb.removeClass("enable-animation"),t.$fill.removeClass("enable-animation"),t._moveThumbBasedOnCoordinates(e,!0,"switchWhenReleased"!==t.mechanicalAction))}_documentUpHandler(e,t){const a=this;a._thumbDragged&&(a.$thumb.addClass("enable-animation"),a.$secondThumb.addClass("enable-animation"),a.$fill.addClass("enable-animation"),!t&&("switchUntilReleased"===a.mechanicalAction?a._valuesHandler.validate(!1,a._valueAtDragStart):"switchWhenReleased"===a.mechanicalAction&&a._moveThumbBasedOnCoordinates(e,!0,!0)),a.showTooltip&&a._movedTooltip.addClass("smart-hidden"),a._thumbDragged=!1,a.removeAttribute("dragged"),a._makeThumbAccessible(),a._movedThumb=void 0,a.$track.removeClass("smart-dragged"))}_spinButtonClickHandler(e){const t=this;if(t.disabled||t.readonly)return;let a;a=t.$.leftButton.contains(e.target)===t._normalLayout?"subtract":"add",t._valuesHandler.incrementOrDecrement(a)}_keydownHandlerSlider(e){const t=this,a=e.key;return"Escape"===a&&t._thumbDragged&&"switchWhenReleased"===t.mechanicalAction?(t._documentUpHandler(void 0,!0),void t._valuesHandler.validate(!1,t._valueAtDragStart)):void(-1!==["ArrowDown","ArrowLeft","ArrowRight","ArrowUp"].indexOf(a)&&!t.coerce&&(t.$thumb.removeClass("enable-animation"),t.$secondThumb.removeClass("enable-animation"),t.$fill.removeClass("enable-animation"),t._restoreAnimationClass=!0),this._valuesHandler.keydownHandler(e))}_keyupHandlerSlider(){const e=this;e._restoreAnimationClass&&(e.$thumb.addClass("enable-animation"),e.$secondThumb.addClass("enable-animation"),e.$fill.addClass("enable-animation"))}_resizeAndStyleChangedHandler(e){const t=this,a=t._valuesHandler;if(!t._isVisible())return void(t._renderingSuspended=!0);if(t._renderingSuspended)return void t._createElement();if(!t._renderingSuspended&&(t._getMeasurements(),t._setTicksAndInterval(),a.validate(!1,a.getValue(),!0),"styleChanged"===e.type)){const a=e.detail.styleProperties;if(a["font-size"]||a["font-family"]||a["font-style"]||a["font-weight"]){const e=t.getOptimalSize();t.style.width=e.width+"px",t.style.height=e.height+"px"}}}_moveThumbBasedOnCoordinates(e,t,a){const i=this,o=i._numericProcessor,l=i._trackStart,n=i._settings.margin;let r=e[i._settings.page];t&&(r=i._valuesHandler.restrictThumbCoordinates(r,l,i._trackEnd));let s=o.pxToValue(r);i.rangeSlider&&i._movedThumb===i.$.thumb&&1===o.compare(s,i.values[1],!0)&&(s=o.createDescriptor(i.values[1]));let d=s;i.logarithmicScale?(s=o.getCoercedValue(Math.log10(s)),d=parseFloat(Math.pow(10,s).toFixed(11))):(s=o.getCoercedValue(s),d=s),r=o.valueToPx(s)+l;const m=r-l;i._movedThumb.style[n]=m-i._measurements.halfThumbSize+"px",i._valuesHandler.updateFillSizeAndPosition(m,n,d,!0,a),Smart.Utilities.Core.isMobile&&e.originalEvent&&(e.originalEvent.stopPropagation(),e.originalEvent.preventDefault())}_moveThumbBasedOnValue(e,t,a,i){const o=this,l=o._numericProcessor.valueToPx(t),n=o._settings.margin;e.style[n]=l-o._measurements.halfThumbSize+"px";const r=o._getSingleActualValue(t);i?o.rangeSlider&&(o._firstPassSize=l):o._valuesHandler.updateFillSizeAndPosition(l,n,r,a,a)}_validate(e,t,a,i){this._valuesHandler.validate(e,t,i)}_updateValue(e){const t=this._valuesHandler;t.updateValue(t.getActualValue(e))}_makeThumbAccessible(){const e=this;e.rangeSlider&&(e.$.thumb[e._settings.offset]===e.$.secondThumb[e._settings.offset]&&!1===e._numericProcessor.compare(e.values[1],e.max)?e.$thumb.addClass("accessible"):e.$thumb.removeClass("accessible"))}_getSingleActualValue(e){return this.logarithmicScale?parseFloat(Math.pow(10,e).toFixed(11)):e.toString()}_coerceCustomInterval(){const e=this;if(e.coerce){const t=e._valueBeforeCoercion;e._valuesHandler.validate(!1,e._valuesHandler.getValue()),e._valueBeforeCoercion=t}}_wheelHandler(e){const t=this;document.activeElement===t&&t.enableMouseWheelAction&&(e.stopPropagation(),e.preventDefault(),0<e.wheelDelta?t._keydownHandlerSlider({key:"ArrowRight",which:39,preventDefault:function(){}}):t._keydownHandlerSlider({key:"ArrowLeft",which:37,preventDefault:function(){}}))}_handleDateScale(){const e=this,t=Smart.Utilities.DateTime;super._handleDateScale(),Object.defineProperty(e,"values",{get:function(){return e.context===e?e.properties.values.value:e._valueDate},set(t){function a(e,t){return t instanceof Smart.Utilities.BigNumber?t.toString():t}const i=e.properties.values.value,o=JSON.stringify(i,a),l=JSON.stringify(t,a);if(o!==l&&(e.properties.values.value=t,e.isReady&&(!e.ownerElement||e.ownerElement&&e.ownerElement.isReady)&&e.context!==e)){const a=e.context;e.context=e,e.propertyChangedHandler("values",i,t),e.context=a}}}),e.rangeSlider&&(e._valueDate=[t.validateDate(e.values[0]),t.validateDate(e.values[1])],e.values=[e._valueDate[0].getTimeStamp(),e._valueDate[1].getTimeStamp()]),e._properties.values.serialize="_serializeValue"}_setTicksAndInterval(){const e=this;e._skipTrackReset?delete e._skipTrackReset:e.$.track.style[e._settings.dimension]=null,super._setTicksAndInterval(),10>e.$.track[e._settings.size]&&(e._skipTrackReset=!0,e.$.track.style[e._settings.dimension]=e.getOptimalSize()[e._settings.dimension]+"px",e._getMeasurements(),e._setTicksAndInterval(),e._valuesHandler.validate(!1,e._valuesHandler.getValue()))}_getLayoutType(){const e=this;super._getLayoutType(),e._normalLayout?(e.$.leftButton.setAttribute("aria-label","Decrement"),e.$.rightButton.setAttribute("aria-label","Increment")):(e.$.leftButton.setAttribute("aria-label","Increment"),e.$.rightButton.setAttribute("aria-label","Decrement"))}}),Smart.Utilities.Assign("SliderSingleValueHandler",class{constructor(e){this.context=e,"date"===e.mode&&(e._getEventValue=function(t,a){let i;return void 0!==a&&(i=Smart.Utilities.DateTime.fromFullTimeStamp(a)),i=e._valueDate.clone(),t?i.toString("f"):i})}applyFunctionToValue(e,t){const a=this,i=a.context;t===void 0&&(t=i.value);const o=e.apply(i,[t]);return o}areDifferent(e){return this.context.value!==e}incrementOrDecrement(e){const t=this.context,a=t._keyIncrementDecrement(e);this.validate(!1,a)}setActiveThumbOnTrackClick(){const e=this.context;e._movedThumb=e.$.thumb,e._addMovedThumbClass(),e._movedTooltip=e.$tooltip}getActualValue(e){return this.context._getSingleActualValue(e)}getCoercedLogarithmicValue(e){const t=this.context;if(t.logarithmicScale){const a=t._numericProcessor.getCoercedValue(Math.log10(e));return this.getActualValue(a)}return e}getDrawValue(){return this.context._drawValue}getValue(){return this.context.value}keydownHandler(e){this.context._keydownHandler(e)}moveThumbBasedOnValue(e,t,a){const i=this.context;if(void 0===e&&(e=i.value),i._moveThumbBasedOnValue(i.$.thumb,e,t),!0!==a){i._drawValue=e;const t=this.getActualValue(e);let a;a=void 0===i._valueNoRangeValidation?t.toString():i._valueNoRangeValidation.toString(),"date"===i.mode&&(i._valueDate=Smart.Utilities.DateTime.fromFullTimeStamp(a)),i.value=a,delete i._valueBeforeCoercion,this.updateTooltipValue(t)}}restrictThumbCoordinates(e,t,a){return e=Math.max(e,t),e=Math.min(e,a),e}updateFillSizeAndPosition(e,t,a,i,o){const l=this.context,n=l.$.fill.style,r=l._settings.dimension;if(l._normalLayout?n[r]=e+"px":(n[r]=l._measurements.trackLength-e+"px",n[t]=e+"px"),i){const e=l.value,t=l._getEventValue(!1,e),i=l._numericProcessor;if(i.compare(i.createDescriptor(a),i.createDescriptor(e))&&(this.updateTooltipValue(a),o)){let e;if(l._drawValue=l.logarithmicScale?Math.log10(a):a,e=void 0===l._valueNoRangeValidation?a.toString():l._valueNoRangeValidation.toString(),"date"===l.mode&&(l._valueDate=Smart.Utilities.DateTime.fromFullTimeStamp(e)),l.value=e,delete l._valueBeforeCoercion,!0!==l._programmaticValueIsSet){const e=l._getEventValue();l.$.hiddenInput.value=e,l.$.fireEvent("change",{value:e,oldValue:t}),l.setAttribute("aria-valuenow",l._getEventValue(!0))}}}}updateTooltipValue(e){const t=this.context;e===void 0&&(e=t.value);const a=t._formatLabel(e);t.$.tooltipContent.innerHTML!==a&&(t.$.tooltipContent.innerHTML=a,t.$.thumbLabel.innerHTML=a)}updateValue(e){const t=this.context,a=t._numericProcessor.createDescriptor(e,!0,!1);t._drawValue=t.logarithmicScale?Math.log10(a):a,this.moveThumbBasedOnValue(t._drawValue,!0)}validate(e,t,a){const i=this.context,o=i._numericProcessor;let l;i._programmaticValueIsSet=a&&"interaction"===i.validation,l=e?i.value:t;let n;i.coerce&&(l=i._numericProcessor.createDescriptor(l,!0,!0,!0)),l=i.logarithmicScale?this.getCoercedLogarithmicValue(l):o.getCoercedValue(l),"strict"===i.validation?(i._valueNoRangeValidation=o.createDescriptor(l,!0,!0,!0),n=i._valueNoRangeValidation):(i._valueNoRangeValidation=o.createDescriptor(l,!0,!0,!1),n=o.validate(i._valueNoRangeValidation,i._minObject,i._maxObject)),e?(i._drawValue=i.logarithmicScale?Math.log10(n):n,l=i._valueNoRangeValidation.toString(),"date"===i.mode&&(i._valueDate=Smart.Utilities.DateTime.fromFullTimeStamp(l)),i.value=l,this.moveThumbBasedOnValue(i._drawValue,void 0,!0)):this.updateValue(n),delete i._valueNoRangeValidation,i._programmaticValueIsSet=!1}}),Smart.Utilities.Assign("SliderMultipleValueHandler",class{constructor(e){this.context=e,"date"===e.mode&&(e._getEventValue=function(t,a,i){const o=[e._valueDate[0].clone(),e._valueDate[1].clone()];return void 0!==a&&(o[i]=Smart.Utilities.DateTime.fromFullTimeStamp(a)),t?`From ${o[0].toString("f")} to ${o[1].toString("f")}`:o})}applyFunctionToValue(e,t){const a=this,i=a.context,o=[];return void 0===t&&(t=i.values),o[0]=e.apply(i,[t[0]]),o[1]=e.apply(i,[t[1]]),o}areDifferent(e){const t=this.context.values;return t[0]!==e[0]||t[1]!==e[1]}incrementOrDecrement(e){const t=this.context,a=t.values.slice(0);let i;i="add"===e?1:0,a[i]=this.keyIncrementDecrement(e,i),this.validate(!1,a)}keydownHandler(e){const t=this.context;if(!(t.disabled||t.readonly)){const a=e.charCode?e.charCode:e.which;if(-1!==[35,36,37,38,39,40].indexOf(a)){e.preventDefault();const i=t.values.slice(0);let o;return 40===a||37===a?(o=this.keyIncrementDecrement("subtract",0),i[0]=o,t._movedThumb=t.$.thumb):38===a||39===a?(o=this.keyIncrementDecrement("add",1),i[1]=o,t._movedThumb=t.$.secondThumb):36===a?(t._drawValues[0]=t._drawMin,i[0]=t.min,t._movedThumb=t.$.thumb):35===a?(t._drawValues[1]=t._drawMax,i[1]=t.max,t._movedThumb=t.$.secondThumb):void 0,this.validate(!1,i),!1}}}keyIncrementDecrement(e,t){const a=this.context;let i,o;if(a.customInterval&&a.coerce)return i=this.getValue()[t],a._keyIncrementDecrement(e,i.toString());if("date"===a.mode)return i=a._valueDate[t],o=i[a._dateIncrementMethod](("add"===e?1:-1)*parseFloat(a.interval),!0),o=o.getTimeStamp(),-1===o.compare(a._drawMin)?new Smart.Utilities.BigNumber(a._drawMin):1===o.compare(a._drawMax)?new Smart.Utilities.BigNumber(a._drawMax):o;const l=a._drawValues[t];return i=a._numericProcessor.createDescriptor(l),o=a._numericProcessor.incrementDecrement(i,e,a._validInterval),a.logarithmicScale&&(a._drawValues[t]=o,o=parseFloat(Math.pow(10,Math.round(o)).toFixed(11))),o}setActiveThumbOnTrackClick(e){const t=this.context,a=t._trackStart+t._measurements.halfThumbSize,i=t._settings.offset,o=t.$.thumb,l=t.$.secondThumb,n=o[i],r=l[i],s=e[t._settings.page];let d=t._normalLayout?a+n+(r-n)/2:a+r+(n-r)/2;t._normalLayout&&s<=d||!t._normalLayout&&s>d?(t._movedThumb=o,t._staticThumb=l,t._movedTooltip=t.$tooltip,t.$secondTooltip.addClass("smart-hidden")):(t._movedThumb=l,t._staticThumb=o,t._movedTooltip=t.$secondTooltip,t.$tooltip.addClass("smart-hidden")),t._addMovedThumbClass()}getActualValue(e){var t=Math.pow;return this.context.logarithmicScale?[parseFloat(t(10,e[0].toString()).toFixed(11)),parseFloat(t(10,e[1].toString()).toFixed(11))]:[e[0].toString(),e[1].toString()]}getCoercedLogarithmicValue(e){var t=Math.log10;const a=this.context;if(a.logarithmicScale){const i=[];return i[0]=a._numericProcessor.getCoercedValue(t(e[0])),i[1]=a._numericProcessor.getCoercedValue(t(e[1])),this.getActualValue(i)}return e}getDrawValue(){return this.context._drawValues}getValue(e){const t=this.context.values;return e?`From ${t[0]} to ${t[1]}`:t.slice(0)}moveThumbBasedOnValue(e,t,a){const i=this.context,o=void 0===t;if(void 0===e&&(e=i.values),i._numericProcessor.restrictValue(e),(o||1===t)&&(i._movedThumb=i.$.secondThumb,i._moveThumbBasedOnValue(i.$.secondThumb,e[1],!0,o)),(o||0===t)&&(i._movedThumb=i.$.thumb,i._moveThumbBasedOnValue(i.$.thumb,e[0],!0)),delete i._firstPassSize,!0!==a){i._drawValues=e;const t=this.getActualValue(e);let a;a=i._valuesNoRangeValidation?[i._valuesNoRangeValidation[0].toString(),i._valuesNoRangeValidation[1].toString()]:t,"date"===i.mode&&(i._valueDate=[Smart.Utilities.DateTime.fromFullTimeStamp(t[0]),Smart.Utilities.DateTime.fromFullTimeStamp(t[1])]),i.values=a,delete i._valueBeforeCoercion,this.updateTooltipValue()}}restrictThumbCoordinates(e,t,a){var i=Math.min,o=Math.max;const l=this.context,n=t+l._staticThumb[l._settings.offset]+l._measurements.halfThumbSize;return l._movedThumb===l.$.thumb&&l._normalLayout||l._movedThumb===l.$.secondThumb&&!l._normalLayout?(e=o(e,t),e=i(e,a,n)):(e=o(e,t,n),e=i(e,a)),e}updateFillSizeAndPosition(e,t,a,i,o){var l=Math.max;const n=this.context,r=n.$.fill.style,s=n._settings.dimension,d=n._settings.offset,m=n._measurements.halfThumbSize;let u,c;if(n._movedThumb===n.$.thumb?(u=e-m,c=void 0===n._firstPassSize?n.$.secondThumb[d]:n._firstPassSize-m):(u=void 0===n._firstPassSize?n.$.thumb[d]:n._firstPassSize-m,c=e-m),n._normalLayout?(r[s]=l(0,c-u)+"px",r[t]=u+m+"px"):(r[s]=l(0,u-c)+"px",r[t]=c+m+"px"),i){const e=n._numericProcessor,t=n._movedThumb===n.$.thumb?0:1,i=n.values[t],l=n._getEventValue(!1,i,t);if(e.compare(e.createDescriptor(a),e.createDescriptor(i))){const e=n.values.slice(0);if(e[t]=a.toString(),this.updateTooltipValue(a,t),o){let t;if(this.updateDrawValues(e),t=n._valuesNoRangeValidation?[n._valuesNoRangeValidation[0].toString(),n._valuesNoRangeValidation[1].toString()]:e,"date"===n.mode&&(n._valueDate=[Smart.Utilities.DateTime.fromFullTimeStamp(e[0]),Smart.Utilities.DateTime.fromFullTimeStamp(e[1])]),n.values=t,delete n._valueBeforeCoercion,!0!==n._programmaticValueIsSet){const e=n._getEventValue();n.$.hiddenInput.value=e,n.$.fireEvent("change",{value:e,oldValue:l}),n.setAttribute("aria-valuenow",n._getEventValue(!0))}}}}}updateDrawValues(e){var t=Math.log10;const a=this.context;a.logarithmicScale?(a._drawValues[0]=t(e[0]),a._drawValues[1]=t(e[1])):a._drawValues=e.slice(0)}updateTooltipValue(e,t){const a=this.context;if(e===void 0){const e=a.values,t=a._formatLabel(e[0]),i=a._formatLabel(e[1]);a.$.tooltipContent.innerHTML!==t&&(a.$.tooltipContent.innerHTML=t,a.$.thumbLabel.innerHTML=t),a.$.secondTooltipContent.innerHTML!==i&&(a.$.secondTooltipContent.innerHTML=i)}else{const i=a._formatLabel(e);(0===t&&a.$.tooltipContent.innerHTML!==i||t===void 0)&&(a.$.tooltipContent.innerHTML=i,a.$.thumbLabel.innerHTML=i),(1===t&&a.$.secondTooltipContent.innerHTML!==i||t===void 0)&&(a.$.secondTooltipContent.innerHTML=i,a.$.secondThumbLabel.innerHTML=i)}}updateValue(e){const t=this.context,a=[];let i;a[0]=t._numericProcessor.createDescriptor(e[0],!0,!1),a[1]=t._numericProcessor.createDescriptor(e[1],!0,!1),this.updateDrawValues(a),t._movedThumb===t.$.secondThumb&&(i=1),this.moveThumbBasedOnValue(t._drawValues.slice(0),i)}validate(e,t,a){const i=this.context,o=i._numericProcessor;let l,n=[];i._programmaticValueIsSet=a&&"interaction"===i.validation,l=e?i.values.slice(0):t,i.coerce&&(l[0]=o.createDescriptor(l[0],!0,!0,!0),l[1]=o.createDescriptor(l[1],!0,!0,!0)),i.logarithmicScale?l=this.getCoercedLogarithmicValue(l):(l[0]=o.getCoercedValue(l[0]),l[1]=o.getCoercedValue(l[1])),i._valuesNoRangeValidation=[],i._valuesNoRangeValidation[0]=o.createDescriptor(l[0],!0,!0,!1),i._valuesNoRangeValidation[1]=o.createDescriptor(l[1],!0,!0,!1),i._numericProcessor.restrictValue(i._valuesNoRangeValidation),n[0]=o.validate(i._valuesNoRangeValidation[0],i._minObject,i._maxObject),n[1]=o.validate(i._valuesNoRangeValidation[1],i._minObject,i._maxObject),e?(i._drawValues=[],this.updateDrawValues(n),l=[i._valuesNoRangeValidation[0].toString(),i._valuesNoRangeValidation[1].toString()],"date"===i.mode&&(i._valueDate=[Smart.Utilities.DateTime.fromFullTimeStamp(n[0]),Smart.Utilities.DateTime.fromFullTimeStamp(n[1])]),i.values=l,this.moveThumbBasedOnValue(i._drawValues,void 0,!0)):this.updateValue(n),delete i._valuesNoRangeValidation,i._programmaticValueIsSet=!1}});
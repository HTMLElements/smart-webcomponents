
/* Smart HTML Elements v6.0.0 (2020-Jan) 
Copyright (c) 2011-2020 jQWidgets. 
License: https://htmlelements.com/license/ */

Smart.Utilities.Assign("Complex",class{constructor(a,b){if("string"==typeof a)this.complexNumber=this.parseComplexNumber(a),this.realPart=this.complexNumber.realPart,this.imaginaryPart=this.complexNumber.imaginaryPart;else if("number"==typeof a){if(this.realPart=a,"number"==typeof b)this.imaginaryPart=b;else if("undefined"==typeof b)this.imaginaryPart=0;else throw new Error("Can't create complex number: invalid imaginary part");this.complexNumber=this.parseComplexNumber(this.realPart,this.imaginaryPart)}else throw new Error("Can't create complex number")}valueOf(){return 0===this.imaginaryPart?this.realPart:null}isNaN(){return isNaN(this.realPart)||isNaN(this.imaginaryPart)}isZero(){return(0===this.realPart||-0===this.realPart)&&(0===this.imaginaryPart||-0===this.imaginaryPart)}isFinite(){return isFinite(this.realPart)&&isFinite(this.imaginaryPart)}isInfinite(){return!(this.isNaN()||this.isFinite())}parseComplexNumber(a,b){const c={realPart:0,imaginaryPart:0};if(a===void 0||null===a)c.realPart=c.imaginaryPart=0;else if(b!==void 0)c.realPart=a,c.imaginaryPart=b;else switch(typeof a){case"object":if("imaginaryPart"in a&&"realPart"in a)c.realPart=a.realPart,c.imaginaryPart=a.imaginaryPart;else if(2===a.length)c.realPart=a[0],c.imaginaryPart=a[1];else throw SyntaxError("Invalid Complex Number Parameter");break;case"string":{c.imaginaryPart=c.realPart=0;const b=a.match(/\d+\.?\d*e[+-]?\d+|\d+\.?\d*|\.\d+|./g);let d=1,e=0;if(null===b)throw SyntaxError("Invalid Complex Number Parameter");for(let a=0;a<b.length;a++){const f=b[a];if(" "===f||"\t"===f||"\n"===f);else if("+"===f)d++;else if("-"===f)e++;else if("i"===f||"I"===f){if(0===d+e)throw SyntaxError("Invalid Complex Number Parameter");" "===b[a+1]||isNaN(b[a+1])?c.imaginaryPart+=parseFloat((e%2?"-":"")+"1"):(c.imaginaryPart+=parseFloat((e%2?"-":"")+b[a+1]),a++),d=e=0}else{if(0===d+e||isNaN(f))throw SyntaxError("Invalid Complex Number Parameter");"i"===b[a+1]||"I"===b[a+1]?(c.imaginaryPart+=parseFloat((e%2?"-":"")+f),a++):c.realPart+=parseFloat((e%2?"-":"")+f),d=e=0}}if(0<d+e)throw SyntaxError("Invalid Complex Number Parameter");break}case"number":c.imaginaryPart=0,c.realPart=a;break;default:throw SyntaxError("Invalid Complex Number Parameter");}return c}compare(a,b){var c=Math.abs;const d=this.parseComplexNumber(a,b),e=this.parseComplexNumber("1e-16");return c(d.realPart-this.realPart)<=e&&c(d.imaginaryPart-this.imaginaryPart)<=e}toString(){let a=this.realPart,b=this.imaginaryPart,c="";return this.isNaN()?"NaN":this.isZero()?"0":this.isInfinite()?"Infinity":(0!==a&&(c+=a),0!==b&&(0===a?0>b&&(c+="-"):c+=0>b?" - ":" + ",b=Math.abs(b),1!==b&&(c+=b),c+="i"),c?c:"0")}});

/* Smart HTML Elements v5.1.0 (2019-Dec) 
Copyright (c) 2011-2019 jQWidgets. 
License: https://htmlelements.com/license/ */

Smart.Utilities.Assign("NumericProcessor",class{constructor(e,t){switch(e[t]){case"integer":return new Smart.Utilities.IntegerNumericProcessor(e,t);case"floatingPoint":return new Smart.Utilities.DecimalNumericProcessor(e,t);case"complex":return new Smart.Utilities.ComplexNumericProcessor(e,t);}}}),Smart.Utilities.Assign("BaseNumericProcessor",class{constructor(e,t){const i=this;i.context=e,i._longestLabelSize=0,i.numericFormatProperty=t,i.regexScientificNotation=new RegExp(/^([+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?)(Y|Z|E|P|T|G|M|k|c|m|u|n|p|f|a|z|y){1}$/),i.regexNoLeadingZero=new RegExp(/^(-)?[.]\d+$/),i.regexLeadingZero=new RegExp(/^[+\-]?(0+)[1-9]+|^[+\-]?(0{2,})[.]|^(0{2,})$/),i.prefixesToPowers={Y:24,Z:21,E:18,P:15,T:12,G:9,M:6,k:3,c:-2,m:-3,u:-6,n:-9,p:-12,f:-15,a:-18,z:-21,y:-24},i.complexConstructor=window.NIComplex?window.NIComplex:Smart.Utilities.Complex}prepareForValidation(e,t,i){const a=this.context,r=e||void 0!==t;if(i=i.toString(),i=i.replace(/\s/g,""),i=a._discardDecimalSeparator(i),this.regexLeadingZero.test(i)){const e=this.regexLeadingZero.exec(i);i=e[1]?i.replace(e[1],""):e[2]?i.replace(e[2],"0"):i.replace(e[3],"0")}this.regexNoLeadingZero.test(i)?"-"===i.charAt(0)?i="-0"+i.slice(1):i="0"+i:("integer"===a[this.numericFormatProperty]&&(10===a._radixNumber||r)||"floatingPoint"===a[this.numericFormatProperty])&&this.regexScientificNotation.test(i)&&(i=this.scientificToDecimal(i));let n,l=!1;if("complex"===a[this.numericFormatProperty]&&!1===a._regexSpecial.nonNumericValue.test(i))try{if(a._regexSpecial.exaValue.test(i)){const e=i.indexOf("E"),t=1000000000000000000*parseFloat(i.slice(0,e)),a=parseFloat(i.slice(e+1,-1));n=new this.complexConstructor(t,a)}else n=new this.complexConstructor(i);l=!0}catch(e){l=!1}return!1==l&&(!r&&!1===a._regex[a._radixNumber].test(i)||r&&!1===a._regex[10].test(i))?void a._handleNonNumericValue(e,t,i):{value:i,enteredComplexNumber:n}}isENotation(e){const t=new RegExp(/e/i);return t.test(e.toString())}scientificToDecimal(e){const t=this.regexScientificNotation.exec(e),i=t[1],a=t[2],r=parseFloat(i)*Math.pow(10,this.prefixesToPowers[a]);return r}_createMeasureLabel(){const e=this.context,t=document.createElement("div");return t.className="smart-label",t.style.position="absolute",t.style.visibility="hidden",e._measureLabelScale="far"===e.scalePosition?e.$.scaleFar:e.$.scaleNear,e._measureLabelScale.appendChild(t),t}_addMajorTickAndLabel(e,t,i,a,r){const n=this.context,l=n._settings.leftOrTop,o=this.valueToPx(a);let m="",c="";if(parseInt(o)>parseInt(n._measurements.trackLength))return{tick:m,label:c};if(n.logarithmicScale&&(e=n._formatLabel(Math.pow(10,a))),"smart-tank"===n.nodeName.toLowerCase()||n._intervalHasChanged){let t=n._tickIntervalHandler.labelsSize;if(r){n._labelDummy.innerHTML=e;let r=this.valueToPx(a),l=this.valueToPx(n._drawMax),o=this.valueToPx(n._drawMin),m=n._labelDummy[n._settings.size],c="vertical"===n.orientation?n._labelDummy.offsetWidth:n._labelDummy.offsetHeight,s=(m+t.minLabelSize)/2,u=(m+t.maxLabelSize)/2;i=n._normalLayout?r+u<l&&r-s>o:r-u>l&&r+s<o,c>this._longestLabelSize&&(this._longestLabelSize=c)}else this._longestLabelSize=Math.max(t.minLabelOtherSize,t.maxLabelOtherSize,this._longestLabelSize)}if(n._tickValues.push(a),m="<div style=\""+l+": "+o+"px;\" class=\"smart-tick\"></div>",!1!==i){void 0===t&&(n._labelDummy.innerHTML=e,t=n._labelDummy[n._settings.size]);const i=o-t/2;c+="<div class=\"smart-label"+(r?" smart-label-middle":"")+"\" style=\""+l+": "+i+"px;\">"+e+"</div>"}return{tick:m,label:c}}getWordLength(e){return this.context._unsigned="u"===e.charAt(0),"int8"===e||"uint8"===e?8:"int16"===e||"uint16"===e?16:"int32"===e||"uint32"===e?32:"int64"===e||"uint64"===e?64:void 0}getAngleByValue(e,t,i){var a=Math.PI;const r=this.context;!1!==t&&r.logarithmicScale&&(e=Math.log10(e));const n=(e-r._drawMin)*r._angleRangeCoefficient;let l;return l=void 0===r.inverted||!r.inverted&&!r.rightToLeft||r.rightToLeft&&r.inverted?r.endAngle-n:r.startAngle+n,i?l:l*a/180+a/2}getValueByAngle(e,t){var i=Math.pow;const a=this.context;let r,n,l;for(void 0===a.inverted||!a.inverted&&!a.rightToLeft||a.rightToLeft&&a.inverted?(r=a.endAngle,n=e):(r=e,n=a._normalizedStartAngle);r<n;)r+=360;if(l=(r-n)/a._angleDifference*a._range+parseFloat(a._drawMin),a.logarithmicScale){if(a.customInterval)return parseFloat(i(10,this.getCoercedValue(l,!0)).toFixed(12));l=i(10,l)}return t&&!a.coerce?Math.round(l):(l=this.createDescriptor(l,void 0,!0,!0),this.getCoercedValue(l,!1))}updateGaugeValue(e){const t=this.context,i=t.value;t.value=e,t._drawValue=t.logarithmicScale?Math.log10(e).toString():e,t._number=this.createDescriptor(t.value),t.$.digitalDisplay.value=e,t.$.fireEvent("change",{value:e,oldValue:i}),t.setAttribute("aria-valuenow",e),delete t._valueBeforeCoercion}validateColorRange(e){const t=this.context;return Math.min(Math.max(e,t.min),t.max)}getActualValue(e){return this.context.logarithmicScale?Math.pow(10,e):e}drawGaugeLogarithmicScaleMinorTicks(e,t,a){var r=Math.pow;const n=this.context;let l;for(let r in t instanceof Smart.Utilities.BigNumber&&(t=parseFloat(t.toString())),e)if(l=r,0<=r&&0==r%1)break;for(let o=parseFloat(l);o<n._drawMax;o+=t)for(let e=2;9>=e;e++){const i=e*r(10,o+t-1);i<n.max&&a(i)}for(let o=parseFloat(l);o>n._drawMin;o-=t)for(let e=2;9>=e;e++){const t=e*r(10,o-1);t>n.min&&a(t)}}_getAngleDifference(e,t){const i=Math.abs(t-e)%360,a=180<i?360-i:i;return a}addCustomTicks(){function e(e){const i=a.customTicks[e],o=r?t.createDescriptor(i):Math.log10(i),m=0<e&&e<a.customTicks.length-1,c=t._addMajorTickAndLabel(a._formatLabel(i),void 0,!0,o,m);n+=c.tick,l+=c.label}const t=this,a=t.context,r=!a.logarithmicScale;let n="",l="";if(t._longestLabelSize=0,a._tickValues=[],a._labelDummy=t._createMeasureLabel(),!a._normalLayout)for(let t=a.customTicks.length-1;0<=t;t--)e(t);else for(let t=0;t<a.customTicks.length;t++)e(t);"smart-tank"===a.nodeName.toLowerCase()&&a._updateScaleWidth(t._longestLabelSize),a._appendTicksAndLabelsToScales(n,l)}addGaugeCustomTicks(){function e(e){const i=a.customTicks[e],r=t.createDescriptor(i),o=t.getAngleByValue(r,!0),m=0<e&&e<a.customTicks.length-1;n(o),l(o,i,m)}const t=this,a=t.context,i=a._distance,r=a._measurements.radius-i.majorTickDistance;let n,l;n="none"!==a.ticksVisibility&&!1!==a._plotTicks?function(e){a._drawTick(e,r,"major")}:function(){},l="none"!==a.labelsVisibility&&!1!==a._plotLabels?function(e,t,r){a._drawLabel(e,t,i.labelDistance,r)}:function(){};for(let t=a.customTicks.length-1;0<=t;t--)e(t)}}),Smart.Utilities.Assign("IntegerNumericProcessor",class extends Smart.Utilities.BaseNumericProcessor{constructor(e,t){super(e,t);const i=this;i.context=e,i.defaultMins={int8:"-128",uint8:"0",int16:"-32768",uint16:"0",int32:"-2147483648",uint32:"0",int64:"-9223372036854775808",uint64:"0"},i.defaultMaxs={int8:"127",uint8:"255",int16:"32767",uint16:"65535",int32:"2147483647",uint32:"4294967295",int64:"9223372036854775807",uint64:"18446744073709551615"}}createDescriptor(e,t,i,a,r){const n=this.context;let l;if(e.constructor!==Smart.Utilities.BigNumber){let i=!r&&n._radixNumber?n._radixNumber:10;10===i&&t&&e.constructor!==Smart.Utilities.BigNumber&&this.isENotation(e)&&(Smart.Utilities.BigNumber.bigIntSupport?e=new Smart.Utilities.BigNumber(Math.round(e)):e=new Smart.Utilities.NumberRenderer(e).largeExponentialToDecimal()),l=n._toBigNumberDecimal?n._toBigNumberDecimal(e.toString(i,n._wordLengthNumber),i):new Smart.Utilities.BigNumber(e)}else l=new Smart.Utilities.BigNumber(e);return i&&(n._unsigned&&-1===l.compare(0)&&(l=l.set(0)),a&&(l=this.validate(l,n._minObject,n._maxObject)),l=this.round(l)),l}round(e){const t=this.context;if(e instanceof window.Smart.Utilities.BigNumber&&"bigint"==typeof e._d)return e;if(!1==e instanceof window.Smart.Utilities.BigNumber||!t._wordLengthNumber||64>t._wordLengthNumber)return new Smart.Utilities.BigNumber(Math.round(e.toString()));const i=e.mod(1);return 1===i._d.length&&0===i._d[0]||(e=e.intPart(),e._s?(5<i._d[1]||5===i._d[1]&&i._d[2])&&(e=e.add(-1)):4<i._d[1]&&(e=e.add(1))),e}validate(e,t,i){let a;return a=-1===e.compare(t)?t:1===e.compare(i)?i:e,a}validateMinMax(e,t){const i=this.context;let a=this.defaultMins[i.wordLength],r=new Smart.Utilities.BigNumber(a),n=this.defaultMaxs[i.wordLength],l=new Smart.Utilities.BigNumber(n),o="date"!==i.mode;if(void 0===i._numberRenderer&&(i._numberRenderer=new Smart.Utilities.NumberRenderer),e&&o){null!==i.min&&(i.min=i.min.toString().replace(/\s/g,""),this.regexScientificNotation.test(i.min)&&(i.min=this.scientificToDecimal(i.min)));let e=this.round(new Smart.Utilities.BigNumber(i.min));null===i.min||i._minIsNull&&i._initialized||!(0<=e.compare(r))?(i._minIsNull=!0,i.min=a,i._minObject=r):i._minObject=e}if(t&&o){null!==i.max&&(i.max=i.max.toString().replace(/\s/g,""),this.regexScientificNotation.test(i.max)&&(i.max=this.scientificToDecimal(i.max)));let e=this.round(new Smart.Utilities.BigNumber(i.max));null===i.max||i._maxIsNull&&i._initialized||!(0>=e.compare(l))?(i._maxIsNull=!0,i.max=n,i._maxObject=l):i._maxObject=e}o||(i._minObject=new Smart.Utilities.BigNumber(i.min),i._maxObject=new Smart.Utilities.BigNumber(i.max)),this.compare(i._minObject,i._maxObject)||(i._minObject=r,i._maxObject=l,i._drawMin=i.logarithmicScale?0:a,i._drawMax=i.logarithmicScale?10:n,i.min=a,i.max=n),o||(i._minDate=Smart.Utilities.DateTime.fromFullTimeStamp(i.min),i._maxDate=Smart.Utilities.DateTime.fromFullTimeStamp(i.max))}valueToPx(e){const t=Smart.Utilities.BigNumber.ignoreBigIntNativeSupport;Smart.Utilities.BigNumber.ignoreBigIntNativeSupport=!0;const i=this.context,a=new Smart.Utilities.BigNumber(i._measurements.trackLength).divide(new Smart.Utilities.BigNumber(i._range));let r;if(i._normalLayout){const t=i._drawMin instanceof Smart.Utilities.BigNumber?i._drawMin:new Smart.Utilities.BigNumber(i._drawMin);e=new Smart.Utilities.BigNumber(e),r=parseFloat(a.multiply(e.subtract(t)).toString())}else{const t=i._drawMax instanceof Smart.Utilities.BigNumber?i._drawMax:new Smart.Utilities.BigNumber(i._drawMax);r=parseFloat(this.round(t.subtract(e).multiply(a)).toString())}return Smart.Utilities.BigNumber.ignoreBigIntNativeSupport=t,r}pxToValue(e){const t=this.context,i=Smart.Utilities.BigNumber.ignoreBigIntNativeSupport;let a;if(Smart.Utilities.BigNumber.ignoreBigIntNativeSupport=!0,a=t._normalLayout?t._valuePerPx.multiply(e-t._trackStart):t._valuePerPx.multiply(t._trackEnd-e),a=this.round(a).toString(),Smart.Utilities.BigNumber.ignoreBigIntNativeSupport=i,t.logarithmicScale){let e=parseFloat(a)+parseFloat(t._drawMin);return new Smart.Utilities.BigNumber(Math.round(Math.pow(10,e)))}let r=this.createDescriptor(t._minObject.add(a),!1,!0,!0);return r}compare(e,t,i){if((null===e||null===t)&&e!==t)return!0;e.constructor!==Smart.Utilities.BigNumber&&(e=new Smart.Utilities.BigNumber(e));const a=e.compare(t);return!0===i?a:0!==a}incrementDecrement(e,t,i){const a=this.context;let r;if(e.constructor!==Smart.Utilities.BigNumber&&(e=new Smart.Utilities.BigNumber(e)),"add"===t){if(r=e.add(i),void 0!==a._drawMax)return 0<r.compare(a._drawMax)?new Smart.Utilities.BigNumber(a._drawMax):r;}else if(r=e.subtract(i),void 0!==a._drawMin)return 0>r.compare(a._drawMin)?new Smart.Utilities.BigNumber(a._drawMin):r;return r}render(e,t){const i=this.context;if(!i.scientificNotation&&!0===t)return new Smart.Utilities.NumberRenderer(new Smart.Utilities.BigNumber(e)).bigNumberToExponent(i.significantDigits);let a=e;return i.scientificNotation&&!0===t?a=new Smart.Utilities.NumberRenderer(a).toScientific(i.significantDigits,i.precisionDigits):"string"!=typeof e&&(a=e.toString(i._radixNumber,i._wordLengthNumber,i.leadingZeros)),a}addTicksAndLabels(){const e=Smart.Utilities.BigNumber.ignoreBigIntNativeSupport;Smart.Utilities.BigNumber.ignoreBigIntNativeSupport=!0;const t=this.context,i=t._measurements.trackLength,a=t._normalLayout,r=t._majorTicksInterval,n=this.round(new Smart.Utilities.BigNumber(t._range).divide(r)),l=i/n,o=new Smart.Utilities.BigNumber(t._drawMin),m=new Smart.Utilities.BigNumber(t._drawMax);let c,s,u,g,d,p,b,_,x,f="",S="";t._tickValues=[],this._longestLabelSize=0,a?(c=o,s=r.add(c.subtract(c.mod(r))),u=s.subtract(c),d=t._formatLabel(o),p=t._tickIntervalHandler.labelsSize.minLabelSize,g=m,b=t._formatLabel(m),_=t._tickIntervalHandler.labelsSize.maxLabelSize):(c=m,s=c.subtract(c.mod(r)),u=c.subtract(s),d=t._formatLabel(m),p=t._tickIntervalHandler.labelsSize.maxLabelSize,g=o,b=t._formatLabel(o),_=t._tickIntervalHandler.labelsSize.minLabelSize),t._labelDummy=this._createMeasureLabel(),x=this._addMajorTickAndLabel(d,p,!0,c),f+=x.tick,S+=x.label;const N=u.divide(r).multiply(l);if(0!==s.compare(t.max)&&0>N.compare(i)){const e=t._formatLabel(s.toString()),i=0<N.compare(p);x=this._addMajorTickAndLabel(e,void 0,i,s,!0),f+=x.tick,S+=x.label}x=this.addMiddleMajorTicks(n,l,N,u,a,r),f+=x.tick,S+=x.label,x=this._addMajorTickAndLabel(b,_,!0,g),f+=x.tick,S+=x.label,"date"!==t.mode&&(f+=this.addMinorTicks(a)),t._measureLabelScale.removeChild(t._labelDummy),delete t._labelDummy,delete t._measureLabelScale,"smart-tank"===t.nodeName.toLowerCase()&&t._updateScaleWidth(this._longestLabelSize),t._appendTicksAndLabelsToScales(f,S),Smart.Utilities.BigNumber.ignoreBigIntNativeSupport=e}addMiddleMajorTicks(e,t,a,r,n,l){const o=this.context;let m,i="",c="";for(let s=1;s<e;s++){let u,g=a.add(s*t);if(n?u=l.multiply(s).add(r.add(new Smart.Utilities.BigNumber(o._drawMin))):(u=new Smart.Utilities.BigNumber(o._drawMax).subtract(r).subtract(l.multiply(s)),s==e-1&&0===u.compare(0)&&(o._numberRenderer.numericValue=o._tickIntervalHandler.nearestPowerOfTen,m=o._numberRenderer.bigNumberToExponent(1))),0!==u.compare(o._drawMax)){let a=o._formatLabel(u.toString()),r=!0;o._labelDummy.innerHTML=m?m:a;let n=o._labelDummy[o._settings.size];0<=g.add(n).compare(e*t)&&(r=!1);const l=this._addMajorTickAndLabel(a,void 0,r,u,!0);i+=l.tick,c+=l.label}}return{tick:i,label:c}}addMinorTicks(e){function t(e){-1===n.indexOf(e)&&0==e%o&&(g+="<div style=\""+m+": "+r._numericProcessor.valueToPx(e)+"px;\" class=\"smart-tick smart-tick-minor\"></div>")}function i(){let e=r._measurements.trackLength,t=e/n.length,i=.1;20>t?i=1:20<=t&&40>t?i=1<s-c?1:.5:40<=t&&80>t&&(i=.2);let l=Math.floor(r._drawMax),o=r._drawMax-l,u=r._drawMax-r._drawMin>n.length;for(let e=r._drawMax;0<e;--e){let t=0<o?a(10,e-o+1):a(10,e),n=t*i;for(let e=t;0<e;e-=n)if(e<r.max&&e>r.min){let t=new Smart.Utilities.BigNumber(Math.log10(e));(0==t%1&&u||!u)&&(g+="<div style=\""+m+": "+r._numericProcessor.valueToPx(t)+"px;\" class=\"smart-tick smart-tick-minor\"></div>")}}}var a=Math.pow;const r=this.context,n=r._tickValues,l=r._tickIntervalHandler.nearestPowerOfTen,o=r._minorTicksInterval,m=r._settings.leftOrTop;let c,s,u,g="";if(e?(c=n[0],s=n[1],u=n[n.length-1]):(c=n[n.length-1],s=n[n.length-2],u=n[0]),r.logarithmicScale)i();else{for(let e=s;0>c.compare(e);e=e.subtract(l))t(e);for(let e=s.add(l);0<u.compare(e);e=e.add(l))t(e)}return g}validateCustomTicks(){const e=this.context,t="date"!==e.mode;let a=[];for(let r,n=0;n<e.customTicks.length;n++)r=e.customTicks[n],t?r=this.createDescriptor(r,!1,!0):void 0===r._d&&(r=Smart.Utilities.DateTime.validateDate(r).getTimeStamp()),0<=r.compare(e._minObject)&&0>=r.compare(e._maxObject)&&a.push(r);if(a.sort(function(e,t){return e.compare(t)}),t){for(let e=0;e<a.length;e++)a[e]=a[e].toString();a=a.filter(function(e,t,i){return!t||e!==i[t-1]})}e.customTicks=a.slice(0)}addGaugeTicksAndLabels(){var e=Math.PI;const t=Smart.Utilities.BigNumber.ignoreBigIntNativeSupport;Smart.Utilities.BigNumber.ignoreBigIntNativeSupport=!0;const a=this.context,r=this,n=Math.max(a._tickIntervalHandler.labelsSize.minLabelSize,a._tickIntervalHandler.labelsSize.maxLabelSize),l=a._majorTicksInterval,o=a._minorTicksInterval,m={},c=a._distance,s=a._measurements.radius,u=s-c.majorTickDistance,g=s-c.minorTickDistance,d=new Smart.Utilities.BigNumber(a._drawMin),p=new Smart.Utilities.BigNumber(a._drawMax);let b,_,x,f,S,N;"none"!==a.ticksVisibility&&!1!==a._plotTicks?(b=function(e){a._drawTick(e,u,"major")},_=function(e){a._drawTick(r.getAngleByValue(e,!0),g,"minor")}):(b=function(){},_=function(){}),x="none"!==a.labelsVisibility&&!1!==a._plotLabels?function(e,t,i){a._drawLabel(e,t,c.labelDistance,i)}:function(){},void 0===a.inverted||!a.inverted&&!a.rightToLeft||a.rightToLeft&&a.inverted?(S=a.endAngle,N=a.startAngle):(S=a.startAngle,N=a.endAngle),f=r.getAngleByValue(d,!1),b(f),m[a._drawMin.toString()]=!0,x(f,a.min,!1);let h,v=d.subtract(d.mod(l));-1!==d.compare(0)&&(v=v.add(l));for(let e=new Smart.Utilities.BigNumber(v);-1!==e.compare(d);e=e.subtract(o))h=e;f=r.getAngleByValue(v,!1),b(f),m[v.toString()]=!0,2*e*a._measurements.innerRadius*(this._getAngleDifference(S,r.getAngleByValue(v,!1,!0))/360)>n&&x(f,this.getActualValue(v),-1===v.compare(p));let B;for(B=v.add(l);-1===B.compare(p.subtract(l));B=B.add(l))f=r.getAngleByValue(B,!1),b(f),m[B.toString()]=!0,x(f,this.getActualValue(B),!0);if(void 0===m[B.toString()]&&1!==B.compare(p)&&(f=r.getAngleByValue(B,!1),b(f),m[B.toString()]=!0,2*e*a._measurements.innerRadius*(this._getAngleDifference(N,r.getAngleByValue(B,!1,!0))/360)>=n&&x(f,this.getActualValue(B),!0),a._normalizedStartAngle!==a.endAngle&&(f=r.getAngleByValue(p,!1),b(f),2*e*a._measurements.innerRadius*(this._getAngleDifference(N,S)/360)>=n&&x(f,a.max,!1))),"date"===a.mode)return void(Smart.Utilities.BigNumber.ignoreBigIntNativeSupport=t);if(!a.logarithmicScale)for(let e=h;-1===e.compare(p);e=e.add(o))m[e.toString()]||_(e);else this.drawGaugeLogarithmicScaleMinorTicks(m,l,_);Smart.Utilities.BigNumber.ignoreBigIntNativeSupport=t}updateToolTipAndValue(e,t,i){const a=this.context,r=a.logarithmicScale;a._updateTooltipValue(e.toString()),r&&(e=parseFloat(Math.pow(10,parseFloat(e)).toFixed(11))),e=e instanceof Smart.Utilities.BigNumber?e:new Smart.Utilities.BigNumber(e);const n=e.toString();a._number=e,a._drawValue=r?Math.log10(n):e,0!==e.compare(t)&&i&&("numeric"===a.mode?(a.value=n,e=n):(t=a._valueDate,a._valueDate=Smart.Utilities.DateTime.fromFullTimeStamp(n),a.value=e,e=a._valueDate),!a._programmaticValueIsSet&&a.$.fireEvent("change",{value:e,oldValue:t}),a.$.hiddenInput&&(a.$.hiddenInput.value=e),a.setAttribute("aria-valuenow",a._getEventValue(!0)))}validateInterval(e){const t=this.context,i=t._maxObject.subtract(t._minObject);t._validInterval=new Smart.Utilities.BigNumber(e),t._validInterval=this.round(t._validInterval),1===t._validInterval.compare(i)&&(t._validInterval=i),t.interval=t._validInterval.toString()}getCoercedValue(e,t,i){var a=Math.abs;const r=this.context;if(!r.coerce)return e;const n=!r.logarithmicScale;e=e instanceof Smart.Utilities.BigNumber?e:new Smart.Utilities.BigNumber(e);let l,o;if(r.customInterval){const t=r.customTicks;if(0===t.length)return e;let o,m;if(n||i){l=r._minObject,o=l.subtract(e).abs(),m=l;for(let a=0;a<t.length;a++){const i=this.createDescriptor(t[a]),r=i.subtract(e).abs();-1===r.compare(o)&&(o=r,m=i)}}else{l=r._drawMin,o=a(l-parseFloat(e.toString())),m=l;for(let r=0;r<t.length;r++){const i=Math.log10(t[r]),n=a(i-e);n<o&&(o=n,m=i)}m=new Smart.Utilities.BigNumber(m)}return m}let m=r._validInterval;if("date"===r.mode){if("addYears"===r._dateIncrementMethod)return this.coerceYear(e);if("addMonths"===r._dateIncrementMethod)return this.coerceMonth(e);m=new Smart.Utilities.BigNumber(r._dateIntervalNumber).multiply(m)}!1===t?(l=new Smart.Utilities.BigNumber(r.min),o=new Smart.Utilities.BigNumber(r.max)):(l=new Smart.Utilities.BigNumber(r._drawMin),o=new Smart.Utilities.BigNumber(r._drawMax));let c=e.subtract(l),s=c.mod(m);if(0===s.compare(0))return e;let u=c.subtract(s),g=u.add(m);if(0>c.subtract(u).abs().compare(c.subtract(g).abs()))return u.add(l);else{const e=g.add(l);return 0>=e.compare(o)?e:u.add(l)}}coerceMonth(e){const t=this.context,i=parseFloat(t._validInterval),a=Smart.Utilities.DateTime.fromFullTimeStamp(e),r=a.year(),n=a.month(),l=a.day(),o=t._minDate.year(),m=t._minDate.month(),c=12*(t._maxDate.year()-o-1)+12-m+t._maxDate.month();let s=12*(r-1-o)+(12-m)+n;1===i&&(-1===[1,3,5,7,8,10,12].indexOf(n)?2===n?a.isLeapYear(r)?(15<l||15===l&&11<a.hour())&&s++:14<l&&s++:15<l&&s++:(16<l||16===l&&11<a.hour())&&s++),s=this.getCoercedTimePart(0,c,s,i);let u=t._minDate.addMonths(s,!0);return 1===u.compare(t._maxDate)&&(u=t._minDate.addMonths(s-i,!0)),t._drawValue=new Smart.Utilities.BigNumber(u.getTimeStamp()),t._drawValue}coerceYear(e){const t=this.context,i=parseFloat(t._validInterval),a=Smart.Utilities.DateTime.fromFullTimeStamp(e),r=t._maxDate.year(),n=Smart.Utilities.DateTime.getConstructorParameters(t._minDate);let l=a.year();6<a.month()&&l++;let o=this.getCoercedTimePart(t._minDate.year(),r,l,i);o>r&&(o-=i),n[0]=o,n.unshift(null);const m=new(Function.prototype.bind.apply(Smart.Utilities.DateTime,n));return t._drawValue=new Smart.Utilities.BigNumber(m.getTimeStamp()),t._drawValue}getCoercedTimePart(e,t,i,a){var r=Math.abs;let n=i-e,l=n%a;if(0==l)return i;let o=parseFloat((n-l).toFixed(12)),m=o+a;if(t-e<=a)return i>=e+(t-e)/2?t:e;if(r(n-o)<r(n-m))return o+e;else{const i=m+e;return i>t?o+e:i}}updateValue(e){const t=this.context;e=e instanceof Smart.Utilities.BigNumber?e:new Smart.Utilities.BigNumber(e);const i=this.validate(e,t._minObject,t._maxObject);let a,r,n=t.value;t._number=i,t._drawValue=t.logarithmicScale?Math.log10(i):i,"numeric"===t.mode?(a=e.toString(),t.value=a,r=this.compare(e,n)):(n=Smart.Utilities.DateTime.fromFullTimeStamp(n),t._valueDate=Smart.Utilities.DateTime.fromFullTimeStamp(e),t.value=e,e=t._valueDate,a=e,r=0!==e.compare(n)),!t._programmaticValueIsSet&&(r||t._scaleTypeChangedFlag)&&t.$.fireEvent("change",{value:a,oldValue:n}),t.$.hiddenInput&&(t.$.hiddenInput.value=e),t.setAttribute("aria-valuenow",t._getEventValue(!0)),t._moveThumbBasedOnValue(t._drawValue)}getValuePerPx(e,t){const i=Smart.Utilities.BigNumber.ignoreBigIntNativeSupport;Smart.Utilities.BigNumber.ignoreBigIntNativeSupport=!0;const a=new Smart.Utilities.BigNumber(e).divide(t);return Smart.Utilities.BigNumber.ignoreBigIntNativeSupport=i,a}restrictValue(e){e[1].constructor===Smart.Utilities.BigNumber?-1===e[1].compare(e[0])&&e[1].set(e[0]):e[1]<e[0]&&(e[1]=e[0])}getAngleByValue(e,t,i){var a=Math.PI;const r=this.context,n=Smart.Utilities.BigNumber.ignoreBigIntNativeSupport;if(Smart.Utilities.BigNumber.ignoreBigIntNativeSupport=!0,64>r._wordLengthNumber)return Smart.Utilities.BigNumber.ignoreBigIntNativeSupport=n,super.getAngleByValue(parseFloat(e.toString()),t,i);!1==e instanceof Smart.Utilities.BigNumber&&(e=new Smart.Utilities.BigNumber(e)),!1!==t&&r.logarithmicScale&&(e=new Smart.Utilities.BigNumber(Math.log10(e.toString())));const l=e.subtract(r._drawMin).multiply(r._angleRangeCoefficient);let o;return o=void 0===r.inverted||!r.inverted&&!r.rightToLeft||r.rightToLeft&&r.inverted?l.multiply(-1).add(r.endAngle):l.add(r.startAngle),o=parseFloat(o.toString()),Smart.Utilities.BigNumber.ignoreBigIntNativeSupport=n,i?o:o*a/180+a/2}getValueByAngle(e){const t=this.context;if(64>t._wordLengthNumber)return super.getValueByAngle(e,!0);const i=Smart.Utilities.BigNumber.ignoreBigIntNativeSupport;let a,r,n;for(Smart.Utilities.BigNumber.ignoreBigIntNativeSupport=!0,void 0===t.inverted||!t.inverted&&!t.rightToLeft||t.rightToLeft&&t.inverted?(a=t.endAngle,r=e):(a=e,r=t._normalizedStartAngle);a<r;)a+=360;n=new Smart.Utilities.BigNumber((a-r)/t._angleDifference).multiply(t._range).add(t._drawMin),t.logarithmicScale&&(n=new Smart.Utilities.BigNumber(Math.pow(10,n.toString())));let l;return l=t.coerce?this.getCoercedValue(n,!1):this.round(n),Smart.Utilities.BigNumber.ignoreBigIntNativeSupport=i,new Smart.Utilities.BigNumber(l)}updateGaugeValue(e){if(!1==e instanceof Smart.Utilities.BigNumber)return super.updateGaugeValue(e);const t=this.context,i=t._getEventValue();"numeric"===t.mode?(t.value=e.toString(),t.$.digitalDisplay.value=t.value):(t._valueDate=Smart.Utilities.DateTime.fromFullTimeStamp(e),t.value=e),t._drawValue=t.logarithmicScale?Math.log10(t.value).toString():t.value,t._number=e,t.$.fireEvent("change",{value:t._getEventValue(),oldValue:i}),t.setAttribute("aria-valuenow",t._getEventValue(!0))}validateColorRange(e){const t=this.context;if(64>t._wordLengthNumber)return super.validateColorRange(e);"numeric"===t.mode?e=new Smart.Utilities.BigNumber(e):(e=Smart.Utilities.DateTime.validateDate(e),e=e.getTimeStamp());const i=new Smart.Utilities.BigNumber(t.min),a=new Smart.Utilities.BigNumber(t.max);return-1===e.compare(i)&&(e=i),1===e.compare(a)&&(e=a),e}lockRotation(e,t){const i=this.context;if(!1==t instanceof Smart.Utilities.BigNumber&&(t=new Smart.Utilities.BigNumber(t)),e&&-1===t.compare(i._number)){if(i._lockCW=!0,-1===t.compare(i._maxObject))return new Smart.Utilities.BigNumber(i._maxObject);}else if(!e&&1===t.compare(i._number)&&(i._lockCCW=!0,1===t.compare(i._minObject)))return new Smart.Utilities.BigNumber(i._minObject)}getAngleRangeCoefficient(){const e=this.context,t=Smart.Utilities.BigNumber.ignoreBigIntNativeSupport;Smart.Utilities.BigNumber.ignoreBigIntNativeSupport=!0,e._angleRangeCoefficient=new Smart.Utilities.BigNumber(e._angleDifference).divide(e._range),Smart.Utilities.BigNumber.ignoreBigIntNativeSupport=t}}),Smart.Utilities.Assign("DecimalNumericProcessor",class extends Smart.Utilities.BaseNumericProcessor{constructor(e,t){super(e,t),this.context=e}getPreciseModulo(e,t,i){var a=Math.abs,r=Math.round;const n=0<=e?1:-1;if(e=a(e),t=a(t),"undefined"==typeof i){const i=e.toExponential(),r=t.toExponential(),l=parseInt(i.slice(i.indexOf("e")+1),10),o=parseInt(r.slice(r.indexOf("e")+1),10),m=0>l?a(l):0,c=0>o?a(o):0,s=Math.max(m,c);if(this.roundCoefficient=s,e<t)return n*e;if(e===t)return 0;if((-1>e||1<e)&&(-1>t||1<t||1===t))if(0==e%1&&0==t%1)return n*(e%t);else{const i=Smart.Utilities.BigNumber.ignoreBigIntNativeSupport;Smart.Utilities.BigNumber.ignoreBigIntNativeSupport=!0;const a=n*parseFloat(new Smart.Utilities.BigNumber(e).mod(t).toString());return Smart.Utilities.BigNumber.ignoreBigIntNativeSupport=i,a}const u=Math.pow(10,s);return n*(e*u%(t*u)/u)}return n*(r(e*i)%r(t*i))}createDescriptor(e,t,i,a){let r=parseFloat(e);return a&&(r=this.validate(r,this.context._minObject,this.context._maxObject)),r}round(e){return Math.round(e)}validate(e,t,i){let a;return a=e<t?t:e>i?i:e,a}validateMinMax(e,t){const i=this.context,a="undefined"!=typeof i._regexSpecial&&i._regexSpecial.inf.test(i.min),r="undefined"!=typeof i._regexSpecial&&i._regexSpecial.inf.test(i.max);e&&(null===i.min||a?(i.min=-Infinity,i._minObject=-Infinity):(i.min=i.min.toString().replace(/\s/g,""),this.regexScientificNotation.test(i.min)&&(i.min=this.scientificToDecimal(i.min)),i._minObject=i._discardDecimalSeparator(i.min))),t&&(null===i.max||r?(i.max=1/0,i._maxObject=1/0):(i.max=i.max.toString().replace(/\s/g,""),this.regexScientificNotation.test(i.max)&&(i.max=this.scientificToDecimal(i.max)),i._maxObject=i._discardDecimalSeparator(i.max))),this.compare(i._minObject,i._maxObject)||(i._maxObject=parseFloat(i._maxObject)+1,i.max=i._maxObject)}valueToPx(e){const t=this.context,i=t._measurements.trackLength/t._range;let a;return a=t._normalLayout?i*(e-t._drawMin):i*(t._drawMax-e),Math.round(a)}pxToValue(e){const t=this.context;let i;if(i=t._normalLayout?(e-t._trackStart)*t._valuePerPx:(t._trackEnd-e)*t._valuePerPx,t.logarithmicScale){const e=i+parseFloat(t._drawMin);return Math.pow(10,e)}return this.validate(i+t._minObject,t._minObject,t._maxObject)}compare(e,t,i){return e=parseFloat(e),t=parseFloat(t),!0===i?e<t?-1:e>t?1:0:e!==t}incrementDecrement(e,t,i){const a=this.context;let r;if("add"===t){if(r=parseFloat(e)+parseFloat(i),void 0!==a._drawMax)return r>parseFloat(a._drawMax)?a._drawMax:r;}else if(r=parseFloat(e)-parseFloat(i),void 0!==a._drawMin)return r<parseFloat(a._drawMin)?a._drawMin:r;return r}render(e){const t=this.context,i="undefined"!=typeof t._regexSpecial&&t._regexSpecial.nonNumericValue.test(e);if(i)return e;else{const i=new Smart.Utilities.NumberRenderer(e);return t.scientificNotation?i.toScientific(t.significantDigits,t.precisionDigits):i.toDigits(t.significantDigits,t.precisionDigits)}}addTicksAndLabels(){const e=this.context,t=e._measurements.trackLength,i=e._normalLayout,a=e._majorTicksInterval,r=Math.round(e._range/parseFloat(a.toString())),n=t/r,l=parseFloat(e._drawMin),o=parseFloat(e._drawMax);let m,c,s,u,g,d,p,b,_,x="",f="";e._tickValues=[],this._longestLabelSize=0,i?(m=l,c=e.logarithmicScale&&0>l&&-1!==l?parseFloat(m-this.getPreciseModulo(m,a)):parseFloat(m-this.getPreciseModulo(m,a)+parseFloat(a)),s=c-m,g=e._formatLabel(l),d=e._tickIntervalHandler.labelsSize.minLabelSize,u=o,p=e._formatLabel(o),b=e._tickIntervalHandler.labelsSize.maxLabelSize):(m=o,c=parseFloat(m-this.getPreciseModulo(m,a)),s=m-c,g=e._formatLabel(o),d=e._tickIntervalHandler.labelsSize.maxLabelSize,u=l,p=e._formatLabel(l),b=e._tickIntervalHandler.labelsSize.minLabelSize),e._labelDummy=this._createMeasureLabel(),_=this._addMajorTickAndLabel(g,d,!0,m),x+=_.tick,f+=_.label;const S=s/a*n;if(c.toString()!==e._drawMax.toString()&&S<t){const t=e._formatLabel(c.toString()),i=d<S;_=this._addMajorTickAndLabel(t,void 0,i,c,!0),x+=_.tick,f+=_.label}_=this.addMiddleMajorTicks(r,n,S,s,i,a),x+=_.tick,f+=_.label,_=this._addMajorTickAndLabel(p,b,!0,u),x+=_.tick,f+=_.label,x+=this.addMinorTicks(i),e._measureLabelScale.removeChild(e._labelDummy),delete e._labelDummy,delete e._measureLabelScale,"smart-tank"===e.nodeName.toLowerCase()&&e._updateScaleWidth(this._longestLabelSize),e._appendTicksAndLabelsToScales(x,f)}addMiddleMajorTicks(e,t,a,r,n,l){const o=this.context;let i="",m="";for(let c=1;c<e;c++){let s,u=c*t+a;if(s=n?parseFloat(o._drawMin)+l*c+r:parseFloat(o._drawMax)-l*c-r,s.toString()!==o._drawMax.toString()){let a=o._formatLabel(s.toString()),r=!0;o._labelDummy.innerHTML=a;let n=o._labelDummy[o._settings.size];u+n>=e*t&&(r=!1);const l=this._addMajorTickAndLabel(a,void 0,r,s,!0);i+=l.tick,m+=l.label}}return{tick:i,label:m}}addMinorTicks(e){function t(e){return parseFloat(e.toFixed(s))}function a(e){-1===o.indexOf(e)&&0===l._numericProcessor.getPreciseModulo(e,c,u)&&(_+="<div style=\""+g+": "+l._numericProcessor.valueToPx(e)+"px;\" class=\"smart-tick smart-tick-minor\"></div>")}function i(){let e=l._measurements.trackLength,t=e/o.length,i=.1;20>t?i=1:20<=t&&40>t?i=1<p-d?1:.5:40<=t&&80>t&&(i=.2);let a=Math.floor(l._drawMax),m=l._drawMax-a,c=l._drawMax-l._drawMin>o.length;for(let e=l._drawMax;e>l._drawMin-1;--e){let t=0<m?n(10,e-m+1):n(10,e),a=t*i;for(let e=t;0<e;e-=a)if(e<l.max&&e>l.min){let t=new Smart.Utilities.BigNumber(r(e));(0==t%1&&c||!c)&&(_+="<div style=\""+g+": "+l._numericProcessor.valueToPx(t)+"px;\" class=\"smart-tick smart-tick-minor\"></div>")}}}var r=Math.log10,n=Math.pow;const l=this.context,o=l._tickValues,m=l._tickIntervalHandler.nearestPowerOfTen,c=l._minorTicksInterval,s=0>r(m)?Math.round(Math.abs(r(m))):0,u=n(10,s),g=l._settings.leftOrTop;let d,p,b,_="";if(e?(d=o[0],p=o[1],b=o[o.length-1]):(d=o[o.length-1],p=o[o.length-2],b=o[0]),l.logarithmicScale)i();else{for(let e=p;e>d;e=t(e-m))a(e);for(let e=t(p+m);e<b;e=t(e+m))a(e)}return _}validateCustomTicks(){const e=this.context;let t=[];for(let a=0;a<e.customTicks.length;a++){const i=e.customTicks[a],r=this.createDescriptor(i);r>=e._minObject&&r<=e._maxObject&&t.push(r.toString())}t.sort(function(e,t){return e-t}),t=t.filter(function(e,t,i){return!t||e!==i[t-1]}),e.customTicks=t.slice(0)}addGaugeTicksAndLabels(){var e=Math.PI;const t=this.context,a=this,r=Math.max(t._tickIntervalHandler.labelsSize.minLabelSize,t._tickIntervalHandler.labelsSize.maxLabelSize),n=t._majorTicksInterval,l=t._minorTicksInterval,o={},m=t._distance,c=t._measurements.radius,s=c-m.majorTickDistance,u=c-m.minorTickDistance;let g,d,p,b,_,x;"none"!==t.ticksVisibility&&!1!==t._plotTicks?(g=function(e){t._drawTick(e,s,"major")},d=function(e){t._drawTick(a.getAngleByValue(e,!0),u,"minor")}):(g=function(){},d=function(){}),p="none"!==t.labelsVisibility&&!1!==t._plotLabels?function(e,i,a){t._drawLabel(e,i,m.labelDistance,a)}:function(){},void 0===t.inverted||!t.inverted&&!t.rightToLeft||t.rightToLeft&&t.inverted?(_=t.endAngle,x=t.startAngle):(_=t.startAngle,x=t.endAngle),b=a.getAngleByValue(t._drawMin,!1),g(b),o[t._drawMin]=!0,p(b,t.min,!1);let f,S=t._drawMin-a.getPreciseModulo(t._drawMin,n);0<=t._drawMin&&(S+=n);for(let e=S;e>=t._drawMin;e-=l)f=e;b=a.getAngleByValue(S,!1),g(b),o[S]=!0,2*e*t._measurements.innerRadius*(this._getAngleDifference(_,a.getAngleByValue(S,!1,!0))/360)>r&&p(b,this.getActualValue(S),S<t._drawMax);let N;for(N=S+n;N<t._drawMax-n;N+=n)b=a.getAngleByValue(N,!1),g(b),o[N]=!0,p(b,this.getActualValue(N),!0);if(void 0===o[N]&&N<=t._drawMax&&(b=a.getAngleByValue(N,!1),g(b),o[N]=!0,2*e*t._measurements.innerRadius*(this._getAngleDifference(x,a.getAngleByValue(N,!1,!0))/360)>=r&&p(b,this.getActualValue(N),!0),t._normalizedStartAngle!==t.endAngle&&(b=a.getAngleByValue(t._drawMax,!1),g(b),o[t._drawMax]=!0,2*e*t._measurements.innerRadius*(this._getAngleDifference(x,_)/360)>=r&&p(b,t.max,!1))),!t.logarithmicScale)for(let e=f;e<t._drawMax;e+=l)o[e]||d(e);else this.drawGaugeLogarithmicScaleMinorTicks(o,n,d)}updateToolTipAndValue(e,t,i){const a=this.context,r=a.logarithmicScale;a._updateTooltipValue(e),r&&(e=parseFloat(Math.pow(10,parseFloat(e)).toFixed(11)));const n=e.toString();a._number=e,a._drawValue=r?Math.log10(n):e,n!==t&&i&&(a.value=a._discardDecimalSeparator(n),!a._programmaticValueIsSet&&a.$.fireEvent("change",{value:a.value,oldValue:t}),a.$.hiddenInput&&(a.$.hiddenInput.value=a.value),a.setAttribute("aria-valuenow",a._getEventValue(!0)))}validateInterval(e){const t=this.context,i=t._maxObject-t._minObject;t._validInterval=Math.min(parseFloat(e),i),t.interval=t._validInterval}getCoercedValue(e,t,i){var a=Math.abs;const r=this.context;if(!r.coerce)return e;let n,l,o=!r.logarithmicScale;if(r.customInterval){const l=r.customTicks;if(0===l.length)return e;o=o||i,n=!1===t?r._minObject:parseFloat(r._drawMin);let m=a(n-e),c=n;for(let t=0;t<l.length;t++){const i=this.createDescriptor(l[t]),r=o?i:Math.log10(i),n=a(r-e);n<m&&(m=n,c=r)}return c}!1===t?(n=parseFloat(r.min),l=parseFloat(r.max)):(n=parseFloat(r._drawMin),l=parseFloat(r._drawMax));let m=e-n,c=this.getPreciseModulo(m,parseFloat(r.interval)),s=this.roundCoefficient;if(0===c)return e;0===this.roundCoefficient&&(s=12);let u=parseFloat((m-c).toFixed(s)),g=u+parseFloat(r.interval);if(r.max-r.min<=parseFloat(r.interval)&&o){let t=n,i=l;return e>=t+(i-t)/2?i:t}if(a(m-u)<a(m-g))return u+n;else{const e=g+n;return e>l?u+n:e}}updateValue(e){const t=this.context,i=this.validate(e,t._minObject,t._maxObject),a=t.value;e.toString()!==a.toString()||t._scaleTypeChangedFlag?(t.value=e.toString(),t._number=i,!t._programmaticValueIsSet&&t.$.fireEvent("change",{value:t.value,oldValue:a})):t.value="string"==typeof e?e:e.toString(),t._drawValue=t.logarithmicScale?Math.log10(i).toString():i.toString(),t._moveThumbBasedOnValue(t._drawValue),t.$.hiddenInput&&(t.$.hiddenInput.value=t.value),t.setAttribute("aria-valuenow",t._getEventValue(!0))}getValuePerPx(e,t){return parseFloat(e)/t}restrictValue(e){e[1]<e[0]&&(e[1]=e[0])}lockRotation(e,t){const i=this.context;if(e&&t<i._number){if(i._lockCW=!0,t<i._maxObject)return i._maxObject;}else if(!e&&t>i._number&&(i._lockCCW=!0,t>i._minObject))return i._minObject}getAngleRangeCoefficient(){const e=this.context;e._angleRangeCoefficient=e._angleDifference/e._range}}),Smart.Utilities.Assign("ComplexNumericProcessor",class extends Smart.Utilities.BaseNumericProcessor{constructor(e,t){super(e,t),this.context=e}createDescriptor(e,t,i,a,r,n){let l;return l=n?n:e.constructor===this.complexConstructor?new this.complexConstructor(e.realPart,e.imaginaryPart):new this.complexConstructor(e),a&&(l=this.validate(l,this.context._minObject,this.context._maxObject)),l}validate(e,t,i){let a=e;return t===-Infinity?i!==1/0&&1===this.compareComplexNumbers(e,i)&&(a=new this.complexConstructor(i.realPart,i.imaginaryPart)):-1===this.compareComplexNumbers(e,t)&&(a=new this.complexConstructor(t.realPart,t.imaginaryPart)),a}compare(e,t,i){return!0===i?this.compareComplexNumbers(e,t):0!==this.compareComplexNumbers(e,t)}validateMinMax(e,t){const i=this.context;e&&(null===i.min||i._regexSpecial.inf.test(i.min)?(i.min=-Infinity,i._minObject=-Infinity):i._minObject=new this.complexConstructor(i.min)),t&&(null===i.max||i._regexSpecial.inf.test(i.max)?(i.max=1/0,i._maxObject=1/0):i._maxObject=new this.complexConstructor(i.max))}incrementDecrement(e,t){let i=new this.complexConstructor(e.realPart,e.imaginaryPart),a=this.context._spinButtonsStepObject;return"add"===t?(i.realPart+=a.realPart,i.imaginaryPart+=a.imaginaryPart):(i.realPart-=a.realPart,i.imaginaryPart-=a.imaginaryPart),i}render(e){let t=e;if(!1===this.context._regexSpecial.nonNumericValue.test(e)){let e,i=t.realPart,a=t.imaginaryPart,r=this.context.significantDigits,n=this.context.precisionDigits;0<=a?e="+":(e="-",a=Math.abs(a));const l=new Smart.Utilities.NumberRenderer(i),o=new Smart.Utilities.NumberRenderer(a);this.context.scientificNotation?(i=l.toScientific(r,n),a=o.toScientific(r,n)):(i=l.toDigits(r,n),a=o.toDigits(r,n)),t=`${i} ${e} ${a}i`}return t}compareComplexNumbers(e,t){if(!1==e instanceof this.complexConstructor||!1==t instanceof this.complexConstructor)return-1;const i=e.realPart,a=t.realPart;if(i<a)return-1;if(i>a)return 1;else{const i=e.imaginaryPart,a=t.imaginaryPart;return i<a?-1:i>a?1:0}}}),Smart.Utilities.Assign("NumberRenderer",class{constructor(e){const t=this;t.numericValue=e,t.powersToPrefixes={24:"Y",21:"Z",18:"E",15:"P",12:"T",9:"G",6:"M",3:"k",0:"","-2":"c","-3":"m","-6":"u","-9":"n","-12":"p","-15":"f","-18":"a","-21":"z","-24":"y"},t.localizationObject={currencysymbol:"$",currencysymbolposition:"before",decimalseparator:".",thousandsseparator:",",defaultPrecision:2}}isENotation(e){return new RegExp(/e/i).test(e)}largeExponentialToDecimal(e){let t;e===void 0&&(e=this.numericValue,t=!0);let i=e.toString().toLowerCase(),a=i.indexOf("e"),r=new Smart.Utilities.BigNumber(i.slice(0,a)),n=i.slice(a+1,a+2);"+"!==n&&"-"!==n&&(i=i.slice(0,a)+"e+"+i.slice(a+1),n="+");let l=i.slice(a+2),o=new Smart.Utilities.BigNumber(10),m=o.pow(n+(t?Math.min(20,l):l)),c=r.multiply(m);return c.toString()}bigNumberToExponent(e,t){let i=this.numericValue;i.constructor!==Smart.Utilities.BigNumber&&(i=new Smart.Utilities.BigNumber(i));const a=i._f;let r=i.toString();if(10>=a)return t?parseFloat(r).toExponential(null===e?void 0:e-1):new Smart.Utilities.NumberRenderer(parseFloat(r)).toDigits(e);if(e>=a&&!t)return r;else{let n;!1===i._s?n="":(n="-",r=r.slice(1));const l=parseFloat(r.slice(e,e+1));5<=l&&(r=new Smart.Utilities.BigNumber(r.slice(0,e)).add(1).toString());let o=r.slice(1,e);if(t)e--,0<o.length&&e>o.length?o+="0".repeat(e-o.length):0===o.length&&(o="0".repeat(e));else for(;0<o.length&&"0"===o.charAt(o.length-1);)o=o.slice(0,o.length-1);const m=0<o.length?".":"";return n+r.slice(0,1)+m+o+"E+"+(a-1)}}toScientific(){const e=this;let t;if(t=e.numericValue._d?e.bigNumberToExponent(null===arguments[0]?arguments[1]+1:arguments[0],!0).toLowerCase():(+e.numericValue.toString()).toExponential(),isNaN(t))return t;const i=t.indexOf("e"),a=t.slice(i+1);let r=parseFloat(t.slice(0,i));if("-2"===a)return new Smart.Utilities.NumberRenderer(r).toDigits(arguments[0],arguments[1])+"c";const n=parseInt(a,10)%3;if(0<n)for(let e=0;e<n;e++)r*=10;else if(0>n){const e=Smart.Utilities.BigNumber.ignoreBigIntNativeSupport;Smart.Utilities.BigNumber.ignoreBigIntNativeSupport=!0,r=parseFloat(new Smart.Utilities.BigNumber(r).multiply(Math.pow(10,n)).toString()),Smart.Utilities.BigNumber.ignoreBigIntNativeSupport=e}if(0<a){const e=0<=r?0:1,a=t.slice(e,i).length-n-2;0<=a&&(r=r.toFixed(a))}const l=new Smart.Utilities.NumberRenderer(r);r=l.toDigits(arguments[0],arguments[1]);const o=parseInt(a,10)-n,m=r+e.powersToPrefixes[o.toString()];return m}bigNumberToScientific(){const e=this,t=e.numericValue._f-1,i=parseInt(t,10)%3,a=parseInt(t,10)-i;let r,n,l=e.numericValue.toString();if("-"===l.charAt(0)?(r="-",l=l.slice(1)):r="",null!==arguments[0])for(n=l.slice(0,arguments[0]),5<=parseFloat(l.slice(arguments[0],arguments[0]+1))&&(n=new Smart.Utilities.BigNumber(n).add(1).toString());n.length>1+i&&"0"===n.charAt(n.length-1);)n=n.slice(0,n.length-1);else null!==arguments[1]&&(n=l.slice(0,arguments[1]+1),5<=parseFloat(l.slice(arguments[1]+1,arguments[1]+2))&&(n=new Smart.Utilities.BigNumber(n).add(1).toString()),arguments[1]+i>n.length-1&&(n+="0".repeat(arguments[1]+i-n.length+1)));return n.length>1+i&&(n=n.slice(0,1+i)+"."+n.slice(1+i)),r+n+e.powersToPrefixes[a.toString()]}toDigits(e,t){const i=this;let a;return a=null===e?null===t?i.applySignificantDigits(8):i.applyPrecisionDigits(t):i.applySignificantDigits(e),a}applySignificantDigits(e){function t(e){for(;"0"===e.charAt(e.length-1);)e=e.slice(0,-1);return"."===e.charAt(e.length-1)&&(e=e.slice(0,-1)),e}const i=this;e=Math.max(1,Math.min(e,21));let a=parseFloat(i.numericValue).toPrecision(e).toUpperCase();if(-1!==a.indexOf("."))if(i.isENotation(a)){const e=a.indexOf("."),i=a.indexOf("E");let r=a.slice(e,i);r=t(r),a=a.slice(0,e)+r+a.slice(i)}else a=t(a);return a}applyPrecisionDigits(e){const t=this;e=Math.max(0,Math.min(e,20));let i=parseFloat(t.numericValue).toFixed(e);return t.isENotation(i)&&(i=t.largeExponentialToDecimal(i)+"."+"0".repeat(e)),i}getLogarithm(e){var t=Math.log;const i=this.numericValue;let a;if(void 0===e&&(e=10),10===e)try{a=Math.log10(i)}catch(e){a=t(i)/2.302585092994046}else a=t(i)/t(e);return a}applySeparators(e,t){const i=this;e=e.toString();const a=e.indexOf(".");if(-1!==a){const r=e.slice(0,a),n=e.slice(a+1);return i.applyThousandsSeparator(r,t)+i.localizationObject.decimalseparator+n}return i.applyThousandsSeparator(e,t)}applyThousandsSeparator(e,t){if(t)return e;let i="";e=e.toString(),"-"===e.charAt(0)&&(i="-",e=e.slice(1));let a=e.split("").reverse();for(let r=2;r<a.length-1;r+=3)a[r]=this.localizationObject.thousandsseparator+a[r];return a.reverse(),a=a.join(""),i+a}formatNumber(e,t,i){var a=Math.round;const r=this;if(void 0===arguments[3]&&delete r._ignoreMinus,delete r._wordLengthNumber,!/^([a-zA-Z]\d*)$/g.test(t))try{const i=r.applyCustomFormat(e,t);return i}catch(t){return e.toString()}const n=t.slice(0,1);let l=t.slice(1);if(""!==l&&(isNaN(parseFloat(l))||0>parseFloat(l)||99<parseFloat(l)?l="":0!=parseFloat(l)%1&&(l=a(l))),e._d)r.inputFormat="integer";else{if(e.imaginaryPart)return r.formatComplexNumber(e,t,n,l);r.inputFormat="floatingPoint"}let o,m=new Smart.Utilities.NumericProcessor(r,"inputFormat"),c=m.createDescriptor(e);switch(r._wordLengthNumber=m.getWordLength(i?i:"int32"),"integer"===r.inputFormat&&(c=m.round(c)),r.numericValue=c,n){case"C":case"c":return""===l&&(l=r.localizationObject.defaultPrecision),l=parseFloat(l),o="floatingPoint"===r.inputFormat?r.applyPrecisionDigits(l):c.toString()+(0<l?"."+"0".repeat(l):""),o=r.applySeparators(o),"before"===r.localizationObject.currencysymbolposition?"-"===o.charAt(0)?"-"+r.localizationObject.currencysymbol+o.slice(1):r.localizationObject.currencysymbol+o:o+" "+r.localizationObject.currencysymbol;case"D":case"d":{if(o=c,"floatingPoint"===r.inputFormat&&(o=a(c)),o=o.toString(),""===l)return o;let e="";"-"===o.charAt(0)&&(e="-",o=o.slice(1));const t=l-o.length;return 0<t&&(o="0".repeat(t)+o),e+o}case"E":case"e":case"U":case"u":{""===l&&(l=6),o="floatingPoint"===r.inputFormat?c.toExponential(l):r.bigNumberToExponent(parseFloat(l)+1,!0).toLowerCase();const e=o.indexOf("e"),t=o.slice(e+2).length;return(3>t&&(o=o.slice(0,e+2)+"0".repeat(3-t)+o.slice(e+2)),"u"===n.toLowerCase())?r.exponentialToSuperscript(r.applySeparators(o,!0)):("E"===n&&(o=o.toUpperCase()),r.applySeparators(o,!0))}case"F":case"f":case"N":case"n":return""===l&&(l=r.localizationObject.defaultPrecision),l=parseFloat(l),o="floatingPoint"===r.inputFormat?r.applyPrecisionDigits(l):c.toString()+(0<l?"."+"0".repeat(l):""),r.applySeparators(o,"f"===n.toLowerCase());case"G":case"g":{(""===l||"0"===l)&&(l="floatingPoint"===r.inputFormat?15:"int8"===i||"uint8"===i?3:"int16"===i||"uint16"===i?5:"int64"===i?19:"uint64"===i?20:10),l=parseFloat(l);let t=r.formatNumber(e,"E"+l,i),a=t.indexOf("E");const o=parseInt(t.slice(a+1),10);if(-5<o&&o<l)return"floatingPoint"===r.inputFormat?r.applySeparators(r.applySignificantDigits(l),!0):c.toString();if(-100<o&&100>o&&(t=t.slice(0,a+2)+t.slice(a+3)),-1!==t.indexOf(r.localizationObject.decimalseparator)){for(;"0"===t.charAt(a-1);)t=t.slice(0,a-1)+t.slice(a),a=t.indexOf("E");t.charAt(a-1)===r.localizationObject.decimalseparator&&(t=t.slice(0,a-1)+t.slice(a))}return"g"===n&&(t=t.toLowerCase()),t}case"P":case"p":return""===l&&(l=r.localizationObject.defaultPrecision),l=parseFloat(l),"floatingPoint"===r.inputFormat?(r.numericValue=100*c,o=r.applyPrecisionDigits(l)):o=c.multiply(100).toString()+(0<l?"."+"0".repeat(l):""),r.applySeparators(o)+" %";case"B":case"b":case"O":case"o":case"X":case"x":{"integer"!==r.inputFormat&&(r.inputFormat="integer",m=new Smart.Utilities.NumericProcessor(r,"inputFormat"),c=m.round(m.createDescriptor(e)));let t;if(t="B"===n||"b"===n?2:"O"===n||"o"===n?8:16,o=c.toString(t,r._wordLengthNumber),""!==l){const e=parseFloat(l)-o.length;0<e&&(o="0".repeat(e)+o)}return"x"===n&&(o=o.toLowerCase()),o}case"S":case"s":return""===l&&(l=r.localizationObject.defaultPrecision),l=parseFloat(l),r.toScientific(null,l).replace(".",r.localizationObject.decimalseparator);default:return e.toString();}}formatComplexNumber(e,t,i){const a=this;return"E"===i||"e"===i||"U"===i||"u"===i||"F"===i||"f"===i||"G"===i||"g"===i||"N"===i||"n"===i||"S"===i||"s"===i?0<=e.imaginaryPart?a.formatNumber(e.realPart,t)+" + "+a.formatNumber(e.imaginaryPart,t)+"i":a.formatNumber(e.realPart,t)+" - "+a.formatNumber(Math.abs(e.imaginaryPart),t)+"i":e.toString()}toString(e,t,i){return t?this.formatNumber(e,t,i):e.toString()}applyCustomFormat(e,t){const i=this;t=t.replace(/_.|\[\w*\]|\*/g,""),t=t.replace(/\?/g,"#");const a=t.split(";");if("string"==typeof e&&isNaN(e))return a[a.length-1].replace(/"/g,"").replace(/@/g,e.toString());if(e._d)i.inputFormat="integer";else{if(e.imaginaryPart)return e.toString();e=parseFloat(e),i.inputFormat="floatingPoint"}let r=new Smart.Utilities.NumericProcessor(i,"inputFormat"),n=r.createDescriptor(e);"integer"===i.inputFormat&&(n=r.round(n)),i.numericProcessor=r;const l=i.getRelevantFormatSection(a,n);if(void 0===l)return e.toString();if(-1!==l.indexOf("@"))return a[a.length-1].replace(/"/g,"").replace(/@/g,e.toString());const o=-1!==l.replace(/".*"/g,"").indexOf("%"),m=i.getTextParts(l);if(-1!==m.main.toLowerCase().indexOf("e"))return i.applyCustomExponentialFormat(n,m,r);if(-1!==m.main.indexOf("/"))return i.applyCustomFractionalFormat(n,m,r);if(o&&("integer"===i.inputFormat?n=n.multiply(100):n*=100),""===m.main){if(!o)return m.suffix;let e=n.toString();return i._ignoreMinus&&"-"===e.charAt(0)&&(e=e.slice(1)),e+m.suffix}let c=m.main.replace(/[^0#,. \/]/g,""),s=c.indexOf(".");for(-1!==s&&(c=c.substring(0,s+1)+c.substring(s+1).replace(/\./g,""),"."===c.charAt(c.length-1)&&(c=c.slice(0,c.length-1)),0===s&&(c="#"+c));","===c.charAt(c.length-1);)c=c.slice(0,c.length-1),"floatingPoint"===i.inputFormat?n/=1e3:n=n.multiply(.001);"integer"===i.inputFormat&&(n=r.round(n));const u=-1!==c.indexOf(",");c=c.replace(/,/g,"");const g=c.split("."),d=g[0];let p=g[1],b="";if(1===g.length)return"floatingPoint"===i.inputFormat&&(n=r.round(n)),b=n.toString(),i.setTextParts(i.formatWholeNumber(b,d,u),m);b=n.toString();let _=b.split("."),x=i.formatWholeNumber(_[0],d,u),f=_[1]||"";if(p.length<=f.length&&(b=parseFloat(n.toFixed(p.length)).toString(),_=b.split("."),x=i.formatWholeNumber(_[0],d,u),f=_[1]||"",f))return i.setTextParts(x+i.localizationObject.decimalseparator+f.slice(0,p.length),m);p=p.slice(f.length-p.length);let S=p.lastIndexOf("0");return-1===S?""===f?i.setTextParts(x,m):i.setTextParts(x+i.localizationObject.decimalseparator+f,m):i.setTextParts(x+i.localizationObject.decimalseparator+f+"0".repeat(S+1),m)}getRelevantFormatSection(e,t){const i=this,a=i.numericProcessor.compare(t,0,!0);if(1===a)return e[0];let r,n;return 3<=e.length?(i._ignoreMinus=!0,r=1,n=2):2===e.length?(i._ignoreMinus=!0,n=0,r=1):1===e.length&&(n=0,r=0),0===a?e[n]:-1===a?e[r]:void 0}getTextParts(e){const t=e.replace(/"[^"]*"/g,""),a=e.match(/"[^"]*"/g),i=t.search(/0|#|\./g),r=Math.max(t.lastIndexOf("0"),t.lastIndexOf("#"),t.lastIndexOf("."),t.lastIndexOf(",")),n=t.slice(i,r+1);if(""===n)return{prefix:"",main:"",suffix:e.replace(/"/g,"")};let l=e.indexOf(n),o=l+n.length;if(a)for(let t=0;t<a.length;t++){const i=e.indexOf(a[t]);l>=i&&o<=i+a[t].length&&(l=e.indexOf(n,i+a[t].length),o=l+n.length)}const m=e.slice(0,l).replace(/"/g,""),c=e.slice(o).replace(/"/g,"");return{prefix:m,main:n,suffix:c}}applyCustomExponentialFormat(e,t,i){var a=Math.pow;const r=this;let n,l=t.main;const o=-1!==l.indexOf(",");l=l.replace(/[^0#.eE+-]/g,"");const m=l.toLowerCase().indexOf("e");l=l.substring(0,m+1)+l.substring(m+1).replace(/[eE\.]/g,"");const c=l.charAt(m),s=l.indexOf(".");-1!==s&&(l=l.substring(0,s+1)+l.substring(s+1).replace(/\./g,"")),"."===l.charAt(l.length-1)&&(l=l.slice(0,l.length-1));const u=l.split(c);let g=u[0];const d=g.split("."),p=d[0],b=d[1],_=u[1];let x=e.toString().split(".")[0].replace(/-/,""),f=0;if("0"===x&&i.compare(e,0)){let t=p.length-1;for(;0===parseInt(e);)f++,e*=10;x=e.toString().split(".")[0].replace(/-/,""),f+=t,e*=a(10,t)}if(o&&(g=g.slice(0,1)+","+g.slice(1)),x.length<=p.length)n=r.formatNumber(e,g,void 0,!0)+c+r.formatExponent(0-f,_);else{const t=x.length-p.length;let l="floatingPoint"===r.inputFormat?e/a(10,t):e.divide(a(10,t));if(!b){let e=r.applyThousandsSeparator(i.round(l).toString(),!o);n=e+c+r.formatExponent(t-f,_)}let m=l.toString().split(".")[1]||"";m.length===b.length?n=r.applySeparators(l,!o)+c+r.formatExponent(t-f,_):m.length<b.length?n=r.formatNumber(l,g,void 0,!0)+c+r.formatExponent(t-f,_):(l="floatingPoint"===r.inputFormat?l.toFixed(b.length):l=i.round(e.divide(a(10,t-b.length))).divide(a(10,b.length)),n=r.formatNumber(parseFloat(l),g,void 0,!0)+c+r.formatExponent(t-f,_))}return r.setTextParts(n,t)}formatExponent(e,t){let i;return-1!==["+","-"].indexOf(t.charAt(0))&&(i=t.charAt(0),(0<e&&"-"===i||0>e&&"+"===i)&&(i=void 0)),0>e&&(e=Math.abs(e),i="-"),t=t.replace(/[+-]/g,""),e=this.formatNumber(e,t,void 0,!0),(i?i:"")+e}formatWholeNumber(e,t,i){const a=this;let r="";if("-"===e.charAt(0)&&(!a._ignoreMinus&&(r="-"),e=e.slice(1)),"0"===e){if(t==="#".repeat(t.length))return r;e=""}if(t.length<=e.length)return r+a.applyThousandsSeparator(e,!i);t=t.slice(0,t.length-e.length);for(let a=t.length-1;0<=a;a--)"0"===t.charAt(a)&&(e="0"+e);return r+a.applyThousandsSeparator(e,!i)}setTextParts(e,t){return t.prefix+e+t.suffix}applyCustomFractionalFormat(e,t,i){var a=Math.abs;const r=this,n=/^([0#,]+[ ]+)?([0#,]+\/[0#,]+)$/;let l,o=t.main.trim();if(!n.test(o))return e.toString();const m=n.exec(o);if(m[2]=m[2].replace(/,/g,""),"integer"===r.inputFormat){const i=m[2].split("/");return void 0===m[1]?l=r.formatNumber(e,i[0],void 0,!0)+"/"+r.formatNumber(1,i[1],void 0,!0):(l=r.formatNumber(e,m[1].trim(),void 0,!0),-1!==m[2].indexOf("0")&&(l+=" "+r.formatNumber(0,i[0],void 0,!0)+"/"+r.formatNumber(1,i[1],void 0,!0))),r.setTextParts(l,t)}if(void 0===m[1])l=(0>e?"-":"")+r.formatAsFraction(a(e),m[2]);else{const t=m[1].trim(),n=m[2];l=r.formatNumber(parseInt(e,10),t,void 0,!0)+" "+r.formatAsFraction(i.getPreciseModulo(a(e),1),n)}return r.setTextParts(l.trim(),t)}formatAsFraction(e,t){const i=this,a=t.split("/");if(0===e)return-1===t.indexOf("0")?"":i.formatNumber(0,a[0],void 0,!0)+"/"+i.formatNumber(1,a[1],void 0,!0);if(0==e%1)return i.formatNumber(e,a[0],void 0,!0)+"/"+i.formatNumber(1,a[1],void 0,!0);const r=[];i.approximateFractions(e,r);const n=2<=a[1].length?2:1;let l=[],o=[];r.forEach(function(t,i){const a=t.denominator.toString().length,r=Math.abs(e-t.numerator/t.denominator);return void 0===l[a]?(o[a]=i,void(l[a]=r)):void(r<l[a]&&(o[a]=i,l[a]=r))});let m=o[n]?r[o[n]]:r[o[1]];return i.formatNumber(m.numerator,a[0],void 0,!0)+"/"+i.formatNumber(m.denominator,a[1],void 0,!0)}approximateFractions(e,t){const a=[0,1],r=[1,0],n=this.getMaxNumerator(e);let l,o=e,m=NaN;for(let c=2;1e3>c;c++){const i=Math.floor(o);if(a[c]=i*a[c-1]+a[c-2],Math.abs(a[c])>n)return;if(r[c]=i*r[c-1]+r[c-2],l=a[c]/r[c],l===m)return;if(t.push({numerator:a[c],denominator:r[c]}),l===e)return;m=l,o=1/(o-i)}}getMaxNumerator(e){let t=null,i=e.toString().indexOf("E");-1===i&&(i=e.toString().indexOf("e")),t=-1===i?e.toString():e.toString().substring(0,i);let a=null;const r=t.toString().indexOf(".");-1===r?a=t:0===r?a=t.substring(1,t.length):r<t.length&&(a=t.substring(0,r)+t.substring(r+1,t.length));let n=a;const l=n.toString().length,o=e;let m=o.toString().length;0===o&&(m=0);const c=l-m;for(let t=c;0<t&&0==n%2;t--)n/=2;for(let t=c;0<t&&0==n%5;t--)n/=5;return n}exponentialToSuperscript(e){const t=e.indexOf("e"),i=e.slice(t+1).replace(/0{1,2}/,"");let a=e.slice(0,t+1);return a=a.replace("e","\xD710"),a+=this.toSuperscript(i),a=a.replace("+",""),a}toSuperscript(e,t){const a="-0123456789",r="\u207B\u2070\xB9\xB2\xB3\u2074\u2075\u2076\u2077\u2078\u2079";let l="";for(let o=0;o<e.length;o++)if(!0===t){const t=r.indexOf(e.charAt(o));l+=-1===t?e[o]:a[t]}else{const t=a.indexOf(e.charAt(o));l+=-1===t?e[o]:r[t]}return l}});
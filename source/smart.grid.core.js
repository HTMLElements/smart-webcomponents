
/* Smart UI v7.7.0 (2020-June) 
Copyright (c) 2011-2020 jQWidgets. 
License: https://htmlelements.com/license/ */ //

!function(e){var t={};function o(l){if(t[l])return t[l].exports;var n=t[l]={i:l,l:!1,exports:{}};return e[l].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=e,o.c=t,o.d=function(e,t,l){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:l})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var l=Object.create(null);if(o.r(l),Object.defineProperty(l,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)o.d(l,n,function(t){return e[t]}.bind(null,n));return l},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o(o.s=50)}({50:function(e,t){Smart("smart-grid",class extends Smart.ScrollViewer{static get properties(){return{appearance:{value:{allowColumnFixing:{value:!1,type:"boolean"},alternationStart:{value:0,type:"int"},alternationEnd:{value:0,type:"int"},alternationCount:{value:0,type:"int"},allowHover:{value:!1,type:"boolean",defaultReflectToAttribute:!0},allowHeaderHover:{value:!0,type:"boolean",defaultReflectToAttribute:!0},allowRowToggleAnimation:{value:!1,type:"boolean"},allowRowDetailToggleAnimation:{value:!1,type:"boolean"},allowSortAnimation:{value:!1,type:"boolean"},allowColumnLabelAnimation:{value:!0,type:"boolean"},allowCheckBoxesSelectionAnimation:{value:!0,type:"boolean"},allowColumnMenuAnimation:{value:!0,type:"boolean"},allowColumnSortButtonAnimation:{value:!0,type:"boolean"},allowColumnActionButtonAnimation:{value:!0,type:"boolean"},allowColumnFilterButtonAnimation:{value:!0,type:"boolean"},allowColumnStickyPosition:{value:!1,type:"boolean"},autoShowColumnSortButton:{value:!0,type:"boolean"},autoShowColumnActionButton:{value:!0,type:"boolean"},autoGenerateRowLabelMode:{value:"number",type:"string"},autoGenerateColumnLabelMode:{value:"letter",type:"string"},autoShowColumnFilterButton:{value:!0,type:"boolean"},displayLoadingIndicator:{value:!1,type:"boolean"},loadingIndicatorPlaceholder:{value:"Loading...",type:"string"},placeholder:{value:"No Rows",type:"string"},sortAnimationDuration:{value:500,type:"number"},showRowHeader:{value:!1,type:"boolean"},showRowHeaderNumber:{value:!1,type:"boolean"},showRowHeaderEditIcon:{value:!0,type:"boolean",defaultReflectToAttribute:!0},showRowHeaderDragIcon:{value:!1,type:"boolean"},showRowHeaderSelectIcon:{value:!1,type:"boolean"},showRowHeaderFocusIcon:{value:!1,type:"boolean"},showColumnHeaderLines:{value:!0,type:"boolean",defaultReflectToAttribute:!0},showColumnLines:{value:!0,type:"boolean",defaultReflectToAttribute:!0},showRowLines:{value:!0,type:"boolean",defaultReflectToAttribute:!0},showFilterColumnBackground:{value:!0,type:"boolean"},showSortColumnBackground:{value:!0,type:"boolean"},showFrozenColumnBackground:{value:!0,type:"boolean"},showFrozenRowBackground:{value:!0,type:"boolean"},showColumnSortButton:{value:!0,type:"boolean"},showColumnFilterButton:{value:!0,type:"boolean"},showColumnDescriptionButton:{value:!1,type:"boolean"},showColumnIcon:{value:!1,type:"boolean"},showColumnCustomButton:{value:!1,type:"boolean"},showColumnActionButton:{value:!0,type:"boolean"},showTooltips:{value:!1,type:"boolean"},showResizeTooltips:{value:!0,type:"boolean"},showHorizontalScrollBarOnFixedColumns:{value:!1,type:"boolean"},showVerticalScrollBarOnFixedColumns:{value:!1,type:"boolean"}},type:"object"},behavior:{value:{allowColumnAutoSizeOnDoubleClick:{value:!0,type:"boolean"},allowRowAutoSizeOnDoubleClick:{value:!0,type:"boolean"},allowColumnReorder:{value:!1,type:"boolean"},allowRowReorder:{value:!1,type:"boolean"},doubleClickTimingDelay:{value:300,type:"number"},columnResizeMode:{value:"none",type:"string",allowedValues:["none","split","growAndShrink"]},rowResizeMode:{value:"none",type:"string",allowedValues:["none","split","growAndShrink"]}},type:"object"},layout:{value:{allowCellsWrap:{value:!1,type:"boolean"},autoGenerateColumnWidth:{value:null,type:"number?"},columnWidth:{value:null,type:"any",reflectToAttribute:!1},columnHeight:{value:null,type:"any",reflectToAttribute:!1},columnMinHeight:{value:30,type:"any",reflectToAttribute:!1},isDirty:{value:!1,type:"boolean"},loadingIndicatorPosition:{value:"center",allowedValues:["bottom","center","top"],type:"string"},rowMinHeight:{value:30,type:"number"},rowHeight:{value:null,type:"any",reflectToAttribute:!1}},type:"object"},dataExport:{value:{header:{value:!0,type:"boolean"},filterBy:{value:null,type:"object"},groupBy:{value:null,type:"object"},style:{value:null,type:"object"},fileName:{value:"smartGrid",type:"string?"},pageOrientation:{value:"portrait",type:"string"},expandChar:{value:"+",type:"string"},collapseChar:{value:"-",type:"string"},view:{value:!1,type:"boolean"},viewStart:{value:null,type:"number?"},viewEnd:{value:null,type:"number?"},rowIds:{value:null,type:"array?"}},type:"object"},clipboard:{value:{enabled:{value:!0,type:"boolean"},autoFillMode:{value:"copy",allowedValues:["none","copy","fillSeries"],type:"string"},onPasteValue:{value:null,type:"any"}},type:"object"},columns:{value:[],type:"any",reflectToAttribute:!1},columnMenu:{value:{autoClose:{value:!0,type:"boolean"},dataSource:{value:{columnMenuCustomizeType:{value:{command:{value:"customizeTypeCommand",type:"any"},enabled:{value:!0,type:"boolean"},visible:{value:!1,type:"any"},icon:{value:"smart-icon-ellipsis-vert",type:"string"},label:{value:"{{messages}}",type:"string"}},type:"object",reflectToAttribute:!1},columnMenuItemRename:{value:{command:{value:"renameCommand",type:"any"},enabled:{value:!0,type:"boolean"},visible:{value:!1,type:"any"},icon:{value:"smart-icon-rename",type:"string"},label:{value:"{{messages}}",type:"string"}},type:"object",reflectToAttribute:!1},columnMenuItemEditDescription:{value:{command:{value:"editDescriptionCommand",type:"any"},enabled:{value:!0,type:"boolean"},visible:{value:!1,type:"any"},icon:{value:"smart-icon-circled",type:"string"},label:{value:"{{messages}}",type:"string"}},type:"object",reflectToAttribute:!1},columnMenuItemDuplicate:{value:{command:{value:"duplicateCommand",type:"any"},enabled:{value:!0,type:"boolean"},visible:{value:!1,type:"any"},icon:{value:"smart-icon-duplicate",type:"string"},label:{value:"{{messages}}",type:"string"}},type:"object",reflectToAttribute:!1},columnMenuItemInsertLeft:{value:{command:{value:"insertLeftCommand",type:"any"},enabled:{value:!0,type:"boolean"},visible:{value:!1,type:"any"},icon:{value:"smart-icon-insert-left",type:"string"},label:{value:"{{messages}}",type:"string"}},type:"object",reflectToAttribute:!1},columnMenuItemInsertRight:{value:{command:{value:"insertRightCommand",type:"any"},enabled:{value:!0,type:"boolean"},visible:{value:!1,type:"any"},icon:{value:"smart-icon-insert-right",type:"string"},label:{value:"{{messages}}",type:"string"}},type:"object",reflectToAttribute:!1},columnMenuItemSortAsc:{value:{command:{value:"sortAscCommand",type:"any"},enabled:{value:!0,type:"boolean"},visible:{value:"auto",type:"any"},icon:{value:"smart-icon-sort-name-up",type:"string"},iconAlt:{value:"smart-icon-sort-number-up",type:"string"},label:{value:"{{messages}}",type:"string"}},type:"object",reflectToAttribute:!1},columnMenuItemSortDesc:{value:{command:{value:"sortDescCommand",type:"any"},enabled:{value:!0,type:"boolean"},visible:{value:"auto",type:"any"},icon:{value:"smart-icon-sort-name-down",type:"string"},iconAlt:{value:"smart-icon-sort-number-down",type:"string"},label:{value:"{{messages}}",type:"string"}},type:"object",reflectToAttribute:!1},columnMenuItemRemoveSort:{value:{command:{value:"removeSortCommand",type:"any"},enabled:{value:!0,type:"boolean"},visible:{value:"auto",type:"any"},icon:{value:"smart-icon-cancel-circled",type:"string"},label:{value:"{{messages}}",type:"string"}},type:"object",reflectToAttribute:!1},columnMenuItemFilter:{value:{command:{value:"addFilterCommand",type:"any"},enabled:{value:!0,type:"boolean"},visible:{value:"auto",type:"any"},icon:{value:"smart-icon-add-filter",type:"string"},label:{value:"{{messages}}",type:"string"}},type:"object",reflectToAttribute:!1},columnMenuItemRemoveFilter:{value:{command:{value:"removeFilterCommand",type:"any"},enabled:{value:!0,type:"boolean"},visible:{value:"auto",type:"any"},icon:{value:"smart-icon-cancel-circled",type:"string"},label:{value:"{{messages}}",type:"string"}},type:"object",reflectToAttribute:!1},columnMenuItemGroupBy:{value:{command:{value:"groupByCommand",type:"any"},enabled:{value:!0,type:"boolean"},visible:{value:"auto",type:"any"},icon:{value:"smart-icon-group",type:"string"},label:{value:"{{messages}}",type:"string"}},type:"object",reflectToAttribute:!1},columnMenuItemRemoveGroupBy:{value:{command:{value:"removeGroupByCommand",type:"any"},enabled:{value:!0,type:"boolean"},visible:{value:"auto",type:"any"},icon:{value:"smart-icon-ungroup",type:"string"},label:{value:"{{messages}}",type:"string"}},type:"object",reflectToAttribute:!1},columnMenuItemHide:{value:{command:{value:"hideColumnCommand",type:"any"},enabled:{value:!0,type:"boolean"},visible:{value:!1,type:"any"},icon:{value:"smart-icon-visibility-off",type:"string"},label:{value:"{{messages}}",type:"string"}},type:"object",reflectToAttribute:!1},columnMenuItemDelete:{value:{command:{value:"deleteColumnCommand",type:"any"},enabled:{value:!0,type:"boolean"},visible:{value:!1,type:"any"},icon:{value:"smart-icon-delete",type:"string"},label:{value:"{{messages}}",type:"string"}},type:"object",reflectToAttribute:!1}},type:"object",reflectToAttribute:!1},visible:{value:!1,type:"boolean"},enabled:{value:!0,type:"boolean"},width:{value:250,type:"number"},height:{value:null,type:"number?"}},type:"object",reflectToAttribute:!1},columnGroups:{value:[],type:"array",reflectToAttribute:!1},charting:{value:{appendTo:{value:null,type:"any"},enabled:{value:!1,type:"boolean"},colorScheme:{value:"scheme01",type:"string"},description:{value:"",type:"string"},dialog:{value:{header:{value:"{{message}}",type:"string"},height:{value:400,type:"any"},width:{value:400,type:"any"},left:{value:"center",type:"any"},top:{value:"center",type:"any"},enabled:{value:!0,type:"boolean"},visible:{value:!1,type:"boolean"}},type:"object"},formatSettings:{value:{},type:"object"}},type:"object"},dataSource:{value:null,type:"any",reflectToAttribute:!1},grouping:{value:{enabled:{value:!1,type:"boolean",reflectToAttribute:!1},allowCollapse:{value:!1,type:"boolean",reflectToAttribute:!1},autoExpandAll:{value:!1,type:"boolean",reflectToAttribute:!1},expandMode:{value:"buttonClick",type:"string",allowedValues:["buttonClick","rowClick"],reflectToAttribute:!1},renderMode:{type:"string",value:"advanced",allowedValues:["basic","compact","advanced"]},groupRowHeight:{value:50,type:"any",reflectToAttribute:!1},toggleButtonIndent:{value:16,type:"number",reflectToAttribute:!1},groupIndent:{value:16,type:"number",reflectToAttribute:!1},groupBar:{value:{visible:{value:!1,type:"boolean",reflectToAttribute:!1},allowColumnDragDrop:{value:!0,type:"boolean",reflectToAttribute:!0},allowColumnCloseButtons:{value:!0,type:"boolean",reflectToAttribute:!0}},type:"object"},summaryRow:{value:{inline:{value:!0,type:"boolean"},visible:{value:!0,type:"boolean"}},type:"object"}},type:"object"},messages:{extend:!0,value:{en:{invalidColumnProperty:'{{elementType}}: Invalid property name "{{propertyName}}" set for Column: "{{type}}"',invalidRowProperty:'{{elementType}}: Invalid property name "{{propertyName}}" set for Row"',frozenColumns:"{{elementType}}: To Pin/Freeze a column group, all columns within it should be frozen.",frozenRows:"{{elementType}}: To Pin/Freeze a special cell, all rows within it should be frozen.",columnGroups:"{{elementType}}: Please, check the initialization of the smartGrid's columns array. The columns in a column group are expected to be siblings in the columns array.",min:"Min: {{value}}",max:"Max: {{value}} ",sum:"Sum: {{value}} ",avg:"Avg: {{value}} ",count:"Count: {{value}} ",pagerFirstButton:"First",pagerLastButton:"Last",pagerPreviousButton:"Previous",pagerNextButton:"Next",pagerNavigateToLabel:"Go to:",pagerPageSizeLabel:"Show:",pagerNavigateToInputPlaceholder:"",pagerEllipsis:"...",pagerSummaryString:"of",pagerSummaryPrefix:"of",pagerSummarySuffix:"",columnMenuCustomizeType:"Customize type",columnMenuItemRename:"Rename",columnMenuItemEditDescription:"Edit description",columnMenuItemDuplicate:"Duplicate",columnMenuItemInsertLeft:"Insert left",columnMenuItemInsertRight:"Insert right",columnMenuItemSortAsc:"Sort {{mode}}",columnMenuItemSortDesc:"Sort {{mode}}",columnMenuItemRemoveSort:"Remove Sort",columnMenuItemFilter:"Filter",columnMenuItemRemoveFilter:"Remove Filter",columnMenuItemGroupBy:"Group by this column",columnMenuItemRemoveGroupBy:"Remove Group",columnMenuItemHide:"Hide",columnMenuItemDelete:"Delete",columnResizeTooltip:"width: {{value}}px",rowResizeTooltip:"height: {{value}}px",commandBarAddRow:"Add",commandBarDeleteRow:"Delete",commandBarBatchRevert:"Revert",commandBarBatchSave:"Save",commandBarFilter:"Filter",commandBarSort:"Sort",commandBarSearch:"Search",commandBarCustomize:"Customize",commandBarGroup:"Group",commandColumnEdit:"Edit",commandColumnDelete:"Delete",commandColumnCancel:"Cancel",commandColumnUpdate:"Update",commandColumnMenu:"",expandRow:"Expand row",collapseRow:"Collapse row",addNewRow:"Click here to add a new row",dialogChartHeader:"{{value}} Chart",dialogRowDetailHeader:"Row Id: {{value}}",dialogRowDetailButtonConfirm:"OK",dialogRowDetailButtonCancel:"CANCEL",dialogEditHeader:"Edit {{value}}",dialogAddButtonConfirm:"ADD",dialogAddButtonCancel:"CANCEL",dialogEditButtonConfirm:"OK",dialogEditButtonCancel:"CANCEL",dialogFilterButtonConfirm:"FILTER",dialogFilterButtonCancel:"CLEAR",dialogDeleteButtonConfirm:"DELETE",dialogDeleteButtonCancel:"CANCEL",dialogAddHeader:"Add Row",dialogDeleteHeader:"Delete Row",dialogFilterHeader:"Filter by",dialogFilterMinLabel:"Min",dialogFilterMaxLabel:"Max",groupBarLabel:"Drag a column header here to group by that column",dialogDeleteContent:"Are you sure you want to delete this row?",calendar:{"/":"/",":":":",firstDay:0,days:{names:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],namesAbbr:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],namesShort:["Su","Mo","Tu","We","Th","Fr","Sa"]},months:{names:["January","February","March","April","May","June","July","August","September","October","November","December",""],namesAbbr:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec",""]},AM:["AM","am","AM"],PM:["PM","pm","PM"],eras:[{name:"A.D.",start:null,offset:0}],currencySymbol:"$",currencySymbolPosition:"before",decimalSeparator:".",thousandsSeparator:","},CONTAINS:"Contains",DOES_NOT_CONTAIN:"Does not contain",ENDS_WITH:"Ends with",EQUAL:"Equal",GREATER_THAN:"Greater than",GREATER_THAN_OR_EQUAL:"Greater than or equal",LESS_THAN:"Less than",LESS_THAN_OR_EQUAL:"Less than or equal",NOT_EQUAL:"Not equal",RANGE:"Range",CLEAR_FILTER:"Clear Filter",STARTS_WITH:"Starts with",addFilter:"+ Add filter",and:"And",apply:"Apply",booleanFirst:"☐",booleanLast:"☑",cancel:"Cancel",CONTAINS_CASE_SENSITIVE:"Contains (case sensitive)",dateFirst:"1",dateLast:"9",DOES_NOT_CONTAIN_CASE_SENSITIVE:"does not contain (case sensitive)",EMPTY:"empty",ENDS_WITH_CASE_SENSITIVE:"ends with (case sensitive)",EQUAL_CASE_SENSITIVE:"equal (case sensitive)",filter:"Filter",customize:"Customize Columns",filteredByMultiple:"{{n}} filters",filteredByOne:"1 filter",filterValuePlaceholder:"Value",find:"Find a field",findInView:"Find in view",firstBy:"Sort by",found:"{{nth}} of {{n}}",from:"from",noFilters:"No filters applied",noResults:"No results",noSorting:"No sorting applied",NOT_EMPTY:"not empty",NOT_NULL:"not null",NULL:"null",numberFirst:"1",numberLast:"9",ok:"OK",or:"Or",pickAnother:"Pick another field to sort by",sort:"Sort",group:"Group",sortedByMultiple:"Sorted by {{n}} fields",sortedByOne:"Sorted by 1 field",STARTS_WITH_CASE_SENSITIVE:"starts with (case sensitive)",stringFirst:"A",stringLast:"Z",thenBy:"then by",where:"Where",collapseAll:"Collapse all",expandAll:"Expand all",noGrouping:"No grouping",groupedByMultiple:"{{n}} groups",groupedByOne:"1 group",firstByGroup:"Group by",pickAnotherGroupBy:"Pick another field to group by"}},type:"object"},onCellValue:{value:null,type:"any",reflectToAttribute:!1},onCellUpdate:{value:null,type:"any",reflectToAttribute:!1},onBeforeInit:{value:null,type:"any",reflectToAttribute:!1},onInit:{value:null,type:"any",reflectToAttribute:!1},onAfterInit:{value:null,type:"any",reflectToAttribute:!1},onKey:{value:null,type:"any",reflectToAttribute:!1},onRender:{value:null,type:"any",reflectToAttribute:!1},onChartInit:{value:null,type:"any",reflectToAttribute:!1},onRowInit:{value:null,type:"any",reflectToAttribute:!1},onRowDetailInit:{value:null,type:"any",reflectToAttribute:!1},onRowDetailUpdated:{value:null,type:"any",reflectToAttribute:!1},onRowInserted:{value:null,type:"any",reflectToAttribute:!1},onRowRemoved:{value:null,type:"any",reflectToAttribute:!1},onRowUpdate:{value:null,type:"any",reflectToAttribute:!1},onRowUpdated:{value:null,type:"any",reflectToAttribute:!1},onColumnInit:{value:null,type:"any",reflectToAttribute:!1},onColumnInserted:{value:null,type:"any",reflectToAttribute:!1},onColumnRemoved:{value:null,type:"any",reflectToAttribute:!1},onColumnUpdated:{value:null,type:"any",reflectToAttribute:!1},onCommand:{value:null,reflectToAttribute:!1,type:"any"},filtering:{value:{enabled:{value:!1,type:"boolean"},filter:{value:[],type:"array",reflectToAttribute:!1},filterRow:{value:{visible:{value:!1,type:"boolean"},menuVisible:{value:!1,type:"boolean"},applyMode:{value:"auto",type:"string",allowedValues:["auto","click"]},autoApplyModeDelay:{value:500,type:"number"}},type:"object"},filterMenu:{value:{visible:{value:!0,type:"boolean"},buttons:{value:["cancel","clear","filter"],type:"array"},dataSource:{value:null,type:"any"},width:{value:250,type:"number"},height:{value:200,type:"number"},mode:{value:"default",allowedValues:["default","excel"],type:"string"},messages:{value:null,type:"object"}},type:"object"}},type:"object"},editing:{value:{allowRowHeaderEdit:{value:!1,type:"any"},allowColumnHeaderEdit:{value:!1,type:"any"},active:{value:!1,readonly:!0,type:"boolean"},enabled:{value:!1,type:"boolean"},batch:{value:!1,type:"any"},action:{value:"click",type:"string",allowedValues:["none","click","doubleClick"]},commandKeys:{value:{commandKeyEdit:{value:{command:"commandKeyEditCommand",key:"F2"},type:"object"},commandKeyCancel:{value:{command:"commandKeyCancelCommand",key:"Escape"},type:"object"},commandKeyUpdate:{value:{command:"commandKeyUpdateCommand",key:"Enter | Tab"},type:"object"}},type:"object"},commandBar:{value:{visible:{value:!1,type:"boolean"},position:{value:"near",allowedValues:["near","far","both"],type:"string"},displayMode:{value:"labelAndIcon",allowedValues:["label","icon","labelAndIcon"],type:"string"},dataSource:{value:{commandBarSearch:{value:{command:{value:"commandBarSearchCommand",type:"any"},icon:{value:"smart-icon-search",type:"string"},label:{value:"{{messages}}",type:"string"},visible:{value:!1,type:"any"}},type:"object"},commandBarAddRow:{value:{command:{value:"commandBarAddRowCommand",type:"any"},icon:{value:"smart-icon-plus",type:"string"},label:{value:"{{messages}}",type:"string"},visible:{value:!1,type:"any"}},type:"object"},commandBarDeleteRow:{value:{command:{value:"commandBarDeleteRowCommand",type:"any"},icon:{value:"smart-icon-delete",type:"string"},label:{value:"{{messages}}",type:"string"},visible:{value:!1,type:"any"}},type:"object"},commandBarBatchSave:{value:{command:{value:"commandBarBatchSaveCommand",type:"any"},icon:{value:"smart-icon-ok-squared",type:"string"},label:{value:"{{messages}}",type:"string"},visible:{value:!0,type:"any"}},type:"object"},commandBarBatchRevert:{value:{command:{value:"commandBarBatchRevertCommand",type:"any"},icon:{value:"smart-icon-reload",type:"string"},label:{value:"{{messages}}",type:"string"},visible:{value:!0,type:"any"}},type:"object"}},type:"object"}},type:"object"},commandColumn:{value:{visible:{value:!1,type:"boolean"},inline:{value:!1,type:"boolean"},position:{value:"far",allowedValues:["near","far"],type:"string"},displayMode:{value:"icon",allowedValues:["label","icon","labelAndIcon"],type:"string"},dataSource:{value:{commandColumnMenu:{value:{command:{value:"commandColumnMenuCommand",type:"any"},icon:{value:"smart-icon-menu",type:"string"},label:{value:"{{messages}}",type:"string"},visible:{value:!1,type:"any"}},type:"object"},commandColumnEdit:{value:{command:{value:"commandColumnEditCommand",type:"any"},icon:{value:"smart-icon-mode-edit",type:"string"},label:{value:"{{messages}}",type:"string"},visible:{value:"auto",type:"any"}},type:"object"},commandColumnDelete:{value:{command:{value:"commandColumnDeleteCommand",type:"any"},icon:{value:"smart-icon-delete",type:"string"},label:{value:"{{messages}}",type:"string"},visible:{value:!0,type:"any"}},type:"object"},commandColumnUpdate:{value:{command:{value:"commandColumnUpdateCommand",type:"any"},icon:{value:"smart-icon-ok-squared",type:"string"},label:{value:"{{messages}}",type:"string"},visible:{value:"auto",type:"any"}},type:"object"},commandColumnCancel:{value:{command:{value:"commandColumnCancelCommand",type:"any"},icon:{value:"smart-icon-cancel-circled",type:"string"},label:{value:"{{messages}}",type:"string"},visible:{value:"auto",type:"any"}},type:"object"},commandColumnRowMenu:{value:{command:{value:"commandColumnRowMenuCommand",type:"any",reflectToAttribute:!1},icon:{value:"smart-icon-ellipsis-vert",type:"string"},label:{value:"{{messages}}",type:"string"},visible:{value:!1,type:"any"}},type:"object"},commandColumnCustom:{value:{command:{value:"",type:"any"},icon:{value:"smart-icon-ellipsis-vert",type:"string"},label:{value:"",type:"string"},visible:{value:!1,type:"any"}},type:"object"}},type:"object"},width:{value:null,type:"number?"}},reflectToAttribute:!1,type:"object"},mode:{value:"cell",allowedValues:["cell","row"],type:"string"},addNewRow:{value:{position:{value:"both",allowedValues:["near","far","both"],type:"string"},visible:{value:!1,type:"boolean"},autoCreate:{value:!1,type:"boolean"},autoSave:{value:!0,type:"boolean"},label:{value:"{{message}}",type:"string"},displayMode:{value:"row",allowedValues:["row","button"],type:"string"}},type:"object"},dialog:{value:{header:{value:"{{message}}",type:"string"},height:{value:"auto",type:"any"},width:{value:"auto",type:"any"},left:{value:"center",type:"any"},top:{value:"center",type:"any"},enabled:{value:!1,type:"boolean"},visible:{value:!1,type:"boolean"}},type:"object"},addDialog:{value:{header:{value:"{{message}}",type:"string"},height:{value:"auto",type:"any"},width:{value:"auto",type:"any"},left:{value:"center",type:"any"},top:{value:"center",type:"any"},enabled:{value:!1,type:"boolean"},visible:{value:!1,type:"boolean"}},type:"object"},deleteDialog:{value:{header:{value:"{{message}}",type:"string"},height:{value:"auto",type:"any"},width:{value:"auto",type:"any"},left:{value:"center",type:"any"},top:{value:"center",type:"any"},enabled:{value:!1,type:"boolean"},visible:{value:!1,type:"boolean"}},type:"object"}},type:"object"},paging:{value:{enabled:{value:!1,type:"boolean"},spinner:{value:{enabled:{value:!1,type:"boolean"},step:{value:1,type:"number"}},type:"object"},pageSize:{value:10,type:"int",validator:"pageSizeValidator"},pageIndex:{value:0,type:"int",validator:"pageIndexValidator"}},type:"object"},pager:{value:{autoEllipsis:{value:"both",allowedValues:["none","before","after","both"],type:"string"},position:{value:"far",allowedValues:["near","far","both"],type:"string"},template:{value:"",type:"string"},pageSizeSelector:{value:{visible:{value:!1,type:"boolean"},dataSource:{value:[10,20,50],type:"object"},position:{value:"far",allowedValues:["near","far"],type:"string"}},type:"object"},summary:{value:{position:{value:"far",allowedValues:["near","far"],type:"string"},visible:{value:!1,type:"boolean"}},type:"object"},navigationButtons:{value:{position:{value:"both",allowedValues:["near","far","both"],type:"string"},prevNextButtons:{value:{visible:{value:!0,type:"boolean"}},type:"object"},firstLastButtons:{value:{visible:{value:!0,type:"boolean"}},type:"object"},labels:{value:{visible:{value:!1,type:"boolean"}},type:"object"}},type:"object"},navigationInput:{value:{position:{value:"far",allowedValues:["near","far"],type:"string"},visible:{value:!1,type:"boolean"}},type:"object"},pageIndexSelectors:{value:{visible:{value:!0,type:"boolean"},dataSource:{value:10,type:"any"}},type:"object"},visible:{value:!1,type:"boolean"}},type:"object",reflectToAttribute:!1},rowDetail:{value:{enabled:{value:!1,type:"boolean"},height:{value:200,type:"number"},position:{value:"near",allowedValues:["near","far"],type:"string"},template:{value:"",type:"any",reflectToAttribute:!1},visible:{value:!0,type:"boolean"},dialog:{value:{header:{value:"{{message}}",type:"string"},height:{value:300,type:"any"},width:{value:360,type:"any"},left:{value:"center",type:"any"},top:{value:"center",type:"any"},enabled:{value:!1,type:"boolean"},visible:{value:!1,type:"boolean"}},type:"object"}},type:"object"},summaryRow:{value:{position:{value:"far",allowedValues:["near","far"],type:"string"},visible:{value:!1,type:"boolean"},template:{value:"",type:"string"}},type:"object"},scrolling:{value:"physical",allowedValues:["physical","virtual","infinite","deferred"],type:"string"},columnHeader:{value:{visible:{value:!0,type:"boolean"}},type:"object"},groupHeader:{value:{visible:{value:!1,type:"boolean"},template:{value:"",type:"string"}},type:"object"},header:{value:{visible:{value:!1,type:"boolean"},template:{value:"",type:"string"},buttons:{value:["columns","filter","group","sort","search"],type:"array"}},type:"object"},footer:{value:{visible:{value:!1,type:"boolean"},template:{value:"",type:"string"}},type:"object"},checkBoxes:{value:{visible:{value:!1,type:"boolean"},hasThreeStates:{value:!1,type:"boolean"}},type:"object"},selection:{value:{enabled:{value:!1,type:"boolean"},allowRowHeaderSelection:{value:!1,type:"boolean"},allowColumnHeaderSelection:{value:!1,type:"boolean"},allowRowSelection:{value:!0,type:"boolean"},allowCellSelection:{value:!1,type:"boolean"},allowDragSelection:{value:!0,type:"boolean"},allowDragSelectionAutoScroll:{value:!0,type:"boolean"},allowCellDragSelectionHandle:{value:!0,type:"boolean"},allowCellDragDropSelectionHandle:{value:!0,type:"boolean"},allowCellDragSelectionAutoFill:{value:!0,type:"boolean"},selectAllMode:{value:"page",allowedValues:["none","page","all"],type:"string"},mode:{value:"many",type:"string",allowedValues:["one","many","extended"]},action:{value:"click",type:"string",allowedValues:["none","click","doubleClick"]},checkBoxes:{value:{enabled:{value:!1,type:"boolean"},autoShow:{value:!1,type:"boolean"},action:{value:"click",type:"string",allowedValues:["none","click","doubleClick"]},selectAllMode:{value:"page",allowedValues:["none","page","all"],type:"string"},position:{value:"near",allowedValues:["near","far"],type:"string"}},type:"object"},selected:{value:"",type:"string"}},type:"object"},sorting:{value:{enabled:{value:!1,type:"boolean"},sort:{value:[],type:"array"},mode:{value:"one",allowedValues:["one","many"],type:"string"},sortToggleThreeStates:{value:!0,type:"boolean"}},type:"object"}}}static get requires(){return{}}static get styleUrls(){return["smart.menu.css","smart.filterpanel.css","smart.pager.css","smart.grid.css","smart.textbox.css"]}template(){return"<div class='smart-container'id='container' disabled='[[disabled]]' role='grid'>\n                <div id='header' role=\"toolbar\" class='smart-grid-header smart-hidden'>\n                </div>\n                <div id='groupHeader' role=\"presentation\" class='smart-grid-group-header smart-hidden'></div>\n                <div id='headerPager' top class='smart-grid-pager smart-hidden'></div>\n                <div id='headerCommandBar' header top class='smart-grid-header smart-grid-command-bar smart-hidden'></div>\n                 <div id='content' class='smart-grid-content'>\n                    <div id='placeholder' class ='smart-hidden smart-placeholder smart-grid-placeholder'></div>\n                    <div id='columnHeader' role=\"rowgroup\" class='smart-grid-column-header'>\n                        <div id='columnNearContainer' role=\"row\" class='near smart-hidden smart-grid-column-header-cell-container'>\n                       </div>\n                       <div id='columnContainer' role=\"row\" class='center smart-grid-column-header-cell-container'>\n                       </div>\n                        <div id='columnFarContainer' role=\"row\" class='far smart-hidden smart-grid-column-header-cell-container'>\n                       </div>\n                    </div>\n                    <div id='scrollView' role=\"rowgroup\" class ='smart-grid-scroll-view'>\n                        <div id='rowNearContainer' role=\"presentation\" class='near smart-hidden smart-grid-row-container'>\n                        </div>\n                         <div id='rowContainer' role=\"presentation\" class='center smart-grid-row-container'>\n                        </div>\n                        <div id='rowFarContainer' role=\"presentation\" class='far smart-hidden smart-grid-row-container'>\n                        </div>\n                        <smart-scroll-bar right-to-left=\"[[rightToLeft]]\" id='verticalScrollBar' class='smart-grid-scroll-bar' wait disabled='[[disabled]]' orientation='vertical'></smart-scroll-bar>\n                        <smart-scroll-bar right-to-left=\"[[rightToLeft]]\" id='horizontalScrollBar' class='smart-grid-scroll-bar' wait disabled='[[disabled]]'></smart-scroll-bar>\n                    </div>\n                  <div id='filterFooter' class='smart-grid-filter-footer smart-hidden'></div>\n                </div>\n                <div id='loadingIndicatorContainer' class='smart-loader-container'>\n                    <span id='loadingIndicator' class='smart-grid-loader smart-loader'></span>\n                    <span id='loadingIndicatorPlaceholder' class ='smart-loader-label smart-hidden'></span>\n                </div>\n                <div id='footerCommandBar' footer class='smart-grid-footer smart-grid-command-bar smart-hidden'></div>\n                <div id='footerPager' class='smart-grid-pager smart-hidden'></div>\n                <div id='footer' class='smart-grid-footer smart-hidden'></div>\n            </div>"}static get listeners(){return{focus:"_focusHandler",blur:"_blurHandler",wheel:"_mouseWheelHandler","document.up":"_upHandler","document.move":"_moveHandler","document.scroll":"_scrollHandler",keydown:"_keyDownHandler",keyup:"_keyUpHandler",resize:"_resizeHandler","header.click":"_headerClickHandler","columnHeader.down":"_columnDownHandler","columnHeader.click":"_columnClickHandler","columnHeader.move":"_columnMoveHandler","columnHeader.mouseleave":"_columnMouseLeaveHandler","rowNearContainer.down":"_rowDownHandler","rowContainer.down":"_rowDownHandler","rowFarContainer.down":"_rowDownHandler","container.selectstart":"_selectStartHandler",styleChanged:"_styleChangedHandler",swipeleft:"_swipeLeftHandler",swiperight:"_swipeRightHandler"}}get _tabindex(){return this.disabled||this.unfocusable?"":' tabindex="0"'}pageSizeValidator(e,t){const o=this;return t<0?0:o.dataSource&&t>o.dataSource.length?o.dataSource.length:void 0}pageIndexValidator(e,t){const o=this;if(t<0)return 0;if(o.dataSource){const e=Math.ceil(o.dataSource.length/o.paging.pageSize);if(t>e-1)return e-1}}_offsetTop(e){return e?e.offsetTop+this._offsetTop(e.offsetParent):0}_offsetLeft(e){return e?e.offsetLeft+this._offsetLeft(e.offsetParent):0}offset(e){return{left:this._offsetLeft(e),top:this._offsetTop(e)}}getBoundingRect(e){const t=this;let o=window.pageXOffset,l=window.pageYOffset,n=e.getBoundingClientRect();if(e!==document.body){let n=e.parentNode;for(;n!==document.body;){n&&(o+=n.scrollLeft,l+=n.scrollTop);let e=n;n=n.parentNode,t.enableShadowDOM&&n===t.shadowRoot?n=t:!t.isInShadowDOM||n!==t.getRootNode()&&e!==t.getRootNode()||(n=t.getRootNode().host)}}return{bottom:n.bottom+l,height:n.height,left:n.left+o,right:n.right+o,top:n.top+l,width:n.width}}_upHandler(e){const t=this,o=t.getBoundingRect(t);if(super._upHandler(),t._tapTimer&&clearTimeout(t._tapTimer),(e.pageX<o.left||e.pageX>o.right||e.pageY<o.top||e.pageY>o.bottom)&&(t._inputOverlay&&(t._inputOverlay.classList.remove("smart-input-overlay-on"),setTimeout(()=>{t._inputOverlay&&(t._inputOverlay.parentNode&&t._inputOverlay.parentNode.removeChild(t._inputOverlay),t._inputOverlay=null)},t.behavior.doubleClickTimingDelay)),t.editing.isEditing&&!t.editing.dialog.enabled&&setTimeout(()=>{e.defaultPrevented||t.editing.editCell&&t.editing.editCell.editor.instance&&(t.editing.editCell.editor.instance.blur(e),e.defaultPrevented)||t.endEdit()},50),t.menu)){let o,l,n,a;if(t.enableShadowDOM||t.isInShadowDOM?(o=e.originalEvent.composedPath()[0],l=function(){let e=o.getRootNode().host;for(;e;){if(e===t)return e;e=e.getRootNode().host}}(),n=t.menu.contains(o)||t.menu.firstElementChild.shadowRoot.contains(o),a=t.menu.firstElementChild.shadowRoot):(o=e.originalEvent.target,l=t.contains(o),n=t.menu.contains(o),a=t.menu),!l&&!n){const e=a.querySelectorAll("smart-drop-down-list"),l=a.querySelectorAll("smart-date-time-picker");for(let t=0;t<e.length;t++){if(e[t].$.dropDownContainer.contains(o))return}for(let e=0;e<l.length;e++){if(l[e].$.dropDownContainer.contains(o))return}return void t.closeMenu()}}t._dragSelectionEnd(e),t._endResize(e),t._endDrag(e)}_nextColumn(e){const t=this;for(let o=0;o<t.viewColumns.length;o++){const l=t.viewColumns[o];if(l.visibleIndex===e.visibleIndex+1)return l}return null}_nextRow(e){const t=this._recyclingRows,o=t.indexOf(e);return o>=0?t[o+1]:null}_moveHandler(e){const t=this;if(t.isInitialized&&t._selection){if(t.selection.enabled&&t.selection.allowDragSelection&&!t.editing.isEditing&&(!t._selection.selectionRect||t._selection.selectionRect&&!t._selection.selectionRect.captured)){t._dragSelection(e);const o=e.originalEvent.target.closest?e.originalEvent.target:void 0;Smart.Utilities.Core.isMobile&&o&&o.closest("smart-grid")===t&&e.originalEvent.preventDefault()}t.isScrolling||("none"===t.behavior.columnResizeMode||t.classList.contains("smart-grid-row-resize-mode")||t._columnMoveResizeHandler(e),"none"===t.behavior.rowResizeMode||t.classList.contains("smart-grid-column-resize-mode")||t._rowMoveResizeHandler(e),t._drag(e))}}_columnMouseLeaveHandler(){const e=this;if(e._columnElements)for(let t=0;t<e._columnElements.length;t++){const o=e._columnElements[t],l=o.column;l&&l.autoShowActionButton&&o._hideActionButton()}}_columnMoveHandler(e){const t=this;if(t.isInitialized&&!t._columnResizeStartLine&&!t._rowResizeStartLine)for(let o=0;o<t._columnElements.length;o++){const l=t._columnElements[o],n=l.column;if(n&&n.autoShowActionButton){const o=l.getBoundingClientRect(),a=t.offset(l);if(a.left<=e.pageX&&a.left+o.width-6>=e.pageX)if(a.top<=e.pageY&&a.top+o.height>=e.pageY){if(!t.hasColumnMenu(n))continue;l._showActionButton()}else l._hideActionButton();else l._hideActionButton()}}}_headerClickHandler(e){const t=this;if(t.$.headerBar){const o=t.isInShadowDOM||t.shadowRoot?e.composedPath()[0]:e.target;t.$.headerBar._headerClickHandler(o,t)}}_columnClickHandler(e){const t=this,o=(t.enableShadowDOM?t.shadowRoot:t.getRootNode()).elementsFromPoint(e.clientX,e.clientY);let l=null,n=null;const a=new Date-t._clickTime<t.behavior.doubleClickTimingDelay;t._doubleClickHandler(e);for(let e=0;e<o.length;e++){const t=o[e];if(t.classList.contains("smart-action-button"))return;if(t.getAttribute("data-field")){l=t.getAttribute("data-field"),n=t;break}}if(l){const o=n.column;if(!o)return;if(e.srcElement.classList.contains("smart-filter-button"))return;Smart.Utilities.Core.isMobile?(a&&o.allowSortToggleOnClick&&t.sorting.enabled&&t.sortBy(l),t._columnMoveHandler(e),e.originalEvent.preventDefault()):o.allowSortToggleOnClick&&t.sorting.enabled&&t.sortBy(l)}}_columnDownHandler(e){const t=this,o=(t.enableShadowDOM?t.shadowRoot:t.getRootNode()).elementsFromPoint(e.clientX,e.clientY);let l=null,n=null;const a=new Date-t._clickTime<t.behavior.doubleClickTimingDelay;t.$.headerBar&&t.$.headerBar.closePanel(),t._doubleClickHandler(e);for(let e=0;e<o.length;e++){const t=o[e];if(t.classList.contains("smart-action-button"))return;if(t.getAttribute("data-field")){l=t.getAttribute("data-field"),n=t;break}}if(l){const o=n.column;if(!o)return;if("_commandColumn"===l)return void t._applyCommand(t.editing.commandColumn.dataSource.commandColumnMenu.command);const r=function(n){if(o.selectionColumn?t.selection.checkBoxes.action===n&&t.selection.enabled:t.selection.action===n&&t.selection.enabled){if(t.editing.enabled&&t.editing.editColumn===o)return;if(e.shiftKey||e.ctrlKey?t._dragSelectionStartDataField=null:t._dragSelectionStartDataField=l,"_checkBoxColumn"===l)return void t._toggleColumnSelection(o);t._setSelection(null,o.dataField,e)}};if(t.editing.isEditing&&t.endEdit(),t.$.fireEvent("columnClick",{column:o}),r("click"),a&&(t.$.fireEvent("columnDoubleClick",{column:o}),r("doubleClick"),t._onColumnDoubleClick(o,e)),t._columnToResizeElement&&!t._columnResizeLine)return void t._columnDownResizeHandler(e);t._beginDrag(e,o)}t.closeMenu(),t._clickTime=new Date}addTransformMoveStyle(e,t,o,l,n,a){e.style.opacity=a,e.style["transition-duration"]=t,e.style.transform="translate3d("+o+"px,"+l+"px,"+n+"px)"}removeTransformMoveStyle(e){e.style.opacity="",e.style["transition-duration"]="",e.style.transform=""}_rowDownHandler(e){const t=this;if(t._inputOverlay&&t._inputOverlay.classList.remove("smart-input-overlay-on"),t._doubleClickHandler(e),t._closeMenu(t.menu),t._rowResizeHandler(e),t._toggledRow&&t.appearance.allowRowToggleAnimation)return;if(!e.target.classList.contains("smart-grid-row-container")&&!e.target.classList.contains("smart-grid-selection-overlay")&&!e.target.classList.contains("smart-selection-overlay-content"))return;let o=e.clientX,l=e.clientY;e.touches&&(o=e.touches[0].clientX,l=e.touches[0].clientY);const n=(t.enableShadowDOM?t.shadowRoot:t.getRootNode()).elementsFromPoint(o,l);let a=null,r=null,i=null,s=null;t._lastPointerDownTime=new Date;for(let e=0;e<n.length;e++){const t=n[e];if(t.hasAttribute("toggle-button")&&(r=t),t.hasAttribute("checkbox")&&(i=t),s||"smart-grid-cell"!==t.nodeName.toLowerCase()||(s=t),!a&&"smart-grid-row"===t.nodeName.toLowerCase()){a=t;break}}if(a&&s){const o=s?s.cell:null;if(o.row.filterRow||t._closeMenu(t.filterRowMenu),r&&o&&!o.column.rowDetailColumn){a.row.toggle(e)}else if(t.rowDetail.enabled&&t.rowDetail.visible&&r&&o&&o.column.rowDetailColumn){const e=a.row;e.showDetail?t.hideDetail(e.id):t.showDetail(e.id)}else{const o=a.row,l=s?s.cell:null;l.column._treeColumn&&i&&(o.checked=!o.checked),l.element===o.header&&t.behavior.allowRowReorder&&t._beginDrag(e,o),t.$.fireEvent("rowClick",{row:o,originalEvent:e.originalEvent}),t.$.fireEvent("cellClick",{cell:l,originalEvent:e.originalEvent}),t._tapTimer&&clearTimeout(t._tapTimer),t._tapTimer=setTimeout((function(){t._clickedRow===a&&t.$.fireEvent("rowTap",{row:o,originalEvent:e.originalEvent}),t._clickedCell===s&&t.$.fireEvent("cellTap",{cell:l,originalEvent:e.originalEvent})}),t.behavior.doubleClickTimingDelay);const n=function(n){if(!t.selection.enabled||o.autoGenerated||!0!==o.allowSelect)return void delete t.__selectionStarted;const r=t.editing.isEditing;if(r&&t.editing.editCell&&t.editing.editCell.row.id===o.id&&t.editing.editCell.column.dataField===l.column.dataField)return;if(r&&t.editing.editRow&&t.editing.editRow.id===o.id)return;const i=()=>{t.focus(),setTimeout((function(){t.focus()}),50)};if(t.selection.action===n){if(e.shiftKey||e.ctrlKey||!t.selection.allowRowHeaderSelection&&l.column.autoGenerated?t._dragSelectionStartRow=null:t._dragSelectionStartRow=a.row,e.shiftKey||e.ctrlKey?t._dragSelectionStartDataField=null:t._dragSelectionStartDataField=l.column.dataField,l.column.rowHeaderColumn&&!t.selection.allowRowHeaderSelection)return t._dragSelectionStartRow=null,void i();t._setSelection(o.id,l.column.dataField,e),i()}else l.column.selectionColumn&&t.selection.checkBoxes.enabled&&t.selection.checkBoxes.action===n&&(t._setSelection(o.id,l.column.dataField,e),i())},r=l.selected,d=t._clickedCell===s&&new Date-t._clickTime<t.behavior.doubleClickTimingDelay;n("click"),o.autoGenerated||l.column.autoGenerated||l.template?(t._onRowClick(o.index,o,e),t._onCellClick(l,e)):t.selection.enabled&&(t.selection.allowCellSelection||t.selection.allowRowSelection)?"extended"===t.selection.mode?!0===r&&r===l.selected&&!t.selection.isDragging&&d&&(t._onRowClick(o.index,o,e),t._onCellClick(l,e)):d&&(t._onRowClick(o.index,o,e),t._onCellClick(l,e)):(t._onRowClick(o.index,o,e),t._onCellClick(l,e)),new Date-t._clickTime<t.behavior.doubleClickTimingDelay&&(t._clickedRow===a&&(t._onRowDoubleClick(o.index,o,e,e),t.$.fireEvent("rowDoubleClick",{row:o,originalEvent:e.originalEvent}),n("doubleClick")),t._clickedCell===s&&(t._onCellDoubleClick(l,e),t.$.fireEvent("cellDoubleClick",{cell:l,originalEvent:e.originalEvent}))),t._clickedRow=a,t._clickedCell=s,t._clickTime=new Date}}}showDetail(e){const t=this.rowById[e];t&&(t.showDetail=!0)}hideDetail(e){const t=this.rowById[e];t&&(t.showDetail=!1)}_focusHandler(){this._focused=!0}_blurHandler(){this._focused=!1}_notify(e,t,o){const l=this;if(l.notifyFn)for(let n=0;n<l.notifyFn.length;n++)l.notifyFn[n](e,t,o)}notify(e){const t=this;e&&(t.notifyFn||(t.notifyFn=[]),t.notifyFn.push(e))}_applyTemplate(e,t){let o=null;if(null!==e&&""!==e)if((e.startsWith("#")||e.startsWith("."))&&(o=document.querySelector(e)),o)t.innerHTML="",t.appendChild(o.content.cloneNode(!0).firstElementChild);else{const o=function(e){const t=document.createElement("template");return e=e.trim(),t.innerHTML=e,t.content.firstChild}(e);o&&(t.innerHTML="",t.appendChild(o))}else t.innerHTML=""}propertyChangedHandler(e,t,o){const l=this;if(l.isInitialized){switch(l._notify(e,t,o),e){case"appearance_displayLoadingIndicator":return;case"appearance_placeholder":return void(l.$.placeholder.innerHTML=o);case"appearance_showColumnHeaderLines":case"appearance_showColumnLines":case"appearance_showRowLines":return void l._recycle();case"appearance_allowColumnStickyPosition":o?l._stickHeader():l._unstickHeader();break;case"appearance_showColumnIcon":for(let e=0;e<l.columns.length;e++){l.columns[e].setProperty("showIcon",l.appearance.showColumnIcon)}l._recycle();break;case"appearance_showRowHeaderNumber":case"appearance_showRowHeader":{l._initializeRowNumberColumn();const e=l._frozenNearColumns[0];e.rowHeaderColumn&&e.element&&!e.element.parentNode&&l.$.columnNearContainer.appendChild(e.element),l.refresh();break}case"header_template":l._applyTemplate(o,l.$.header);break;case"footer_template":l._applyTemplate(o,l.$.footer);break;case"columnWidth":{l.columns.canNotify=!1;let e=parseInt(o);if(isNaN(e)&&(e=null),e>=30||null===e)for(let t=0;t<l.columns.length;t++){l.columns[t].width=e}l.columns.canNotify=!0,l.refresh();break}case"checkBoxes_visible":return void l._recycle();case"checkBoxes_hasThreeStates":return l.rows.canNotify=!1,l._applyThreeStates(l.rowHierarchy),l.rows.canNotify=!0,void l._recycle();case"columnHeader_visible":l.__columnHeaderHeight=null,l.refresh();break;case"selection_checkBoxes_enabled":l._selectionColumn.visible=o;break;case"selection_checkBoxes_autoShow":l._selectionColumn.element&&(o?l._selectionColumn.element.setAttribute("auto-show",""):l._selectionColumn.element.removeAttribute("auto-show"));break;case"selection_checkBoxes_position":{let e=l.viewColumns.indexOf(l._selectionColumn);l.viewColumns.canNotify=!1,l.viewColumns.splice(e,1);const t=l._frozenNearColumns.indexOf(l._selectionColumn),n=l._frozenFarColumns.indexOf(l._selectionColumn);if(t>=0&&l._frozenNearColumns.splice(t,1),n>=0&&l._frozenFarColumns.splice(n,1),"far"===o)l._selectionColumn.canNotify=!1,l._selectionColumn.freeze="far",l._selectionColumn.canNotify=!0,l._frozenFarColumns.splice(0,0,l._selectionColumn),l.viewColumns.push(l._selectionColumn),l.$.columnFarContainer.appendChild(l._selectionColumn.element);else{let e=0,t=0;for(let o=0;o<l.viewColumns.length&&(l.viewColumns[o].autoGenerated||l.viewColumns[o].dataField!==l.columns[t++].dataField);o++)l.viewColumns[o].autoGenerated&&e++;l._selectionColumn.canNotify=!1,l._selectionColumn.freeze="near",l._selectionColumn.canNotify=!0,l._frozenNearColumns.splice(e,0,l._selectionColumn),l.viewColumns.splice(e,0,l._selectionColumn),l.$.columnNearContainer.appendChild(l._selectionColumn.element)}l.viewColumns.canNotify=!0;break}case"selection_mode":if(l._selection&&(l._selection.focusedCell=null),l.selection.allowCellSelection)l.clearSelection();else if("one"===o){const e=l.getSelection();l.clearSelection(),e.rows&&e.rows[0]&&(e.rows[0].row.selected=!0,l._selection.focusedCell=l.rowById[e.rows[0].row.id].getCell(l.columns[0].dataField))}break;case"filtering_enabled":return void(o&&l._createFilterPanels());case"filtering_filter":for(let e=0;e<l.columns.length;e++){const t=l.columns[e];t.canNotify=!1,t.setProperty("filter",null),t.canNotify=!0}for(let e=0;e<l.filtering.filter.length;e++){const t=l.filtering.filter[e];if(t){const e=t[0],o=t.splice(1);let n=null;if(o instanceof Smart.FilterGroup)n=o;else{const t=l.columnByDataField[e];t&&(n=l.dataSource._createFilter(t.dataType,o))}n&&l.addFilter(e,n,!1)}}return void l.refreshFilters();case"messages":case"locale":l._dialogEdit&&(l._dialogEdit.close(),l._dialogEdit=null),l._dialogDelete&&(l._dialogDelete.close(),l._dialogDelete=null),l._dialogAddRow&&(l._dialogAddRow.close(),l._dialogAddRow=null),l._recycle();break;case"paging_spinner_enabled":l._refresh();break;case"pager_visible":return l._renderPagers(),void l._refreshPaging(!1);case"paging_pageIndex":case"pager_position":case"paging_enabled":return void l._refreshPaging(!0);case"paging_pageSize":return void l._refreshPaging(!1);case"columns":return void l._renderColumns();case"dataSource":return delete l._isFirstVirtualDataSourceRequest,void l.dataBind();case"rowDetail_dialog_width":case"rowDetail_dialog_height":case"rowDetail_dialog_enabled":case"rowDetail_dialog_visible":return;case"rowDetail_height":case"rowDetail_enabled":{l.beginUpdate(),l.rows.canNotify=!1;const e=l.appearance.allowRowDetailToggleAnimation;l.appearance.allowRowDetailToggleAnimation=!1;for(let e=0;e<l._recyclingRows.length;e++){const t=l._recyclingRows[e];t.height=null,t.setProperty("showDetail",!1),t.detailHeight=l.rowDetail.height}if(l.rows.canNotify=!0,!l.rowDetail.enabled)for(let e=0;e<l.viewColumns.length;e++){const t=l.viewColumns[e];if(t.rowDetailColumn){t.visible=!1;break}}return l.appearance.allowRowDetailToggleAnimation=e,void l.endUpdate()}case"rowDetail_visible":for(let e=0;e<l.viewColumns.length;e++){const t=l.viewColumns[e];if(t.rowDetailColumn){t.visible=o;break}}return;case"displayLoadingIndicator":return void l._setLoadingIndicatorVisibility();case"filterable":return void l._refreshLayout();case"rightToLeft":return void l.refresh();case"selectionMode":return;case"editing_addNewRow_visible":l._renderAddNewRow(),l.refresh();break;case"editing_addNewRow_position":return l._renderAddNewRow(),void l.refresh();case"editing_enabled":o?l.removeAttribute("aria-readonly"):l.setAttribute("aria-readonly",!0);break;case"editing_dialog_visible":return;case"editing_commandColumn_visible":return void l.refresh(!0)}l.refresh()}}ready(){super.ready();const e=this._scrollView.vScrollBar,t=this._scrollView.hScrollBar;e.hasStyleObserver=!1,t.hasStyleObserver=!1,e.hasResizeObserver=!1,t.hasResizeObserver=!1,e.wait=!1,t.wait=!1,e.onChange=this._verticalScrollbarHandler.bind(this),t.onChange=this._horizontalScrollbarHandler.bind(this),this.setFocusable(!0),this.$.loadingIndicatorPlaceholder.innerHTML=this.appearance.loadingIndicatorPlaceholder,this.$.placeholder.innerHTML=this.appearance.placeholder,this._setLoadingIndicatorVisibility(),this._cellsMerge=[],this.checkLicense()}checkLicense(e){(this.grouping.enabled||this.selection.enabled&&this.selection.allowCellSelection||this.rowDetail.enabled||this.charting.enabled||this.editing.enabled&&this.editing.batch||this.editing.enabled&&"row"===this.editing.mode||this.editing.enabled&&this.editing.addNewRow.visible||this.editing.enabled&&this.editing.commandColumn.visible||"virtual"===this.scrolling||this.sorting.enabled&&"many"===this.sorting.mode||!0===e)&&super.checkLicense()}_createFilterPanels(){const e=this;if(e._filterPanels){if(e._filterPanels.length>0)return}else e._filterPanels=[];e.filtering.enabled&&0===e._filterPanels.length&&requestAnimationFrame(()=>{const t=document.createElement("smart-filter-panel"),o=document.createElement("smart-filter-panel"),l=document.createElement("smart-filter-panel"),n=document.createElement("smart-filter-panel");o.filterType="boolean",l.filterType="numeric",n.filterType="date",e._filterPanels.bool=o,e._filterPanels.date=n,e._filterPanels.numeric=l,e._filterPanels.string=t;for(let t in e._filterPanels){const o=e._filterPanels[t];o.rightToLeft=e.rightToLeft,o.classList.add("smart-hidden"),e.$.content.appendChild(o),o.parentNode.removeChild(o)}})}_applyScrolling(){const e=this,t=e._scrollView.vScrollBar;requestAnimationFrame(()=>{switch(t.largeStep=e.$.scrollView.offsetHeight,e.scrolling){case"physical":case"infinite":case"virtual":t.step=10,t.mechanicalAction="switchWhileDragging";break;case"deferred":t.step=10,t.mechanicalAction="switchWhenReleased";break;case"logical":t.step=e.layout.rowMinHeight,t.mechanicalAction="switchWhileDragging"}})}get _autoRowHeight(){const e=this;if(e.__autoRowHeight)return e.__autoRowHeight;let t=e.layout.rowMinHeight;if(!e.dataSource||e.dataSource&&0===e.dataSource.length)return t;const o=new Smart.Grid.Row({index:0,grid:e}),l=o.createElement();e.$.scrollView.appendChild(l),e.removeAttribute("grouped"),e.removeAttribute("tree"),e.grouping.enabled&&e.dataSource.groupBy&&e.dataSource.groupBy.length>0&&"advanced"===e.grouping.renderMode?e.setAttribute("grouped",""):e.dataSource.boundHierarchy&&e.setAttribute("tree","");const n={};for(let t=0;t<e.dataSource.dataFields.length;t++){n[e.dataSource.dataFields[t].name]="ABCDEFHIJLMNOPQRSTUVWXYZ1234567910|"}o.data=n,o._isMeasureRow=!0,o.render(),l.style.height="",l.style.lineHeight="",t=Math.max(l.offsetHeight,t);for(let e=0;e<l.children.length;e++)l.children[e].style.height="";for(let n=0;n<l.children[1].children.length;n++){l.children[1].children[n].style.height="auto",o.getCell(e.columns[0].dataField).render(),t=Math.max(t,8+l.children[1].children[n].offsetHeight);break}return e.$.scrollView.removeChild(l),e.__autoRowHeight=t,t}get _scrollHeight(){const e=this;let t=e._recyclingRows,o=0,l=e._autoRowHeight,n=0,a=0;if(e.__scrollHeight)return e.__scrollHeight;if(0===t.length||0===e.columns.length)return 0;e.rows.canNotify=!1;const r=t.length;for(let i=0;i<r;i++){let r=t[i];if(r.visible&&!1!==r.filtered){if((!r.height||!r.cellHeight||r.showDetail||"auto"===r.height||"auto"===r._height||"auto"===e.layout.rowHeight||e.layout.isDirty)&&!r.expandHeight){if(r.detailHeight||(r.detailHeight=200),e.layout.rowHeight){if(e.layout.rowHeight)if("number"==typeof e.layout.rowHeight)e.layout.rowHeight<e.layout.rowMinHeight&&(e.layout.rowHeight=e.layout.rowMinHeight),r.height=e.layout.rowHeight,r.computedHeight&&(r.height=r.computedHeight),void 0!==r.label&&"advanced"===e.grouping.renderMode&&(r.height=e.grouping.groupRowHeight),r.cellHeight=r.height,e.rowDetail.enabled&&r.showDetail&&!e.rowDetail.dialog.enabled&&(r.height+=r.detailHeight);else if("auto"===e.layout.rowHeight){e.layout.rowHeight<e.layout.rowMinHeight&&(e.layout.rowHeight=e.layout.rowMinHeight),r.element=e._rowElements[0],r.element&&r.element.classList.contains("smart-hidden")&&r.element.classList.remove("smart-hidden");const t=r.data&&e.isRendered?r._autoSize(r):l;r.height=t,r.computedHeight&&(r.height=r.computedHeight),void 0!==r.label&&"advanced"===e.grouping.renderMode&&(r.height=e.grouping.groupRowHeight),r.cellHeight=r.height,e.rowDetail.enabled&&r.showDetail&&!e.rowDetail.dialog.enabled&&(r.height+=r.detailHeight)}else e.layout.rowHeight(i,r),r.height||(r.height=l),r.cellHeight=r.height,e.rowDetail.enabled&&r.showDetail&&!e.rowDetail.dialog.enabled&&(r.height+=r.detailHeight)}else{if("auto"===r.height||"auto"===r._height){r.element=e._rowElements[0],r.element&&r.element.classList.contains("smart-hidden")&&r.element.classList.remove("smart-hidden");const t=r.data&&e.isRendered?r._autoSize(r):l;r.height=t,r._height="auto"}else r.height=l;void 0===r.label||r.summaryRow||"advanced"!==e.grouping.renderMode||(r.height=e.grouping.groupRowHeight),r.computedHeight&&(r.height=r.computedHeight),r.cellHeight=r.height,e.rowDetail.enabled&&r.showDetail&&!e.rowDetail.dialog.enabled&&(r.height+=r.detailHeight)}e._rowGap&&i<e.rows.length-1&&(r.height+=e._rowGap)}!0===r.freeze||"near"===r.freeze?n+=r.height:"far"===r.freeze&&(a+=r.height),r.freeze?r.top=o:(r.top!==o&&(r.top=o),r.expandHeight?o+=r.cellHeight:o+=r.height)}else r.height=0,r.cellHeight=0,r.top=o}return e._summaryRowCount&&e.summaryRow.visible&&(o+=e._summaryRowCount*l),e.filtering&&e.filtering.filterRow.visible&&(n+=l),e.__scrollHeight=o,e.__frozenNearHeight=n,e.__frozenFarHeight=a,e._scrollView.scrollHeight=o-e.$.scrollView.offsetHeight+n+a,o=e.__scrollHeight+n+a-1,e.grouping.enabled&&e.dataSource.groupBy.length>0&&e.grouping.groupIndent>0&&"advanced"===e.grouping.renderMode&&(o+=parseInt(e.grouping.groupIndent/2)),e.__scrollHeight=o,e.rows.canNotify=!0,o}_measureColumnHeight(){const e=this;if(e.__measuredColumnHeight)return e.__measuredColumnHeight;const t=document.createElement("smart-grid-column");t.style.height="auto",t.style.position="static";const o=document.createElement("div");o.classList.add("smart-label"),o.innerHTML="aAbBcCdDeEfFgGhHiIjJkKlLmMnNoOpPqQrRwWxXyYzZ1234567890",t.appendChild(o),e.$.columnHeader.appendChild(t);let l=e.$.columnHeader.offsetHeight;return e.$.columnHeader.removeChild(t),e._columnHeights&&e._columnHeights.length>1&&(l=e._columnHeights[0]),l<e.columnMinHeight&&(l=e.columnMinHeight),e.__measuredColumnHeight=l,l}_initializeColumnGroupsHierarchy(){const e=this;let t=0;if(e.$.columnContainer.innerHTML="",e.columnGroups.length>0){for(let t=0;t<e.columnGroups.length;t++)e.columnGroups[t].parent=null,e.columnGroups[t].groups=null;for(let t=0;t<e.viewColumns.length;t++)e.viewColumns[t].parent=null,e.viewColumns[t].groups=null;const o=function(t){for(let o=0;o<e.columnGroups.length;o++){let l=e.columnGroups[o];if(l.name===t)return l}return null},l=function(e){let t=new Array;if(e.columnGroup&&t.push(e),e.groups)for(let o=0;o<e.groups.length;o++)if(e.groups[o].columnGroup)t.push(e.groups[o]);else if(e.groups[o].groups){let n=l(e.groups[o]);for(let e=0;e<n.length;e++)t.push(n[e])}return t};for(let t=0;t<e.columnGroups.length;t++){let l=e.columnGroups[t];if(l.groups||(l.groups=null),l.parentGroup){let e=o(l.parentGroup);e&&(l.parent=e,e.groups||(e.groups=new Array),-1===e.groups.indexOf(l)&&e.groups.push(l))}}for(let t=0;t<e.viewColumns.length;t++){let l=e.viewColumns[t];if(l.columnGroup){let e=o(l.columnGroup);e&&(e.groups||(e.groups=new Array),l.parent=e,-1===e.groups.indexOf(l)&&e.groups.push(l))}}for(let o=0;o<e.viewColumns.length;o++){const l=e.viewColumns[o];let n=l;for(l.level=0;n.parent;)n=n.parent,l.level++;n=l;let a=l.level;for(t=Math.max(t,l.level);n.parent;)n=n.parent,n&&(n.level=--a)}for(let t=0;t<e.columnGroups.length;t++){const o=e.columnGroups[t],n=l(o);o.columns=n;let a=new Array,r=0,i="near";0===n.length&&(r=-1,o.visible=!1);for(let t=0;t<n.length;t++)a.push(e.viewColumns.indexOf(n[t])),n[t].freeze&&("far"===n[t].freeze&&(i="far"),r++);r===n.length?o.freeze=i:r>0&&r<n.length&&e.error(e.localize("frozenColumns",{elementType:"Grid"})),a.sort((function(e,t){return(e=parseInt(e))<(t=parseInt(t))?-1:e>t?1:0}));for(let t=1;t<a.length;t++)a[t]!==a[t-1]+1&&e.error(e.localize("columnGroups",{elementType:"Grid"}))}}e._columnGroupsLevel=1+t}_refreshColumnHeights(){const e=this;e.$.columnHeader.style.height="",e._viewColumnsHeight=e._measureColumnHeight(),e._columnHeights=[];let t=0;for(let o=0;o<e._columnGroupsLevel;o++){let l=e._viewColumnsHeight;e.columnHeight&&(l="number"==typeof e.columnHeight?e.columnHeight?e.columnHeight:e._viewColumnsHeight:e.columnHeight?e.columnHeight(o):e._viewColumnsHeight),l<e.columnMinHeight&&(l=e.columnMinHeight),l?(e._columnHeights.push(l),t+=l):(t+=e._viewColumnsHeight,e._columnHeights.push(e._viewColumnsHeight))}e._columnHeaderHeight=e._columnGroupsLevel*e._viewColumnsHeight,e._columnHeaderHeight=t,e.$.columnHeader.style.height=e._columnHeaderHeight+"px";const o=function(t){let o=0;for(let l=0;l<t.level;l++)o+=e._columnHeights[l];return o},l=function(t){let l=o(t),n=e._columnHeaderHeight-l;for(let o=t.level+1;o<e._columnHeights.length;o++){const l=o;for(let o=0;o<e.viewColumns.length;o++){const a=e.viewColumns[o];let r=!1;if(a.level===l){let o=a;for(;o.parent;){if(o.parent===t){n=e._columnHeights[l],r=!0;break}o=o.parent}if(r)break}}}return n};for(let t=0;t<e.viewColumns.length;t++){const n=e.viewColumns[t],a=l(n);n.computedHeight=a,n.top=o(n)}for(let t=0;t<e._columnGroupsLevel-1;t++)for(let n=0;n<e.columnGroups.length;n++){const a=e.columnGroups[n];if(a.level!==t)continue;if(a.groups){const e=l(a),t=o(a);a.top=t,a.computedHeight=e}const r=a.element;r&&(r.style.width=a.computedWidth+"px",e.rightToLeft?r.style.right=a.left+"px":r.style.left=a.left+"px",r.style.top=a.top+"px",r.style.height=a.computedHeight+"px",r.style.lineHeight=a.computedHeight+"px")}}_refreshColumnWidths(){const e=this;e.__clientSize=null;const t=e.$.verticalScrollBar.offsetWidth>0?e.$.verticalScrollBar.offsetWidth:0,o=e.dataSource.groupBy||[];let l=e.grouping.enabled&&"advanced"===e.grouping.renderMode?e.grouping.groupIndent*(1+o.length):0,n=0;e.selection.checkBoxes.enabled&&(n=e._selectionColumn.computedWidth?e._selectionColumn.computedWidth:e._selectionColumn.minWidth);const a=e._clientSize.width-t-l;let r=0,i=[],s=0,d=0,u=0;if(e.editing.enabled&&!e.editing.commandColumn.inline){const t=function(){const t=document.createElement("div"),o=document.createElement("div"),l=e.editing.commandColumn.dataSource;let n=0,a="",r=0;o.classList.add("smart-label");for(let t in l){const o=l[t];let n=!1;if("commandColumnMenu"===t)continue;let i=!1;if(n||(!0===o.visible?(r++,i=!0):"auto"===o.visible&&((e.editing.editRow||e.editing.editCell)&&!e.editing.dialog.enabled||"commandColumnEdit"!==t?!e.editing.editRow&&!e.editing.editCell||e.editing.dialog.enabled||("commandColumnUpdate"===t||"commandColumnCancel"===t)&&(r++,i=!0):(r++,i=!0)),n=!0),i&&"icon"!==e.editing.commandColumn.displayMode){a+="<span>"+("{{messages}}"===o.label?e.localize(t):o.label)+"</span>"}}return o.innerHTML="<span>"+a+"</span>",t.appendChild(o),t.style.width="auto",t.style.position="static",e.$.columnHeader.appendChild(t),n=10+o.firstChild.offsetWidth,e.$.columnHeader.removeChild(t),"icon"===e.editing.commandColumn.displayMode?n=20+20*r:"labelAndIcon"===e.editing.commandColumn.displayMode?n+=25*r:n+=10*r,n};if(e._commandColumn.visible=e.editing.commandColumn.visible,e.editing.commandColumn.visible){const o=e.editing.commandColumn.width?e.editing.commandColumn.width:t();e.columns.canNotify=!1,e._commandColumn.width=o,e.columns.canNotify=!0}}for(let t=0;t<e.viewColumns.length;t++){const o=e.viewColumns[t];let l;"number"==typeof o.width?l=o.width:o.width&&o.width.toString().indexOf("%")>=0?(l=parseFloat(o.width)/100,l*=a-n):o.width&&(o.width.toString().indexOf("em")>=0||o.width.toString().indexOf("pt")>=0||o.width.toString().indexOf("fr")>=0)?(l=parseFloat(o.width),l*=16):"auto"===o.width?l=o._autoSize():o.visible&&(i.push(o),l=0),o.overflowWidth&&(l-=o.overflowWidth),o.visible&&(r+=l),l<o.minWidth&&(l=o.minWidth),o.computedWidth=l}if(i){let e=a-r,t=0;e<0&&(e=60*i.length);for(let o=0;o<i.length;o++){const l=i[o];let n;n=e/i.length,o===i.length-1&&(n=e-t),l.overflowWidth&&(n-=l.overflowWidth),n<l.minWidth&&(n=l.minWidth),l.computedWidth=n,t+=n}}for(let t=0;t<e.viewColumns.length;t++){let o=e.viewColumns[t];o.visible&&(l>0&&!o.autoGenerated&&(o.computedWidth+=l,l=0),o.freeze?!0===o.freeze||"near"===o.freeze?(o.left=s,u+=o.computedWidth,s+=o.computedWidth):"far"===o.freeze&&(o.left=d,d+=o.computedWidth):(o.left=u,u+=o.computedWidth))}for(let t=0;t<e._columnGroupsLevel-1;t++)for(let o=0;o<e.columnGroups.length;o++){const l=e.columnGroups[o];if(l.level!==t)continue;let n=99999;if(l.groups){const e=function(t){let o=0;for(let l=0;l<t.groups.length;l++){let a=t.groups[l];a.groups?o+=e(a):a.hidden||(n=Math.min(a.left,n),o+=a.computedWidth)}return o};l.computedWidth=e(l),l.left=n}}}_createColumnHeaderCellElements(){const e=this,t=e.$.columnContainer,o=document.createDocumentFragment();let l=0;e._columnElements=[],e.$.columnContainer.innerHTML="",e.$.columnNearContainer.innerHTML="",e.$.columnFarContainer.innerHTML="",e.rightToLeft?(e.$.columnNearContainer.classList.remove("near"),e.$.columnNearContainer.classList.add("far"),e.$.columnFarContainer.classList.remove("far"),e.$.columnFarContainer.classList.add("near")):(e.$.columnNearContainer.classList.remove("far"),e.$.columnNearContainer.classList.add("near"),e.$.columnFarContainer.classList.remove("near"),e.$.columnFarContainer.classList.add("far"));for(let t=0;t<e._frozenNearColumns.length;t++){e._frozenNearColumns[t].createElement()}for(let t=0;t<e._frozenFarColumns.length;t++){e._frozenFarColumns[t].createElement()}for(let t=0;t<e.viewColumns.length;t++){const n=e.viewColumns[t];if(n.freeze)continue;const a=n.createElement();void 0!==n.computedWidth?(l+=n.computedWidth,e._columnElements.push(a),l<2*e._clientSize.width&&o.appendChild(a)):(e._columnElements.push(a),o.appendChild(a))}for(let t=0;t<e.columnGroups.length;t++){const l=e.columnGroups[t],n=new Smart.Grid.Column({visible:void 0===l.visible||l.visible,allowSelect:!1,grid:e,dataField:l.name,label:l.label,align:l.align,verticalAlign:l.verticalAlign});l.column=n;const a=n.createElement();a.style.width=l.computedWidth+"px",e.rightToLeft?a.style.right=l.right+"px":a.style.left=l.left+"px",a.style.top=l.top+"px",a.style.height=l.computedHeight+"px",a.style.lineHeight=l.computedHeight+"px",o.appendChild(a),l.element=a,l.grid=this}e.htmlColumnLastChild||(e.htmlColumnLastChild=document.createElement("smart-grid-column"),e.htmlColumnLastChild.classList.add("top-far-corner"),e.htmlColumnLastChild.onpointerdown=e=>{e.stopPropagation(),e.preventDefault()},e.$.columnHeader.appendChild(e.htmlColumnLastChild)),t.appendChild(o),t.style.width=e._computedColumnsWidth+"px",e._refreshFrozenColumns()}_refreshFrozenColumns(){const e=this;e.$.columnNearContainer.style.width=e._frozenColumnsNearWidth+"px",e.$.columnFarContainer.style.width=e._frozenColumnsFarWidth+"px";for(let t=0;t<e.columnGroups.length;t++){const o=e.columnGroups[t];o.freeze&&o.element&&(!0===o.freeze||"near"===o.freeze?e.$.columnNearContainer.appendChild(o.element):"far"===o.freeze&&e.$.columnFarContainer.appendChild(o.element))}for(let t=0;t<e.viewColumns.length;t++){const o=e.viewColumns[t];o.freeze&&o.element&&(!0===o.freeze||"near"===o.freeze?e.$.columnNearContainer.appendChild(o.element):"far"===o.freeze&&e.$.columnFarContainer.appendChild(o.element))}}get _clientSize(){const e=this;if(e.__clientSize)return e.__clientSize;const t=getComputedStyle(e.$.container),o=parseFloat(t.paddingLeft)+parseFloat(t.paddingRight),l=parseFloat(t.paddingTop)+parseFloat(t.paddingBottom),n=parseFloat(t.borderLeftWidth)+parseFloat(t.borderRightWidth),a=parseFloat(t.borderTopWidth)+parseFloat(t.borderBottomWidth);return e.__clientSize={width:e.$.container.offsetWidth-o-n,height:e.$.container.offsetHeight-l-a},e.__clientSize}_initializeRowElements(){const e=this;if(!e.rows)return;e.rows.canNotify=!1;let t=0,o=e._clientSize.height;e.$.rowNearContainer.innerHTML="",e.$.rowFarContainer.innerHTML="",e.$.rowContainer.innerHTML="",e._rowElements=[],e._overflowOffset=Math.max(o,300),e.rightToLeft?(e.$.rowNearContainer.classList.remove("near"),e.$.rowNearContainer.classList.add("far"),e.$.rowFarContainer.classList.remove("far"),e.$.rowFarContainer.classList.add("near")):(e.$.rowFarContainer.classList.remove("near"),e.$.rowFarContainer.classList.add("far"),e.$.rowNearContainer.classList.remove("far"),e.$.rowNearContainer.classList.add("near"));const l=e.offsetHeight;e.$.container.classList.add("smart-hidden");const n=e.offsetHeight;e.$.container.classList.remove("smart-hidden"),"hidden"!==e.verticalScrollBarVisibility&&l===n||(o=e._scrollHeight);const a=function(){const l=document.createDocumentFragment();if(e.rows&&0===e.rows.length)return;for(let n=0;n<e.rows.length;n++){const a=e.rows[n];if(a.freeze)continue;const r=a.createElement();if(l.appendChild(r),t+=e.layout.rowMinHeight,t>e._overflowOffset+o)break}e.$.rowContainer.appendChild(l);const n=e.$.rowContainer.children;for(let t=0;t<n.length;t++){const o=n[t];e.rows[t]&&(e.rows[t].element=o),e._rowElements[t]=o}};for(let t=0;t<e._frozenNearRows.length;t++){const o=e._frozenNearRows[t];o.grid=e;const l=o.createElement();o.element=l,e.$.rowNearContainer.appendChild(l)}for(let t=0;t<e._frozenFarRows.length;t++){const o=e._frozenFarRows[t];o.grid=e;const l=o.createElement();o.element=l,e.$.rowFarContainer.appendChild(l)}a();let r=0;for(;t<1.5*o&&++r<50;)a();e.rows.canNotify=!0}_initializeRows(){const e=this;let t=0;e._frozenNearDefaultRows=[],e._frozenFarDefaultRows=[],e.rows=[],e.rowById=[],e._frozenFarRows=[],e._frozenNearRows=[];const o=function(){let t=[],o=!1;for(let l=0;l<e.columns.length;l++){const n=e.columns[l];let a={};n.summary&&n.summary.length>0&&(o=!0),a[n.dataField]=n.summary,t.push(a)}e._summaryItems=o?e.dataSource.summarize(t):[]},l=function(o,l){const n=o.grid?o:new Smart.Grid.Row({data:o,index:l,grid:e});if(e.onRowInit){e.onRowInit(l,n);for(let t in n)-1!==n.properties.indexOf(t)||t.startsWith("_")||e.error(e.localize("invalidRowProperty",{elementType:"Grid",propertyName:t}))}if(n.selected&&(e._selection.rows[n.id]=!0),n.freeze){if(!0===n.freeze||"near"===n.freeze){e.rows.splice(t++,0,n);const o=e.rows[t-1];-1===e._frozenNearRows.indexOf(o)&&e._frozenNearRows.push(o)}else if("far"===n.freeze){e.rows.push(n);const t=e.rows[e.rows.length-1];-1===e._frozenFarRows.indexOf(t)&&e._frozenFarRows.push(t)}}else e.rows[l]?e.rows.splice(l,0,n):e.rows.push(n);"virtual"===e.scrolling||e.paging.enabled&&e.dataSource&&e.dataSource.virtualDataSource||e.onRowInserted&&e.onRowInserted(l,n)},n=function(){const t=e.rows[e.rows.length-1];e.rows.pop(),e.onRowRemoved&&e.onRowRemoved(e.rows.length,t)},a=function(t){const o=e.rows[t];e.rows.splice(t,1),e.onRowRemoved&&e.onRowRemoved(t,o)};e._add=l,e._removeLastRow=n,e._removeAt=a,e._rowHeight=e._autoRowHeight;const r=e.dataSource.length;e.setAttribute("aria-rowcount",r);for(let t=0;t<e.dataSource.length;t++){const o=e.dataSource[t];l(o,t)}for(let t=0;t<e._frozenFarRows.length;t++){const o=e._frozenFarRows[t];e.rows.splice(e.rows.indexOf(o),1),e.rows.push(o)}if(o(),e.dataSource.notify((function(t){if(e.dataSource._updating)return;const i=t.data;switch(e.rows.canNotify=!1,t.action){case"add":if(i.length)for(let t=0;t<i.length;t++)l(i[t],e.dataSource.length-i.length+t);else l(i,e.dataSource.length-1);break;case"update":if(i.length)for(let o=0;o<i.length;o++){const n=t.index[o];e.rows[n]?(e.rows[n].data=i[o],e.onRowUpdated&&e.onRowUpdated(n,e.rows[n])):l(i[o],e.dataSource.length-1)}else{const o=t.index;e.rows[o]?e.rows[o].data=i:l(i,e.dataSource.length-1),e.onRowUpdated&&e.onRowUpdated(o,e.rows[o])}break;case"insert":l(i,t.index);for(let t=0;t<e.rows.length;t++){e.rows[t].index=t}break;case"remove":a(t.index);break;case"removeLast":n();break;case"bindingComplete":if(e.dataSource&&e.dataSource.url||e.dataSource&&!e.dataSource.virtualDataSource){if(e.appearance.displayLoadingIndicator=!1,e._setLoadingIndicatorVisibility(),e._toggledRow=null,e.dataSource.length!==r){if(e.paging.enabled){const t=e.$.headerPager.querySelector("smart-pager"),o=e.$.footerPager.querySelector("smart-pager");t&&(t.pagesCount=Math.ceil(e.dataSource.length/e.paging.pageSize)),o&&(o.pagesCount=Math.ceil(e.dataSource.length/e.paging.pageSize))}e._initializeRows(),e._initializeRowElements(),e.refresh()}e._recycle()}}o(),"update"!==t.action&&e._refreshLayout(),e._recycle(),e.rows.canNotify=!0})),e._observeRows(),e.summaryRow.visible)for(let t=0;t<e._summaryRowCount;t++){const o=new Smart.Grid.Row({height:e.layout.rowMinHeight,freeze:"near",visible:"near"===e.summaryRow.position,summaryRowIndex:t,summaryRow:!0}),l=new Smart.Grid.Row({height:e.layout.rowMinHeight,freeze:"far",visible:"far"===e.summaryRow.position,summaryRowIndex:t,summaryRow:!0});e._frozenNearRows.splice(0,0,o),e._frozenFarRows.push(l)}if(e.filtering.enabled&&e.filtering.filterRow.visible){const t=new Smart.Grid.Row({freeze:!0,autoGenerated:!0,filterRow:!0});e._frozenNearRows.splice(0,0,t)}e._renderAddNewRow()}_observeRows(){const e=this;e._frozenNearRows=[],e._frozenFarRows=[],e.rows=new Smart.ObservableArray(e.rows,null,{allowToggle:!0,allowResize:!0,allowCheck:!0,allowSelect:!0,allowReorder:!0,expanded:!0,selected:!0,checked:!0,visible:!0,enabled:!0,minHeight:!0,height:!0,freeze:!0,showDetail:!0,data:!0,visibleIndex:!0,index:!0});for(let t=0;t<e.rows.length;t++){const o=e.rows[t];!0===o.freeze||"near"===o.freeze?e._frozenNearRows.push(o):"far"===o.freeze&&e._frozenFarRows.push(o),e.rowById[e.rows[t].id]=o}e.rows.notify((function(t){if(!e.rows.canNotify)return;const o=t.action;if("length"===o)return;if(t.path)return e.rows.canNotify=!1,l=e.rows[t.index],n=t.propertyName,a=t.oldValue,r=t.newValue,l.propertyChanged(n,a,r),void(e.rows.canNotify=!0);var l,n,a,r;if(e.rows.canNotify=!1,!e.dataSource)return;switch(e.dataSource.canNotify=!1,o){case"add":{const o=function(o){let l=e.rows[o];if(l instanceof Smart.Grid.Row==!1){l=new Smart.Grid.Row(l);const n=e.rows.canNotify;e.rows.canNotify=!1,t.object[o]=l,l=t.object[o],e.rows.canNotify=n}o<e.dataSource.length?e.dataSource.insert(o,e.rows[o].data):e.dataSource.add(e.rows[o].data),l.grid=e,l.data=e.dataSource[o],e.rowById[l.id]=l,l.selected&&(e._selection.rows[l.id]=!0),l.freeze&&(!0===l.freeze||"near"===l.freeze?e._frozenNearRows.push(l):"far"===l.freeze&&e._frozenFarRows.push(l))};for(let e=0;e<t.addedCount;e++)o(t.index+e);break}case"update":e.dataSource.update(t.index,e.rows[t.index]);break;case"remove":{const o=t.removed;delete e.rowById[o.id],e.dataSource.removeAt(t.index);break}}if(e.dataSource.canNotify=!0,e.rows.canNotify=!0,!o)return;e.isInitialized&&e._rowElements&&e._rowElements.length<e.rows.length&&e._initializeRowElements(),e.refresh(),e._refreshPagesCount()}))}render(){const e=this,t=()=>0===e.offsetWidth||0===e.offsetHeight;if(t())return requestAnimationFrame(()=>{e.isInitialized||t()||e._render()}),e.setAttribute("role","grid"),e.editing.enabled||e.setAttribute("aria-readonly",!0),void super.render();const o=e.context;e.context=e,e.setAttribute("role","grid"),e.editing.enabled||e.setAttribute("aria-readonly",!0),e._render(),e.context=o,super.render()}_renderColumns(e){const t=this;t._initializeColumns(),t._initializeColumnGroupsHierarchy(),t._refreshColumnsResponsiveVisibility(),t._createColumnHeaderCellElements(),t._renderColumnGroupHeaders(),!1!==e&&t._refresh()}_renderRows(e){const t=this;t._initializeRows(),t._initializeRowElements(),!1!==e&&t._refresh()}_render(){const e=this;if(e.isInitialized||(e.onBeforeInit&&e.onBeforeInit(),e.$.fireEvent("beforeInit",{grid:e})),null===e.dataSource?e.dataSource=new Smart.DataAdapter:Array.isArray(e.dataSource)&&(e.dataSource=new Smart.DataAdapter({dataSource:e.dataSource})),e._selection={rows:[],columns:[],cells:[]},e.dataSource&&e.dataSource.url&&(e.appearance.displayLoadingIndicator=!0,e._setLoadingIndicatorVisibility(),e.dataSource.data={sorting:e.getSortedColumns(),filtering:e.getFilteredColumns(),grouping:[]}),e._renderColumns(!1),e._renderRows(!1),e._renderPagers(),e._renderCommandBar(),e.appearance.allowColumnStickyPosition&&e._stickHeader(),e.header.visible&&""===e.header.template&&(e.$.header.innerHTML='<smart-grid-toolbar header-position="top"></smart-grid-toolbar>',e.$.headerBar=e.$.header.firstElementChild,e.$.headerBar._init(e)),e.isInitialized)e.refreshFilters();else{for(let t=0;t<e.viewColumns.length;t++){const o=e.viewColumns[t];if(!o.allowSort||!o.sortOrder)continue;const l=e.appearance.allowSortAnimation;e.appearance.allowSortAnimation=!1,e.sortBy(o.dataField,o.sortOrder),e.appearance.allowSortAnimation=l}if(e.filtering.filter.length>0){for(let t=0;t<e.filtering.filter.length;t++){const o=e.filtering.filter[t];if(o){const t=o[0],l=o.splice(1);let n=null;if(l instanceof Smart.FilterGroup)n=l;else{const o=e.columnByDataField[t];o&&(n=e.dataSource._createFilter(o.dataType,l))}n&&e.addFilter(t,n,!1)}}e.refreshFilters()}}e.viewColumns.canNotify=!0;const t=!e.isInitialized;if(t&&(e.onInit&&e.onInit(),e.$.fireEvent("init",{grid:e})),e.isInitialized=!0,("virtual"===e.scrolling||e.paging.enabled&&e.dataSource&&e.dataSource.virtualDataSource||e.dataSource&&e.dataSource.virtualDataSource)&&e._virtualDataRequest("dataBind"),""!==e.header.template&&e._applyTemplate(e.header.template,e.$.header),""!==e.footer.template&&e._applyTemplate(e.footer.template,e.$.footer),e._createFilterPanels(),e._refresh(),e._applyScrolling(),e.grouping.enabled&&e.grouping.autoExpandAll&&e.rowHierarchy&&e.expandAllRows(),e.onRender&&e.onRender(),e.isRendered=!0,"auto"===e.layout.rowHeight&&(e._refreshLayout(),e._recycle()),t&&(e.onAfterInit&&e.onAfterInit(),e.$.fireEvent("afterInit",{grid:e}),e.isRendering=!1,e.whenRenderedCallbacks)){for(let t=0;t<e.whenRenderedCallbacks.length;t++)e.whenRenderedCallbacks[t]();e.whenRenderedCallbacks=[]}}get _viewRows(){const e=this;if(e.__viewRows)return e.__viewRows;e._nearRowsAdded||(e._nearRowsAdded=[],e._farRowsAdded=[]);const t=e.rowHierarchy?e.rowHierarchy:e.rows.toArray(),o=[].concat(e._frozenNearDefaultRows,e._nearRowsAdded,t,e._farRowsAdded,e._frozenFarDefaultRows);return e.__viewRows=o,o}_stickHeader(){const e=this;e._stickyHeaderHandler=function(){e._handleStickyHeader()},e.$.columnHeader.style.top="",e.$.columnHeader.classList.remove("smart-columns-sticky");let t=e.parentNode;for(e.isInShadowDOM&&t===e.getRootNode()&&(t=e.getRootNode().host);t!==document&&t;)t.addEventListener("scroll",e._stickyHeaderHandler),t=t.parentNode,e.isInShadowDOM&&t===e.getRootNode()&&(t=e.getRootNode().host);try{null!==window.top&&window.top!==window.self&&window.top.document.addEventListener("scroll",e._stickyHeaderHandler)}catch(e){}e._handleStickyHeader()}_unstickHeader(){const e=this;e.$.columnHeader.style.top="",e.$.columnHeader.classList.remove("smart-columns-sticky");let t=e.parentNode;for(;t!==document.body;)t.removeEventListener("scroll",e._stickyHeaderHandler),t=t.parentNode,e.isInShadowDOM&&t===e.getRootNode()&&(t=e.getRootNode().host);try{(""!==document.referrer||window.frameElement)&&null!==window.top&&window.top!==window.self&&window.top.document.removeEventListener("scroll",e._stickyHeaderHandler)}catch(e){}}_handleStickyHeader(){const e=this;if(e.appearance.allowColumnStickyPosition)if(e.$.columnHeader.classList.add("smart-columns-sticky"),0===document.scrollTop&&0===e.parentElement.scrollTop)e.$.columnHeader.style.top="";else{let t=e.parentNode,o=0;for(;t!==document.body;)o+=parseInt(t.scrollTop),t=t.parentNode,e.isInShadowDOM&&t===e.getRootNode()&&(t=e.getRootNode().host);const l=parseInt(e.clientTop+o);e.$.columnHeader.style.top=l+"px";let n=0;window.top!==window.self&&parseInt(window.top.scrollY)>parseInt(e._offsetTop(window.frameElement))&&(n=parseInt(window.top.scrollY)-parseInt(e._offsetTop(window.frameElement))),window.scrollY+n>e.offsetTop&&(e.$.columnHeader.style.top=parseInt(window.scrollY)-parseInt(e.offsetTop)+l+n+"px")}}_scrollHandler(){this._handleStickyHeader()}_initializeRowNumberColumn(){const e=this;if(e._frozenNearColumns&&e._frozenNearColumns.length>0&&e._frozenNearColumns[0].rowHeaderColumn)return void(e._frozenNearColumns[0].visible=e.appearance.showRowHeaderNumber||e.appearance.showRowHeader);const t=new Smart.Grid.Column({dataField:"_rowHeaderColumn",label:"",allowSelect:!1,freeze:!0,visible:!0,grid:e,autoGenerated:!0,rowHeaderColumn:!0,cellsAlign:"center"}),o=e.rows?e.rows.length:e.dataSource?e.dataSource.length:0;let l=e.appearance.showRowHeaderNumber?t._measureSize(o):30;e.appearance.autoGenerateColumnWidth&&(l=e.appearance.autoGenerateColumnWidth),t.width=l,t.createElement();const n=new Smart.Observable(t,t.observables);e.viewColumns.splice(0,0,n),e._frozenNearColumns.splice(0,0,n)}_initializeColumns(){const e=this;if("number"==typeof e.columns){const t=[],o="A".charCodeAt(0);let l="",n=0;for(let a=0;a<e.columns;a++){let r=a+1;const i=String.fromCharCode(o+n);n++;const s=l+i;"number"!==e.appearance.autoGenerateColumnLabelMode&&(r=l+i),t.push({align:"center",label:r,dataField:s,width:100}),n>=26&&(n=0,l+="A")}e._boundColumns=t}else e._boundColumns=Array.isArray(e.columns)?[...e.columns]:[...e.columns.toArray()];e._initColumns=e.columns,e.columnByDataField=[],e.viewColumns=[],e.columns=new Smart.ObservableArray,e._frozenFarColumns=[],e._frozenNearColumns=[],e._summaryRowCount=0;let t=0;const o=function(t){if(e.dataSource.dataFields){const o=e.dataSource.dataFields.find(e=>{if(e.name===t.dataField)return e}),l=o&&o.dataType||"string";t.dataType=l}};if(0===e._boundColumns.length&&e.dataSource&&e.dataSource[0]&&!1!==e.dataSource.autoGenerateColumns){const t=e.dataSource[0];if(t.$&&t.$.isEmpty&&e.dataSource.dataFields)for(let t=0;t<e.dataSource.dataFields.length;t++){const o=e.dataSource.dataFields[t],l=e._boundColumns.length,n={index:l,visibleIndex:l,label:o.name,dataField:o.name,dataType:o.dataType};e._boundColumns.push(n)}else for(let l in t){if(l.startsWith("_")||"$"===l)continue;const t=e._boundColumns.length,n={index:t,visibleIndex:t,label:l,dataField:l};o(n),e._boundColumns.push(n)}}for(let l=0;l<e._boundColumns.length;l++){let n=e._boundColumns[l];if("string"==typeof n){if(e.dataSource.dataFields){const t=e.dataSource.dataFields.find(e=>{if(e.name===n)return e});n={label:n,dataField:n,dataType:t&&t.dataType||"string"}}}else o(n);n.visibleIndex=l,n.index=l,n.grid=e;const a=new Smart.Grid.Column(n);e.onColumnInit&&e.onColumnInit(l,a);for(let t in a)-1!==a.properties.indexOf(t)||t.startsWith("_")||e.error(e.localize("invalidColumnProperty",{elementType:"Grid",propertyName:t,type:a.dataField||"Column"}));a.grid=e,e.columns.push(a);const r=e.columns[e.columns.length-1];e._summaryRowCount=Math.max(e._summaryRowCount,a.summary.length),a.freeze?!0===a.freeze||"near"===a.freeze?(e.viewColumns.splice(t++,0,r),e._frozenNearColumns.push(r)):"far"===a.freeze&&e._frozenFarColumns.push(r):e.viewColumns.push(r),e.columnByDataField[a.dataField]?(r.parent=e.columnByDataField[a.dataField],e.columnByDataField[a.dataField].children||(e.columnByDataField[a.dataField].children=[]),e.columnByDataField[a.dataField].children.push(r)):e.columnByDataField[a.dataField]=r,e.onColumnInserted&&e.onColumnInserted(l,a)}e.viewColumns=e.viewColumns.concat(e._frozenFarColumns),e.setAttribute("aria-colcount",e._boundColumns.length);let l=0;if((e.appearance.showRowHeaderNumber||e.appearance.showRowHeader)&&(e._initializeRowNumberColumn(),l++),e.rowDetail.enabled){const t=new Smart.Grid.Column({dataField:"_rowDetailColumn",allowSelect:!1,visible:e.rowDetail.visible,label:"",grid:e,freeze:!0,rowDetailColumn:!0,autoGenerated:!0,cellsAlign:"center",width:30}),o=new Smart.Observable(t,t.observables);"near"===e.rowDetail.position?(t.freeze="near",o.freeze="near",e.viewColumns.splice(l,0,o),e._frozenNearColumns.splice(l,0,o)):(e.viewColumns.push(o),e._frozenFarColumns.splice(0,0,o)),l++}const n=new Smart.Grid.Column({dataField:"_adaptiveColumn",allowSelect:!1,visible:!1,label:"",grid:e,freeze:"far",adaptiveColumn:!0,autoGenerated:!0,cellsAlign:"center",width:30}),a=new Smart.Observable(n,n.observables);a.canNotify=!1,e.viewColumns.push(a),e._frozenFarColumns.splice(0,0,a);const r=new Smart.Grid.Column({dataField:"_commandColumn",allowSelect:!1,visible:e.editing.enabled&&e.editing.commandColumn.visible&&!e.editing.commandColumn.inline,label:"",grid:e,freeze:"far",commandColumn:!0,autoGenerated:!0,align:"center",cellsAlign:"center",width:""}),i=new Smart.Observable(r,r.observables);i.canNotify=!1,"near"===e.editing.commandColumn.position?(r.freeze="near",i.freeze="near",e.viewColumns.splice(l,0,i),e._frozenNearColumns.splice(l,0,i)):(e.viewColumns.push(i),e._frozenFarColumns.splice(0,0,i)),e._commandColumn=i;const s=new Smart.Grid.Column({allowSelect:!1,visible:e.selection.enabled&&e.selection.checkBoxes.enabled,dataField:"_checkBoxColumn",label:"",freeze:e.selection.checkBoxes.position,grid:e,selectionColumn:!0,autoGenerated:!0,cellsAlign:"center",width:32}),d=new Smart.Observable(s,s.observables);"near"===s.freeze?(e.viewColumns.splice(l,0,d),e._frozenNearColumns.splice(l,0,d)):(e.viewColumns.push(d),e._frozenFarColumns.splice(0,0,d)),e._selectionColumn=d,e._selectionColumn.canNotify=!1,e._observeColumns(),e._templateColumns()}get styleProperties(){return["grid-template-columns","--smart-grid-row-height","--smart-grid-column-header-height","--smart-grid-group-header-height","--smart-grid-filter-footer-height","--smart-grid-group-row-vertical","--smart-grid-group-row-horizontal-offset","--smart-grid-freeze-splitter-size","--smart-grid-resize-line-size","--smart-grid-footer-height","--smart-grid-header-height"]}_templateColumns(){const e=this,t=getComputedStyle(e),o=t.getPropertyValue("--smart-grid-template-columns").trim(),l=t.getPropertyValue("--smart-grid-column-gap").trim(),n=t.getPropertyValue("--smart-grid-row-gap").trim();if(e._rowGap=parseInt(n),e._columnGap=parseInt(l),e._maxHeight=parseInt(t.maxHeight),e._minHeight=parseInt(t.minHeight),"none"!==o){let t=0;for(let o=0;o<e.viewColumns.length;o++)e.viewColumns[o].autoGenerated&&(t+=e.viewColumns[o].visible?e.viewColumns[o].width:0);let l=[];const n=document.createElement("div");n.style.display="grid",n.style.gridTemplateColumns=o;for(let t=0;t<e.columns.length;t++)n.innerHTML+="<div></div>";n.style.width=e.clientWidth-t+"px",e.$.root.appendChild(n);const a=o.split(" ");for(let t=0;t<e.columns.length;t++)l[t]=n.children[t].offsetWidth,"auto"===a[t]&&(l[t]=null);n.parentNode.removeChild(n);let r=0;for(let t=0;t<e.viewColumns.length;t++){const o=e.viewColumns[t];o.autoGenerated||l[r]&&(o.width=o.templateWidth=l[r++])}}else for(let t=0;t<e.viewColumns.length;t++){const o=e.viewColumns[t];o.autoGenerated||o.templateWidth&&(o.width=o.templateWidth=null)}}onAttached(){const e=this;e._scrollView||(e._scrollView=new Smart.Utilities.Scroll(e,e.$.horizontalScrollBar,e.$.verticalScrollBar)),e.isRendered&&e.isCompleted&&e._render()}onDetached(){const e=this;if(!e.isRendered)return;["_dialogChart","_dialogAddRow","_dialogEdit","_dialogDelete","_dialogRowDetail"].forEach(t=>{e[t]&&(e[t].close(),e[t]=null)}),e.menu&&(e.menu.ownerElement=null,e.menu.remove(),e.menu=null),e._resetCachedLayout();const t=e._scrollView.hScrollBar,o=e._scrollView.vScrollBar;if(o.ownerElement=null,t.ownerElement=null,o.onChange=null,t.onChange=null,e._scrollView&&(e._scrollView.unlisten(),delete e._scrollView),e._columnElements)for(let t=0;t<e._columnElements.length;t++){e._columnElements[t]._detach()}if(e._columnElements=null,e._rowElements)for(let t=0;t<e._rowElements.length;t++){e._rowElements[t]._detach()}e._rowElements=null,e.rows=[],e.rowById=[],e._initColumns=[],e.columnByDataField=[],e.viewColumns=[],e._columnToResizeElement=null;let l=Array.isArray(e.columns)?[...e.columns]:[...e.columns.toArray()];l=l.map(e=>e.data?(void 0!==e.data.visibleIndex&&delete e.data.visibleIndex,void 0!==e.data.index&&delete e.data.index,void 0!==e.data.grid&&delete e.data.grid,e.data):e),e.rows.notifyFn=null,e.columns.notifyFn=null,e.columns.notify=null,e.columns._array=[],e.columns=l,e._boundColumns=[],e._filterPanels=[],e._frozenFarColumns=[],e._frozenNearColumns=[],e._frozenNearDefaultRows=[],e._frozenFarDefaultRows=[],e._frozenFarRows=[],e._frozenNearRows=[],e._selection={rows:[],columns:[],cells:[]},e.__autoHeightRows=null,e._visibleRows=null,e.__viewRows=null,e.__clientSize=null,e.__scrollHeight=null,e.__scrollWidth=null,e.__parentCells=null,e._selectionColumn=null,e._adaptiveColumn=null,e._commandColumn=null,delete e._columnFarContainerComputedStyle,delete e._columnContainerComputedStyle,delete e._columnNearContainerComputedStyle,e._inputOverlay&&(e._inputOverlay.parentNode&&e._inputOverlay.parentNode.removeChild(e._inputOverlay),e._inputOverlay=null),e._firstVisibleColumn=null,e._lastVisibleColumn=null,e._toggledRow=null,Smart(e._selector)&&(delete Smart(e._selector)._properties,Smart(e._selector)),delete e._selector,delete e._initProperties}_observeColumns(){const e=this,t=function(e,t,o,l){e.propertyChanged(t,o,l)};for(let o=0;o<e.viewColumns.length;o++){const l=e.viewColumns[o];l.onAction=function(){e._openMenu(this)},l.autoGenerated&&l.notify((function(e){l.canNotify=!1,t(l,e.propertyName,e.oldValue,e.newValue),l.canNotify=!0}))}e.columns.notify((function(o){let l=null;if(o.path)return e.columns.canNotify=!1,t(o.target,o.propertyName,o.oldValue,o.newValue),void(e.columns.canNotify=!0);e.columns.canNotify=!1;let n=0;switch(o.action){case"length":return void(e.columns.canNotify=!0);case"add":{const t=function(t){if(l=o.object[t],l instanceof Smart.Grid.Column==!1){l=new Smart.Grid.Column(l);const n=e.columns.canNotify;e.columns.canNotify=!1,o.object[t]=l,l=o.object[t],e.columns.canNotify=n}l.grid=e,l.freeze?e._frozenNearColumns.push(l):"far"===l.freeze&&e._frozenFarColumns.push(l);let n=e.viewColumns.length-e._frozenFarColumns.length;if(t<e.columns.length?e.viewColumns.splice(t+e._frozenNearColumns.length,0,l):e.viewColumns.splice(n,0,l),e.columnByDataField[l.dataField]){e.columnByDataField[l.dataField].children.push(l),l.parent=e.columnByDataField[l.dataField],l.valueField=l.dataField;const t=l.dataField+"_"+l.parent.children.length;e.columnByDataField[t]=l,l.dataField=t}else e.columnByDataField[l.dataField]=l;e.onColumnInserted&&e.onColumnInserted(t,l)};for(let e=0;e<o.addedCount;e++)t(o.index+e);break}case"update":l=o.object[o.index],l instanceof Smart.Grid.Column==!1&&(l=new Smart.Grid.Column(l)),l.grid=e;for(let t=0;t<o.index;t++)e.viewColumns[t].autoGenerated&&n++;e.viewColumns[n+o.index]=l,e.columnByDataField[l.dataField]=l,e.onColumnUpdated&&e.onColumnUpdated(o.index,l);break;case"remove":{l=o.removed[0];let t=o.index;for(let o=0;o<=t;o++)e.viewColumns[o].autoGenerated&&n++;e.viewColumns.splice(n+t,1),l&&delete e.columnByDataField[l.dataField],e.onColumnRemoved&&e.onColumnRemoved(o.index,l);break}}e._initializeColumnGroupsHierarchy(),e._refreshColumnsResponsiveVisibility(),e._createColumnHeaderCellElements(),e._templateColumns(),e.refresh(),e.columns.canNotify=!0}))}get _scrollWidth(){const e=this;if(e.__scrollWidth)return e.__scrollWidth;let t=0;for(let o=0;o<e.viewColumns.length;o++){const l=e.viewColumns[o];l.visible&&(t+=l.computedWidth)}return t=parseInt(t),e.__scrollWidth=t,e._scrollView.scrollWidth=t-e._clientSize.width,e.__scrollWidth}_horizontalScrollbarHandler(){const e=this;e.closeMenu(),e.isScrolling=!0,requestAnimationFrame(()=>{e._recycle(),e.isScrolling=!1})}_mouseWheelHandler(e){const t=this;if(!t._scrollView.hScrollBar.$.hasClass("smart-hidden")||!t._scrollView.vScrollBar.$.hasClass("smart-hidden"))if(t.disabled||t._scrollView.vScrollBar.$.hasClass("smart-hidden")||e.shiftKey){if(!t.disabled&&!t._scrollView.hScrollBar.$.hasClass("smart-hidden")){const o=t.scrollLeft;if(0===o&&e.deltaY<0||o===t.scrollWidth&&e.deltaY>0)return;e.stopPropagation(),e.preventDefault(),t._scrollView.scrollTo(t._scrollView.scrollLeft+t._getScrollCoefficient(e,t._clientSize.width),!1)}}else{const o=t.scrollTop;if(0===o&&e.deltaY<0||o===t.scrollHeight&&e.deltaY>0)return;e.stopPropagation(),e.preventDefault(),t._scrollView.scrollTo(t._scrollView.scrollTop+t._getScrollCoefficient(e,t._clientSize.height))}}_refresh(){const e=this;if(e._isUpdating)return;const t=e.$.verticalScrollBar.offsetWidth;e.removeAttribute("grouped"),e.removeAttribute("tree");let o=!0;if(e.__autoHeightRows&&(e.__autoHeightRows=null,e._refreshColumnsResponsiveVisibility(),e._recycle(),o=!1),e.grouping.enabled&&e.dataSource.groupBy&&e.dataSource.groupBy.length>=0&&("advanced"===e.grouping.renderMode?e.setAttribute("grouped",""):e.setAttribute("tree",""),e._renderGroupBar()),e.grouping.enabled&&e.dataSource.groupBy&&0===e.dataSource.groupBy.length?e.$.breadcrumb&&(e.$.breadcrumb.dataSource=[]):e.dataSource.boundHierarchy&&(e.setAttribute("tree",""),e.setAttribute("role","treegrid")),(e.isInitialized||o)&&e._refreshColumnsResponsiveVisibility(),e._refreshLayout(),t!==e.$.verticalScrollBar.offsetWidth&&(e.__scrollWidth=null,e._refreshColumnsResponsiveVisibility(),e._refreshScrollBars()),e._refreshSelection(),e._recycle(),e._refreshHeaderBar(),e._recyclingRows&&0===e._recyclingRows.length){const t=e.$.scrollView.offsetTop>0?e.$.scrollView.offsetTop/2:0;e.$.placeholder.classList.remove("smart-hidden"),e.$.placeholder.style.marginTop=t+"px",e.scrollWidth=0,e.scrollHeight=0}requestAnimationFrame(()=>{e._width=e.offsetWidth,e._height=e.offsetHeight})}_refreshHeaderBar(){this.$.headerBar&&this.$.headerBar._refresh()}_resizeHandler(e){const t=this;if((t.enableShadowDOM?e.composedPath()[0]:e.target)===t&&!t._isUpdatingScrollBars){if(!t.isInitialized)return void t._render();t._isUpdatingScrollBars=!0,t._autoHeight=!1,t.$.content&&t.$.content.classList.remove("auto-height"),t.refresh(),t._isUpdatingScrollBars=!1}}_refreshColumnsResponsiveVisibility(){const e=this,t=e.$.columnContainer,o=e.$.columnNearContainer,l=e.$.columnFarContainer;let n=0,a=0,r=0,i=!1;for(let t=0;t<e.viewColumns.length;t++){const o=e.viewColumns[t];o._treeColumn=!1,e.grouping.enabled&&(o.rowDetailColumn||o.rowHeaderColumn),o.visible&&!o.autoGenerated&&!i&&e.dataSource.boundHierarchy&&(o._treeColumn=!0,i=!0)}e._refreshColumnWidths();let s=0,d=0;for(let t=0;t<e.viewColumns.length;t++){const o=e.viewColumns[t];o.visible&&(o.freeze&&(!0===o.freeze||"near"===o.freeze?(n+=o.computedWidth,o.autoGenerated&&(s+=o.computedWidth)):"far"===o.freeze&&(a+=o.computedWidth,o.autoGenerated&&(d+=o.computedWidth))),r+=o.computedWidth)}t.style.width=r+"px",o.style.width=n+"px",l.style.width=a+"px",l.classList.remove("smart-hidden"),o.classList.remove("smart-hidden"),0===a&&l.classList.add("smart-hidden"),0===n&&o.classList.add("smart-hidden"),l.classList.remove("border-collapse"),a===d&&l.classList.add("border-collapse"),e._autoGeneratedColumnsNearWidth=s,e._autoGeneratedColumnsFarWidth=d,e._computedColumnsWidth=r,e._frozenColumnsNearWidth=n,e._frozenColumnsFarWidth=a}_selectStartHandler(e){this.isScrolling||this.editing.isEditing||e.preventDefault()}setFocusable(e){const t=this;!t.disabled&&e?t.tabIndex=0:t.removeAttribute("tabindex")}_setLoadingIndicatorVisibility(){const e=this;e.appearance.displayLoadingIndicator?e.$.loadingIndicatorContainer.classList.remove("smart-visibility-hidden"):e.$.loadingIndicatorContainer.classList.add("smart-visibility-hidden")}_refreshElementsVisibility(){const e=this,t=function(e,t){e&&(t?e.classList.remove("smart-hidden"):e.classList.add("smart-hidden"))};if(t(e.$.placeholder,!e.rows||e.rows&&0===e.rows.length||0===e.columns.length),t(e.$.footer,e.footer.visible),t(e.$.header,e.header.visible),t(e.$.groupHeader,e.groupHeader.visible||e.grouping.groupBar.visible),t(e.$.columnHeader,e.columnHeader.visible&&e.columns.length>0),t(e.$.headerCommandBar,e.editing.commandBar.visible&&"far"!==e.editing.commandBar.position),t(e.$.footerCommandBar,e.editing.commandBar.visible&&"near"!==e.editing.commandBar.position),t(e.$.breadcrumb,e.groupHeader.visible||e.grouping.groupBar.visible),e.htmlColumnLastChild.classList.add("smart-visibility-hidden"),e.pager&&e.pager.visible&&e.paging.enabled)switch(e.pager.position){case"near":t(e.$.headerPager,!0),t(e.$.footerPager,!1);break;case"far":t(e.$.headerPager,!1),t(e.$.footerPager,!0);break;case"both":t(e.$.headerPager,!0),t(e.$.footerPager,!0)}else t(e.$.footerPager,!1),t(e.$.headerPager,!1);e._refreshRowHierarchy()}_refreshRowHierarchy(e){const t=this;t.rowHierarchy=null;let o=0,l=!1;if(!t.grouping.enabled&&t.dataSource.groupBy&&t.dataSource.groupBy.length>0&&(l=!0),t.dataSource.boundHierarchy){const n=t.dataSource.reservedNames,a=function(e){const o=new Smart.Grid.Row({data:e,index:t.rows.length});return t.rowById[o.id]=o,o},r=function(o,i){for(let s=0;s<o.length;s++){const d=o[s];let u=t.rowById[d.$.id];u||(u=a(d)),u.data=d,u.leaf=d[n.leaf]||!1,u.level=d[n.level],u.groupDataField=d.groupDataField,u.label=d.label,u.children=[],u.data&&(u.filtered=void 0===u.data.$.filtered||u.data.$.filtered),d.summaryRow&&(u.summaryRow=!0),(null===t._toggledRow||t._toggledRow&&t._toggledRow.id!==u.id)&&(u.expandHeight=0),d.parent?(u.parent=t.rowById[d.parent.$.id],u.parentId=d.parent.$.id):(u.parent=null,u.parentId=null);let c=!!e||u.expanded;if(l&&(c=!0),!0===u.visible&&!1!==u.filtered)if(c||d[n.leaf]){if(i.push(u),d.children&&d.children.length>0){const e=r(d.children,new Array);0===e.length&&(u.leaf=!0);for(let t=0;t<e.length;t++)i.push(e[t]);u.children=e}}else if(i.push(u),d.children&&d.children.length>0){const e=r(d.children,new Array);0===e.length&&(u.leaf=!0),u.children=e}}return i};let i=t.dataSource.boundHierarchy;t.paging.enabled&&(i=i.slice(t.paging.pageIndex*t.paging.pageSize,(t.paging.pageIndex+1)*t.paging.pageSize)),t.rowHierarchy=r(i,new Array);let s=[];for(let e=0;e<t.rowHierarchy.length;e++){const l=t.rowHierarchy[e],n=l.canNotify;l.leaf&&s.push(l),l.canNotify=!1,l.visibleIndex=o++,l.canNotify=n}if(l&&(t.rowHierarchy=s),t._rowElements.length<t.rowHierarchy.length&&!t._toggledRow&&t._initializeRowElements(),t.grouping.summaryRow.visible&&!t.grouping.summaryRow.inline){const e=function(t,o,l,n){if(0!==t&&o.length>0&&o[o.length-1]&&!o[o.length-1].summaryRow){let e={label:" ",boundSource:[],groupDataField:l.data.groupDataField,$:{},summaryRow:!0,leaf:!0,level:t,expandHeight:0,siblings:o};e.$.id="SubRow"+n+"_"+l.data.$.id,l&&(e.parent=l.data,e.parentId=l.data.$.id),e.data=Object.assign(e),o.push(e)}for(let l=0;l<o.length;l++)o[l]&&o[l].data&&o[l].data.children&&e(t+1,o[l].data.children,o[l],l)};e(0,t.rowHierarchy,null,0)}}}applyContent(){}_refreshContentHeight(){const e=this;let t=e._clientSize.height;const o=window.scrollY,l=e.offsetHeight;e.$.container.classList.add("smart-hidden");const n=e.offsetHeight;if(e.$.container.classList.remove("smart-hidden"),window.scrollY!==o&&window.scrollTo(window.scrollX,o),"hidden"===e.verticalScrollBarVisibility||l!==n||e._minHeight&&e._minHeight===l)return t=e._scrollHeight+e.$.columnHeader.offsetHeight+e.$.filterFooter.offsetHeight,e._minHeight>t&&(t=e._minHeight),e.$.content.style.height=t+"px",e._contentHeight=t,void(e._maxHeight<t?(e._autoHeight=!1,e.$.content.classList.remove("auto-height"),e.$.content.style.height=e._maxHeight+"px",e._contentHeight=e._maxHeight):(e._autoHeight=!0,e.$.content.classList.add("auto-height")));e.header.visible&&(t-=e.$.header.offsetHeight),(e.groupHeader.visible||e.grouping.groupBar.visible)&&(t-=e.$.groupHeader.offsetHeight),e.footer.visible&&(t-=e.$.footer.offsetHeight),e.pager.visible&&(t-=e.$.headerPager.offsetHeight,t-=e.$.footerPager.offsetHeight),e.editing.enabled&&e.editing.commandBar.visible&&(t-=e.$.headerCommandBar.offsetHeight,t-=e.$.footerCommandBar.offsetHeight),e.$.content.style.height=t+"px",e._contentHeight=t}appendChild(){const e=Array.prototype.slice.call(arguments,2);return HTMLElement.prototype.appendChild.apply(this,e.concat(Array.prototype.slice.call(arguments)))}removeChild(){const e=Array.prototype.slice.call(arguments,2);return HTMLElement.prototype.removeChild.apply(this,e.concat(Array.prototype.slice.call(arguments)))}get _contentBorder(){const e=this;if(e.__contentBorder)return e.__contentBorder;const t=getComputedStyle(e.$.content),o={left:parseFloat(t.borderLeftWidth)+parseFloat(t.borderRightWidth),top:parseFloat(t.borderTopWidth)+parseFloat(t.borderBottomWidth)};return e.__contentBorder=o,o}_refreshLayout(){const e=this,t=e.rows;if(e._layoutSuspended)return;if(e._visibleRows=null,e.__viewRows=null,e.__clientSize=null,e.__scrollHeight=null,e.__scrollWidth=null,e.__parentCells=null,e.$.columnFarContainer.classList.remove("vscroll"),e.$.columnNearContainer.classList.remove("vscroll"),e.$.scrollView.classList.remove("hscroll"),e.$.scrollView.classList.remove("vscroll"),e._refreshElementsVisibility(),e._refreshColumnHeights(),e._refreshContentHeight(),!(t&&t.url||t&&null!==t&&0!==t.length&&0!==e.columns.length)){const t=e.$.scrollView.offsetTop>0?e.$.scrollView.offsetTop/2:0;return e.$.placeholder.classList.remove("smart-hidden"),e.$.placeholder.style.marginTop=t+"px",e.scrollWidth=0,void(e.scrollHeight=0)}e.__columnHeaderHeight||(e.__columnHeaderHeight=e.$.columnHeader.offsetHeight),e.__filterFooterOffsetHeight||(e.__filterFooterOffsetHeight=e.$.filterFooter.classList.contains("smart-hidden")?0:e.$.filterFooter.offsetHeight);const o=e._contentHeight-e.__filterFooterOffsetHeight-e.__columnHeaderHeight;if(e.$.scrollView.style.height=o+"px",e.htmlColumnLastChild.style.height=e.__columnHeaderHeight+"px",e.paging.spinner.enabled&&e.paging.enabled){if(!e.pageScroll){const t=document.createElement("smart-scroll-bar");t.orientation="vertical",t.style.height="100%",t.style.width="100%",t.max=Math.ceil(e.dataSource.length/e.paging.pageSize),t.step=e.paging.spinner.step,t.largeStep=e.paging.spinner.step,t.setAttribute("spinner",""),t.setAttribute("smart-id","spinner"),t.ownerElement=e,e.addPropertyBinding("[[paging_spinner_step]]","step",t,e.$.columnHeader),t.addEventListener("change",(function(t){e.paging.pageIndex=t.detail.value})),e.pageScroll=t}e.htmlColumnLastChild.appendChild(e.pageScroll)}else e.htmlColumnLastChild.innerHTML="";e._refreshScrollBars()}_refreshScrollBars(){const e=this,t=e._scrollView.vScrollBar,o=e._scrollView.hScrollBar,l=e._contentHeight-e.__filterFooterOffsetHeight-e.__columnHeaderHeight,n=e.$.scrollView.offsetWidth,a=e._scrollWidth-n-e._contentBorder.left,r=e._scrollHeight-l-e._contentBorder.top,i=e._columnNearContainerComputedStyle?e._columnNearContainerComputedStyle:getComputedStyle(e.$.columnNearContainer),s=e._columnFarContainerComputedStyle?e._columnFarContainerComputedStyle:getComputedStyle(e.$.columnFarContainer),d=parseInt(e.$.columnNearContainer.style.width)+parseInt(i.borderRightWidth),u=parseInt(e.$.columnFarContainer.style.width)+parseInt(s.borderLeftWidth);if(e.__frozenNearWidth=d,e.__frozenFarWidth=u,e._columnNearContainerComputedStyle=i,e._columnFarContainerComputedStyle=s,e._refreshHorizontalScrollBarVisibility(a),e._refreshVerticalScrollBarVisibility(r),t.style.height=l+"px",e.computedVerticalScrollBarVisibility&&(e.__scrollBarSize||(e.__scrollBarSize=t.offsetWidth),e.__scrollWidth+=e.__scrollBarSize,e._refreshHorizontalScrollBarVisibility(e._scrollWidth-n-1),e.rightToLeft?e.$.columnNearContainer.classList.add("vscroll"):e.$.columnFarContainer.classList.add("vscroll"),e._refreshVerticalScrollBarVisibility(r),e.htmlColumnLastChild.classList.remove("smart-visibility-hidden")),o.style.width=n+"px",e.rightToLeft?o.style.right="0px":o.style.left="0px",e.computedVerticalScrollBarVisibility&&e.computedHorizontalScrollBarVisibility&&(o.style.width=n-t.offsetWidth+"px",t.style.height=l-o.offsetHeight+"px"),e.computedHorizontalScrollBarVisibility?(e.$.scrollView.classList.add("hscroll"),e._autoHeight?(e.$.content.style.height="auto",e.$.scrollView.style.height="auto",e.$.scrollView.style.paddingBottom=o.offsetHeight+"px"):e.$.scrollView.style.paddingBottom=""):e.$.scrollView.classList.remove("hscroll"),(e.__frozenNearHeight>0||e._frozenNearRows&&e._frozenNearRows.length>0)&&!e.appearance.showVerticalScrollBarOnFixedColumns){const o=getComputedStyle(e.$.rowNearContainer),l=e.__frozenNearHeight+parseInt(o.borderBottomWidth);t.style.height=parseInt(t.style.height)-l+"px",t.style.top=l+"px",t.style.setProperty("--smart-scroll-bar-near-size",l+"px")}else e.appearance.showVerticalScrollBarOnFixedColumns&&(t.style.top="0px");if((e.__frozenFarHeight>0||e._frozenFarRows&&e._frozenFarRows.length>0)&&!e.appearance.showVerticalScrollBarOnFixedColumns){const o=getComputedStyle(e.$.rowFarContainer),l=-2+e.__frozenFarHeight+parseInt(o.borderTopWidth);t.style.height=parseInt(t.style.height)-l+"px",t.style.setProperty("--smart-scroll-bar-far-size",l+"px"),0===e.__frozenNearHeight&&(t.style.top="0px")}(d>0||u>0)&&!e.appearance.showHorizontalScrollBarOnFixedColumns&&(o.style.width=parseInt(o.style.width)-d-u+"px",e.rightToLeft?o.style.right=d+"px":o.style.left=d+"px",o.style.setProperty("--smart-scroll-bar-near-size",d+parseInt(i.borderRightWidth)+"px"),o.style.setProperty("--smart-scroll-bar-far-size",u+parseInt(i.borderLeftWidth)+"px"),e.computedVerticalScrollBarVisibility&&(e.__scrollBarSize||(e.__scrollBarSize=t.offsetWidth),o.style.setProperty("--smart-scroll-bar-far-size",u+e.__scrollBarSize+"px"))),t.refresh(),o.refresh()}_refreshHorizontalScrollBarVisibility(e){const t=this;t.scrollWidth=e,t.computedHorizontalScrollBarVisibility||(t.scrollLeft=0)}_refreshVerticalScrollBarVisibility(e){const t=this;if(t._autoHeight)return t.scrollTop=0,void(t.scrollHeight=0);t.computedHorizontalScrollBarVisibility&&(e+=t.$.horizontalScrollBar.offsetHeight),t.scrollHeight=e,t.paging.enabled&&t.paging.spinner.visible&&t.$.verticalScrollBarVisibility.classList.remove("smart-hidden"),t.computedVerticalScrollBarVisibility||(t.scrollTop=0)}_styleChangedHandler(e){const t=this;if(!e.detail.styleProperties.overflow&&!t.classList.contains("smart-grid-resize-mode")){if(e.detail.styleProperties["grid-template-columns"])return t._templateColumns(),void t.refresh();if(e.detail.styleProperties["font-size"])return t.layout.isDirty=!0,t._resetCachedLayout(),void t.refresh();(e.detail.styleProperties["--smart-grid-row-height"]||e.detail.styleProperties["--smart-font-size"]||e.detail.styleProperties["--smart-grid-column-header-height"]||e.detail.styleProperties["--smart-grid-group-header-height"]||e.detail.styleProperties["--smart-grid-filter-footer-height"]||e.detail.styleProperties["--smart-grid-group-row-vertical"]||e.detail.styleProperties["--smart-grid-group-row-horizontal-offset"]||e.detail.styleProperties["--smart-grid-freeze-splitter-size"]||e.detail.styleProperties["--smart-grid-resize-line-size"]||e.detail.styleProperties["--smart-grid-footer-height"]||e.detail.styleProperties["--smart-grid-header-height"])&&(t.layout.isDirty=!0),t.offsetWidth&&t.offsetHeight>0&&(t._resetCachedLayout(),t._refreshLayout(),t._recycle())}}_resetCachedLayout(){this.__cellsCommandTemplate=null,this.__autoRowHeight=null,this.__autoHeightRows=null,this.__measuredColumnHeight=null,this.__columnHeaderHeight=null,this.__filterFooterOffsetHeight=null}_swipeLeftHandler(){}_swipeRightHandler(){}_getRowIndexByPosition(e){const t=this;return(o=>{let l=0,n=o.length-1;if(e<=0)return 0;const a=o[o.length-1];if(-1!==a.top&&a.top<=e)return o.length-1;for(;;){const a=Math.floor((l+n)/2),r=o[a];if(t._isRowInPosition(r,e))return a;r.top<e?l=a+1:r.top>e?n=a-1:l=a+1}})(t._recyclingRows)}getViewRows(){const e=this;if(e.rowHierarchy)return e.rowHierarchy;return e.getVisibleRows()}get _recyclingRows(){const e=this;if(e.rowHierarchy)return e.rowHierarchy;let t=e.getVisibleRows();return e.paging.enabled&&(t=t.slice(e.paging.pageIndex*e.paging.pageSize,(e.paging.pageIndex+1)*e.paging.pageSize)),t}_isRowInPosition(e,t){const o=e.top,l=e.top+e.height,n=o<=t&&l>t;return 0!==e.height&&n}_renderColumnGroupHeaders(){const e=this;for(let t=0;t<e.columnGroups.length;t++){const o=e.columnGroups[t];o.column.render(),o.column.allowReorder=!1,o.column.element.setAttribute("columnHeader",""),0===o.columns.length&&o.column.element.classList.add("smart-hidden"),0===t&&o.column.element.classList.add("smart-grid-column-border-collapse")}}_isLastVisibleColumn(e){const t=this;for(let o=t.viewColumns.length-1;o>=0;o--){const l=t.viewColumns[o];if(l.visible)return l===e}return!1}_recycle(e,t){const o=this;if(o._layoutSuspended)return;if(o._isUpdating)return;if(o.editing.isEditing&&(o.endEdit(),o._isUpdating))return;o._inputOverlay&&(o._inputOverlay.parentNode&&o._inputOverlay.parentNode.removeChild(o._inputOverlay),o._inputOverlay=null),o._selection.selectionRect&&o._refreshCellSelectionRect();const l=o._scrollView.scrollTop;let n=o._getRowIndexByPosition(l),a=o._recyclingRows,r=a[n],i=r?r.top:0,s=void 0,d=0,u=0,c=0,m=0;for(let e=0;e<o._cellsMerge.length;e++){const t=o._cellsMerge[e],s=a.indexOf(t.row);if(n>s&&n<=s+t.rowSpan&&(n=s,r=t.row,c=Math.max(c,i-r.top),i=r.top,o.$.rowContainer.style.top=o.__frozenNearHeight-l+i+"px"),t.colSpan>1)for(let e=0;e<o.viewColumns.length;e++){const l=o.viewColumns[e];let n=l.autoGenerated?l:o.columnByDataField[l.dataField];if(n.visible&&(n.left+n.computedWidth-o._scrollView.scrollLeft>=d&&n.left-n.computedWidth-o._scrollView.scrollLeft<o._clientSize.width)){let e=o.columnByDataField[t.column.dataField];m=Math.max(m,n.left-e.left+n.computedWidth);break}}}if(!1!==e||o._cellsMerge.length>0){for(let e=0;e<o._columnElements.length;e++){const t=o._columnElements[e];if(!t.parentNode)break;t.set("column",null,!1),t.classList.add("smart-visibility-hidden")}for(let e=0;e<o.columnGroups.length;e++){const t=o.columnGroups[e],l=t.element;o.rightToLeft?l.style.right=t.right+"px":l.style.left=t.left+"px",l.style.width=t.computedWidth+"px"}o._firstVisibleColumn=null,o._lastVisibleColumn=null;for(let e=0;e<o.viewColumns.length;e++){let t=o.viewColumns[e];if(t.visible&&(o._firstVisibleColumn||(o._firstVisibleColumn=t),o._lastVisibleColumn=t),t.element&&(t===o._firstVisibleColumn?t.element.classList.add("smart-grid-column-border-collapse"):t.element.classList.remove("smart-grid-column-border-collapse"),t.element.removeAttribute("aria-colindex")),t.freeze)!0!==t.freeze&&"near"!==t.freeze||t.visible&&(d+=t.computedWidth),t.visible?(t.element.classList.remove("smart-visibility-hidden"),t.render()):t.element.classList.add("smart-visibility-hidden");else if(t.visible&&t.left+t.computedWidth-o._scrollView.scrollLeft>=d-m&&t.left-t.computedWidth-o._scrollView.scrollLeft<o._clientSize.width){const l=o._columnElements[u++];l.set("column",t,!1),l.parentNode||o.$.columnContainer.appendChild(l),t.element=l,t.render(),l.setAttribute("aria-colindex",e+1),void 0===s&&(s=t.left)}}}if(void 0===s&&(s=0),o.rightToLeft?o.$.columnContainer.style.right=o._scrollView.scrollWidth-o._scrollView.scrollLeft-o._scrollView.vScrollBar.offsetWidth+"px":o.$.columnContainer.style.left=-o._scrollView.scrollLeft+"px",o.$.rowContainer.style.top=o.__frozenNearHeight-l+i+"px",!1!==t&&o._rowElements){if(n>=0){u=0;let e=Math.max(o._clientSize.height,o._overflowOffset);for(let t=n;t<a.length;t++){const n=a[t];if(0===n.height||!n.visible||!1===n.filtered||n.freeze)continue;const r=n.height;if(n.expandHeight&&(e+=o.offsetHeight+n.expandHeight),!(i+r>=l-c&&i<=l+e||o._autoHeight))break;{const e=o._rowElements[u++];if(!e)break;e.setAttribute("aria-rowindex",t+1),n.element=e,n.grid=o,n.render()}i+=r}}if(o._renderFrozenRows(),u<o._rowElements.length)for(let e=u;e<o._rowElements.length;e++){const e=o._rowElements[u++];e.classList.add("smart-hidden"),e.removeAttribute("aria-rowindex")}}}_renderFrozenRows(){const e=this;let t=!1,o=!1;0===e._frozenNearRows.length?e.$.rowNearContainer.classList.add("smart-hidden"):e.$.rowNearContainer.classList.remove("smart-hidden");for(let o=0;o<e._frozenNearRows.length;o++){const l=e._frozenNearRows[o];l.visible&&l.filtered&&(t=!0,l.element=e.$.rowNearContainer.children[o],l.element||(l.element=l.createElement(),e.$.rowNearContainer.appendChild(l.element)),l.render())}t||e.$.rowNearContainer.classList.add("smart-hidden"),0===e._frozenFarRows.length?e.$.rowFarContainer.classList.add("smart-hidden"):e.$.rowFarContainer.classList.remove("smart-hidden");for(let t=0;t<e._frozenFarRows.length;t++){const l=e._frozenFarRows[t];l.visible&&(o=!0),l.element=e.$.rowFarContainer.children[t],l.element||(l.element=l.createElement(),e.$.rowFarContainer.appendChild(l.element)),l.render()}o||e.$.rowFarContainer.classList.add("smart-hidden")}_recycleRotate(e,t,o,l,n){const a=t.getBoundingClientRect(),r=e.getBoundingClientRect();let i=0,s=0;return 0===r.width?(e.innerHTML=n,!1):(a.left>r.left&&(i=r.left-a.left),a.top<r.top&&(s=r.top-a.top),"left"!==o&&""!==o||(i=4),"center"===o&&(i+=r.width/2-a.width/2),"right"===o&&(i+=r.width-a.width-4),"top"!==l&&""!==l||(s=4),"center"!==l&&"middle"!==l||(s+=r.height/2-a.height/2),"bottom"===l&&(s+=r.height-a.height-4),t.style.left=i+"px",t.style.top=s+"px",!0)}_virtualDataRequest(e){const t=this;let o=-1,l=-1;if(!t._rowElements&&"infinite"!==t.scrolling)return;if("virtual"===t.scrolling)for(let e=0;e<t._rowElements.length;e++){const n=t._rowElements[e],a=n.row,r=0===e?a.visibleIndex:o+e;n.classList.contains("smart-hidden")||(-1===o&&(o=r),-1!==r&&(l=1+r))}else"infinite"===t.scrolling?(o=1/0,l=1/0):(o=0,l=t.dataSource.length);t.paging.enabled&&(o=t.paging.pageIndex*t.paging.pageSize,l=o+t.paging.pageSize),l!==1/0&&(l=Math.min(l,t.dataSource.length)),t.appearance.displayLoadingIndicator=!0,t._setLoadingIndicatorVisibility();const n={first:o,last:l,sorting:t.getSortedColumns(),filtering:t.getFilteredColumns(),grouping:[],row:t._toggledRow?t._toggledRow.data:null,action:e},a=t.dataSource.length;void 0===t._isFirstVirtualDataSourceRequest&&(t._isFirstVirtualDataSourceRequest=!0),t.dataSource.onVirtualDataSourceRequested((function(){t.appearance.displayLoadingIndicator=!1,t._setLoadingIndicatorVisibility(),t._toggledRow=null;const e=t.context;t.context=t,t._isFirstVirtualDataSourceRequest&&0===t._initColumns.length&&(t.columns.canNotify=!1,t.columns=[],t._renderColumns(),t.columns.canNotify=!0),t.dataSource.length!==a||t._isFirstVirtualDataSourceRequest?(t.paging.enabled&&(t.$.headerPager.querySelector("smart-pager").pagesCount=Math.ceil(t.dataSource.length/t.paging.pageSize),t.$.footerPager.querySelector("smart-pager").pagesCount=Math.ceil(t.dataSource.length/t.paging.pageSize)),t._initializeRows(),t._initializeRowElements(),t.refresh(),t._refreshPagesCount()):t.dataSource.virtualDataSourceOnExpand&&t.refresh(),t._isFirstVirtualDataSourceRequest=!1,t._recycle(),t.context=e}),n)}_verticalScrollbarHandler(e){const t=this;t.menu&&t.menu.column&&t.closeMenu(),t.isScrolling=!0,t._scrollTimer&&clearTimeout(t._scrollTimer),t._layoutSuspended||(t._scrollTimer=setTimeout(()=>{t._recycle(!1),t.isScrolling=!1,e.max!==e.value||(t.$.fireEvent("scrollBottomReached"),"infinite"!==t.scrolling)?("virtual"===t.scrolling&&t._virtualDataRequest("scroll"),e.min===e.value&&t.$.fireEvent("scrollTopReached")):t._virtualDataRequest("scroll")}))}clearRows(){this.dataSource=new Smart.DataAdapter({dataSource:[]}),this.rowHierarchy=null,this._visibleRows=null,this.__viewRows=null,this.rows.canNotify=!1,this.rows.length=0,this.rows.canNotify=!0,this.clearSelection()}dataBind(){const e=this;delete e.__autoRowHeight,null===e.dataSource||e.dataSource&&e.dataSource.dataFields&&0===e.dataSource.length&&0===e.dataSource.dataSource.length&&!e.dataSource.virtualDataSource?e.clearRows():Array.isArray(e.dataSource)&&(e.dataSource=new Smart.DataAdapter({dataSource:e.dataSource}));const t=e._sortedColumns;e.clearSort(),e._initColumns&&0===e._initColumns.length&&(e.columns=[],e._renderColumns(!0)),e._renderRows(),"virtual"===e.scrolling||e.paging.enabled&&e.dataSource&&e.dataSource.virtualDataSource||e.dataSource&&e.dataSource.virtualDataSource?e._virtualDataRequest("dataBind"):e.paging.enabled&&(!e.dataSource||e.dataSource&&!e.dataSource.url)&&e._refreshPagesCount(),t&&e._refreshSort(t)}refresh(e){const t=this;t.isInitialized&&(e&&(t._initializeRows(),t._initializeRowElements()),t._refresh())}refreshView(){this._recycle()}beginUpdate(){const e=this;e._isUpdating||(e._isUpdating=0),e._isUpdating++}endUpdate(e){const t=this;t._isUpdating--,t._isUpdating<0&&(t._isUpdating=0),!1!==e?t.refresh():t.refreshView()}}),Smart.Grid.Extend=function(e){if(!e)return;const t=Object.getOwnPropertyNames(e.prototype);for(let o in t){const l=t[o];"constructor"!==l&&(Smart.Grid.prototype[l]=e.prototype[l])}},Smart.Grid.Extend(Smart.Utilities.Grid.Resize),Smart.Grid.Extend(Smart.Utilities.Grid.Reorder),Smart.Grid.Extend(Smart.Utilities.Grid.Pager),Smart.Grid.Extend(Smart.Utilities.Grid.Filter),Smart.Grid.Extend(Smart.Utilities.Grid.Sort),Smart.Grid.Extend(Smart.Utilities.Grid.Menu),Smart.Grid.Extend(Smart.Utilities.Grid.Select),Smart.Grid.Extend(Smart.Utilities.Grid.Edit),Smart.Grid.Extend(Smart.Utilities.Grid.Group),Smart.Grid.Extend(Smart.Utilities.Grid.Tree),Smart.Grid.Extend(Smart.Utilities.Grid.Export),Smart.Grid.Extend(Smart.Utilities.Grid.Chart),Smart.Grid.Cell=Smart.Utilities.Grid.Cell,Smart.Grid.Row=Smart.Utilities.Grid.Row,Smart.Grid.Column=Smart.Utilities.Grid.Column}});